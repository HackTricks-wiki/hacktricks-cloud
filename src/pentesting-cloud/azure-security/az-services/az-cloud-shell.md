# Az - Cloud Shell

{% hint style="success" %}
Lerne & √ºbe AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
Lerne & √ºbe GCP Hacking: <img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* √úberpr√ºfe die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Tritt der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folge** uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Teile Hacking-Tricks, indem du PRs zu den** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos einreichst.

</details>
{% endhint %}

## Azure Cloud Shell

**Azure Cloud Shell** ist ein interaktives, authentifiziertes, browserzug√§ngliches Terminal, das f√ºr die Verwaltung von Azure-Ressourcen konzipiert ist und die Flexibilit√§t bietet, entweder mit Bash oder PowerShell zu arbeiten. Es l√§uft auf einem tempor√§ren, pro Sitzung host, der nach 20 Minuten Inaktivit√§t abl√§uft, w√§hrend Dateien im $HOME-Verzeichnis mit einem 5-GB-Dateifreigabe gespeichert werden. Cloud Shell kann √ºber mehrere Punkte aufgerufen werden, einschlie√ülich des Azure-Portals, shell.azure.com, Azure CLI und PowerShell-Dokumentation, der Azure-Mobile-App und der Visual Studio Code Azure-Kontoerweiterung.

Es sind keine Berechtigungen f√ºr diesen Dienst zugewiesen, daher gibt es keine Privilegieneskalationstechniken. Auch gibt es keine Art der Enumeration.

### Hauptmerkmale

**Umgebung**: Azure Cloud Shell bietet eine sichere Umgebung, indem es auf Azure Linux l√§uft, Microsofts eigener Linux-Distribution, die f√ºr Cloud-Infrastruktur entwickelt wurde. Alle Pakete, die im Azure Linux-Repository enthalten sind, werden intern von Microsoft kompiliert, um sich gegen Angriffe auf die Lieferkette zu sch√ºtzen.  
**Vorinstallierte Tools**: Cloud Shell enth√§lt eine umfassende Sammlung vorinstallierter Tools wie Azure CLI, Azure PowerShell, Terraform, Docker CLI, Ansible, Git und Texteditoren wie vim, nano und emacs. Diese Tools sind einsatzbereit. Um die installierten Pakete und Module aufzulisten, kannst du "Get-Module -ListAvailable", "tdnf list" und "pip3 list" verwenden.  
**$HOME-Persistenz**: Wenn du Azure Cloud Shell zum ersten Mal startest, kannst du es mit oder ohne ein angeh√§ngtes Speicherkonto verwenden. Wenn du dich entscheidest, keinen Speicher anzuh√§ngen, wird eine fl√ºchtige Sitzung erstellt, in der Dateien gel√∂scht werden, wenn die Sitzung endet. Um Dateien √ºber Sitzungen hinweg zu speichern, mounte ein Speicherkonto, das automatisch als **$HOME\clouddrive** angeh√§ngt wird, wobei dein **$HOME**-Verzeichnis als **.img**-Datei in Azure File Share gespeichert wird. Dateien au√üerhalb von $HOME und Maschinenzust√§nde werden jedoch nicht gespeichert. Zum sicheren Speichern von Geheimnissen wie SSH-Schl√ºsseln verwende Azure Key Vault.  
**Azure-Laufwerk (Azure:)**: PowerShell in Azure Cloud Shell umfasst das Azure-Laufwerk (Azure:), das eine einfache Navigation durch Azure-Ressourcen wie Compute, Network und Storage mit dateisystem√§hnlichen Befehlen erm√∂glicht. Wechsle zum Azure-Laufwerk mit cd Azure: und kehre mit cd ~ in dein Home-Verzeichnis zur√ºck. Du kannst weiterhin Azure PowerShell-Cmdlets verwenden, um Ressourcen von jedem Laufwerk aus zu verwalten.  
**Benutzerdefinierte Tool-Installation**: Benutzer, die Cloud Shell mit einem Speicherkonto konfigurieren, k√∂nnen zus√§tzliche Tools installieren, die keine Root-Berechtigungen erfordern. Diese Funktion erm√∂glicht eine weitere Anpassung der Cloud Shell-Umgebung, sodass Benutzer ihre Einrichtung an ihre spezifischen Bed√ºrfnisse anpassen k√∂nnen.

## Referenzen

* [https://learn.microsoft.com/en-us/azure/cloud-shell/overview](https://learn.microsoft.com/en-us/azure/cloud-shell/overview)
* [https://learn.microsoft.com/en-us/azure/cloud-shell/features](https://learn.microsoft.com/en-us/azure/cloud-shell/features)
* [https://learn.microsoft.com/en-us/azure/cloud-shell/using-the-shell-window](https://learn.microsoft.com/en-us/azure/cloud-shell/using-the-shell-window)


## Persistenz

{% content-ref url="../az-privilege-escalation/az-cloud-shell-persistence.md" %}
[az-cloud-shell-persistence.md](../az-privilege-escalation/az-cloud-shell-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
Lerne & √ºbe AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
Lerne & √ºbe GCP Hacking: <img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* √úberpr√ºfe die [**Abonnementpl√§ne**](https://github.com/sponsors/carlospolop)!
* **Tritt der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folge** uns auf **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Teile Hacking-Tricks, indem du PRs zu den** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repos einreichst.

</details>
{% endhint %}
