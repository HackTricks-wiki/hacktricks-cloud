# Az - Cloud Shell

{{#include ../../../banners/hacktricks-training.md}}

## Azure Cloud Shell

**Azure Cloud Shell** είναι ένα διαδραστικό, αυθεντικοποιημένο, προσβάσιμο μέσω προγράμματος περιήγησης τερματικό σχεδιασμένο για τη διαχείριση πόρων Azure, προσφέροντας την ευελιξία να εργάζεστε είτε με Bash είτε με PowerShell. Λειτουργεί σε έναν προσωρινό, ανά συνεδρία διακομιστή που λήγει μετά από 20 λεπτά αδράνειας, ενώ διατηρεί αρχεία στην τοποθεσία $HOME χρησιμοποιώντας μια κοινή χρήση 5-GB. Το Cloud Shell μπορεί να προσπελαστεί μέσω πολλαπλών σημείων, συμπεριλαμβανομένων του Azure portal, shell.azure.com, Azure CLI και της τεκμηρίωσης PowerShell, της εφαρμογής Azure για κινητά και της επέκτασης Azure Account του Visual Studio Code.

Δεν υπάρχουν δικαιώματα που να έχουν ανατεθεί σε αυτή την υπηρεσία, επομένως δεν υπάρχουν τεχνικές κλιμάκωσης προνομίων. Επίσης, δεν υπάρχει κανενός είδους αρίθμηση.

### Key Features

**Environment**: Azure Cloud Shell παρέχει ένα ασφαλές περιβάλλον εκτελώντας σε Azure Linux, τη δική διανομή Linux της Microsoft σχεδιασμένη για υποδομές cloud. Όλα τα πακέτα που περιλαμβάνονται στο αποθετήριο Azure Linux είναι εσωτερικά συμπιεσμένα από τη Microsoft για να προστατεύονται από επιθέσεις εφοδιαστικής αλυσίδας.  
**Preinstalled Tools**: Το Cloud Shell περιλαμβάνει ένα ολοκληρωμένο σύνολο προεγκατεστημένων εργαλείων όπως Azure CLI, Azure PowerShell, Terraform, Docker CLI, Ansible, Git και επεξεργαστές κειμένου όπως vim, nano και emacs. Αυτά τα εργαλεία είναι έτοιμα προς χρήση. Για να καταγράψετε τα εγκατεστημένα πακέτα και τα modules μπορείτε να χρησιμοποιήσετε "Get-Module -ListAvailable", "tdnf list" και "pip3 list".  
**$HOME persistence**: Όταν ξεκινάτε το Azure Cloud Shell για πρώτη φορά, μπορείτε να το χρησιμοποιήσετε με ή χωρίς συνδεδεμένο λογαριασμό αποθήκευσης. Η επιλογή να μην συνδέσετε αποθήκευση δημιουργεί μια επαφή συνεδρίας όπου τα αρχεία διαγράφονται όταν τελειώνει η συνεδρία. Για να διατηρήσετε αρχεία σε διάφορες συνεδρίες, συνδέστε έναν λογαριασμό αποθήκευσης, ο οποίος συνδέεται αυτόματα ως **$HOME\clouddrive**, με τον κατάλογο **$HOME** σας να αποθηκεύεται ως αρχείο **.img** στο Azure File Share. Ωστόσο, τα αρχεία εκτός του $HOME και οι καταστάσεις μηχανής δεν διατηρούνται. Για την ασφαλή αποθήκευση μυστικών όπως τα κλειδιά SSH, χρησιμοποιήστε το Azure Key Vault.  
**Azure drive (Azure:)**: Το PowerShell στο Azure Cloud Shell περιλαμβάνει τον Azure drive (Azure:), ο οποίος επιτρέπει εύκολη πλοήγηση στους πόρους Azure όπως Compute, Network και Storage χρησιμοποιώντας εντολές παρόμοιες με το σύστημα αρχείων. Μεταβείτε στον Azure drive με cd Azure: και επιστρέψτε στον κατάλογο αρχικής σας με cd ~. Μπορείτε ακόμα να χρησιμοποιήσετε cmdlets του Azure PowerShell για να διαχειριστείτε πόρους από οποιονδήποτε δίσκο.  
**Custom Tool Installation**: Οι χρήστες που διαμορφώνουν το Cloud Shell με έναν λογαριασμό αποθήκευσης μπορούν να εγκαταστήσουν επιπλέον εργαλεία που δεν απαιτούν δικαιώματα root. Αυτή η δυνατότητα επιτρέπει περαιτέρω προσαρμογή του περιβάλλοντος Cloud Shell, επιτρέποντας στους χρήστες να προσαρμόσουν τη ρύθμισή τους στις συγκεκριμένες ανάγκες τους.

## References

- [https://learn.microsoft.com/en-us/azure/cloud-shell/overview](https://learn.microsoft.com/en-us/azure/cloud-shell/overview)
- [https://learn.microsoft.com/en-us/azure/cloud-shell/features](https://learn.microsoft.com/en-us/azure/cloud-shell/features)
- [https://learn.microsoft.com/en-us/azure/cloud-shell/using-the-shell-window](https://learn.microsoft.com/en-us/azure/cloud-shell/using-the-shell-window)

## Persistence

{{#ref}}
../az-persistence/az-cloud-shell-persistence.md
{{#endref}}

{{#include ../../../banners/hacktricks-training.md}}
