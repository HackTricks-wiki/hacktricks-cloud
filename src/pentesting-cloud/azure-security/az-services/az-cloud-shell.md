# Az - Cloud Shell

{% hint style="success" %}
Aprenda e pratique Hacking AWS:<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
Aprenda e pratique Hacking GCP: <img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Confira os [**planos de assinatura**](https://github.com/sponsors/carlospolop)!
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga**-nos no **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Compartilhe truques de hacking enviando PRs para o** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) reposit√≥rios do github.

</details>
{% endhint %}

## Azure Cloud Shell

**Azure Cloud Shell** √© um terminal interativo, autenticado e acess√≠vel pelo navegador, projetado para gerenciar recursos do Azure, oferecendo a flexibilidade de trabalhar com Bash ou PowerShell. Ele √© executado em um host tempor√°rio, por sess√£o, que expira ap√≥s 20 minutos de inatividade, enquanto persiste arquivos na localiza√ß√£o $HOME usando um compartilhamento de arquivos de 5 GB. O Cloud Shell pode ser acessado atrav√©s de v√°rios pontos, incluindo o portal do Azure, shell.azure.com, documenta√ß√£o do Azure CLI e PowerShell, o aplicativo m√≥vel do Azure e a extens√£o Azure Account do Visual Studio Code.

N√£o h√° permiss√µes atribu√≠das a este servi√ßo, portanto, n√£o h√° t√©cnicas de escalonamento de privil√©gios. Tamb√©m n√£o h√° qualquer tipo de enumera√ß√£o.

### Key Features

**Ambiente**: O Azure Cloud Shell fornece um ambiente seguro, executando no Azure Linux, a distribui√ß√£o Linux pr√≥pria da Microsoft projetada para infraestrutura de nuvem. Todos os pacotes inclu√≠dos no reposit√≥rio do Azure Linux s√£o compilados internamente pela Microsoft para proteger contra ataques √† cadeia de suprimentos.  
**Ferramentas pr√©-instaladas**: O Cloud Shell inclui um conjunto abrangente de ferramentas pr√©-instaladas, como Azure CLI, Azure PowerShell, Terraform, Docker CLI, Ansible, Git e editores de texto como vim, nano e emacs. Essas ferramentas est√£o prontas para uso. Para listar os pacotes e m√≥dulos instalados, voc√™ pode usar "Get-Module -ListAvailable", "tdnf list" e "pip3 list".  
**Persist√™ncia $HOME**: Ao iniciar o Azure Cloud Shell pela primeira vez, voc√™ pode us√°-lo com ou sem uma conta de armazenamento anexada. Optar por n√£o anexar armazenamento cria uma sess√£o ef√™mera onde os arquivos s√£o exclu√≠dos quando a sess√£o termina. Para persistir arquivos entre sess√µes, monte uma conta de armazenamento, que √© anexada automaticamente como **$HOME\clouddrive**, com seu diret√≥rio **$HOME** salvo como um arquivo **.img** no Azure File Share. No entanto, arquivos fora de $HOME e estados de m√°quina n√£o s√£o persistidos. Para armazenar com seguran√ßa segredos como chaves SSH, use o Azure Key Vault.  
**Drive Azure (Azure:)**: O PowerShell no Azure Cloud Shell inclui o drive Azure (Azure:), que permite a navega√ß√£o f√°cil de recursos do Azure, como Computa√ß√£o, Rede e Armazenamento, usando comandos semelhantes a sistemas de arquivos. Mude para o drive Azure com cd Azure: e retorne ao seu diret√≥rio inicial com cd ~. Voc√™ ainda pode usar cmdlets do Azure PowerShell para gerenciar recursos de qualquer drive.  
**Instala√ß√£o de Ferramentas Personalizadas**: Usu√°rios que configuram o Cloud Shell com uma conta de armazenamento podem instalar ferramentas adicionais que n√£o requerem permiss√µes de root. Esse recurso permite uma personaliza√ß√£o adicional do ambiente do Cloud Shell, permitindo que os usu√°rios ajustem sua configura√ß√£o √†s suas necessidades espec√≠ficas.

## References

* [https://learn.microsoft.com/en-us/azure/cloud-shell/overview](https://learn.microsoft.com/en-us/azure/cloud-shell/overview)
* [https://learn.microsoft.com/en-us/azure/cloud-shell/features](https://learn.microsoft.com/en-us/azure/cloud-shell/features)
* [https://learn.microsoft.com/en-us/azure/cloud-shell/using-the-shell-window](https://learn.microsoft.com/en-us/azure/cloud-shell/using-the-shell-window)


## Persistence

{% content-ref url="../az-privilege-escalation/az-cloud-shell-persistence.md" %}
[az-cloud-shell-persistence.md](../az-privilege-escalation/az-cloud-shell-persistence.md)
{% endcontent-ref %}

{% hint style="success" %}
Aprenda e pratique Hacking AWS:<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
Aprenda e pratique Hacking GCP: <img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Confira os [**planos de assinatura**](https://github.com/sponsors/carlospolop)!
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga**-nos no **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Compartilhe truques de hacking enviando PRs para o** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) reposit√≥rios do github.

</details>
{% endhint %}
