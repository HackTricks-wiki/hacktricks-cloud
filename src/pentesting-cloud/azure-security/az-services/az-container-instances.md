# Az - Container Instances

{{#include ../../../../banners/hacktricks-training.md}}

## Основна інформація

Azure Container Instances (ACI) надають **безсерверний, за запитом спосіб** запуску **контейнерів** в хмарі Azure. Ви можете **розгорнути** один або кілька контейнерів у групі з **масштабованими обчисленнями**, **мережевими опціями** та гнучкістю підключення до **інших служб Azure** (таких як Storage, Virtual Networks або Container Registries).

Оскільки це **епhemeral** навантаження, вам не потрібно керувати основною інфраструктурою ВМ — Azure займається цим за вас. Однак з точки зору **оборонної безпеки** важливо розуміти, як **дозволи**, **особи**, **мережеві конфігурації** та **журнали** можуть виявити поверхні атаки та потенційні неправильні налаштування.

### Конфігурації

- Щоб створити контейнер, можна використовувати публічний образ, образ контейнера з Azure Container Registry або зовнішнього репозиторію, що може **вимагати налаштування пароля** для доступу до нього.
- Щодо мережі, він також може мати **публічну IP-адресу** або бути **приватними кінцевими точками**.
- Також можливо налаштувати загальні налаштування docker, такі як:
- **Змінні середовища**
- **Томи** (навіть з Azure Files)
- **Порти**
- **Обмеження CPU та пам'яті**
- **Політика перезапуску**
- **Запуск з привілегіями**
- **Командний рядок для запуску**
- ...

## Перерахування

> [!WARNING]
> Під час перерахування ACI ви можете виявити чутливі конфігурації, такі як **змінні середовища**, **мережеві деталі** або **керовані особи**. Будьте обережні з їхнім веденням або відображенням.
```bash
# List all container instances in the subscription
az container list

# Show detailed information about a specific container instance
az container show --name <container-name> --resource-group <res-group>

# Fetch logs from a container
az container logs --name <container-name> --resource-group <res-group>

# Execute a command in a running container and get the output
az container exec --name <container-name> --resource-group <res-group> --exec-command "ls"

# Get yaml configuration of the container group
az container export  --name <container-name> --resource-group <res-group>
```

