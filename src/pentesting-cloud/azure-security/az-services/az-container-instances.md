# Az - Container Instances

{{#include ../../../banners/hacktricks-training.md}}

## 기본 정보

Azure Container Instances (ACI)는 Azure 클라우드에서 **서버리스, 온디맨드 방식**으로 **컨테이너**를 실행할 수 있는 방법을 제공합니다. **단일 또는 여러 개의 컨테이너**를 **확장 가능한 컴퓨팅**, **네트워킹 옵션**, 및 **다른 Azure 서비스**(예: Storage, Virtual Networks, 또는 Container Registries)에 연결할 수 있는 유연성과 함께 그룹으로 **배포**할 수 있습니다.

이들은 **일시적인** 작업이기 때문에 기본 VM 인프라를 관리할 필요가 없습니다 — Azure가 이를 처리합니다. 그러나 **공격적인 보안 관점**에서 **권한**, **신원**, **네트워크 구성**, 및 **로그**가 공격 표면과 잠재적인 잘못된 구성을 드러낼 수 있는 방법을 이해하는 것이 중요합니다.

### 구성

- 컨테이너를 생성하기 위해 공개 이미지, Azure Container Registry의 컨테이너 이미지 또는 외부 리포지토리를 사용할 수 있으며, 이를 접근하기 위해 **비밀번호를 구성해야 할 수도 있습니다**.
- 네트워킹과 관련하여 **공용 IP**를 가질 수도 있고 **프라이빗 엔드포인트**가 될 수도 있습니다.
- 또한 다음과 같은 일반적인 도커 설정을 구성할 수 있습니다:
- **환경 변수**
- **볼륨** (Azure Files에서조차)
- **포트**
- **CPU 및 메모리 한도**
- **재시작 정책**
- **특권으로 실행**
- **실행할 명령줄**
- ...

## 열거

> [!WARNING]
> ACI를 열거할 때 **환경 변수**, **네트워크 세부정보**, 또는 **관리되는 신원**과 같은 민감한 구성을 드러낼 수 있습니다. 이를 기록하거나 표시할 때 주의하십시오.
```bash
# List all container instances in the subscription
az container list

# Show detailed information about a specific container instance
az container show --name <container-name> --resource-group <res-group>

# Fetch logs from a container
az container logs --name <container-name> --resource-group <res-group>

# Execute a command in a running container and get the output
az container exec --name <container-name> --resource-group <res-group> --exec-command "ls"

# Get yaml configuration of the container group
az container export  --name <container-name> --resource-group <res-group>
```

