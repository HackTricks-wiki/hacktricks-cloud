# Az - Container Instances

{{#include ../../../banners/hacktricks-training.md}}

## Basic Information

Azure Container Instances (ACI) παρέχουν έναν **serverless, on-demand τρόπο** για να τρέχετε **containers** στο Azure cloud. Μπορείτε να **deploy** έναν ή πολλούς containers σε μια ομάδα με **scalable compute**, **networking options**, και την ευελιξία να συνδεθείτε με **άλλες υπηρεσίες Azure** (όπως Storage, Virtual Networks, ή Container Registries).

Καθώς είναι **ephemeral** workloads, δεν χρειάζεται να διαχειρίζεστε την υποκείμενη υποδομή VM — το Azure το διαχειρίζεται για εσάς. Ωστόσο, από μια **offensive security perspective**, είναι κρίσιμο να κατανοήσετε πώς οι **permissions**, οι **identities**, οι **network configurations**, και τα **logs** μπορούν να αποκαλύψουν επιφάνειες επίθεσης και πιθανές κακοδιαμορφώσεις.

### Configurations

- Για να δημιουργήσετε έναν container, είναι δυνατόν να χρησιμοποιήσετε μια δημόσια εικόνα, μια εικόνα container από ένα Azure Container Registry ή ένα εξωτερικό αποθετήριο, το οποίο μπορεί να **απαιτεί να ρυθμίσετε έναν κωδικό πρόσβασης** για να έχετε πρόσβαση σε αυτό.
- Όσον αφορά το networking, μπορεί επίσης να έχει μια **δημόσια IP** ή να είναι **private endpoints**.
- Είναι επίσης δυνατόν να ρυθμίσετε κοινές ρυθμίσεις docker όπως:
- **Environment variables**
- **Volumes** (ακόμα και από Azure Files)
- **Ports**
- **CPU and memory limits**
- **Restart policy**
- **Run as privileged**
- **Command line to run**
- ...

## Enumeration

> [!WARNING]
> Όταν κάνετε enumeration ACI, μπορείτε να αποκαλύψετε ευαίσθητες ρυθμίσεις όπως **environment variables**, **network details**, ή **managed identities**. Να είστε προσεκτικοί με την καταγραφή ή την εμφάνισή τους.
```bash
# List all container instances in the subscription
az container list

# Show detailed information about a specific container instance
az container show --name <container-name> --resource-group <res-group>

# Fetch logs from a container
az container logs --name <container-name> --resource-group <res-group>

# Execute a command in a running container and get the output
az container exec --name <container-name> --resource-group <res-group> --exec-command "ls"

# Get yaml configuration of the container group
az container export  --name <container-name> --resource-group <res-group>
```

