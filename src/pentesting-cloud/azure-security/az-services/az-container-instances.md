# Az - Container Instances

{{#include ../../../banners/hacktricks-training.md}}

## Podstawowe informacje

Azure Container Instances (ACI) zapewniają **bezserwerowy, na żądanie sposób** uruchamiania **kontenerów** w chmurze Azure. Możesz **wdrożyć** pojedyncze lub wiele kontenerów w grupie z **skalowalnym obliczeniem**, **opcje sieciowe** oraz elastyczność w łączeniu z **innymi usługami Azure** (takimi jak Storage, Virtual Networks lub Container Registries).

Ponieważ są to **efemeryczne** obciążenia, nie musisz zarządzać podstawową infrastrukturą VM — Azure zajmuje się tym za Ciebie. Jednak z **perspektywy ofensywnej bezpieczeństwa** kluczowe jest zrozumienie, jak **uprawnienia**, **tożsamości**, **konfiguracje sieciowe** i **logi** mogą ujawniać powierzchnie ataku i potencjalne błędy w konfiguracji.

### Konfiguracje

- Aby utworzyć kontener, można użyć publicznego obrazu, obrazu kontenera z Azure Container Registry lub zewnętrznego repozytorium, co może **wymagać skonfigurowania hasła** do uzyskania dostępu.
- Jeśli chodzi o sieć, może mieć również **publiczny adres IP** lub być **prywatnymi punktami końcowymi**.
- Możliwe jest również skonfigurowanie wspólnych ustawień dockera, takich jak:
- **Zmienne środowiskowe**
- **Wolumeny** (nawet z Azure Files)
- **Porty**
- **Limity CPU i pamięci**
- **Polityka ponownego uruchamiania**
- **Uruchom jako uprzywilejowany**
- **Linia poleceń do uruchomienia**
- ...

## Enumeracja

> [!WARNING]
> Podczas enumeracji ACI możesz ujawnić wrażliwe konfiguracje, takie jak **zmienne środowiskowe**, **szczegóły sieci** lub **zarządzane tożsamości**. Bądź ostrożny przy logowaniu lub wyświetlaniu ich.
```bash
# List all container instances in the subscription
az container list

# Show detailed information about a specific container instance
az container show --name <container-name> --resource-group <res-group>

# Fetch logs from a container
az container logs --name <container-name> --resource-group <res-group>

# Execute a command in a running container and get the output
az container exec --name <container-name> --resource-group <res-group> --exec-command "ls"

# Get yaml configuration of the container group
az container export  --name <container-name> --resource-group <res-group>
```

