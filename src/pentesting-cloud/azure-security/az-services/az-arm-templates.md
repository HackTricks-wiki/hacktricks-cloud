# Az - ARM Templates / Deployments

{{#include ../../../banners/hacktricks-training.md}}

## 基本信息

[来自文档：](https://learn.microsoft.com/en-us/azure/azure-resource-manager/templates/overview) 要为您的 Azure 解决方案实现 **基础设施即代码**，请使用 Azure 资源管理器模板（ARM 模板）。模板是一个 JavaScript 对象表示法（**JSON**）文件，**定义**了您项目的 **基础设施** 和配置。模板使用声明性语法，这使您可以声明您打算部署的内容，而无需编写创建它的编程命令序列。在模板中，您指定要部署的资源及其属性。

### 历史

如果您可以访问它，您可以获得 **关于资源的信息**，这些资源虽然不存在，但可能在未来被部署。此外，如果一个包含 **敏感信息** 的 **参数** 被标记为 "**String**" **而不是** "**SecureString**"，它将以 **明文** 形式存在。

## 搜索敏感信息

具有 `Microsoft.Resources/deployments/read` 和 `Microsoft.Resources/subscriptions/resourceGroups/read` 权限的用户可以 **读取部署历史**。
```powershell
Get-AzResourceGroup
Get-AzResourceGroupDeployment -ResourceGroupName <name>

# Export
Save-AzResourceGroupDeploymentTemplate -ResourceGroupName <RESOURCE GROUP> -DeploymentName <DEPLOYMENT NAME>
cat <DEPLOYMENT NAME>.json # search for hardcoded password
cat <PATH TO .json FILE> | Select-String password
```
## 参考

- [https://app.gitbook.com/s/5uvPQhxNCPYYTqpRwsuS/\~/changes/argKsv1NUBY9l4Pd28TU/pentesting-cloud/azure-security/az-services/az-arm-templates#references](az-arm-templates.md#references)

{{#include ../../../banners/hacktricks-training.md}}
