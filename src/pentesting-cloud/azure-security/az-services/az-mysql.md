# Az - MySQL Databases

{% hint style="success" %}
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ GCP Hacking: <img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ HackTricks</summary>

* –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ø–ª–∞–Ω–∏ –ø—ñ–¥–ø–∏—Å–∫–∏**](https://github.com/sponsors/carlospolop)!
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ Telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –≤ **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **–î—ñ–ª—ñ—Ç—å—Å—è —Ö–∞–∫–µ—Ä—Å—å–∫–∏–º–∏ —Ç—Ä—é–∫–∞–º–∏, –Ω–∞–¥—Å–∏–ª–∞—é—á–∏ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ –Ω–∞ GitHub.

</details>
{% endhint %}

## Azure MySQL
Azure Database for MySQL - —Ü–µ –ø–æ–≤–Ω—ñ—Å—Ç—é –∫–µ—Ä–æ–≤–∞–Ω–∞ —Ä–µ–ª—è—Ü—ñ–π–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö, –∑–∞—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ MySQL Community Edition, —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–∞ –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω–æ—Å—Ç—ñ, –±–µ–∑–ø–µ–∫–∏ —Ç–∞ –≥–Ω—É—á–∫–æ—Å—Ç—ñ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –ø–æ—Ç—Ä–µ–± –¥–æ–¥–∞—Ç–∫—ñ–≤. –í–æ–Ω–∞ –º–∞—î –¥–≤—ñ —Ä—ñ–∑–Ω—ñ –º–æ–¥–µ–ª—ñ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è:

* **–û–¥–∏–Ω–æ—á–Ω–∏–π —Å–µ—Ä–≤–µ—Ä** (–ø–µ—Ä–µ–±—É–≤–∞—î –Ω–∞ —à–ª—è—Ö—É –¥–æ –∑–∞–∫—Ä–∏—Ç—Ç—è):
- –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ –¥–ª—è –µ–∫–æ–Ω–æ–º—ñ—á–Ω–∏—Ö —Ç–∞ –ª–µ–≥–∫–∏—Ö —É –∫–µ—Ä—É–≤–∞–Ω–Ω—ñ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω—å MySQL.
- –§—É–Ω–∫—Ü—ñ—ó –≤–∫–ª—é—á–∞—é—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω—ñ —Ä–µ–∑–µ—Ä–≤–Ω—ñ –∫–æ–ø—ñ—ó, –≤–∏—Å–æ–∫—É –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å —Ç–∞ –±–∞–∑–æ–≤–µ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥.
- –Ü–¥–µ–∞–ª—å–Ω–æ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è –¥–æ–¥–∞—Ç–∫—ñ–≤ –∑ –ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–∏–º–∏ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º–∏.
* **–ì–Ω—É—á–∫–∏–π —Å–µ—Ä–≤–µ—Ä**:
- –ó–∞–±–µ–∑–ø–µ—á—É—î –±—ñ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—é –Ω–∞–¥ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è–º –±–∞–∑–∞–º–∏ –¥–∞–Ω–∏—Ö —Ç–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—î—é.
- –ü—ñ–¥—Ç—Ä–∏–º—É—î –≤–∏—Å–æ–∫—É –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å (–≤ –æ–¥–Ω—ñ–π –∑–æ–Ω—ñ —Ç–∞ –∑–æ–Ω–∏-—Ä–µ–∑–µ—Ä–≤—É).
- –§—É–Ω–∫—Ü—ñ—ó –≤–∫–ª—é—á–∞—é—Ç—å –µ–ª–∞—Å—Ç–∏—á–Ω–µ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è, —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–∞—Ç—á–∞–º–∏ —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—é –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è.
- –ü—Ä–æ–ø–æ–Ω—É—î —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –∑—É–ø–∏–Ω–∫–∏/–∑–∞–ø—É—Å–∫—É –¥–ª—è –µ–∫–æ–Ω–æ–º—ñ—ó –≤–∏—Ç—Ä–∞—Ç.

### –ö–ª—é—á–æ–≤—ñ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ
* **–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–æ–º**: –§—É–Ω–∫—Ü—ñ—è **ad-admin** –¥–æ–∑–≤–æ–ª—è—î –∫–µ—Ä—É–≤–∞—Ç–∏ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏ Azure Active Directory (AAD) –¥–ª—è —Å–µ—Ä–≤–µ—Ä—ñ–≤ MySQL, –∑–∞–±–µ–∑–ø–µ—á—É—é—á–∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∏–º –¥–æ—Å—Ç—É–ø–æ–º —á–µ—Ä–µ–∑ –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ AAD, —Ç–æ–¥—ñ —è–∫ —Ñ—É–Ω–∫—Ü—ñ—è **identity** –¥–æ–∑–≤–æ–ª—è—î –ø—Ä–∏–∑–Ω–∞—á–∞—Ç–∏ —Ç–∞ –∫–µ—Ä—É–≤–∞—Ç–∏ Azure Managed Identities, –ø—Ä–æ–ø–æ–Ω—É—é—á–∏ –±–µ–∑–ø–µ—á–Ω—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é –±–µ–∑ –æ–±–ª—ñ–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ —Ä–µ—Å—É—Ä—Å—ñ–≤ Azure.
* **–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∂–∏—Ç—Ç—î–≤–∏–º —Ü–∏–∫–ª–æ–º**: –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –∑–∞–ø—É—Å–∫—É –∞–±–æ –∑—É–ø–∏–Ω–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞, –≤–∏–¥–∞–ª–µ–Ω–Ω—è –µ–∫–∑–µ–º–ø–ª—è—Ä–∞ –≥–Ω—É—á–∫–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞, –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó —Ç–∞ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è, —â–æ–± –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ —Å–µ—Ä–≤–µ—Ä –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –ø–µ–≤–Ω–∏–º —É–º–æ–≤–∞–º –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è–º –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ–π–Ω–∏—Ö —Å–∫—Ä–∏–ø—Ç—ñ–≤.
* **–ë–µ–∑–ø–µ–∫–∞ —Ç–∞ –º–µ—Ä–µ–∂—ñ**: –º–æ–∂–Ω–∞ –∫–µ—Ä—É–≤–∞—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –±—Ä–∞–Ω–¥–º–∞—É–µ—Ä–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –±–µ–∑–ø–µ—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö —Ç–∞ –≤—ñ–¥–∫–ª—é—á–∞—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ—ó –º–µ—Ä–µ–∂—ñ –∑–∞ –ø–æ—Ç—Ä–µ–±–∏.
* **–ó–∞—Ö–∏—Å—Ç –¥–∞–Ω–∏—Ö —Ç–∞ —Ä–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è**: –≤–∫–ª—é—á–∞—î –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ä–µ–∑–µ—Ä–≤–Ω–∏–º–∏ –∫–æ–ø—ñ—è–º–∏ –≥–Ω—É—á–∫–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö, –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≥–µ–æ-–≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–ª—è –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–∞ –≤ —ñ–Ω—à–æ–º—É —Ä–µ–≥—ñ–æ–Ω—ñ, –µ–∫—Å–ø–æ—Ä—Ç—É —Ä–µ–∑–µ—Ä–≤–Ω–∏—Ö –∫–æ–ø—ñ–π —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –∑–æ–≤–Ω—ñ—à–Ω—å–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è (–≤ Preview) —Ç–∞ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–∞ –∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó –∫–æ–ø—ñ—ó –¥–æ –ø–µ–≤–Ω–æ–≥–æ –º–æ–º–µ–Ω—Ç—É —á–∞—Å—É.

### –ü–µ—Ä–µ—Ä–∞—Ö—É–≤–∞–Ω–Ω—è

{% tabs %}
{% tab title="az cli" %}
{% code overflow="wrap" %}
```bash
# List all flexible-servers
az mysql flexible-server db list --resource-group <resource-group-name>
# List databases in a flexible-server
az mysql flexible-server db list --resource-group <resource-group-name> --server-name <server_name>
# Show specific details of a MySQL database
az mysql flexible-server db show --resource-group <resource-group-name> --server-name <server_name> --database-name <database_name>

# List firewall rules of the a server
az mysql flexible-server firewall-rule list --resource-group <resource-group-name> --name <server_name>

# List all ad-admin in a server
az mysql flexible-server ad-admin list --resource-group <resource-group-name> --server-name <server_name>
# List all user assigned managed identities from the server
az mysql flexible-server identity list --resource-group <resource-group-name> --server-name <server_name>

# List the server backups
az mysql flexible-server backup list --resource-group <resource-group-name> --name <server_name>
# List all read replicas for a given server
az mysql flexible-server replica list --resource-group <resource-group-name> --name <server_name>

# Get the server's advanced threat protection setting
az mysql flexible-server advanced-threat-protection-setting show --resource-group <resource-group-name> --name <server_name>
# List all of the maintenances of a flexible server
az mysql flexible-server maintenance list --resource-group <resource-group-name> --server-name <server_name>
# List log files for a server.
az mysql flexible-server server-logs list --resource-group <resource-group-name> --server-name <server_name>

```
{% endcode %}
{% endtab %}

{% tab title="Az PowerShell" %}
{% code overflow="wrap" %}
```bash
Get-Command -Module Az.MySql

# Get all flexible servers in a resource group
Get-AzMySqlFlexibleServer -ResourceGroupName <resource-group-name>

# List databases in a specific flexible server
Get-AzMySqlFlexibleServerDatabase -ResourceGroupName <resource-group-name> -ServerName <server_name>

# Get details of a specific database in a flexible server
Get-AzMySqlFlexibleServerDatabase -ResourceGroupName <resource-group-name> -ServerName <server_name> -DatabaseName <database_name>

# List all firewall rules for a flexible server
Get-AzMySqlFlexibleServerFirewallRule -ResourceGroupName <resource-group-name> -ServerName <server_name>

# Get the identity information of a flexible server
Get-AzMySqlFlexibleServerIdentity -ResourceGroupName <resource-group-name> -ServerName <server_name>

# Get the server's advanced threat protection setting
Get-AzMySqlFlexibleServerAdvancedThreatProtection -ResourceGroupName <resource-group-name> -ServerName <server_name>

# List configuration settings of a flexible server
Get-AzMySqlFlexibleServerConfiguration -ResourceGroupName <resource-group-name> -ServerName <server_name>
# Get the connection string for a flexible server
Get-AzMySqlFlexibleServerConnectionString -ResourceGroupName <resource-group-name> -ServerName <server_name> -Client <client>

# List all read replicas for a given server
Get-AzMySqlFlexibleServerReplica -ResourceGroupName <resource-group-name> -ServerName <server_name>

# Get the maintenance window details for a flexible server
Get-AzMySqlFlexibleServerMaintenanceWindow -ResourceGroupName <resource-group-name> -ServerName <server_name>

# List log files for a server
Get-AzMySqlFlexibleServerLog -ResourceGroupName <resource-group-name> -ServerName <server_name>
```
{% endcode %}
{% endtab %}
{% endtabs %}

### –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

–ó —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è–º rdbms-connect –≤–∏ –º–æ–∂–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é:

{% code overflow="wrap" %}
```bash
az mysql flexible-server connect -n <server-name> -u <username> -p <password> --interactive

#or execute commands
az mysql flexible-server execute \
-n <server-name> \
-u <username> \
-p "<password>" \
-d <database-name> \
--querytext "SELECT * FROM <table-name>;"

```
{% endcode %}

–ê–±–æ –∑ –ø–ª–∞–≥—ñ–Ω–æ–º —Ä—ñ–¥–Ω–æ–≥–æ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è MySQL
{% code overflow="wrap" %}
```bash
mysql -h <server-name>.mysql.database.azure.com -P 3306 -u <username> -p
```
{% endcode %}

–¢–∞–∫–æ–∂ –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –∑–∞–ø–∏—Ç–∏ –∑ github, –∞–ª–µ —Ç–∞–∫–æ–∂ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –ø–∞—Ä–æ–ª—å —ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á. –í–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ sql —Ñ–∞–π–ª –∑ –∑–∞–ø–∏—Ç–æ–º –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è, –∞ –ø–æ—Ç—ñ–º: 
{% code overflow="wrap" %}
```bash
# Setup
az mysql flexible-server deploy setup \
-s <server-name> \
-g <resource-group> \
-u <admin-user> \
-p "<admin-password>" \
--sql-file <path-to-sql-file> \
--repo <github-username/repository-name> \
--branch <branch-name> \
--action-name <action-name> \
--allow-push

# Run it
az mysql flexible-server deploy run \
--action-name <action-name> \
--branch <branch-name>
```
{% endcode %}

## –ü—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–∏–≤—ñ–ª–µ—ó–≤

{% content-ref url="../az-privilege-escalation/az-mysql-privesc.md" %}
[az-mysql-privesc.md](../az-privilege-escalation/az-mysql-privesc.md)
{% endcontent-ref %}

## –ü–æ—Å—Ç–µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ—è

{% content-ref url="../az-post-exploitation/az-mysql-post-exploitation.md" %}
[az-sql-mysql-exploitation.md](../az-post-exploitation/az-mysql-post-exploitation.md)
{% endcontent-ref %}

## ToDo

* –ó–Ω–∞–π—Ç–∏ —Å–ø–æ—Å—ñ–± –¥–æ—Å—Ç—É–ø—É –∑ mysql flexible-server ad-admin, —â–æ–± –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ —Ü–µ –º–µ—Ç–æ–¥ –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–∏–≤—ñ–ª–µ—ó–≤



{% hint style="success" %}
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ GCP Hacking: <img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>–ü—ñ–¥—Ç—Ä–∏–º–∞—Ç–∏ HackTricks</summary>

* –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ø–ª–∞–Ω–∏ –ø—ñ–¥–ø–∏—Å–∫–∏**](https://github.com/sponsors/carlospolop)!
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –≤ **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **–î—ñ–ª—ñ—Ç—å—Å—è —Ö–∞–∫–µ—Ä—Å—å–∫–∏–º–∏ —Ç—Ä—é–∫–∞–º–∏, –Ω–∞–¥—Å–∏–ª–∞—é—á–∏ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ –Ω–∞ github.

</details>
{% endhint %}
