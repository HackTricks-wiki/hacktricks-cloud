# Az - MySQL VeritabanlarÄ±

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**'i takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}

## Azure MySQL
Azure Database for MySQL, MySQL Community Edition'a dayanan tamamen yÃ¶netilen bir iliÅŸkisel veritabanÄ± hizmetidir ve Ã§eÅŸitli uygulama ihtiyaÃ§larÄ± iÃ§in Ã¶lÃ§eklenebilirlik, gÃ¼venlik ve esneklik saÄŸlamak Ã¼zere tasarlanmÄ±ÅŸtÄ±r. Ä°ki farklÄ± daÄŸÄ±tÄ±m modeli vardÄ±r:

* **Tek Sunucu** (emeklilik yolunda):
- Maliyet etkin ve yÃ¶netimi kolay MySQL daÄŸÄ±tÄ±mlarÄ± iÃ§in optimize edilmiÅŸtir.
- Ã–zellikler arasÄ±nda otomatik yedeklemeler, yÃ¼ksek kullanÄ±labilirlik ve temel izleme bulunmaktadÄ±r.
- Ã–ngÃ¶rÃ¼lebilir iÅŸ yÃ¼klerine sahip uygulamalar iÃ§in idealdir.
* **Esnek Sunucu**:
- VeritabanÄ± yÃ¶netimi ve yapÄ±landÄ±rmasÄ± Ã¼zerinde daha fazla kontrol saÄŸlar.
- YÃ¼ksek kullanÄ±labilirliÄŸi destekler (aynÄ± bÃ¶lge ve bÃ¶lge yedekli).
- Elastik Ã¶lÃ§ekleme, yamanÄ±n yÃ¶netimi ve iÅŸ yÃ¼kÃ¼ optimizasyonu gibi Ã¶zellikler sunar.
- Maliyet tasarrufu iÃ§in durdurma/baÅŸlatma iÅŸlevselliÄŸi sunar.

### Ana Ã–zellikler
* **Sunucu YÃ¶netimi**: **ad-admin** Ã¶zelliÄŸi, MySQL sunucularÄ± iÃ§in Azure Active Directory (AAD) yÃ¶neticilerini yÃ¶netmeyi saÄŸlar, AAD kimlik bilgileri aracÄ±lÄ±ÄŸÄ±yla yÃ¶netim eriÅŸimi Ã¼zerinde kontrol sunar, **kimlik** Ã¶zelliÄŸi ise Azure YÃ¶netilen Kimliklerinin atanmasÄ± ve yÃ¶netimini saÄŸlar, Azure kaynaklarÄ±na eriÅŸim iÃ§in gÃ¼venli, kimlik bilgisi gerektirmeyen kimlik doÄŸrulama sunar.
* **YaÅŸam DÃ¶ngÃ¼sÃ¼ YÃ¶netimi**: bir sunucuyu baÅŸlatma veya durdurma, esnek bir sunucu Ã¶rneÄŸini silme, yapÄ±landÄ±rma deÄŸiÅŸikliklerini hÄ±zlÄ± bir ÅŸekilde uygulamak iÃ§in bir sunucuyu yeniden baÅŸlatma ve otomasyon betikleri ile devam etmeden Ã¶nce bir sunucunun belirli koÅŸullarÄ± karÅŸÄ±ladÄ±ÄŸÄ±ndan emin olmak iÃ§in bekleme seÃ§enekleri.
* **GÃ¼venlik ve AÄŸ**: gÃ¼venli veritabanÄ± eriÅŸimi iÃ§in sunucu gÃ¼venlik duvarÄ± kurallarÄ±nÄ± yÃ¶netebilir ve gerektiÄŸinde sanal aÄŸ yapÄ±landÄ±rmalarÄ±nÄ± ayÄ±rabilir.
* **Veri Koruma ve Yedekleme**: veri kurtarma iÃ§in esnek sunucu yedeklemelerini yÃ¶netme, farklÄ± bir bÃ¶lgede bir sunucuyu kurtarmak iÃ§in coÄŸrafi geri yÃ¼kleme yapma, dÄ±ÅŸ kullanÄ±m iÃ§in sunucu yedeklemelerini dÄ±ÅŸa aktarma (Ã–nizleme aÅŸamasÄ±nda) ve bir sunucuyu yedekten belirli bir zamana geri yÃ¼kleme seÃ§eneklerini iÃ§erir.

### SayÄ±m

{% tabs %}
{% tab title="az cli" %}
{% code overflow="wrap" %}
```bash
# List all flexible-servers
az mysql flexible-server db list --resource-group <resource-group-name>
# List databases in a flexible-server
az mysql flexible-server db list --resource-group <resource-group-name> --server-name <server_name>
# Show specific details of a MySQL database
az mysql flexible-server db show --resource-group <resource-group-name> --server-name <server_name> --database-name <database_name>

# List firewall rules of the a server
az mysql flexible-server firewall-rule list --resource-group <resource-group-name> --name <server_name>

# List all ad-admin in a server
az mysql flexible-server ad-admin list --resource-group <resource-group-name> --server-name <server_name>
# List all user assigned managed identities from the server
az mysql flexible-server identity list --resource-group <resource-group-name> --server-name <server_name>

# List the server backups
az mysql flexible-server backup list --resource-group <resource-group-name> --name <server_name>
# List all read replicas for a given server
az mysql flexible-server replica list --resource-group <resource-group-name> --name <server_name>

# Get the server's advanced threat protection setting
az mysql flexible-server advanced-threat-protection-setting show --resource-group <resource-group-name> --name <server_name>
# List all of the maintenances of a flexible server
az mysql flexible-server maintenance list --resource-group <resource-group-name> --server-name <server_name>
# List log files for a server.
az mysql flexible-server server-logs list --resource-group <resource-group-name> --server-name <server_name>

```
{% endcode %}
{% endtab %}

{% tab title="Az PowerShell" %}
{% code overflow="wrap" %}
```bash
Get-Command -Module Az.MySql

# Get all flexible servers in a resource group
Get-AzMySqlFlexibleServer -ResourceGroupName <resource-group-name>

# List databases in a specific flexible server
Get-AzMySqlFlexibleServerDatabase -ResourceGroupName <resource-group-name> -ServerName <server_name>

# Get details of a specific database in a flexible server
Get-AzMySqlFlexibleServerDatabase -ResourceGroupName <resource-group-name> -ServerName <server_name> -DatabaseName <database_name>

# List all firewall rules for a flexible server
Get-AzMySqlFlexibleServerFirewallRule -ResourceGroupName <resource-group-name> -ServerName <server_name>

# Get the identity information of a flexible server
Get-AzMySqlFlexibleServerIdentity -ResourceGroupName <resource-group-name> -ServerName <server_name>

# Get the server's advanced threat protection setting
Get-AzMySqlFlexibleServerAdvancedThreatProtection -ResourceGroupName <resource-group-name> -ServerName <server_name>

# List configuration settings of a flexible server
Get-AzMySqlFlexibleServerConfiguration -ResourceGroupName <resource-group-name> -ServerName <server_name>
# Get the connection string for a flexible server
Get-AzMySqlFlexibleServerConnectionString -ResourceGroupName <resource-group-name> -ServerName <server_name> -Client <client>

# List all read replicas for a given server
Get-AzMySqlFlexibleServerReplica -ResourceGroupName <resource-group-name> -ServerName <server_name>

# Get the maintenance window details for a flexible server
Get-AzMySqlFlexibleServerMaintenanceWindow -ResourceGroupName <resource-group-name> -ServerName <server_name>

# List log files for a server
Get-AzMySqlFlexibleServerLog -ResourceGroupName <resource-group-name> -ServerName <server_name>
```
{% endcode %}
{% endtab %}
{% endtabs %}

### BaÄŸlantÄ±

rdbms-connect uzantÄ±sÄ±yla veritabanÄ±na eriÅŸebilirsiniz:

{% code overflow="wrap" %}
```bash
az mysql flexible-server connect -n <server-name> -u <username> -p <password> --interactive

#or execute commands
az mysql flexible-server execute \
-n <server-name> \
-u <username> \
-p "<password>" \
-d <database-name> \
--querytext "SELECT * FROM <table-name>;"

```
{% endcode %}

Ya da MySQL yerel uzantÄ± eklentisi ile
{% code overflow="wrap" %}
```bash
mysql -h <server-name>.mysql.database.azure.com -P 3306 -u <username> -p
```
{% endcode %}

AyrÄ±ca, sorgularÄ± github ile de Ã§alÄ±ÅŸtÄ±rabilirsiniz ancak ÅŸifre ve kullanÄ±cÄ± adÄ± da gereklidir. Ã‡alÄ±ÅŸtÄ±rÄ±lacak sorgu ile bir sql dosyasÄ± oluÅŸturmanÄ±z ve ardÄ±ndan: 
{% code overflow="wrap" %}
```bash
# Setup
az mysql flexible-server deploy setup \
-s <server-name> \
-g <resource-group> \
-u <admin-user> \
-p "<admin-password>" \
--sql-file <path-to-sql-file> \
--repo <github-username/repository-name> \
--branch <branch-name> \
--action-name <action-name> \
--allow-push

# Run it
az mysql flexible-server deploy run \
--action-name <action-name> \
--branch <branch-name>
```
{% endcode %}

## Yetki YÃ¼kseltme

{% content-ref url="../az-privilege-escalation/az-mysql-privesc.md" %}
[az-mysql-privesc.md](../az-privilege-escalation/az-mysql-privesc.md)
{% endcontent-ref %}

## SaldÄ±rÄ± SonrasÄ±

{% content-ref url="../az-post-exploitation/az-mysql-post-exploitation.md" %}
[az-sql-mysql-exploitation.md](../az-post-exploitation/az-mysql-post-exploitation.md)
{% endcontent-ref %}

## YapÄ±lacaklar

* Yetki yÃ¼kseltme yÃ¶ntemi olduÄŸunu doÄŸrulamak iÃ§in mysql flexible-server ad-admin ile eriÅŸim yolu arayÄ±n



{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**'i takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶ndererek paylaÅŸÄ±n.**

</details>
{% endhint %}
