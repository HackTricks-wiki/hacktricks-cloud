# Az - PostgreSQL VeritabanlarÄ±

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** **bizi takip edin** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}

## Azure PostgreSQL
**Azure Database for PostgreSQL**, **PostgreSQL** Community Edition'a dayanan tamamen yÃ¶netilen bir **iliÅŸkisel veritabanÄ± hizmetidir**. Ã‡eÅŸitli uygulama ihtiyaÃ§larÄ± iÃ§in Ã¶lÃ§eklenebilirlik, gÃ¼venlik ve esneklik saÄŸlamak Ã¼zere tasarlanmÄ±ÅŸtÄ±r. Azure MySQL'e benzer ÅŸekilde, PostgreSQL iki daÄŸÄ±tÄ±m modeli sunar:

* **Tek Sunucu** (emeklilik yolunda):
- Basit, maliyet etkin PostgreSQL daÄŸÄ±tÄ±mlarÄ± iÃ§in optimize edilmiÅŸtir.
- Otomatik yedeklemeler, temel izleme ve yÃ¼ksek kullanÄ±labilirlik Ã¶zelliklerine sahiptir.
- Ã–ngÃ¶rÃ¼lebilir iÅŸ yÃ¼klerine sahip uygulamalar iÃ§in idealdir.
* **Esnek Sunucu**:
- VeritabanÄ± yÃ¶netimi ve yapÄ±landÄ±rmasÄ± Ã¼zerinde daha fazla kontrol saÄŸlar.
- Hem aynÄ± bÃ¶lgede hem de bÃ¶lgeler arasÄ±nda yÃ¼ksek kullanÄ±labilirliÄŸi destekler.
- Elastik Ã¶lÃ§ekleme, otomatik bakÄ±m ve maliyet tasarrufu iÅŸlevselliÄŸi sunar.
- Maliyetleri optimize etmek iÃ§in sunucunun baÅŸlatÄ±lmasÄ±na ve durdurulmasÄ±na izin verir.

### Ana Ã–zellikler

* **Ã–zel BakÄ±m Pencereleri**: Kesintiyi en aza indirmek iÃ§in gÃ¼ncellemeleri planlayÄ±n.
* **Aktif Ä°zleme**: VeritabanÄ± performansÄ±nÄ± izlemek ve geliÅŸtirmek iÃ§in ayrÄ±ntÄ±lÄ± metrikler ve gÃ¼nlÃ¼kler eriÅŸin.
* **Sunucuyu Durdur/ BaÅŸlat**: KullanÄ±cÄ±lar sunucuyu durdurabilir ve baÅŸlatabilir.
* **Otomatik Yedeklemeler**: 35 gÃ¼ne kadar yapÄ±landÄ±rÄ±labilir saklama sÃ¼releri ile yerleÅŸik gÃ¼nlÃ¼k yedeklemeler.
* **Rol TabanlÄ± EriÅŸim**: Azure Active Directory aracÄ±lÄ±ÄŸÄ±yla kullanÄ±cÄ± izinlerini ve yÃ¶netim eriÅŸimini kontrol edin.
* **GÃ¼venlik ve AÄŸ**: GÃ¼venli veritabanÄ± eriÅŸimi iÃ§in sunucu gÃ¼venlik duvarÄ± kurallarÄ±nÄ± yÃ¶netebilir ve gerektiÄŸinde sanal aÄŸ yapÄ±landÄ±rmalarÄ±nÄ± ayÄ±rabilirsiniz.

### SayÄ±m

{% tabs %}
{% tab title="az cli" %}
{% code overflow="wrap" %}
```bash
# List servers in a resource group
az postgres flexible-server list --resource-group <resource-group-name>
# List databases in a flexible-server
az postgres flexible-server db list --resource-group <resource-group-name> --server-name <server_name>
# Show specific details of a Postgre database
az postgres flexible-server db show --resource-group <resource-group-name> --server-name <server_name> --database-name <database_name>

# List firewall rules of the a server
az postgres flexible-server firewall-rule list --resource-group <resource-group-name> --name <server_name>
# List parameter values for a felxible server
az postgres flexible-server parameter list --resource-group <resource-group-name> --server-name <server_name>
# List private link
az postgres flexible-server private-link-resource list --resource-group <resource-group-name> --server-name <server_name>

# List all ad-admin in a server
az postgres flexible-server ad-admin list --resource-group <resource-group-name> --server-name <server_name>
# List all user assigned managed identities from the server
az postgres flexible-server identity list --resource-group <resource-group-name> --server-name <server_name>

# List the server backups
az postgres flexible-server backup list --resource-group <resource-group-name> --name <server_name>
# List all read replicas for a given server
az postgres flexible-server replica list --resource-group <resource-group-name> --name <server_name>
# List migrations
az postgres flexible-server migration list --resource-group <resource-group-name> --name <server_name>

# Get the server's advanced threat protection setting
az postgres flexible-server advanced-threat-protection-setting show --resource-group <resource-group-name> --name <server_name>
# List all of the maintenances of a flexible server
az postgres flexible-server maintenance list --resource-group <resource-group-name> --server-name <server_name>
# List log files for a server.
az postgres flexible-server server-logs list --resource-group <resource-group-name> --server-name <server_name>

```
{% endcode %}
{% endtab %}

{% tab title="Az PowerShell" %}
{% code overflow="wrap" %}
```powershell
Get-Command -Module Az.PostgreSql

# List flexible-servers in a resource group
Get-AzPostgreSqlFlexibleServer -ResourceGroupName <resource-group-name>
# List databases in a flexible-server
Get-AzPostgreSqlFlexibleServerDatabase -ResourceGroupName <resource-group-name> -ServerName <server_name>

# List firewall rules of the a flexible-server
Get-AzPostgreSqlFlexibleServerFirewallRule -ResourceGroupName <resource-group-name> -ServerName <server_name>

# List configuration settings of a flexible server
Get-AzPostgreSqlFlexibleServerConfiguration -ResourceGroupName <resource-group-name> -ServerName <server_name>
# Get the connection string for a flexible server
Get-AzPostgreSqlFlexibleServerConnectionString -ResourceGroupName <resource-group-name> -ServerName <server_name> -Client <client>

Get-AzPostgreSqlFlexibleServerLocationBasedCapability -Location <location>

# List servers in a resource group
Get-AzPostgreSqlServer -ResourceGroupName <resource-group-name>

```
{% endcode %}
{% endtab %}
{% endtabs %}

### BaÄŸlantÄ±

rdbms-connect uzantÄ±sÄ±yla veritabanÄ±na eriÅŸebilirsiniz:

{% code overflow="wrap" %}
```bash
az postgres flexible-server connect -n <server-name> -u <username> -p <password> --interactive

#or execute commands
az postgres flexible-server execute \
-n <server-name> \
-u <username> \
-p "<password>" \
-d <database-name> \
--querytext "SELECT * FROM <table-name>;"

```
{% endcode %}

Veya
{% code overflow="wrap" %}
```bash
psql -h testpostgresserver1994.postgres.database.azure.com -p 5432 -U adminuser <database-name>
```
{% endcode %}

## Referanslar

* [https://learn.microsoft.com/en-us/azure/postgresql/](https://learn.microsoft.com/en-us/azure/postgresql/)
* [https://learn.microsoft.com/en-us/azure/postgresql/flexible-server/service-overview](https://learn.microsoft.com/en-us/azure/postgresql/flexible-server/service-overview)
* [https://learn.microsoft.com/en-us/azure/postgresql/flexible-server/overview](https://learn.microsoft.com/en-us/azure/postgresql/flexible-server/overview)

## Yetki YÃ¼kseltme

{% content-ref url="../az-privilege-escalation/az-postgresql-privesc.md" %}
[az-postgresql-privesc.md](../az-privilege-escalation/az-postgresql-privesc.md)
{% endcontent-ref %}

## SonrasÄ± Ä°stismar

{% content-ref url="../az-post-exploitation/az-postgresql-post-exploitation.md" %}
[az-postgresql-post-exploitation.md](../az-post-exploitation/az-postgresql-post-exploitation.md)
{% endcontent-ref %}

## YapÄ±lacaklar

* Yetki yÃ¼kseltme yÃ¶ntemini doÄŸrulamak iÃ§in ad-admin ile eriÅŸim yolu arayÄ±n


{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**'i takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.**

</details>
{% endhint %}
