# Az - ACR

{{#include ../../../banners/hacktricks-training.md}}

## Informations de base

Azure Container Registry (ACR) est un service géré fourni par Microsoft Azure pour **le stockage et la gestion des images de conteneurs Docker et d'autres artefacts**. Il offre des fonctionnalités telles que des outils de développement intégrés, la géo-réplication, des mesures de sécurité comme le contrôle d'accès basé sur les rôles et l'analyse d'images, des constructions automatisées, des webhooks et des déclencheurs, ainsi qu'une isolation réseau. Il fonctionne avec des outils populaires comme Docker CLI et Kubernetes, et s'intègre bien avec d'autres services Azure.

### Énumérer

Pour énumérer le service, vous pouvez utiliser le script [**Get-AzACR.ps1**](https://github.com/NetSPI/MicroBurst/blob/master/Misc/Get-AzACR.ps1):
```bash
# List Docker images inside the registry
IEX (New-Object Net.Webclient).downloadstring("https://raw.githubusercontent.com/NetSPI/MicroBurst/master/Misc/Get-AzACR.ps1")

Set-ItemProperty -Path "HKLM:\SOFTWARE\Microsoft\Internet Explorer\Main" -Name "DisableFirstRunCustomize" -Value 2

Get-AzACR -username <username> -password <password> -registry <corp-name>.azurecr.io
```
{{#tabs }}
{{#tab name="az cli" }}
```bash
az acr list --output table
az acr show --name MyRegistry --resource-group MyResourceGroup
```
{{#endtab }}

{{#tab name="Az Powershell" }}
```powershell
# List all ACRs in your subscription
Get-AzContainerRegistry

# Get a specific ACR
Get-AzContainerRegistry -ResourceGroupName "MyResourceGroup" -Name "MyRegistry"
```
{{#endtab }}
{{#endtabs }}

Connexion et tirage depuis le registre
```bash
docker login <corp-name>.azurecr.io --username <username> --password <password>
docker pull <corp-name>.azurecr.io/<image>:<tag>
```
{{#include ../../../banners/hacktricks-training.md}}
