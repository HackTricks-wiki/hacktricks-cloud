# Az - 基本信息

{{#include ../../../banners/hacktricks-training.md}}

## 组织层级

<figure><img src="https://lh7-rt.googleusercontent.com/slidesz/AGV_vUcVrh1BpuQXN7RzGqoxrn-4Nm_sjdJU-dDTvshloB7UMQnN1mtH9N94zNiPCzOYAqE9EsJqlboZOj47tQsQktjxszpKvIDPZLs9rgyiObcZCvl7N0ZWztshR0ZddyBYZIAwPIkrEQ=s2048?key=l3Eei079oPmVJuh8lxQYxxrB" alt=""><figcaption><p><a href="https://www.tunecom.be/stg_ba12f/wp-content/uploads/2020/01/VDC-Governance-ManagementGroups-1536x716.png">https://www.tunecom.be/stg_ba12f/wp-content/uploads/2020/01/VDC-Governance-ManagementGroups-1536x716.png</a></p></figcaption></figure>

### 管理组

- 它可以包含**其他管理组或订阅**。
- 这允许在管理组级别**应用治理控制**，如RBAC和Azure Policy，并让所有组内的订阅**继承**这些控制。
- **单个目录**最多可以支持**10,000个管理组**。
- 管理组树可以支持**最多六个层级的深度**。此限制不包括根级别或订阅级别。
- 每个管理组和订阅只能支持**一个父级**。
- 即使可以创建多个管理组，**只有1个根管理组**。
- 根管理组**包含**所有**其他管理组和订阅**，并且**无法移动或删除**。
- 单个管理组内的所有订阅必须信任**相同的Entra ID租户**。

<figure><img src="../../../images/image (147).png" alt=""><figcaption><p><a href="https://td-mainsite-cdn.tutorialsdojo.com/wp-content/uploads/2023/02/managementgroups-768x474.png">https://td-mainsite-cdn.tutorialsdojo.com/wp-content/uploads/2023/02/managementgroups-768x474.png</a></p></figcaption></figure>

### Azure 订阅

- 这是另一个**逻辑容器，资源**（虚拟机、数据库等）可以在其中运行并计费。
- 它的**父级**始终是**管理组**（可以是根管理组），因为订阅不能包含其他订阅。
- 它**只信任一个Entra ID**目录。
- 在订阅级别（或其任何父级）应用的**权限**会**继承**到订阅内的所有资源。

### 资源组

[来自文档：](https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/manage-resource-groups-python?tabs=macos#what-is-a-resource-group) 资源组是一个**容器**，用于保存Azure解决方案的**相关资源**。资源组可以包括解决方案的所有资源，或仅包括您希望作为一组管理的**资源**。通常，将**共享相同生命周期**的**资源**添加到同一资源组，以便您可以轻松地作为一组进行部署、更新和删除。

所有的**资源**必须**在资源组内**，并且只能属于一个组，如果资源组被删除，组内的所有资源也会被删除。

<figure><img src="https://i0.wp.com/azuredays.com/wp-content/uploads/2020/05/org.png?resize=748%2C601&ssl=1" alt=""><figcaption><p><a href="https://i0.wp.com/azuredays.com/wp-content/uploads/2020/05/org.png?resize=748%2C601&ssl=1">https://i0.wp.com/azuredays.com/wp-content/uploads/2020/05/org.png?resize=748%2C601&ssl=1</a></p></figcaption></figure>

### Azure 资源 ID

Azure 中的每个资源都有一个 Azure 资源 ID 来标识它。

Azure 资源 ID 的格式如下：

- `/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{resourceType}/{resourceName}`

对于在资源组`myResourceGroup`下，订阅 ID 为`12345678-1234-1234-1234-123456789012`的名为 myVM 的虚拟机，Azure 资源 ID 如下所示：

- `/subscriptions/12345678-1234-1234-1234-123456789012/resourceGroups/myResourceGroup/providers/Microsoft.Compute/virtualMachines/myVM`

## Azure vs Entra ID vs Azure AD 域服务

### Azure

Azure 是微软的综合**云计算平台，提供广泛的服务**，包括虚拟机、数据库、人工智能和存储。它作为托管和管理应用程序、构建可扩展基础设施以及在云中运行现代工作负载的基础。Azure 为开发人员和 IT 专业人员提供工具，以无缝创建、部署和管理应用程序和服务，满足从初创企业到大型企业的各种需求。

### Entra ID（前称 Azure Active Directory）

Entra ID 是一个基于云的**身份和访问管理服务**，旨在处理身份验证、授权和用户访问控制。它为 Microsoft 服务（如 Office 365、Azure 和许多第三方 SaaS 应用程序）提供安全访问。具有单点登录（SSO）、多因素身份验证（MFA）和条件访问策略等功能。

### Entra 域服务（前称 Azure AD DS）

Entra 域服务通过提供**与传统 Windows Active Directory 环境兼容的托管域服务**扩展了 Entra ID 的功能。它支持 LDAP、Kerberos 和 NTLM 等遗留协议，允许组织在云中迁移或运行旧应用程序，而无需部署本地域控制器。此服务还支持组策略以进行集中管理，使其适合需要与现代云环境共存的遗留或基于 AD 的工作负载场景。

## Entra ID 主体

### 用户

- **新用户**
- 指定所选租户的电子邮件名称和域
- 指定显示名称
- 指定密码
- 指定属性（名字、职位、联系信息等）
- 默认用户类型为“**成员**”
- **外部用户**
- 指定邀请的电子邮件和显示名称（可以是非微软电子邮件）
- 指定属性
- 默认用户类型为“**访客**”

### 成员和访客默认权限

您可以在 [https://learn.microsoft.com/en-us/entra/fundamentals/users-default-permissions](https://learn.microsoft.com/en-us/entra/fundamentals/users-default-permissions) 中查看它们，但成员可以执行的其他操作包括：

- 读取所有用户、组、应用程序、设备、角色、订阅及其公共属性
- 邀请访客（_可以关闭_）
- 创建安全组
- 读取非隐藏的组成员资格
- 将访客添加到拥有的组
- 创建新应用程序（_可以关闭_）
- 将最多 50 个设备添加到 Azure（_可以关闭_）

> [!NOTE]
> 请记住，要枚举 Azure 资源，用户需要明确授予权限。

### 用户默认可配置权限

- **成员（**[**文档**](https://learn.microsoft.com/en-gb/entra/fundamentals/users-default-permissions#restrict-member-users-default-permissions)**）**
- 注册应用程序：默认**是**
- 限制非管理员用户创建租户：默认**否**
- 创建安全组：默认**是**
- 限制访问 Microsoft Entra 管理门户：默认**否**
- 这不会限制对门户的 API 访问（仅限网页）
- 允许用户将工作或学校帐户与 LinkedIn 连接：默认**是**
- 显示保持用户登录：默认**是**
- 限制用户恢复其拥有设备的 BitLocker 密钥：默认否（请在设备设置中检查）
- 读取其他用户：默认**是**（通过 Microsoft Graph）
- **访客**
- **访客用户访问限制**选项：
- **访客用户与成员具有相同的访问权限**。
- **访客用户对目录对象的属性和成员资格的访问有限（默认）**。这限制了访客访问仅限于他们自己的用户资料。对其他用户和组信息的访问不再允许。
- **访客用户访问限制为仅限于他们自己目录对象的属性和成员资格**是最严格的。
- **访客可以邀请**选项：
- **组织中的任何人都可以邀请访客用户，包括访客和非管理员（最具包容性） - 默认**
- **成员用户和分配给特定管理员角色的用户可以邀请访客用户，包括具有成员权限的访客**
- **只有分配给特定管理员角色的用户可以邀请访客用户**
- **组织中的任何人都不能邀请访客用户，包括管理员（最严格）**
- **外部用户离开**：默认**为真**
- 允许外部用户离开组织

> [!TIP]
> 即使默认受到限制，具有授予权限的用户（成员和访客）仍可以执行上述操作。

### **组**

有**2种类型的组**：

- **安全组**：此类型的组用于授予成员对应用程序、资源的访问权限并分配许可证。用户、设备、服务主体和其他组可以是成员。
- **Microsoft 365 组**：此类型的组用于协作，给予成员对共享邮箱、日历、文件、SharePoint 站点等的访问权限。组成员只能是用户。
- 这将具有 EntraID 租户的**电子邮件地址**。

有**2种类型的成员资格**：

- **分配**：允许手动将特定成员添加到组。
- **动态成员资格**：使用规则自动管理成员资格，当成员属性更改时更新组的包含。

### **服务主体**

**服务主体**是为**应用程序**、托管服务和自动化工具创建的**身份**，用于访问 Azure 资源。此访问权限由分配给服务主体的角色**限制**，使您能够控制**可以访问哪些资源**以及访问的级别。出于安全原因，始终建议**使用服务主体与自动化工具**，而不是允许它们使用用户身份登录。

可以通过生成**密钥**（密码）、**证书**或授予对第三方平台（例如 GitHub Actions）的**联合**访问来**直接以服务主体身份登录**。

- 如果选择**密码**身份验证（默认），请**保存生成的密码**，因为您将无法再次访问它。
- 如果选择证书身份验证，请确保**应用程序将能够访问私钥**。

### 应用注册

**应用注册**是一个配置，允许应用程序与 Entra ID 集成并执行操作。

#### 关键组件：

1. **应用程序 ID（客户端 ID）：** 您的应用在 Azure AD 中的唯一标识符。
2. **重定向 URI：** Azure AD 发送身份验证响应的 URL。
3. **证书、密钥和联合凭据：** 可以生成密钥或证书以作为应用程序的服务主体登录，或授予对其的联合访问（例如 GitHub Actions）。
4. 如果生成了**证书**或**密钥**，则可以通过知道**应用程序 ID**、**密钥**或**证书**以及**租户**（域或 ID）来**以服务主体身份登录**。
5. **API 权限：** 指定应用可以访问的资源或 API。
6. **身份验证设置：** 定义应用支持的身份验证流程（例如，OAuth2、OpenID Connect）。
7. **服务主体**：创建应用时会创建服务主体（如果是从网络控制台创建）或在新租户中安装时。
8. **服务主体**将获得其配置的所有请求权限。

### 默认同意权限

**用户对应用程序的同意**

- **不允许用户同意**
- 所有应用程序都需要管理员批准。
- **允许用户对来自经过验证的发布者的应用程序进行同意，针对选定的权限（推荐）**
- 所有用户可以对被分类为“低影响”的权限进行同意，适用于来自经过验证的发布者或在此组织中注册的应用程序。
- **默认**低影响权限（尽管您需要接受将其添加为低影响）：
- User.Read - 登录并读取用户资料
- offline_access - 维护对用户已授予访问权限的数据的访问
- openid - 登录用户
- profile - 查看用户的基本资料
- email - 查看用户的电子邮件地址
- **允许用户对应用程序进行同意（默认）**
- 所有用户可以同意任何应用程序访问组织的数据。

**管理员同意请求**：默认**否**

- 用户可以请求管理员同意他们无法同意的应用程序
- 如果**是**：可以指示可以同意请求的用户、组和角色
- 还可以配置用户是否会收到电子邮件通知和到期提醒

### **托管身份（元数据）**

Azure Active Directory 中的托管身份提供了一种**自动管理应用程序身份**的解决方案。这些身份由应用程序用于**连接**到与 Azure Active Directory（**Azure AD**）身份验证兼容的**资源**。这允许**消除在代码中硬编码云凭据**的需要，因为应用程序将能够联系**元数据**服务以获取有效令牌，以**作为指定的托管身份执行操作**。

托管身份有两种类型：

- **系统分配**。某些 Azure 服务允许您**直接在服务实例上启用托管身份**。当您启用系统分配的托管身份时，会在资源所在的订阅中创建一个**服务主体**，该订阅信任 Entra ID 租户。当**资源**被**删除**时，Azure 会自动为您**删除**该**身份**。
- **用户分配**。用户也可以生成托管身份。这些身份是在订阅内的资源组中创建的，并且将在 EntraID 中创建一个服务主体，该主体由订阅信任。然后，您可以将托管身份分配给一个或**多个 Azure 服务实例**（多个资源）。对于用户分配的托管身份，**身份与使用它的资源是分开管理的**。

托管身份**不会生成永久凭据**（如密码或证书）以访问与其附加的服务主体。

### 企业应用程序

这只是一个**在 Azure 中过滤服务主体**并检查已分配应用程序的表。

**这不是另一种“应用程序”**，在 Azure 中没有任何对象是“企业应用程序”，这只是检查服务主体、应用注册和托管身份的抽象。

### 管理单位

管理单位允许**从角色中授予对组织特定部分的权限**。

示例：

- 场景：一家公司希望区域 IT 管理员仅管理自己区域的用户。
- 实施：
- 为每个区域创建管理单位（例如，“北美 AU”、“欧洲 AU”）。
- 用来自各自区域的用户填充 AU。
- AU 可以**包含用户、组或设备**
- AU 支持**动态成员资格**
- AU **不能包含 AU**
- 分配管理员角色：
- 将“用户管理员”角色授予区域 IT 员工，范围限制在其区域的 AU。
- 结果：区域 IT 管理员可以管理其区域内的用户帐户，而不影响其他区域。

### Entra ID 角色

- 为了管理 Entra ID，有一些**内置角色**可以分配给 Entra ID 主体以管理 Entra ID
- 在 [https://learn.microsoft.com/en-us/entra/identity/role-based-access-control/permissions-reference](https://learn.microsoft.com/en-us/entra/identity/role-based-access-control/permissions-reference) 中查看角色
- 权限最高的角色是**全局管理员**
- 在角色描述中可以看到其**细粒度权限**

## 角色与权限

**角色**是**分配**给**主体**的**范围**：`principal -[HAS ROLE]->(scope)`

**分配给组的角色**会被**组内所有成员继承**。

根据角色分配的范围，**角色**可能会**继承**到**范围容器内的其他资源**。例如，如果用户 A 在订阅上有一个**角色**，他将在订阅内的所有资源组和资源组内的**所有资源**上拥有该**角色**。

### 经典角色

| **所有者**                     | <ul><li>对所有资源具有完全访问权限</li><li>可以管理其他用户的访问权限</li></ul> | 所有资源类型 |
| ----------------------------- | ---------------------------------------------------------------------------------------- | ------------------ |
| **贡献者**               | <ul><li>对所有资源具有完全访问权限</li><li>不能管理访问权限</li></ul>              | 所有资源类型 |
| **读取者**                    | • 查看所有资源                                                                     | 所有资源类型 |
| **用户访问管理员** | <ul><li>查看所有资源</li><li>可以管理其他用户的访问权限</li></ul>           | 所有资源类型 |

### 内置角色

[来自文档： ](https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles)[Azure 基于角色的访问控制（Azure RBAC）](https://learn.microsoft.com/en-us/azure/role-based-access-control/overview)有多个 Azure **内置角色**，您可以将其**分配**给**用户、组、服务主体和托管身份**。角色分配是您控制**对 Azure 资源的访问**的方式。如果内置角色不满足您组织的特定需求，您可以创建自己的 [**Azure 自定义角色**](https://learn.microsoft.com/en-us/azure/role-based-access-control/custom-roles)**。**

**内置**角色仅适用于**它们所针对的资源**，例如检查这两个**内置角色**在计算资源上的示例：

| [磁盘备份读取者](https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#disk-backup-reader)                 | 提供备份库执行磁盘备份的权限。      | 3e5e47e6-65f7-47ef-90b5-e5dd4d455f24 |
| ----------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------- | ------------------------------------ |
| [虚拟机用户登录](https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#virtual-machine-user-login) | 在门户中查看虚拟机并以普通用户身份登录。 | fb879df8-f326-4884-b1cf-06f3ad86be52 |

这些角色也可以**分配给逻辑容器**（如管理组、订阅和资源组），受影响的主体将在**这些容器内的资源上**拥有它们。

- 在这里找到 [**所有 Azure 内置角色**](https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles) 的列表。
- 在这里找到 [**所有 Entra ID 内置角色**](https://learn.microsoft.com/en-us/azure/active-directory/roles/permissions-reference) 的列表。

### 自定义角色

- 也可以创建 [**自定义角色**](https://learn.microsoft.com/en-us/azure/role-based-access-control/custom-roles)
- 它们是在一个范围内创建的，尽管一个角色可以在多个范围内（管理组、订阅和资源组）
- 可以配置自定义角色将具有的所有细粒度权限
- 可以排除权限
- 拥有被排除权限的主体即使在其他地方授予权限也无法使用该权限
- 可以使用通配符
- 使用的格式是 JSON
- `actions` 指的是对资源进行管理操作的权限，例如创建、更新或删除资源定义和设置。
- `dataActions` 是对资源内数据操作的权限，允许您读取、写入或删除资源中包含的实际数据。
- `notActions` 和 `notDataActions` 用于从角色中排除特定权限。但是，**它们并不拒绝这些权限**，如果其他角色授予它们，主体将拥有这些权限。
- `assignableScopes` 是可以分配角色的范围数组（如管理组、订阅或资源组）。

自定义角色的权限 JSON 示例：
```json
{
"properties": {
"roleName": "",
"description": "",
"assignableScopes": ["/subscriptions/9291ff6e-6afb-430e-82a4-6f04b2d05c7f"],
"permissions": [
{
"actions": [
"Microsoft.DigitalTwins/register/action",
"Microsoft.DigitalTwins/unregister/action",
"Microsoft.DigitalTwins/operations/read",
"Microsoft.DigitalTwins/digitalTwinsInstances/read",
"Microsoft.DigitalTwins/digitalTwinsInstances/write",
"Microsoft.CostManagement/exports/*"
],
"notActions": [
"Astronomer.Astro/register/action",
"Astronomer.Astro/unregister/action",
"Astronomer.Astro/operations/read",
"Astronomer.Astro/organizations/read"
],
"dataActions": [],
"notDataActions": []
}
]
}
}
```
### 权限顺序

- 为了让一个 **主体对资源有某些访问权限**，他需要被授予一个明确的角色（以任何方式）**授予他该权限**。
- 明确的 **拒绝分配优先于** 授予权限的角色。

<figure><img src="../../../images/image (191).png" alt=""><figcaption><p><a href="https://link.springer.com/chapter/10.1007/978-1-4842-7325-8_10">https://link.springer.com/chapter/10.1007/978-1-4842-7325-8_10</a></p></figcaption></figure>

### 全局管理员

全局管理员是 Entra ID 的一个角色，授予 **对 Entra ID 租户的完全控制**。然而，默认情况下，它并不授予对 Azure 资源的任何权限。

拥有全局管理员角色的用户可以在根管理组中 '**提升' 为用户访问管理员 Azure 角色**。因此，全局管理员可以管理 **所有 Azure 订阅和管理组的访问**。\
此提升可以在页面底部完成：[https://portal.azure.com/#view/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/\~/Properties](https://portal.azure.com/#view/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/~/Properties)

<figure><img src="../../../images/image (349).png" alt=""><figcaption></figcaption></figure>

### 分配条件与 MFA

可以 **在将角色分配给主体时建立一些条件**。一个常见的条件是要求 MFA 以访问某些角色权限：
```bash
az role assignment create \
--assignee <user-or-service-principal-id> \
--role <custom-role-id-or-name> \
--scope "/subscriptions/9291ff6e-6afb-430e-82a4-6f04b2d05c7f" \
--condition "PrincipalClaims['amr'] contains 'mfa'" \
--condition-version 2.0
```
### Deny Assignments

就像角色分配一样，**deny assignments** 用于 **控制对 Azure 资源的访问**。然而，**deny assignments** 用于 **明确拒绝对资源的访问**，即使用户通过角色分配获得了访问权限。**Deny assignments** 优先于 **role assignments**，这意味着如果用户通过角色分配获得了访问权限，但也通过 deny assignment 明确拒绝了访问，则 deny assignment 将优先。

就像角色分配一样，**deny assignments** 应用于某个范围，指示受影响的主体和被拒绝的权限。此外，在 deny assignments 的情况下，可以 **防止拒绝被子资源继承**。

### Azure Policies

**Azure Policies** 是帮助组织确保其资源符合特定标准和合规要求的规则。它们允许您 **强制执行或审核 Azure 中资源的设置**。例如，您可以防止在未经授权的区域创建虚拟机，或确保所有资源都有特定的标签以便跟踪。

Azure Policies 是 **主动的**：它们可以阻止不合规资源的创建或更改。它们也是 **反应性的**，允许您查找并修复现有的不合规资源。

#### **Key Concepts**

1. **Policy Definition**: 一条规则，采用 JSON 编写，指定允许或要求的内容。
2. **Policy Assignment**: 将政策应用于特定范围（例如，订阅、资源组）。
3. **Initiatives**: 一组政策的集合，用于更广泛的执行。
4. **Effect**: 指定当政策被触发时会发生什么（例如，“Deny”，“Audit”或“Append”）。

**一些示例：**

1. **确保符合特定 Azure 区域的合规性**：此政策确保所有资源在特定 Azure 区域中部署。例如，一家公司可能希望确保其所有数据存储在欧洲以符合 GDPR 合规性。
2. **强制命名标准**：政策可以强制 Azure 资源的命名约定。这有助于根据名称组织和轻松识别资源，这在大型环境中非常有用。
3. **限制某些资源类型**：此政策可以限制某些类型资源的创建。例如，可以设置政策以防止创建昂贵的资源类型，如某些 VM 大小，以控制成本。
4. **强制标签政策**：标签是与 Azure 资源关联的键值对，用于资源管理。政策可以强制要求所有资源必须存在某些标签，或具有特定值。这对于成本跟踪、所有权或资源分类非常有用。
5. **限制对资源的公共访问**：政策可以强制某些资源（如存储帐户或数据库）没有公共端点，确保它们仅在组织的网络内可访问。
6. **自动应用安全设置**：政策可以用于自动将安全设置应用于资源，例如将特定的网络安全组应用于所有 VM，或确保所有存储帐户使用加密。

请注意，Azure Policies 可以附加到 Azure 层次结构的任何级别，但它们 **通常用于根管理组** 或其他管理组。

Azure policy json example:
```json
{
"policyRule": {
"if": {
"field": "location",
"notIn": ["eastus", "westus"]
},
"then": {
"effect": "Deny"
}
},
"parameters": {},
"displayName": "Allow resources only in East US and West US",
"description": "This policy ensures that resources can only be created in East US or West US.",
"mode": "All"
}
```
### 权限继承

在 Azure **权限可以分配给层次结构的任何部分**。这包括管理组、订阅、资源组和单个资源。权限由分配它们的实体的包含 **资源** 继承。

这种层次结构允许高效且可扩展的访问权限管理。

<figure><img src="../../../images/image (26).png" alt=""><figcaption></figcaption></figure>

### Azure RBAC 与 ABAC

**RBAC**（基于角色的访问控制）是我们在前面的部分中已经看到的内容：**将角色分配给主体以授予其对资源的访问权限**。\
然而，在某些情况下，您可能希望提供 **更细粒度的访问管理** 或 **简化** 数百个角色 **分配** 的管理。

Azure **ABAC**（基于属性的访问控制）在 Azure RBAC 的基础上，通过在特定操作的上下文中添加 **基于属性的角色分配条件** 来构建。_角色分配条件_ 是您可以选择性地添加到角色分配中的 **额外检查**，以提供更细粒度的访问控制。条件过滤掉作为角色定义和角色分配一部分授予的权限。例如，您可以 **添加一个条件，要求对象具有特定标签才能读取该对象**。\
您 **不能** 明确 **拒绝** **对特定资源的访问** **使用条件**。

## 参考文献

- [https://learn.microsoft.com/en-us/azure/governance/management-groups/overview](https://learn.microsoft.com/en-us/azure/governance/management-groups/overview)
- [https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/ready/azure-best-practices/organize-subscriptions](https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/ready/azure-best-practices/organize-subscriptions)
- [https://abouttmc.com/glossary/azure-subscription/#:\~:text=An%20Azure%20subscription%20is%20a,the%20subscription%20it%20belongs%20to.](https://abouttmc.com/glossary/azure-subscription/)
- [https://learn.microsoft.com/en-us/azure/role-based-access-control/overview#how-azure-rbac-determines-if-a-user-has-access-to-a-resource](https://learn.microsoft.com/en-us/azure/role-based-access-control/overview#how-azure-rbac-determines-if-a-user-has-access-to-a-resource)
- [https://stackoverflow.com/questions/65922566/what-are-the-differences-between-service-principal-and-app-registration](https://stackoverflow.com/questions/65922566/what-are-the-differences-between-service-principal-and-app-registration)

{{#include ../../../banners/hacktricks-training.md}}
