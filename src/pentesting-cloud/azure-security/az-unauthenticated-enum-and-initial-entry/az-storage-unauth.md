# Az - Storage Unauth

{{#include ../../../banners/hacktricks-training.md}}

## Storage Unauth

Για περισσότερες πληροφορίες σχετικά με την αποθήκευση, ελέγξτε:

{{#ref}}
../az-services/az-storage.md
{{#endref}}

### Open Storage

Μπορείτε να ανακαλύψετε ανοιχτή αποθήκευση με ένα εργαλείο όπως το [**InvokeEnumerateAzureBlobs.ps1**](https://github.com/NetSPI/MicroBurst/blob/master/Misc/Invoke-EnumerateAzureBlobs.ps1) το οποίο θα χρησιμοποιήσει το αρχείο **`Microburst/Misc/permutations.txt`** για να δημιουργήσει παραλλαγές (πολύ απλές) για να προσπαθήσει να **βρει ανοιχτούς λογαριασμούς αποθήκευσης**.
```bash
Import-Module .\MicroBurst\MicroBurst.psm1
Invoke-EnumerateAzureBlobs -Base corp
[...]
https://corpcommon.blob.core.windows.net/secrets?restype=container&comp=list
[...]

# Access https://corpcommon.blob.core.windows.net/secrets?restype=container&comp=list
# Check: <Name>ssh_info.json</Name>
# Access then https://corpcommon.blob.core.windows.net/secrets/ssh_info.json
```
Μπορείτε επίσης να χρησιμοποιήσετε μια μέθοδο από [**MicroBust**](https://github.com/NetSPI/MicroBurst) για αυτόν τον σκοπό. Αυτή η λειτουργία θα αναζητήσει το βασικό όνομα τομέα (και μερικές παραλλαγές) σε αρκετούς **azure domains** (συμπεριλαμβανομένων των τομέων αποθήκευσης):
```bash
Import-Module .\MicroBurst\MicroBurst.psm1 -Verbose
Invoke-EnumerateAzureSubDomains -Base corp -Verbose
```
### SAS URLs

Ένα _**shared access signature**_ (SAS) URL είναι ένα URL που **παρέχει πρόσβαση** σε συγκεκριμένο μέρος ενός λογαριασμού Storage (μπορεί να είναι ένα πλήρες container, ένα αρχείο...) με ορισμένες συγκεκριμένες άδειες (ανάγνωση, εγγραφή...) πάνω στους πόρους. Αν βρείτε ένα που έχει διαρρεύσει, θα μπορούσατε να έχετε πρόσβαση σε ευαίσθητες πληροφορίες, μοιάζουν έτσι (αυτό είναι για πρόσβαση σε ένα container, αν απλώς χορηγούσε πρόσβαση σε ένα αρχείο, η διαδρομή του URL θα περιλάμβανε επίσης αυτό το αρχείο):

`https://<storage_account_name>.blob.core.windows.net/newcontainer?sp=r&st=2021-09-26T18:15:21Z&se=2021-10-27T02:14:21Z&spr=https&sv=2021-07-08&sr=c&sig=7S%2BZySOgy4aA3Dk0V1cJyTSIf1cW%2Fu3WFkhHV32%2B4PE%3D`

Χρησιμοποιήστε [**Storage Explorer**](https://azure.microsoft.com/en-us/features/storage-explorer/) για να αποκτήσετε πρόσβαση στα δεδομένα


{{#include ../../../banners/hacktricks-training.md}}
