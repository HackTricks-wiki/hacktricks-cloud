# Az - Storage Unauth

{{#include ../../../banners/hacktricks-training.md}}

## Storage Unauth

Para mais informações sobre armazenamento, consulte:

{{#ref}}
../az-services/az-storage.md
{{#endref}}

### Open Storage

Você pode descobrir armazenamento aberto com uma ferramenta como [**InvokeEnumerateAzureBlobs.ps1**](https://github.com/NetSPI/MicroBurst/blob/master/Misc/Invoke-EnumerateAzureBlobs.ps1), que usará o arquivo **`Microburst/Misc/permutations.txt`** para gerar permutações (muito simples) para tentar **encontrar contas de armazenamento abertas**.
```bash
Import-Module .\MicroBurst\MicroBurst.psm1
Invoke-EnumerateAzureBlobs -Base corp
[...]
https://corpcommon.blob.core.windows.net/secrets?restype=container&comp=list
[...]

# Access https://corpcommon.blob.core.windows.net/secrets?restype=container&comp=list
# Check: <Name>ssh_info.json</Name>
# Access then https://corpcommon.blob.core.windows.net/secrets/ssh_info.json
```
Você também pode usar um método do [**MicroBust**](https://github.com/NetSPI/MicroBurst) para esse objetivo. Esta função irá buscar o nome do domínio base (e algumas permutações) em vários **domínios azure** (incluindo domínios de armazenamento):
```bash
Import-Module .\MicroBurst\MicroBurst.psm1 -Verbose
Invoke-EnumerateAzureSubDomains -Base corp -Verbose
```
### SAS URLs

Uma _**assinatura de acesso compartilhado**_ (SAS) URL é uma URL que **fornece acesso** a uma parte específica de uma conta de Armazenamento (pode ser um contêiner completo, um arquivo...) com algumas permissões específicas (leitura, escrita...) sobre os recursos. Se você encontrar uma vazada, poderá acessar informações sensíveis, elas se parecem com isso (isso é para acessar um contêiner, se fosse apenas concedendo acesso a um arquivo, o caminho da URL também conteria esse arquivo):

`https://<storage_account_name>.blob.core.windows.net/newcontainer?sp=r&st=2021-09-26T18:15:21Z&se=2021-10-27T02:14:21Z&spr=https&sv=2021-07-08&sr=c&sig=7S%2BZySOgy4aA3Dk0V1cJyTSIf1cW%2Fu3WFkhHV32%2B4PE%3D`

Use [**Storage Explorer**](https://azure.microsoft.com/en-us/features/storage-explorer/) para acessar os dados


{{#include ../../../banners/hacktricks-training.md}}
