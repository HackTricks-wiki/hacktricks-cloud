# Az - Storage Unauth

{{#include ../../../banners/hacktricks-training.md}}

## Storage Unauth

저장소에 대한 자세한 정보는 다음을 확인하세요:

{{#ref}}
../az-services/az-storage.md
{{#endref}}

### Open Storage

[**InvokeEnumerateAzureBlobs.ps1**](https://github.com/NetSPI/MicroBurst/blob/master/Misc/Invoke-EnumerateAzureBlobs.ps1)와 같은 도구를 사용하여 열린 저장소를 발견할 수 있습니다. 이 도구는 **`Microburst/Misc/permutations.txt`** 파일을 사용하여 **열린 저장소 계정**을 찾기 위해 (매우 간단한) 조합을 생성합니다.
```bash
Import-Module .\MicroBurst\MicroBurst.psm1
Invoke-EnumerateAzureBlobs -Base corp
[...]
https://corpcommon.blob.core.windows.net/secrets?restype=container&comp=list
[...]

# Access https://corpcommon.blob.core.windows.net/secrets?restype=container&comp=list
# Check: <Name>ssh_info.json</Name>
# Access then https://corpcommon.blob.core.windows.net/secrets/ssh_info.json
```
이러한 목표를 위해 [**MicroBust**](https://github.com/NetSPI/MicroBurst)에서 방법을 사용할 수도 있습니다. 이 기능은 여러 **azure 도메인**(저장소 도메인 포함)에서 기본 도메인 이름(및 몇 가지 변형)을 검색합니다:
```bash
Import-Module .\MicroBurst\MicroBurst.psm1 -Verbose
Invoke-EnumerateAzureSubDomains -Base corp -Verbose
```
### SAS URLs

_**공유 액세스 서명**_ (SAS) URL은 특정 Storage 계정의 일부(전체 컨테이너, 파일 등)에 대한 **액세스**를 제공하는 URL로, 리소스에 대한 특정 권한(읽기, 쓰기 등)을 가지고 있습니다. 유출된 SAS URL을 찾으면 민감한 정보에 접근할 수 있습니다. SAS URL은 다음과 같은 형식입니다(컨테이너에 접근하는 경우이며, 파일에 대한 접근만 허용하는 경우 URL의 경로에도 해당 파일이 포함됩니다):

`https://<storage_account_name>.blob.core.windows.net/newcontainer?sp=r&st=2021-09-26T18:15:21Z&se=2021-10-27T02:14:21Z&spr=https&sv=2021-07-08&sr=c&sig=7S%2BZySOgy4aA3Dk0V1cJyTSIf1cW%2Fu3WFkhHV32%2B4PE%3D`

[**Storage Explorer**](https://azure.microsoft.com/en-us/features/storage-explorer/)를 사용하여 데이터에 접근하세요.


{{#include ../../../banners/hacktricks-training.md}}
