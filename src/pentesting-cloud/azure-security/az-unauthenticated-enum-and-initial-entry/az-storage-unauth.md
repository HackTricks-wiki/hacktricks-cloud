# Az - Storage Unauth

{{#include ../../../banners/hacktricks-training.md}}

## Storage Unauth

Aby uzyskać więcej informacji na temat przechowywania, sprawdź:

{{#ref}}
../az-services/az-storage.md
{{#endref}}

### Open Storage

Możesz odkryć otwarte przechowywanie za pomocą narzędzia takiego jak [**InvokeEnumerateAzureBlobs.ps1**](https://github.com/NetSPI/MicroBurst/blob/master/Misc/Invoke-EnumerateAzureBlobs.ps1), które użyje pliku **`Microburst/Misc/permutations.txt`** do generowania permutacji (bardzo prostych), aby spróbować **znaleźć otwarte konta przechowywania**.
```bash
Import-Module .\MicroBurst\MicroBurst.psm1
Invoke-EnumerateAzureBlobs -Base corp
[...]
https://corpcommon.blob.core.windows.net/secrets?restype=container&comp=list
[...]

# Access https://corpcommon.blob.core.windows.net/secrets?restype=container&comp=list
# Check: <Name>ssh_info.json</Name>
# Access then https://corpcommon.blob.core.windows.net/secrets/ssh_info.json
```
Możesz również użyć metody z [**MicroBust**](https://github.com/NetSPI/MicroBurst) w tym celu. Ta funkcja będzie wyszukiwać podstawową nazwę domeny (i kilka permutacji) w kilku **azure domains** (w tym domenach storage):
```bash
Import-Module .\MicroBurst\MicroBurst.psm1 -Verbose
Invoke-EnumerateAzureSubDomains -Base corp -Verbose
```
### SAS URLs

_**Podpis dostępu współdzielonego**_ (SAS) URL to URL, który **zapewnia dostęp** do określonej części konta Storage (może to być cały kontener, plik...) z określonymi uprawnieniami (odczyt, zapis...) do zasobów. Jeśli znajdziesz jeden wyciekły, możesz uzyskać dostęp do wrażliwych informacji, wyglądają one tak (to jest dostęp do kontenera, jeśli dotyczyło to tylko przyznania dostępu do pliku, ścieżka URL również będzie zawierać ten plik):

`https://<storage_account_name>.blob.core.windows.net/newcontainer?sp=r&st=2021-09-26T18:15:21Z&se=2021-10-27T02:14:21Z&spr=https&sv=2021-07-08&sr=c&sig=7S%2BZySOgy4aA3Dk0V1cJyTSIf1cW%2Fu3WFkhHV32%2B4PE%3D`

Użyj [**Storage Explorer**](https://azure.microsoft.com/en-us/features/storage-explorer/), aby uzyskać dostęp do danych


{{#include ../../../banners/hacktricks-training.md}}
