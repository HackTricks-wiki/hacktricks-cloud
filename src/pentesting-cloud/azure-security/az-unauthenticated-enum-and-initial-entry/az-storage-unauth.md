# Az - Storage Unauth

{{#include ../../../banners/hacktricks-training.md}}

## Storage Unauth

Kwa maelezo zaidi kuhusu uhifadhi angalia:

{{#ref}}
../az-services/az-storage.md
{{#endref}}

### Open Storage

Unaweza kugundua uhifadhi wazi kwa kutumia chombo kama [**InvokeEnumerateAzureBlobs.ps1**](https://github.com/NetSPI/MicroBurst/blob/master/Misc/Invoke-EnumerateAzureBlobs.ps1) ambacho kitatumia faili **`Microburst/Misc/permutations.txt`** kuunda permutations (rahisi sana) kujaribu **kupata akaunti za uhifadhi wazi**.
```bash
Import-Module .\MicroBurst\MicroBurst.psm1
Invoke-EnumerateAzureBlobs -Base corp
[...]
https://corpcommon.blob.core.windows.net/secrets?restype=container&comp=list
[...]

# Access https://corpcommon.blob.core.windows.net/secrets?restype=container&comp=list
# Check: <Name>ssh_info.json</Name>
# Access then https://corpcommon.blob.core.windows.net/secrets/ssh_info.json
```
Unaweza pia kutumia njia kutoka [**MicroBust**](https://github.com/NetSPI/MicroBurst) kwa lengo hilo. Kazi hii itatafuta jina la kikoa cha msingi (na permutations chache) katika **azure domains** kadhaa (ikiwemo kikoa cha hifadhi):
```bash
Import-Module .\MicroBurst\MicroBurst.psm1 -Verbose
Invoke-EnumerateAzureSubDomains -Base corp -Verbose
```
### SAS URLs

A _**shared access signature**_ (SAS) URL ni URL ambayo **inatoa ufikiaji** kwa sehemu fulani ya akaunti ya Hifadhi (inaweza kuwa kontena kamili, faili...) kwa ruhusa maalum (kusoma, kuandika...) juu ya rasilimali hizo. Ikiwa utapata moja iliyovuja unaweza kuwa na uwezo wa kufikia taarifa nyeti, zinaonekana kama hii (hii ni kufikia kontena, ikiwa ilikuwa inatoa ufikiaji kwa faili tu, njia ya URL itakuwa na faili hiyo pia):

`https://<storage_account_name>.blob.core.windows.net/newcontainer?sp=r&st=2021-09-26T18:15:21Z&se=2021-10-27T02:14:21Z&spr=https&sv=2021-07-08&sr=c&sig=7S%2BZySOgy4aA3Dk0V1cJyTSIf1cW%2Fu3WFkhHV32%2B4PE%3D`

Tumia [**Storage Explorer**](https://azure.microsoft.com/en-us/features/storage-explorer/) kufikia data


{{#include ../../../banners/hacktricks-training.md}}
