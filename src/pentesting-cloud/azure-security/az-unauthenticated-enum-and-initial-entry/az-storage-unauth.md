# Az - Storage Unauth

{{#include ../../../banners/hacktricks-training.md}}

## Storage Unauth

Для отримання додаткової інформації про зберігання, перегляньте:

{{#ref}}
../az-services/az-storage.md
{{#endref}}

### Open Storage

Ви можете виявити відкриті сховища за допомогою інструменту, такого як [**InvokeEnumerateAzureBlobs.ps1**](https://github.com/NetSPI/MicroBurst/blob/master/Misc/Invoke-EnumerateAzureBlobs.ps1), який використовуватиме файл **`Microburst/Misc/permutations.txt`** для генерації перестановок (дуже простих), щоб спробувати **знайти відкриті облікові записи зберігання**.
```bash
Import-Module .\MicroBurst\MicroBurst.psm1
Invoke-EnumerateAzureBlobs -Base corp
[...]
https://corpcommon.blob.core.windows.net/secrets?restype=container&comp=list
[...]

# Access https://corpcommon.blob.core.windows.net/secrets?restype=container&comp=list
# Check: <Name>ssh_info.json</Name>
# Access then https://corpcommon.blob.core.windows.net/secrets/ssh_info.json
```
Ви також можете використовувати метод з [**MicroBust**](https://github.com/NetSPI/MicroBurst) для досягнення цієї мети. Ця функція буде шукати базову доменну назву (та кілька пермутацій) у кількох **azure domains** (включаючи домени зберігання):
```bash
Import-Module .\MicroBurst\MicroBurst.psm1 -Verbose
Invoke-EnumerateAzureSubDomains -Base corp -Verbose
```
### SAS URLs

_**Спільний доступ до підпису**_ (SAS) URL - це URL, який **надає доступ** до певної частини облікового запису зберігання (може бути повний контейнер, файл...) з певними дозволами (читання, запис...) на ресурси. Якщо ви знайдете один з витоків, ви зможете отримати доступ до чутливої інформації, вони виглядають так (це для доступу до контейнера, якщо б це було просто надання доступу до файлу, шлях URL також міститиме цей файл):

`https://<storage_account_name>.blob.core.windows.net/newcontainer?sp=r&st=2021-09-26T18:15:21Z&se=2021-10-27T02:14:21Z&spr=https&sv=2021-07-08&sr=c&sig=7S%2BZySOgy4aA3Dk0V1cJyTSIf1cW%2Fu3WFkhHV32%2B4PE%3D`

Використовуйте [**Storage Explorer**](https://azure.microsoft.com/en-us/features/storage-explorer/), щоб отримати доступ до даних


{{#include ../../../banners/hacktricks-training.md}}
