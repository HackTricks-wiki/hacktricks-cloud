# Az - Storage Unauth

{{#include ../../../banners/hacktricks-training.md}}

## Storage Unauth

有关存储的更多信息，请查看：

{{#ref}}
../az-services/az-storage.md
{{#endref}}

### Open Storage

您可以使用工具如 [**InvokeEnumerateAzureBlobs.ps1**](https://github.com/NetSPI/MicroBurst/blob/master/Misc/Invoke-EnumerateAzureBlobs.ps1) 来发现开放存储，该工具将使用文件 **`Microburst/Misc/permutations.txt`** 生成排列（非常简单），以尝试 **查找开放存储帐户**。
```bash
Import-Module .\MicroBurst\MicroBurst.psm1
Invoke-EnumerateAzureBlobs -Base corp
[...]
https://corpcommon.blob.core.windows.net/secrets?restype=container&comp=list
[...]

# Access https://corpcommon.blob.core.windows.net/secrets?restype=container&comp=list
# Check: <Name>ssh_info.json</Name>
# Access then https://corpcommon.blob.core.windows.net/secrets/ssh_info.json
```
您还可以使用来自 [**MicroBust**](https://github.com/NetSPI/MicroBurst) 的方法来实现此目标。此功能将在多个 **azure domains**（包括存储域）中搜索基本域名（及其一些变体）：
```bash
Import-Module .\MicroBurst\MicroBurst.psm1 -Verbose
Invoke-EnumerateAzureSubDomains -Base corp -Verbose
```
### SAS URLs

一个 _**共享访问签名**_ (SAS) URL 是一个 **提供访问** 存储帐户某些部分的 URL（可以是整个容器、一个文件...），具有对资源的特定权限（读取、写入...）。如果你发现一个泄露的链接，你可能能够访问敏感信息，它们看起来像这样（这是访问一个容器，如果只是授予对一个文件的访问，URL 的路径也会包含该文件）：

`https://<storage_account_name>.blob.core.windows.net/newcontainer?sp=r&st=2021-09-26T18:15:21Z&se=2021-10-27T02:14:21Z&spr=https&sv=2021-07-08&sr=c&sig=7S%2BZySOgy4aA3Dk0V1cJyTSIf1cW%2Fu3WFkhHV32%2B4PE%3D`

使用 [**Storage Explorer**](https://azure.microsoft.com/en-us/features/storage-explorer/) 访问数据


{{#include ../../../banners/hacktricks-training.md}}
