# Az - Storage Persistence

{{#include ../../../banners/hacktricks-training.md}}

## Storage Privesc

स्टोरेज के बारे में अधिक जानकारी के लिए देखें:

{{#ref}}
../az-services/az-storage.md
{{#endref}}

### सामान्य तरकीबें

- एक्सेस कीज़ रखें
- SAS उत्पन्न करें
- उपयोगकर्ता प्रतिनिधित्व अधिकतम 7 दिन

### Microsoft.Storage/storageAccounts/blobServices/containers/update && Microsoft.Storage/storageAccounts/blobServices/deletePolicy/write

ये अनुमतियाँ उपयोगकर्ता को कंटेनर डिलीट रिटेंशन फीचर के लिए ब्लॉब सेवा गुणों को संशोधित करने की अनुमति देती हैं, जो हटाए गए कंटेनरों के लिए रिटेंशन अवधि को सक्षम या कॉन्फ़िगर करती है। इन अनुमतियों का उपयोग स्थिरता बनाए रखने के लिए किया जा सकता है ताकि हमलावर को हटाए गए कंटेनरों को पुनर्प्राप्त करने या हेरफेर करने का अवसर मिल सके, जिन्हें स्थायी रूप से हटाया जाना चाहिए था और संवेदनशील जानकारी तक पहुँचने की अनुमति मिल सके।
```bash
az storage account blob-service-properties update \
--account-name <STORAGE_ACCOUNT_NAME> \
--enable-container-delete-retention true \
--container-delete-retention-days 100
```
### Microsoft.Storage/storageAccounts/read && Microsoft.Storage/storageAccounts/listKeys/action

ये अनुमतियाँ हमलावर को रिटेंशन नीतियों को संशोधित करने, हटाए गए डेटा को पुनर्स्थापित करने और संवेदनशील जानकारी तक पहुँचने की अनुमति दे सकती हैं।
```bash
az storage blob service-properties delete-policy update \
--account-name <STORAGE_ACCOUNT_NAME> \
--enable true \
--days-retained 100
```
{{#include ../../../banners/hacktricks-training.md}}
