# Az - Storage Persistence

{{#include ../../../banners/hacktricks-training.md}}

## Storage Privesc

Depolama hakkında daha fazla bilgi için kontrol edin:

{{#ref}}
../az-services/az-storage.md
{{#endref}}

### Yaygın hileler

- Erişim anahtarlarını saklayın
- SAS oluşturun
- Kullanıcı devredilen en fazla 7 gündür

### Microsoft.Storage/storageAccounts/blobServices/containers/update && Microsoft.Storage/storageAccounts/blobServices/deletePolicy/write

Bu izinler, kullanıcının silinmiş konteynerler için saklama süresini etkinleştiren veya yapılandıran konteyner silme saklama özelliği için blob hizmeti özelliklerini değiştirmesine olanak tanır. Bu izinler, saldırganın kalıcı olarak silinmesi gereken silinmiş konteynerleri geri kazanması veya manipüle etmesi için bir fırsat penceresi sağlamak amacıyla kalıcılığı sürdürmek için kullanılabilir ve hassas bilgilere erişim sağlar.
```bash
az storage account blob-service-properties update \
--account-name <STORAGE_ACCOUNT_NAME> \
--enable-container-delete-retention true \
--container-delete-retention-days 100
```
### Microsoft.Storage/storageAccounts/read && Microsoft.Storage/storageAccounts/listKeys/action

Bu izinler, saldırganın saklama politikalarını değiştirmesine, silinmiş verileri geri yüklemesine ve hassas bilgilere erişmesine yol açabilir.
```bash
az storage blob service-properties delete-policy update \
--account-name <STORAGE_ACCOUNT_NAME> \
--enable true \
--days-retained 100
```
{{#include ../../../banners/hacktricks-training.md}}
