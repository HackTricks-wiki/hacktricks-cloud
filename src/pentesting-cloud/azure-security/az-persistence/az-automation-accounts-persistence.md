# Az - Automation Accounts Persistence

{{#include ../../../banners/hacktricks-training.md}}

## Storage Privesc

Automation Accounts hakkında daha fazla bilgi için kontrol edin:

{{#ref}}
../az-services/az-automation-accounts.md
{{#endref}}

### Mevcut runbook'a backdoor ekleme

Eğer bir saldırgan otomasyon hesabına erişim sağlarsa, mevcut bir runbook'a **backdoor ekleyebilir** ve runbook her çalıştırıldığında **kalıcılığı sağlamak** ve **veri sızdırmak** için token'lar gibi verileri dışarı aktarabilir.

### Programlar & Webhook'lar

Mevcut bir Runbook oluşturun veya değiştirin ve ona bir program veya webhook ekleyin. Bu, bir saldırgana **ortam üzerindeki erişim kaybolsa bile kalıcılığı sağlama** imkanı verecektir; backdoor'u çalıştırarak belirli zamanlarda veya istediği zaman webhok'a bir istek göndererek MI'den token'ları sızdırabilir.

### Hibrit işçi grubunda kullanılan bir VM içindeki kötü amaçlı yazılım

Eğer bir VM hibrit işçi grubu olarak kullanılıyorsa, bir saldırgan **kötü amaçlı yazılım** yükleyerek **kalıcılığı sağlamak** ve VM'ye ve otomasyon hesabına verilen yönetilen kimlikler için token'lar gibi verileri dışarı aktarmak için VM içinde **kötü amaçlı yazılım** kurabilir.

### Özel ortam paketleri

Eğer otomasyon hesabı özel ortamlarda özel paketler kullanıyorsa, bir saldırgan **paketi değiştirebilir** ve **kalıcılığı sağlamak** ve **veri sızdırmak** için token'lar gibi verileri dışarı aktarabilir. Bu, manuel olarak yüklenen özel paketlerin kötü amaçlı kod için nadiren kontrol edilmesi nedeniyle gizli bir kalıcılık yöntemi olacaktır.

### Harici reposları tehlikeye atma

Eğer otomasyon hesabı kodu depolamak için harici reposlar kullanıyorsa, bir saldırgan **repo'yu tehlikeye atabilir** ve **kalıcılığı sağlamak** ve **veri sızdırmak** için token'lar gibi verileri dışarı aktarabilir. Bu, kodun en son versiyonunun otomatik olarak runbook ile senkronize edilmesi durumunda özellikle ilginçtir.

{{#include ../../../banners/hacktricks-training.md}}
