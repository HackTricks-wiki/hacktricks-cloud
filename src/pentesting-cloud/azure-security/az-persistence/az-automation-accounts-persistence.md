# Az - Automation Accounts Persistence

{{#include ../../../banners/hacktricks-training.md}}

## Storage Privesc

Για περισσότερες πληροφορίες σχετικά με τους Automation Accounts, ελέγξτε:

{{#ref}}
../az-services/az-automation-accounts.md
{{#endref}}

### Backdoor existing runbook

Εάν ένας επιτιθέμενος έχει πρόσβαση στον λογαριασμό αυτοματισμού, θα μπορούσε **να προσθέσει ένα backdoor** σε ένα υπάρχον runbook για **να διατηρήσει την επιμονή** και **να εξάγει δεδομένα** όπως tokens κάθε φορά που εκτελείται το runbook.

### Σχέδια & Webhooks

Δημιουργήστε ή τροποποιήστε ένα υπάρχον Runbook και προσθέστε ένα σχέδιο ή webhook σε αυτό. Αυτό θα επιτρέψει σε έναν επιτιθέμενο να **διατηρήσει την επιμονή ακόμη και αν χαθεί η πρόσβαση στο περιβάλλον** εκτελώντας το backdoor που μπορεί να διαρρέει tokens από το MI σε συγκεκριμένες χρονικές στιγμές ή όποτε θέλει στέλνοντας ένα αίτημα στο webhook.

### Malware inside a VM used in a hybrid worker group

Εάν μια VM χρησιμοποιείται ως υβριδική ομάδα εργαζομένων, ένας επιτιθέμενος θα μπορούσε **να εγκαταστήσει κακόβουλο λογισμικό** μέσα στη VM για **να διατηρήσει την επιμονή** και **να εξάγει δεδομένα** όπως tokens για τις διαχειριζόμενες ταυτότητες που δίνονται στη VM και στον λογαριασμό αυτοματισμού χρησιμοποιώντας τη VM.

### Custom environment packages

Εάν ο λογαριασμός αυτοματισμού χρησιμοποιεί προσαρμοσμένα πακέτα σε προσαρμοσμένα περιβάλλοντα, ένας επιτιθέμενος θα μπορούσε **να τροποποιήσει το πακέτο** για **να διατηρήσει την επιμονή** και **να εξάγει δεδομένα** όπως tokens. Αυτό θα ήταν επίσης μια μέθοδος stealth επιμονής, καθώς τα προσαρμοσμένα πακέτα που ανεβαίνουν χειροκίνητα σπάνια ελέγχονται για κακόβουλο κώδικα.

### Compromise external repos

Εάν ο λογαριασμός αυτοματισμού χρησιμοποιεί εξωτερικά αποθετήρια για να αποθηκεύσει τον κώδικα όπως το Github, ένας επιτιθέμενος θα μπορούσε **να παραβιάσει το αποθετήριο** για **να διατηρήσει την επιμονή** και **να εξάγει δεδομένα** όπως tokens. Αυτό είναι ιδιαίτερα ενδιαφέρον αν η πιο πρόσφατη έκδοση του κώδικα συγχρονίζεται αυτόματα με το runbook.

{{#include ../../../banners/hacktricks-training.md}}
