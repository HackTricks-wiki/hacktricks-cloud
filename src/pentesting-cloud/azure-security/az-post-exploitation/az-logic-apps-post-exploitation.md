# Az - Logic Apps Post Exploitation

{% hint style="success" %}
Ucz siÄ™ i Ä‡wicz Hacking AWS:<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
Ucz siÄ™ i Ä‡wicz Hacking GCP: <img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wsparcie HackTricks</summary>

* SprawdÅº [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Dziel siÄ™ trikami hackingowymi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytoriÃ³w na githubie.

</details>
{% endhint %}

## Logic Apps Database Post Exploitation
Aby uzyskaÄ‡ wiÄ™cej informacji na temat aplikacji logicznych, sprawdÅº:

{% content-ref url="../az-services/az-logic-apps.md" %}
[az-logic-apps.md](../az-services/az-logic-apps.md)
{% endcontent-ref %}

### "Microsoft.Logic/workflows/read", "Microsoft.Logic/workflows/write" && "Microsoft.ManagedIdentity/userAssignedIdentities/assign/action"
DziÄ™ki tym uprawnieniom moÅ¼esz modyfikowaÄ‡ przepÅ‚ywy pracy aplikacji logicznych i zarzÄ…dzaÄ‡ ich toÅ¼samoÅ›ciami. W szczegÃ³lnoÅ›ci moÅ¼esz przypisywaÄ‡ lub usuwaÄ‡ toÅ¼samoÅ›ci zarzÄ…dzane przypisane do systemu i uÅ¼ytkownika do przepÅ‚ywÃ³w pracy, co pozwala aplikacji logicznej na uwierzytelnianie i dostÄ™p do innych zasobÃ³w Azure bez wyraÅºnych poÅ›wiadczeÅ„.

{% code overflow="wrap" %}
```bash
az logic workflow identity remove/assign \
--name <workflow_name> \
--resource-group <resource_group_name> \
--system-assigned true \
--user-assigned "/subscriptions/<subscription_id>/resourceGroups/<resource_group>/providers/Microsoft.ManagedIdentity/userAssignedIdentities/<identity_name>"
```
{% endcode %}

### "Microsoft.Web/sites/read", "Microsoft.Web/sites/write"
DziÄ™ki tym uprawnieniom moÅ¼esz tworzyÄ‡ lub aktualizowaÄ‡ Logic Apps hostowane na planie usÅ‚ugi App Service. Obejmuje to modyfikowanie ustawieÅ„, takich jak wÅ‚Ä…czanie lub wyÅ‚Ä…czanie wymuszenia HTTPS.

{% code overflow="wrap" %}
```bash
az logicapp update \
--resource-group <resource_group_name> \
--name <logic_app_name> \
--set httpsOnly=false
```
{% endcode %}

### "Microsoft.Web/sites/stop/action", "Microsoft.Web/sites/start/action" || "Microsoft.Web/sites/restart/action"
DziÄ™ki temu uprawnieniu moÅ¼esz uruchomiÄ‡/zatrzymaÄ‡/ponownie uruchomiÄ‡ aplikacjÄ™ internetowÄ…, w tym Logic Apps hostowane na planie usÅ‚ugi App Service. Ta akcja zapewnia, Å¼e wczeÅ›niej zatrzymana aplikacja zostaje uruchomiona i wznawia swojÄ… funkcjonalnoÅ›Ä‡. MoÅ¼e to zakÅ‚Ã³ciÄ‡ przepÅ‚ywy pracy, wywoÅ‚aÄ‡ niezamierzone operacje lub spowodowaÄ‡ przestoje poprzez nieoczekiwane uruchamianie, zatrzymywanie lub ponowne uruchamianie Logic Apps.

{% code overflow="wrap" %}
```bash
az webapp start/stop/restart \
--name <logic_app_name> \
--resource-group <resource_group_name>
```
{% endcode %}


### "Microsoft.Web/sites/config/list/action", "Microsoft.Web/sites/read" && "Microsoft.Web/sites/config/write"

DziÄ™ki temu uprawnieniu moÅ¼esz konfigurowaÄ‡ lub modyfikowaÄ‡ ustawienia aplikacji webowych, w tym Logic Apps hostowane na planie App Service. UmoÅ¼liwia to wprowadzanie zmian w ustawieniach aplikacji, ciÄ…gach poÅ‚Ä…czeÅ„, konfiguracjach uwierzytelniania i nie tylko.

{% code overflow="wrap" %}
```bash
az logicapp config appsettings set \
--name <logic_app_name> \
--resource-group <resource_group_name> \
--settings "<key>=<value>"
```
{% endcode %}

### "Microsoft.Logic/integrationAccounts/write"
DziÄ™ki temu uprawnieniu moÅ¼esz tworzyÄ‡, aktualizowaÄ‡ lub usuwaÄ‡ konta integracyjne Azure Logic Apps. Obejmuje to zarzÄ…dzanie konfiguracjami na poziomie konta integracyjnego, takimi jak mapy, schematy, partnerzy, umowy i inne.

{% code overflow="wrap" %}
```bash
az logic integration-account create \
--resource-group <resource_group_name> \
--name <integration_account_name> \
--location <location> \
--sku <Standard|Free> \
--state Enabled
```
{% endcode %}

### "Microsoft.Resources/subscriptions/resourcegroups/read" && "Microsoft.Logic/integrationAccounts/batchConfigurations/write"

DziÄ™ki temu uprawnieniu moÅ¼esz tworzyÄ‡ lub modyfikowaÄ‡ konfiguracje wsadowe w ramach konta integracyjnego Azure Logic Apps. Konfiguracje wsadowe definiujÄ…, w jaki sposÃ³b Logic Apps przetwarzajÄ… i grupujÄ… przychodzÄ…ce wiadomoÅ›ci do przetwarzania wsadowego.

{% code overflow="wrap" %}
```bash
az logic integration-account batch-configuration create \
--resource-group <resource_group_name> \
--integration-account-name <integration_account_name> \
--name <batch_configuration_name> \
--release-criteria '{
"messageCount": 100,
"batchSize": 1048576,
}'
```
{% endcode %}

### "Microsoft.Resources/subscriptions/resourcegroups/read" && "Microsoft.Logic/integrationAccounts/maps/write"
DziÄ™ki temu uprawnieniu moÅ¼esz tworzyÄ‡ lub modyfikowaÄ‡ mapy w ramach konta integracyjnego Azure Logic Apps. Mapy sÄ… uÅ¼ywane do przeksztaÅ‚cania danych z jednego formatu na inny, co umoÅ¼liwia bezproblemowÄ… integracjÄ™ miÄ™dzy rÃ³Å¼nymi systemami i aplikacjami.

{% code overflow="wrap" %}
```bash
az logic integration-account map create \
--resource-group <resource_group_name> \
--integration-account-name <integration_account_name> \
--name <map_name> \
--map-type <Xslt|Xslt20|Xslt30> \
--content-type application/xml \
--map-content map-content.xslt
```
{% endcode %}

### "Microsoft.Resources/subscriptions/resourcegroups/read" && "Microsoft.Logic/integrationAccounts/partners/write"
DziÄ™ki temu uprawnieniu moÅ¼esz tworzyÄ‡ lub modyfikowaÄ‡ partnerÃ³w w koncie integracyjnym Azure Logic Apps. Partnerzy reprezentujÄ… podmioty lub systemy, ktÃ³re uczestniczÄ… w procesach biznesowych typu business-to-business (B2B).

{% code overflow="wrap" %}
```bash
az logic integration-account partner create \
--resource-group <resource_group_name> \
--integration-account-name <integration_account_name> \
--name <partner_name> \
--partner-type <partner-type> \
--content '{
"b2b": {
"businessIdentities": [
{
"qualifier": "ZZ",
"value": "TradingPartner1"
}
]
}
}'
```
{% endcode %}

### "Microsoft.Resources/subscriptions/resourcegroups/read" && "Microsoft.Logic/integrationAccounts/sessions/write"
DziÄ™ki temu uprawnieniu moÅ¼esz tworzyÄ‡ lub modyfikowaÄ‡ sesje w ramach konta integracyjnego Azure Logic Apps. Sesje sÄ… uÅ¼ywane w przepÅ‚ywach pracy B2B do grupowania wiadomoÅ›ci i Å›ledzenia powiÄ…zanych transakcji w okreÅ›lonym okresie.

{% code overflow="wrap" %}
```bash
az logic integration-account session create \
--resource-group <resource_group_name> \
--integration-account-name <integration_account_name> \
--name <session_name> \
--content '{
"properties": {
"sessionId": "session123",
"data": {
"key1": "value1",
"key2": "value2"
}
}
}'
```
{% endcode %}

### "*/delete"
DziÄ™ki tym uprawnieniom moÅ¼esz usuwaÄ‡ zasoby zwiÄ…zane z Azure Logic Apps

{% hint style="success" %}
Ucz siÄ™ i Ä‡wicz Hacking AWS:<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
Ucz siÄ™ i Ä‡wicz Hacking GCP: <img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wsparcie dla HackTricks</summary>

* SprawdÅº [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Dziel siÄ™ trikami hackingowymi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytoriÃ³w na githubie.

</details>
{% endhint %}
