# Az - Logic Apps Post Exploitation

{% hint style="success" %}
Apprenez et pratiquez le hacking AWS :<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
Apprenez et pratiquez le hacking GCP : <img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Soutenir HackTricks</summary>

* Consultez les [**plans d'abonnement**](https://github.com/sponsors/carlospolop) !
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez-nous sur** **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Partagez des astuces de hacking en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts github.

</details>
{% endhint %}

## Post-exploitation de la base de donn√©es Logic Apps
Pour plus d'informations sur les applications logiques, consultez :

{% content-ref url="../az-services/az-logic-apps.md" %}
[az-logic-apps.md](../az-services/az-logic-apps.md)
{% endcontent-ref %}

### "Microsoft.Logic/workflows/read", "Microsoft.Logic/workflows/write" && "Microsoft.ManagedIdentity/userAssignedIdentities/assign/action"
Avec ces autorisations, vous pouvez modifier les workflows des Logic Apps et g√©rer leurs identit√©s. Plus pr√©cis√©ment, vous pouvez attribuer ou supprimer des identit√©s g√©r√©es assign√©es par le syst√®me et par l'utilisateur aux workflows, ce qui permet √† la Logic App de s'authentifier et d'acc√©der √† d'autres ressources Azure sans identifiants explicites.

{% code overflow="wrap" %}
```bash
az logic workflow identity remove/assign \
--name <workflow_name> \
--resource-group <resource_group_name> \
--system-assigned true \
--user-assigned "/subscriptions/<subscription_id>/resourceGroups/<resource_group>/providers/Microsoft.ManagedIdentity/userAssignedIdentities/<identity_name>"
```
{% endcode %}

### "Microsoft.Web/sites/read", "Microsoft.Web/sites/write"
Avec ces autorisations, vous pouvez cr√©er ou mettre √† jour des Logic Apps h√©berg√©es sur un App Service Plan. Cela inclut la modification des param√®tres tels que l'activation ou la d√©sactivation de l'application de l'HTTPS. 

{% code overflow="wrap" %}
```bash
az logicapp update \
--resource-group <resource_group_name> \
--name <logic_app_name> \
--set httpsOnly=false
```
{% endcode %}

### "Microsoft.Web/sites/stop/action", "Microsoft.Web/sites/start/action" || "Microsoft.Web/sites/restart/action"
Avec cette autorisation, vous pouvez d√©marrer/arr√™ter/red√©marrer une application web, y compris les Logic Apps h√©berg√©es sur un App Service Plan. Cette action garantit qu'une application pr√©c√©demment arr√™t√©e est remise en ligne et reprend sa fonctionnalit√©. Cela peut perturber les flux de travail, d√©clencher des op√©rations non intentionnelles ou provoquer des temps d'arr√™t en d√©marrant, arr√™tant ou red√©marrant des Logic Apps de mani√®re inattendue.

{% code overflow="wrap" %}
```bash
az webapp start/stop/restart \
--name <logic_app_name> \
--resource-group <resource_group_name>
```
{% endcode %}


### "Microsoft.Web/sites/config/list/action", "Microsoft.Web/sites/read" && "Microsoft.Web/sites/config/write"

Avec cette autorisation, vous pouvez configurer ou modifier les param√®tres des applications web, y compris les Logic Apps h√©berg√©es sur un App Service Plan. Cela permet de modifier les param√®tres de l'application, les cha√Ænes de connexion, les configurations d'authentification, et plus encore.

{% code overflow="wrap" %}
```bash
az logicapp config appsettings set \
--name <logic_app_name> \
--resource-group <resource_group_name> \
--settings "<key>=<value>"
```
{% endcode %}

### "Microsoft.Logic/integrationAccounts/write"
Avec cette autorisation, vous pouvez cr√©er, mettre √† jour ou supprimer des comptes d'int√©gration Azure Logic Apps. Cela inclut la gestion des configurations au niveau du compte d'int√©gration telles que les cartes, les sch√©mas, les partenaires, les accords, et plus encore.

{% code overflow="wrap" %}
```bash
az logic integration-account create \
--resource-group <resource_group_name> \
--name <integration_account_name> \
--location <location> \
--sku <Standard|Free> \
--state Enabled
```
{% endcode %}

### "Microsoft.Resources/subscriptions/resourcegroups/read" && "Microsoft.Logic/integrationAccounts/batchConfigurations/write"

Avec cette autorisation, vous pouvez cr√©er ou modifier des configurations de lot au sein d'un compte d'int√©gration Azure Logic Apps. Les configurations de lot d√©finissent comment Logic Apps traitent et regroupent les messages entrants pour le traitement par lots.

{% code overflow="wrap" %}
```bash
az logic integration-account batch-configuration create \
--resource-group <resource_group_name> \
--integration-account-name <integration_account_name> \
--name <batch_configuration_name> \
--release-criteria '{
"messageCount": 100,
"batchSize": 1048576,
}'
```
{% endcode %}

### "Microsoft.Resources/subscriptions/resourcegroups/read" && "Microsoft.Logic/integrationAccounts/maps/write"
Avec cette autorisation, vous pouvez cr√©er ou modifier des cartes au sein d'un compte d'int√©gration Azure Logic Apps. Les cartes sont utilis√©es pour transformer des donn√©es d'un format √† un autre, permettant une int√©gration transparente entre diff√©rents syst√®mes et applications.

{% code overflow="wrap" %}
```bash
az logic integration-account map create \
--resource-group <resource_group_name> \
--integration-account-name <integration_account_name> \
--name <map_name> \
--map-type <Xslt|Xslt20|Xslt30> \
--content-type application/xml \
--map-content map-content.xslt
```
{% endcode %}

### "Microsoft.Resources/subscriptions/resourcegroups/read" && "Microsoft.Logic/integrationAccounts/partners/write"
Avec cette autorisation, vous pouvez cr√©er ou modifier des partenaires dans un compte d'int√©gration Azure Logic Apps. Les partenaires repr√©sentent des entit√©s ou des syst√®mes qui participent √† des flux de travail interentreprises (B2B).

{% code overflow="wrap" %}
```bash
az logic integration-account partner create \
--resource-group <resource_group_name> \
--integration-account-name <integration_account_name> \
--name <partner_name> \
--partner-type <partner-type> \
--content '{
"b2b": {
"businessIdentities": [
{
"qualifier": "ZZ",
"value": "TradingPartner1"
}
]
}
}'
```
{% endcode %}

### "Microsoft.Resources/subscriptions/resourcegroups/read" && "Microsoft.Logic/integrationAccounts/sessions/write"
Avec cette autorisation, vous pouvez cr√©er ou modifier des sessions au sein d'un compte d'int√©gration Azure Logic Apps. Les sessions sont utilis√©es dans les flux de travail B2B pour regrouper les messages et suivre les transactions connexes sur une p√©riode d√©finie.

{% code overflow="wrap" %}
```bash
az logic integration-account session create \
--resource-group <resource_group_name> \
--integration-account-name <integration_account_name> \
--name <session_name> \
--content '{
"properties": {
"sessionId": "session123",
"data": {
"key1": "value1",
"key2": "value2"
}
}
}'
```
{% endcode %}

### "*/delete"
Avec ces autorisations, vous pouvez supprimer des ressources li√©es √† Azure Logic Apps

{% hint style="success" %}
Apprenez et pratiquez le hacking AWS :<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
Apprenez et pratiquez le hacking GCP : <img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Soutenez HackTricks</summary>

* Consultez les [**plans d'abonnement**](https://github.com/sponsors/carlospolop) !
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez-nous** sur **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Partagez des astuces de hacking en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts github.

</details>
{% endhint %}
