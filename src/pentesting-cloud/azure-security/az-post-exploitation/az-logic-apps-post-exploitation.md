# Az - Logic Apps åæœŸåˆ©ç”¨

{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}

## Logic Apps æ•°æ®åº“åæœŸåˆ©ç”¨
æœ‰å…³é€»è¾‘åº”ç”¨çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ï¼š

{% content-ref url="../az-services/az-logic-apps.md" %}
[az-logic-apps.md](../az-services/az-logic-apps.md)
{% endcontent-ref %}

### "Microsoft.Logic/workflows/read", "Microsoft.Logic/workflows/write" && "Microsoft.ManagedIdentity/userAssignedIdentities/assign/action"
æ‹¥æœ‰è¿™äº›æƒé™åï¼Œæ‚¨å¯ä»¥ä¿®æ”¹ Logic App å·¥ä½œæµå¹¶ç®¡ç†å…¶èº«ä»½ã€‚å…·ä½“è€Œè¨€ï¼Œæ‚¨å¯ä»¥å°†ç³»ç»Ÿåˆ†é…å’Œç”¨æˆ·åˆ†é…çš„æ‰˜ç®¡èº«ä»½åˆ†é…æˆ–ç§»é™¤åˆ°å·¥ä½œæµï¼Œè¿™ä½¿å¾— Logic App å¯ä»¥åœ¨æ²¡æœ‰æ˜¾å¼å‡­æ®çš„æƒ…å†µä¸‹è¿›è¡Œèº«ä»½éªŒè¯å¹¶è®¿é—®å…¶ä»– Azure èµ„æºã€‚ 

{% code overflow="wrap" %}
```bash
az logic workflow identity remove/assign \
--name <workflow_name> \
--resource-group <resource_group_name> \
--system-assigned true \
--user-assigned "/subscriptions/<subscription_id>/resourceGroups/<resource_group>/providers/Microsoft.ManagedIdentity/userAssignedIdentities/<identity_name>"
```
{% endcode %}

### "Microsoft.Web/sites/read", "Microsoft.Web/sites/write"
æ‹¥æœ‰è¿™äº›æƒé™ï¼Œæ‚¨å¯ä»¥åˆ›å»ºæˆ–æ›´æ–°æ‰˜ç®¡åœ¨åº”ç”¨æœåŠ¡è®¡åˆ’ä¸Šçš„é€»è¾‘åº”ç”¨ã€‚è¿™åŒ…æ‹¬ä¿®æ”¹è®¾ç½®ï¼Œä¾‹å¦‚å¯ç”¨æˆ–ç¦ç”¨ HTTPS å¼ºåˆ¶æ‰§è¡Œã€‚

{% code overflow="wrap" %}
```bash
az logicapp update \
--resource-group <resource_group_name> \
--name <logic_app_name> \
--set httpsOnly=false
```
{% endcode %}

### "Microsoft.Web/sites/stop/action", "Microsoft.Web/sites/start/action" || "Microsoft.Web/sites/restart/action"
æ‹¥æœ‰æ­¤æƒé™ï¼Œæ‚¨å¯ä»¥å¯åŠ¨/åœæ­¢/é‡å¯ä¸€ä¸ª web åº”ç”¨ï¼ŒåŒ…æ‹¬æ‰˜ç®¡åœ¨ App Service Plan ä¸Šçš„ Logic Appsã€‚æ­¤æ“ä½œç¡®ä¿ä¹‹å‰åœæ­¢çš„åº”ç”¨ç¨‹åºé‡æ–°ä¸Šçº¿å¹¶æ¢å¤å…¶åŠŸèƒ½ã€‚è¿™å¯èƒ½ä¼šå¹²æ‰°å·¥ä½œæµç¨‹ï¼Œè§¦å‘æ„å¤–æ“ä½œï¼Œæˆ–é€šè¿‡æ„å¤–å¯åŠ¨ã€åœæ­¢æˆ–é‡å¯ Logic Apps å¯¼è‡´åœæœºã€‚

{% code overflow="wrap" %}
```bash
az webapp start/stop/restart \
--name <logic_app_name> \
--resource-group <resource_group_name>
```
{% endcode %}


### "Microsoft.Web/sites/config/list/action", "Microsoft.Web/sites/read" && "Microsoft.Web/sites/config/write"

é€šè¿‡æ­¤æƒé™ï¼Œæ‚¨å¯ä»¥é…ç½®æˆ–ä¿®æ”¹ web åº”ç”¨çš„è®¾ç½®ï¼ŒåŒ…æ‹¬æ‰˜ç®¡åœ¨ App Service Plan ä¸Šçš„ Logic Appsã€‚è¿™å…è®¸æ›´æ”¹åº”ç”¨è®¾ç½®ã€è¿æ¥å­—ç¬¦ä¸²ã€èº«ä»½éªŒè¯é…ç½®ç­‰ã€‚

{% code overflow="wrap" %}
```bash
az logicapp config appsettings set \
--name <logic_app_name> \
--resource-group <resource_group_name> \
--settings "<key>=<value>"
```
{% endcode %}

### "Microsoft.Logic/integrationAccounts/write"
æ‹¥æœ‰æ­¤æƒé™ï¼Œæ‚¨å¯ä»¥åˆ›å»ºã€æ›´æ–°æˆ–åˆ é™¤ Azure Logic Apps é›†æˆå¸æˆ·ã€‚è¿™åŒ…æ‹¬ç®¡ç†é›†æˆå¸æˆ·çº§åˆ«çš„é…ç½®ï¼Œå¦‚æ˜ å°„ã€æ¨¡å¼ã€åˆä½œä¼™ä¼´ã€åè®®ç­‰ã€‚

{% code overflow="wrap" %}
```bash
az logic integration-account create \
--resource-group <resource_group_name> \
--name <integration_account_name> \
--location <location> \
--sku <Standard|Free> \
--state Enabled
```
{% endcode %}

### "Microsoft.Resources/subscriptions/resourcegroups/read" && "Microsoft.Logic/integrationAccounts/batchConfigurations/write"

æ‹¥æœ‰æ­¤æƒé™ï¼Œæ‚¨å¯ä»¥åœ¨ Azure Logic Apps é›†æˆå¸æˆ·ä¸­åˆ›å»ºæˆ–ä¿®æ”¹æ‰¹å¤„ç†é…ç½®ã€‚æ‰¹å¤„ç†é…ç½®å®šä¹‰äº† Logic Apps å¦‚ä½•å¤„ç†å’Œåˆ†ç»„ä¼ å…¥æ¶ˆæ¯ä»¥è¿›è¡Œæ‰¹å¤„ç†ã€‚

{% code overflow="wrap" %}
```bash
az logic integration-account batch-configuration create \
--resource-group <resource_group_name> \
--integration-account-name <integration_account_name> \
--name <batch_configuration_name> \
--release-criteria '{
"messageCount": 100,
"batchSize": 1048576,
}'
```
{% endcode %}

### "Microsoft.Resources/subscriptions/resourcegroups/read" && "Microsoft.Logic/integrationAccounts/maps/write"
æ‹¥æœ‰æ­¤æƒé™ï¼Œæ‚¨å¯ä»¥åœ¨ Azure Logic Apps é›†æˆå¸æˆ·ä¸­åˆ›å»ºæˆ–ä¿®æ”¹æ˜ å°„ã€‚æ˜ å°„ç”¨äºå°†æ•°æ®ä»ä¸€ç§æ ¼å¼è½¬æ¢ä¸ºå¦ä¸€ç§æ ¼å¼ï¼Œä»è€Œå®ç°ä¸åŒç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºä¹‹é—´çš„æ— ç¼é›†æˆã€‚

{% code overflow="wrap" %}
```bash
az logic integration-account map create \
--resource-group <resource_group_name> \
--integration-account-name <integration_account_name> \
--name <map_name> \
--map-type <Xslt|Xslt20|Xslt30> \
--content-type application/xml \
--map-content map-content.xslt
```
{% endcode %}

### "Microsoft.Resources/subscriptions/resourcegroups/read" && "Microsoft.Logic/integrationAccounts/partners/write"
æ‹¥æœ‰æ­¤æƒé™ï¼Œæ‚¨å¯ä»¥åœ¨ Azure Logic Apps é›†æˆå¸æˆ·ä¸­åˆ›å»ºæˆ–ä¿®æ”¹åˆä½œä¼™ä¼´ã€‚åˆä½œä¼™ä¼´ä»£è¡¨å‚ä¸ä¼ä¸šå¯¹ä¼ä¸šï¼ˆB2Bï¼‰å·¥ä½œæµçš„å®ä½“æˆ–ç³»ç»Ÿã€‚

{% code overflow="wrap" %}
```bash
az logic integration-account partner create \
--resource-group <resource_group_name> \
--integration-account-name <integration_account_name> \
--name <partner_name> \
--partner-type <partner-type> \
--content '{
"b2b": {
"businessIdentities": [
{
"qualifier": "ZZ",
"value": "TradingPartner1"
}
]
}
}'
```
{% endcode %}

### "Microsoft.Resources/subscriptions/resourcegroups/read" && "Microsoft.Logic/integrationAccounts/sessions/write"
é€šè¿‡æ­¤æƒé™ï¼Œæ‚¨å¯ä»¥åœ¨ Azure Logic Apps é›†æˆå¸æˆ·ä¸­åˆ›å»ºæˆ–ä¿®æ”¹ä¼šè¯ã€‚ä¼šè¯ç”¨äº B2B å·¥ä½œæµï¼Œä»¥åœ¨å®šä¹‰çš„æ—¶é—´æ®µå†…å¯¹æ¶ˆæ¯è¿›è¡Œåˆ†ç»„å¹¶è·Ÿè¸ªç›¸å…³äº¤æ˜“ã€‚

{% code overflow="wrap" %}
```bash
az logic integration-account session create \
--resource-group <resource_group_name> \
--integration-account-name <integration_account_name> \
--name <session_name> \
--content '{
"properties": {
"sessionId": "session123",
"data": {
"key1": "value1",
"key2": "value2"
}
}
}'
```
{% endcode %}

### "*/delete"
é€šè¿‡æ­¤æƒé™ï¼Œæ‚¨å¯ä»¥åˆ é™¤ä¸ Azure Logic Apps ç›¸å…³çš„èµ„æº



{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
å­¦ä¹ å’Œå®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>æ”¯æŒ HackTricks</summary>

* æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘ä»¬çš„ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR æ¥åˆ†äº«é»‘å®¢æŠ€å·§ã€‚

</details>
{% endhint %}
