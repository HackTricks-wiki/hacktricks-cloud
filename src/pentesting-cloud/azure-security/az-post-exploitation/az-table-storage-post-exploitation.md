# Az - Table Storage Post Exploitation

{{#include ../../../banners/hacktricks-training.md}}

## Table Storage Post Exploitation

Para mais informações sobre o armazenamento de tabelas, consulte:

{{#ref}}
../az-services/az-table-storage.md
{{#endref}}

### Microsoft.Storage/storageAccounts/tableServices/tables/entities/read

Um principal com esta permissão poderá **listar** as tabelas dentro de um armazenamento de tabelas e **ler as informações** que podem conter **informações sensíveis**.
```bash
# List tables
az storage table list --auth-mode login --account-name <name>

# Read table (top 10)
az storage entity query \
--account-name <name> \
--table-name <t-name> \
--auth-mode login \
--top 10
```
### Microsoft.Storage/storageAccounts/tableServices/tables/entities/write | Microsoft.Storage/storageAccounts/tableServices/tables/entities/add/action | Microsoft.Storage/storageAccounts/tableServices/tables/entities/update/action

A principal com esta permissão poderá **escrever e sobrescrever entradas em tabelas**, o que pode permitir que ele cause algum dano ou até mesmo escale privilégios (por exemplo, sobrescrever alguns dados confiáveis que poderiam abusar de alguma vulnerabilidade de injeção no aplicativo que os utiliza).

- A permissão `Microsoft.Storage/storageAccounts/tableServices/tables/entities/write` permite todas as ações.
- A permissão `Microsoft.Storage/storageAccounts/tableServices/tables/entities/add/action` permite **adicionar** entradas.
- A permissão `Microsoft.Storage/storageAccounts/tableServices/tables/entities/update/action` permite **atualizar** entradas existentes.
```bash
# Add
az storage entity insert \
--account-name <acc-name> \
--table-name <t-name> \
--auth-mode login \
--entity PartitionKey=HR RowKey=12345 Name="John Doe" Age=30 Title="Manager"

# Replace
az storage entity replace \
--account-name <acc-name> \
--table-name <t-name> \
--auth-mode login \
--entity PartitionKey=HR RowKey=12345 Name="John Doe" Age=30 Title="Manager"

# Update
az storage entity merge \
--account-name <acc-name> \
--table-name <t-name> \
--auth-mode login \
--entity PartitionKey=HR RowKey=12345 Name="John Doe" Age=30 Title="Manager"
```
### \*/delete

Isso permitiria deletar arquivos dentro do sistema de arquivos compartilhado, o que poderia **interromper alguns serviços** ou fazer com que o cliente **perdesse informações valiosas**.

{{#include ../../../banners/hacktricks-training.md}}
