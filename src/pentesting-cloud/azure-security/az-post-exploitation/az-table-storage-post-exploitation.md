# Az - 表存储后渗透

{{#include ../../../banners/hacktricks-training.md}}

## 表存储后渗透

有关表存储的更多信息，请查看：

{{#ref}}
../az-services/az-table-storage.md
{{#endref}}

### Microsoft.Storage/storageAccounts/tableServices/tables/entities/read

具有此权限的主体将能够**列出**表存储中的表并**读取信息**，这些信息可能包含**敏感信息**。
```bash
# List tables
az storage table list --auth-mode login --account-name <name>

# Read table (top 10)
az storage entity query \
--account-name <name> \
--table-name <t-name> \
--auth-mode login \
--top 10
```
### Microsoft.Storage/storageAccounts/tableServices/tables/entities/write | Microsoft.Storage/storageAccounts/tableServices/tables/entities/add/action | Microsoft.Storage/storageAccounts/tableServices/tables/entities/update/action

具有此权限的主体将能够**在表中写入和覆盖条目**，这可能使他造成一些损害甚至提升权限（例如，覆盖一些可信数据，可能会利用使用它的应用程序中的某些注入漏洞）。

- 权限`Microsoft.Storage/storageAccounts/tableServices/tables/entities/write`允许所有操作。
- 权限`Microsoft.Storage/storageAccounts/tableServices/tables/entities/add/action`允许**添加**条目。
- 权限`Microsoft.Storage/storageAccounts/tableServices/tables/entities/update/action`允许**更新**现有条目。
```bash
# Add
az storage entity insert \
--account-name <acc-name> \
--table-name <t-name> \
--auth-mode login \
--entity PartitionKey=HR RowKey=12345 Name="John Doe" Age=30 Title="Manager"

# Replace
az storage entity replace \
--account-name <acc-name> \
--table-name <t-name> \
--auth-mode login \
--entity PartitionKey=HR RowKey=12345 Name="John Doe" Age=30 Title="Manager"

# Update
az storage entity merge \
--account-name <acc-name> \
--table-name <t-name> \
--auth-mode login \
--entity PartitionKey=HR RowKey=12345 Name="John Doe" Age=30 Title="Manager"
```
### \*/delete

这将允许删除共享文件系统中的文件，这可能会**中断某些服务**或使客户端**丢失有价值的信息**。

{{#include ../../../banners/hacktricks-training.md}}
