# Az - CosmosDB Post Exploitation

{% hint style="success" %}
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ GCP Hacking: <img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>–ü—ñ–¥—Ç—Ä–∏–º–∞–π—Ç–µ HackTricks</summary>

* –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ø–ª–∞–Ω–∏ –ø—ñ–¥–ø–∏—Å–∫–∏**](https://github.com/sponsors/carlospolop)!
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ Telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –≤ **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **–î—ñ–ª—ñ—Ç—å—Å—è —Ö–∞–∫–µ—Ä—Å—å–∫–∏–º–∏ —Ç—Ä—é–∫–∞–º–∏, –Ω–∞–¥—Å–∏–ª–∞—é—á–∏ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ –Ω–∞ github.

</details>
{% endhint %}

## CosmosDB Post Exploitation
–î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ SQL Database –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ:

{% content-ref url="../az-services/az-cosmosDB.md" %}
[az-cosmosDB.md](../az-services/az-cosmosDB.md)
{% endcontent-ref %}


### "Microsoft.DocumentDB/databaseAccounts/read" && "Microsoft.DocumentDB/databaseAccounts/write"
–ó —Ü–∏–º –¥–æ–∑–≤–æ–ª–æ–º –≤–∏ –º–æ–∂–µ—Ç–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∞–±–æ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –æ–±–ª—ñ–∫–æ–≤—ñ –∑–∞–ø–∏—Å–∏ Azure Cosmos DB. –¶–µ –≤–∫–ª—é—á–∞—î –∑–º—ñ–Ω—É –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –Ω–∞ —Ä—ñ–≤–Ω—ñ –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É, –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∞–±–æ –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ä–µ–≥—ñ–æ–Ω—ñ–≤, –∑–º—ñ–Ω—É —Ä—ñ–≤–Ω—ñ–≤ —É–∑–≥–æ–¥–∂–µ–Ω–æ—Å—Ç—ñ —Ç–∞ —É–≤—ñ–º–∫–Ω–µ–Ω–Ω—è –∞–±–æ –≤–∏–º–∫–Ω–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–π, —Ç–∞–∫–∏—Ö —è–∫ –∑–∞–ø–∏—Å–∏ –≤ –∫—ñ–ª—å–∫–æ—Ö —Ä–µ–≥—ñ–æ–Ω–∞—Ö.

{% code overflow="wrap" %}
```bash
az cosmosdb update \
--name <account_name> \
--resource-group <resource_group_name> \
--public-network-access ENABLED
```
{% endcode %}

### "Microsoft.DocumentDB/databaseAccounts/sqlDatabases/containers/read" && "Microsoft.DocumentDB/databaseAccounts/sqlDatabases/containers/write"
–ó —Ü—ñ—î—é –¥–æ–∑–≤–æ–ª–æ–º –≤–∏ –º–æ–∂–µ—Ç–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∞–±–æ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ (–∫–æ–ª–µ–∫—Ü—ñ—ó) –≤ SQL –±–∞–∑—ñ –¥–∞–Ω–∏—Ö –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É Azure Cosmos DB. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö, –∞ –∑–º—ñ–Ω–∏ –≤ –Ω–∏—Ö –º–æ–∂—É—Ç—å –≤–ø–ª–∏–Ω—É—Ç–∏ –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑–∏ –¥–∞–Ω–∏—Ö —Ç–∞ —à–∞–±–ª–æ–Ω–∏ –¥–æ—Å—Ç—É–ø—É.

{% code overflow="wrap" %}
```bash
# Create
az cosmosdb sql container create \
--account-name <account_name> \
--resource-group <resource_group_name> \
--database-name <database_name> \
--name <container_name> \
--partition-key-path <partition_key_path>

#Update
az cosmosdb sql container update \
--account-name <account_name> \
--resource-group <resource_group_name> \
--database-name <database_name> \
--name <container_name> \
--ttl 3600
```
{% endcode %}

### "Microsoft.DocumentDB/databaseAccounts/sqlDatabases/write" && "Microsoft.DocumentDB/databaseAccounts/sqlDatabases/read"
–ó —Ü—ñ—î—é –¥–æ–∑–≤–æ–ª–æ–º –≤–∏ –º–æ–∂–µ—Ç–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∞–±–æ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ SQL –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –≤ –æ–±–ª—ñ–∫–æ–≤–æ–º—É –∑–∞–ø–∏—Å—ñ Azure Cosmos DB. –¶–µ –¥–æ–∑–≤–æ–ª—è—î –∫–µ—Ä—É–≤–∞—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é –±–∞–∑–∏ –¥–∞–Ω–∏—Ö —Ç–∞ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –¥–æ –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É. –•–æ—á–∞ —Ü–µ–π –¥–æ–∑–≤—ñ–ª –¥–æ–∑–≤–æ–ª—è—î —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö, –Ω–µ–Ω–∞–ª–µ–∂–Ω–µ –∞–±–æ –Ω–µ—Å–∞–Ω–∫—Ü—ñ–æ–Ω–æ–≤–∞–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –Ω–µ–ø–æ—Ç—Ä—ñ–±–Ω–æ–≥–æ —Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤, –∑–±—ñ–ª—å—à–µ–Ω–Ω—è –≤–∏—Ç—Ä–∞—Ç –∞–±–æ –æ–ø–µ—Ä–∞—Ü—ñ–π–Ω–∏—Ö –Ω–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π.

{% code overflow="wrap" %}
```bash
az cosmosdb sql database create \
--account-name <account_name> \
--resource-group <resource_group_name> \
--name <database_name>
```
{% endcode %}

### "Microsoft.DocumentDB/databaseAccounts/failoverPriorityChange/action"

–ó —Ü—ñ—î—é –¥–æ–∑–≤–æ–ª–æ–º –≤–∏ –º–æ–∂–µ—Ç–µ –∑–º—ñ–Ω–∏—Ç–∏ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç –≤—ñ–¥–º–æ–≤–∏ —Ä–µ–≥—ñ–æ–Ω—ñ–≤ –¥–ª—è –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É –±–∞–∑–∏ –¥–∞–Ω–∏—Ö Azure Cosmos DB. –¶—è –¥—ñ—è –≤–∏–∑–Ω–∞—á–∞—î –ø–æ—Ä—è–¥–æ–∫, —É —è–∫–æ–º—É —Ä–µ–≥—ñ–æ–Ω–∏ —Å—Ç–∞—é—Ç—å –æ—Å–Ω–æ–≤–Ω–∏–º–∏ –ø—ñ–¥ —á–∞—Å –ø–æ–¥—ñ—ó –≤—ñ–¥–º–æ–≤–∏. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ü—å–æ–≥–æ –¥–æ–∑–≤–æ–ª—É –º–æ–∂–µ –ø–æ—Ä—É—à–∏—Ç–∏ –≤–∏—Å–æ–∫—É –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –∞–±–æ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –Ω–µ–ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π–Ω–∏—Ö –Ω–∞—Å–ª—ñ–¥–∫—ñ–≤.

{% code overflow="wrap" %}
```bash
az cosmosdb failover-priority-change \
--name <database_account_name> \
--resource-group <resource_group_name> \
--failover-policies <region1=priority1> <region2=priority2>

```
{% endcode %}

### "Microsoft.DocumentDB/databaseAccounts/regenerateKey/action"
–ó —Ü—ñ—î—é –¥–æ–∑–≤–æ–ª–æ–º –≤–∏ –º–æ–∂–µ—Ç–µ —Ä–µ–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –æ—Å–Ω–æ–≤–Ω—ñ –∞–±–æ –≤—Ç–æ—Ä–∏–Ω–Ω—ñ –∫–ª—é—á—ñ –¥–ª—è –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É Azure Cosmos DB. –¶–µ –∑–∞–∑–≤–∏—á–∞–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏ —à–ª—è—Ö–æ–º –∑–∞–º—ñ–Ω–∏ —Å—Ç–∞—Ä–∏—Ö –∫–ª—é—á—ñ–≤, –∞–ª–µ —Ü–µ –º–æ–∂–µ –ø–æ—Ä—É—à–∏—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–ª—è —Å–ª—É–∂–± –∞–±–æ –¥–æ–¥–∞—Ç–∫—ñ–≤, —è–∫—ñ –ø–æ–∫–ª–∞–¥–∞—é—Ç—å—Å—è –Ω–∞ –ø–æ—Ç–æ—á–Ω—ñ –∫–ª—é—á—ñ.

{% code overflow="wrap" %}
```bash
az cosmosdb keys regenerate \
--name <account_name> \
--resource-group <resource_group_name> \
--key-kind <primary|secondary>

```
{% endcode %}

### "Microsoft.DocumentDB/databaseAccounts/sqlDatabases/containers/userDefinedFunctions/write" && "Microsoft.DocumentDB/databaseAccounts/sqlDatabases/containers/userDefinedFunctions/read"

–ó —Ü—ñ—î—é –¥–æ–∑–≤–æ–ª–æ–º –≤–∏ –º–æ–∂–µ—Ç–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∞–±–æ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ —Ç—Ä–∏–≥–µ—Ä–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ SQL –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –≤ –æ–±–ª—ñ–∫–æ–≤–æ–º—É –∑–∞–ø–∏—Å—ñ Azure Cosmos DB. –¢—Ä–∏–≥–µ—Ä–∏ –¥–æ–∑–≤–æ–ª—è—é—Ç—å –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –ª–æ–≥—ñ–∫—É –Ω–∞ —Å—Ç–æ—Ä–æ–Ω—ñ —Å–µ—Ä–≤–µ—Ä–∞ —É –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—ó.

{% code overflow="wrap" %}
```bash
az cosmosdb sql trigger create \
--account-name <account_name> \
--resource-group <resource_group_name> \
--database-name <sql_database_name> \
--container-name <container_name> \
--name <trigger_name> \
--body 'function trigger() { var context = getContext(); var request = context.getRequest(); request.setBody("Triggered operation!"); }' \
--type Pre \
--operation All
```
{% endcode %}

### "Microsoft.DocumentDB/databaseAccounts/sqlDatabases/containers/storedProcedures/write" && "Microsoft.DocumentDB/databaseAccounts/sqlDatabases/containers/storedProcedures/read"
–ó —Ü—ñ—î—é –¥–æ–∑–≤–æ–ª–æ–º –≤–∏ –º–æ–∂–µ—Ç–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∞–±–æ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –ø—Ä–æ—Ü–µ–¥—É—Ä–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ SQL –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –≤ –æ–±–ª—ñ–∫–æ–≤–æ–º—É –∑–∞–ø–∏—Å—ñ Azure Cosmos DB. –ó–±–µ—Ä–µ–∂–µ–Ω—ñ –ø—Ä–æ—Ü–µ–¥—É—Ä–∏ –≤ Cosmos DB - —Ü–µ —Å–µ—Ä–≤–µ—Ä–Ω—ñ JavaScript —Ñ—É–Ω–∫—Ü—ñ—ó, —è–∫—ñ –¥–æ–∑–≤–æ–ª—è—é—Ç—å –≤–∞–º —ñ–Ω–∫–∞–ø—Å—É–ª—é–≤–∞—Ç–∏ –ª–æ–≥—ñ–∫—É –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –¥–∞–Ω–∏—Ö –∞–±–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ–π –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö.

{% code overflow="wrap" %}
```bash
az cosmosdb sql stored-procedure create \
--account-name <account_name> \
--resource-group <resource_group_name> \
--database-name <sql_database_name> \
--container-name <container_name> \
--name <stored_procedure_name> \
--body 'function sample() { return "Hello, Cosmos!"; }'
```
{% endcode %}

### "Microsoft.DocumentDB/databaseAccounts/sqlDatabases/containers/triggers/write" && "Microsoft.DocumentDB/databaseAccounts/sqlDatabases/containers/triggers/read"
–ó —Ü—ñ—î—é –¥–æ–∑–≤–æ–ª–æ–º –≤–∏ –º–æ–∂–µ—Ç–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∞–±–æ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ —Ç—Ä–∏–≥–µ—Ä–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ SQL –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –≤ –æ–±–ª—ñ–∫–æ–≤–æ–º—É –∑–∞–ø–∏—Å—ñ Azure Cosmos DB. –¢—Ä–∏–≥–µ—Ä–∏ –¥–æ–∑–≤–æ–ª—è—é—Ç—å –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ —Å–µ—Ä–≤–µ—Ä–Ω—É –ª–æ–≥—ñ–∫—É —É –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—ó, —Ç–∞–∫—ñ —è–∫ –≤—Å—Ç–∞–≤–∫–∏, –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∞–±–æ –≤–∏–¥–∞–ª–µ–Ω–Ω—è.

{% code overflow="wrap" %}
```bash
az cosmosdb sql trigger create \
--account-name <account_name> \
--resource-group <resource_group_name> \
--database-name <sql_database_name> \
--container-name <container_name> \
--name <trigger_name> \
--body 'function trigger() { var context = getContext(); var request = context.getRequest(); request.setBody("Triggered operation!"); }' \
--type Pre \
--operation All
```
{% endcode %}

### "Microsoft.DocumentDB/databaseAccounts/mongodbDatabases/collections/read" && "Microsoft.DocumentDB/databaseAccounts/mongodbDatabases/collections/write"
–ó —Ü—ñ—î—é –¥–æ–∑–≤–æ–ª–æ–º –≤–∏ –º–æ–∂–µ—Ç–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∞–±–æ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –∫–æ–ª–µ–∫—Ü—ñ—ó –≤ –±–∞–∑–∞—Ö –¥–∞–Ω–∏—Ö MongoDB –≤ –æ–±–ª—ñ–∫–æ–≤–æ–º—É –∑–∞–ø–∏—Å—ñ Azure Cosmos DB. –ö–æ–ª–µ–∫—Ü—ñ—ó –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ —Ç–∞ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ —ñ —Ä–æ–∑–ø–æ–¥—ñ–ª—É –¥–∞–Ω–∏—Ö.

{% code overflow="wrap" %}
```bash
az cosmosdb mongodb collection create \
--account-name <account_name> \
--resource-group <resource_group_name> \
--database-name <mongodb_database_name> \
--name <collection_name>
```
{% endcode %}

### "Microsoft.DocumentDB/databaseAccounts/mongodbDatabases/write" && "Microsoft.DocumentDB/databaseAccounts/mongodbDatabases/read"
–ó —Ü—ñ—î—é –¥–æ–∑–≤–æ–ª–æ–º –≤–∏ –º–æ–∂–µ—Ç–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –Ω–æ–≤—ñ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö MongoDB –≤ –æ–±–ª—ñ–∫–æ–≤–æ–º—É –∑–∞–ø–∏—Å—ñ Azure Cosmos DB. –¶–µ –¥–æ–∑–≤–æ–ª—è—î —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –Ω–æ–≤—ñ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ–ª–µ–∫—Ü—ñ—è–º–∏ —Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏.

{% code overflow="wrap" %}
```bash
az cosmosdb mongodb database create \
--account-name <account_name> \
--resource-group <resource_group_name> \
--name <database_name>
```
{% endcode %}

### "Microsoft.DocumentDB/databaseAccounts/mongodbRoleDefinitions/write" && "Microsoft.DocumentDB/databaseAccounts/mongodbRoleDefinitions/read"
–ó —Ü—ñ—î—é –¥–æ–∑–≤–æ–ª–æ–º –≤–∏ –º–æ–∂–µ—Ç–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –Ω–æ–≤—ñ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ä–æ–ª–µ–π MongoDB –≤ –æ–±–ª—ñ–∫–æ–≤–æ–º—É –∑–∞–ø–∏—Å—ñ Azure Cosmos DB. –¶–µ –¥–æ–∑–≤–æ–ª—è—î –≤–∏–∑–Ω–∞—á–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫—ñ —Ä–æ–ª—ñ –∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–º–∏ –¥–æ–∑–≤–æ–ª–∞–º–∏ –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ MongoDB.

{% code overflow="wrap" %}
```bash
az cosmosdb mongodb role definition create \
--account-name <account_name> \
--resource-group <resource_group_name> \
--body '{
"Id": "<mydatabase>.readWriteRole",
"RoleName": "readWriteRole",
"Type": "CustomRole",
"DatabaseName": "<mydatabase>",
"Privileges": [
{
"Resource": {
"Db": "<mydatabase>",
"Collection": "mycollection"
},
"Actions": [
"insert",
"find",
"update"
]
}
],
"Roles": []
}'
```
{% endcode %}

### "Microsoft.DocumentDB/databaseAccounts/mongodbUserDefinitions/write" && "Microsoft.DocumentDB/databaseAccounts/mongodbUserDefinitions/read"
–ó —Ü—ñ—î—é –¥–æ–∑–≤–æ–ª–æ–º –≤–∏ –º–æ–∂–µ—Ç–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –Ω–æ–≤—ñ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ MongoDB –≤ –æ–±–ª—ñ–∫–æ–≤–æ–º—É –∑–∞–ø–∏—Å—ñ Azure Cosmos DB. –¶–µ –¥–æ–∑–≤–æ–ª—è—î –Ω–∞–¥–∞–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ —Ä–æ–ª—ñ —Ç–∞ —Ä—ñ–≤–Ω—ñ –¥–æ—Å—Ç—É–ø—É –¥–æ –±–∞–∑ –¥–∞–Ω–∏—Ö MongoDB.
{% code overflow="wrap" %}
```bash
az cosmosdb mongodb user definition create \
--account-name <account_name> \
--resource-group <resource_group_name> \
--body '{
"Id": "<mydatabase>.myUser",
"UserName": "myUser",
"Password": "mySecurePassword",
"DatabaseName": "<mydatabase>",
"CustomData": "TestCustomData",
"Mechanisms": "SCRAM-SHA-256",
"Roles": [
{
"Role": "readWriteRole",
"Db": "<mydatabase>"
}
]
}'
```
{% endcode %}

{% hint style="success" %}
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ GCP Hacking: <img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>–ü—ñ–¥—Ç—Ä–∏–º–∞–π—Ç–µ HackTricks</summary>

* –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ø–ª–∞–Ω–∏ –ø—ñ–¥–ø–∏—Å–∫–∏**](https://github.com/sponsors/carlospolop)!
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ Telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –≤ **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **–î—ñ–ª—ñ—Ç—å—Å—è —Ö–∞–∫–µ—Ä—Å—å–∫–∏–º–∏ —Ç—Ä—é–∫–∞–º–∏, –Ω–∞–¥—Å–∏–ª–∞—é—á–∏ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ –Ω–∞ github.

</details>
{% endhint %}
