# Az - MySQL P√≥s Explora√ß√£o

{% hint style="success" %}
Aprenda e pratique Hacking AWS:<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
Aprenda e pratique Hacking GCP: <img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Supporte o HackTricks</summary>

* Confira os [**planos de assinatura**](https://github.com/sponsors/carlospolop)!
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga**-nos no **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Compartilhe truques de hacking enviando PRs para o** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) reposit√≥rios do github.

</details>
{% endhint %}

## P√≥s Explora√ß√£o do Banco de Dados MySQL
Para mais informa√ß√µes sobre o Banco de Dados MySQL, confira:

{% content-ref url="../az-services/az-mysql.md" %}
[az-mysql.md](../az-services/az-mysql.md)
{% endcontent-ref %}

### "Microsoft.DBforMySQL/flexibleServers/databases/write" && "Microsoft.DBforMySQL/flexibleServers/databases/read"

Com esta permiss√£o, voc√™ pode criar novos bancos de dados dentro de uma inst√¢ncia do MySQL Flexible Server no Azure. Embora esta a√ß√£o em si n√£o modifique recursos existentes, a cria√ß√£o excessiva ou n√£o autorizada de bancos de dados pode levar ao consumo de recursos ou ao potencial uso indevido do servidor.

{% code overflow="wrap" %}
```bash
az mysql flexible-server db create \
--server-name <server_name> \
--resource-group <resource_group_name> \
--database-name <database_name>
```
{% endcode %}

### "Microsoft.DBforMySQL/flexibleServers/backups/write"

Com esta permiss√£o, voc√™ pode iniciar a cria√ß√£o de backups para uma inst√¢ncia do MySQL Flexible Server no Azure. Isso permite que os usu√°rios gerem backups sob demanda, o que pode ser √∫til para preservar dados em pontos espec√≠ficos no tempo.

{% code overflow="wrap" %}
```bash
az mysql flexible-server backup create \
--name <server_name> \
--resource-group <resource_group_name>
--backup-name <backup_name>
```
{% endcode %}

### "Microsoft.DBforMySQL/flexibleServers/advancedThreatProtectionSettings/write"

Com esta permiss√£o, voc√™ pode configurar ou atualizar as configura√ß√µes de Prote√ß√£o Avan√ßada contra Amea√ßas (ATP) para uma inst√¢ncia de Servidor Flex√≠vel MySQL no Azure. Isso permite habilitar ou desabilitar recursos de seguran√ßa projetados para detectar e responder a atividades an√¥malas e amea√ßas potenciais.

{% code overflow="wrap" %}
```bash
az mysql flexible-server threat-protection-policy update \
--name <server_name> \
--resource-group <resource_group_name> \
--state <Enabled|Disabled>
```
{% endcode %}

### "Microsoft.DBforMySQL/flexibleServers/firewallRules/write"

Com esta permiss√£o, voc√™ pode criar ou modificar regras de firewall para uma inst√¢ncia do MySQL Flexible Server no Azure. Isso permite o controle sobre quais endere√ßos IP ou intervalos podem acessar o servidor. O uso n√£o autorizado ou inadequado dessa permiss√£o pode expor o servidor a acessos indesejados ou maliciosos.

{% code overflow="wrap" %}
```bash
# Create Rule
az mysql flexible-server firewall-rule create \
--name <server_name> \
--resource-group <resource_group_name> \
--rule-name <rule_name> \
--start-ip-address <start_ip> \
--end-ip-address <end_ip>

# Update Rule
az mysql flexible-server firewall-rule update \
--name <server_name> \
--resource-group <resource_group_name> \
--rule-name <rule_name> \
--start-ip-address <start_ip> \
--end-ip-address <end_ip>
```
{% endcode %}

### "Microsoft.DBforMySQL/flexibleServers/resetGtid/action"

Com esta permiss√£o, voc√™ pode redefinir o GTID (Identificador Global de Transa√ß√£o) para uma inst√¢ncia do MySQL Flexible Server no Azure. Redefinir o GTID invalidar√° todos os backups automatizados, sob demanda e geo-backups que foram feitos antes da a√ß√£o de redefini√ß√£o. Ap√≥s a redefini√ß√£o do GTID, voc√™ n√£o poder√° realizar PITR (restaura√ß√£o em um ponto no tempo) usando o ponto de restaura√ß√£o mais r√°pido ou por ponto de restaura√ß√£o personalizado se o tempo de restaura√ß√£o selecionado for anterior ao tempo de redefini√ß√£o do GTID. E a restaura√ß√£o geo-sucedida ser√° poss√≠vel apenas ap√≥s 5 dias.

{% code overflow="wrap" %}
```bash
az mysql flexible-server reset-gtid \
--name  \
--resource-group <resource_group_name> \
--gtid-set <gtid>
```
{% endcode %}

### "Microsoft.DBforMySQL/flexibleServers/updateConfigurations/action"

Com esta permiss√£o, voc√™ pode atualizar as configura√ß√µes de um MySQL Flexible Server no Azure. Isso permite a personaliza√ß√£o de par√¢metros do servidor, como ajuste de desempenho, configura√ß√µes de seguran√ßa ou configura√ß√µes operacionais. Voc√™ pode atualizar os seguintes par√¢metros juntos em um lote: audit_log_enabled, audit_log_events, binlog_expire_logs_seconds, binlog_row_image, character_set_server, collation_server, connect_timeout, enforce_gtid_consistency, gtid_mode, init_connect, innodb_buffer_pool_size, innodb_io_capacity, innodb_io_capacity_max, innodb_purge_threads, innodb_read_io_threads, innodb_thread_concurrency, innodb_write_io_threads, long_query_time, max_connect_errors e max_connections.

{% code overflow="wrap" %}
```bash
az mysql flexible-server parameter set-batch \
--resource-group <resource_group_name> \
--server-name <server_name> \
--args max_connections=<value>
```
{% endcode %}

### "Microsoft.DBforMySQL/flexibleServers/read", "Microsoft.DBforMySQL/flexibleServers/write" && "Microsoft.ManagedIdentity/userAssignedIdentities/assign/action"

Com esta permiss√£o, voc√™ pode atribuir uma identidade gerenciada atribu√≠da a servidores MySQL flex√≠veis.

{% code overflow="wrap" %}
```bash
az mysql flexible-server identity assign \
--resource-group <ResourceGroupName> \
--server-name <ServerName> \
--identity <IdentityName>
```
{% endcode %}

### "Microsoft.DBforMySQL/flexibleServers/stop/action"

Com esta permiss√£o, voc√™ pode parar uma inst√¢ncia do PostgreSQL Flexible Server no Azure. Parar um servidor pode levar a uma interrup√ß√£o tempor√°ria do servi√ßo, afetando aplicativos e usu√°rios dependentes do banco de dados.

{% code overflow="wrap" %}
```bash
az mysql flexible-server stop \
--name <server_name> \
--resource-group <resource_group_name>
```
{% endcode %}

### "Microsoft.DBforMySQL/flexibleServers/start/action"
With this permission, you can start a stopped PostgreSQL Flexible Server instance on Azure. Starting a server restores its availability, enabling applications and users to reconnect and access the database.

{% code overflow="wrap" %}
```bash
az mysql flexible-server start \
--name <server_name> \
--resource-group <resource_group_name>
```
{% endcode %}

### "*/delete"

With this permissions you can delete resources related to mysql server in Azure such as server, firewalls, managed identities or configurations

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
