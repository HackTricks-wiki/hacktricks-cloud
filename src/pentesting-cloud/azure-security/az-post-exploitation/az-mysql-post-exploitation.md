# Az - MySQL Post Exploitation

{% hint style="success" %}
Apprenez et pratiquez le hacking AWS :<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
Apprenez et pratiquez le hacking GCP : <img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Soutenir HackTricks</summary>

* V√©rifiez les [**plans d'abonnement**](https://github.com/sponsors/carlospolop) !
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez-nous sur** **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Partagez des astuces de hacking en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts github.

</details>
{% endhint %}

## MySQL Database Post Exploitation
Pour plus d'informations sur MySQL Database, consultez :

{% content-ref url="../az-services/az-mysql.md" %}
[az-mysql.md](../az-services/az-mysql.md)
{% endcontent-ref %}

### "Microsoft.DBforMySQL/flexibleServers/databases/write" && "Microsoft.DBforMySQL/flexibleServers/databases/read"

Avec cette autorisation, vous pouvez cr√©er de nouvelles bases de donn√©es au sein d'une instance de MySQL Flexible Server sur Azure. Bien que cette action elle-m√™me ne modifie pas les ressources existantes, la cr√©ation excessive ou non autoris√©e de bases de donn√©es pourrait entra√Æner une consommation de ressources ou un potentiel abus du serveur.

{% code overflow="wrap" %}
```bash
az mysql flexible-server db create \
--server-name <server_name> \
--resource-group <resource_group_name> \
--database-name <database_name>
```
{% endcode %}

### "Microsoft.DBforMySQL/flexibleServers/backups/write"

Avec cette autorisation, vous pouvez initier la cr√©ation de sauvegardes pour une instance de serveur flexible MySQL sur Azure. Cela permet aux utilisateurs de g√©n√©rer des sauvegardes √† la demande, ce qui peut √™tre utile pour pr√©server des donn√©es √† des moments sp√©cifiques.

{% code overflow="wrap" %}
```bash
az mysql flexible-server backup create \
--name <server_name> \
--resource-group <resource_group_name>
--backup-name <backup_name>
```
{% endcode %}

### "Microsoft.DBforMySQL/flexibleServers/advancedThreatProtectionSettings/write"

Avec cette autorisation, vous pouvez configurer ou mettre √† jour les param√®tres de Protection Avanc√©e contre les Menaces (ATP) pour une instance de Serveur MySQL Flexible sur Azure. Cela permet d'activer ou de d√©sactiver des fonctionnalit√©s de s√©curit√© con√ßues pour d√©tecter et r√©pondre √† des activit√©s anormales et √† des menaces potentielles.

{% code overflow="wrap" %}
```bash
az mysql flexible-server threat-protection-policy update \
--name <server_name> \
--resource-group <resource_group_name> \
--state <Enabled|Disabled>
```
{% endcode %}

### "Microsoft.DBforMySQL/flexibleServers/firewallRules/write"

Avec cette autorisation, vous pouvez cr√©er ou modifier des r√®gles de pare-feu pour une instance de serveur MySQL Flexible sur Azure. Cela permet de contr√¥ler quelles adresses IP ou plages peuvent acc√©der au serveur. Une utilisation non autoris√©e ou inappropri√©e de cette autorisation pourrait exposer le serveur √† un acc√®s ind√©sirable ou malveillant.

{% code overflow="wrap" %}
```bash
# Create Rule
az mysql flexible-server firewall-rule create \
--name <server_name> \
--resource-group <resource_group_name> \
--rule-name <rule_name> \
--start-ip-address <start_ip> \
--end-ip-address <end_ip>

# Update Rule
az mysql flexible-server firewall-rule update \
--name <server_name> \
--resource-group <resource_group_name> \
--rule-name <rule_name> \
--start-ip-address <start_ip> \
--end-ip-address <end_ip>
```
{% endcode %}

### "Microsoft.DBforMySQL/flexibleServers/resetGtid/action"

Avec cette autorisation, vous pouvez r√©initialiser le GTID (Identifiant de Transaction Global) pour une instance de MySQL Flexible Server sur Azure. La r√©initialisation du GTID invalidera toutes les sauvegardes automatis√©es, √† la demande et les sauvegardes g√©ographiques qui ont √©t√© effectu√©es avant l'action de r√©initialisation. Apr√®s la r√©initialisation du GTID, vous ne pourrez pas effectuer de PITR (restauration √† un instant donn√©) en utilisant le point de restauration le plus rapide ou par un point de restauration personnalis√© si le temps de restauration s√©lectionn√© est ant√©rieur au temps de r√©initialisation du GTID. Et la restauration g√©ographique r√©ussie ne sera possible qu'apr√®s 5 jours.

{% code overflow="wrap" %}
```bash
az mysql flexible-server reset-gtid \
--name  \
--resource-group <resource_group_name> \
--gtid-set <gtid>
```
{% endcode %}

### "Microsoft.DBforMySQL/flexibleServers/updateConfigurations/action"

Avec cette autorisation, vous pouvez mettre √† jour les param√®tres de configuration d'une instance de MySQL Flexible Server sur Azure. Cela permet de personnaliser les param√®tres du serveur tels que l'optimisation des performances, les configurations de s√©curit√© ou les param√®tres op√©rationnels. Vous pouvez mettre √† jour les param√®tres suivants ensemble dans un lot : audit_log_enabled, audit_log_events, binlog_expire_logs_seconds, binlog_row_image, character_set_server, collation_server, connect_timeout, enforce_gtid_consistency, gtid_mode, init_connect, innodb_buffer_pool_size, innodb_io_capacity, innodb_io_capacity_max, innodb_purge_threads, innodb_read_io_threads, innodb_thread_concurrency, innodb_write_io_threads, long_query_time, max_connect_errors, et max_connections.

{% code overflow="wrap" %}
```bash
az mysql flexible-server parameter set-batch \
--resource-group <resource_group_name> \
--server-name <server_name> \
--args max_connections=<value>
```
{% endcode %}

### "Microsoft.DBforMySQL/flexibleServers/read", "Microsoft.DBforMySQL/flexibleServers/write" && "Microsoft.ManagedIdentity/userAssignedIdentities/assign/action"

Avec cette autorisation, vous pouvez attribuer une identit√© g√©r√©e assign√©e par l'utilisateur aux serveurs MySQL flexibles.

{% code overflow="wrap" %}
```bash
az mysql flexible-server identity assign \
--resource-group <ResourceGroupName> \
--server-name <ServerName> \
--identity <IdentityName>
```
{% endcode %}

### "Microsoft.DBforMySQL/flexibleServers/stop/action"

Avec cette autorisation, vous pouvez arr√™ter une instance de serveur flexible PostgreSQL sur Azure. L'arr√™t d'un serveur peut entra√Æner une interruption temporaire du service, affectant les applications et les utilisateurs d√©pendants de la base de donn√©es.

{% code overflow="wrap" %}
```bash
az mysql flexible-server stop \
--name <server_name> \
--resource-group <resource_group_name>
```
{% endcode %}

### "Microsoft.DBforMySQL/flexibleServers/start/action"
With this permission, you can start a stopped PostgreSQL Flexible Server instance on Azure. Starting a server restores its availability, enabling applications and users to reconnect and access the database.

{% code overflow="wrap" %}
```bash
az mysql flexible-server start \
--name <server_name> \
--resource-group <resource_group_name>
```
{% endcode %}

### "*/delete"

With this permissions you can delete resources related to mysql server in Azure such as server, firewalls, managed identities or configurations

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
