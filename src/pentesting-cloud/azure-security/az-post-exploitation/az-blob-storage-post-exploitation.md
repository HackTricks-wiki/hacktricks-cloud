# Az - Blob Storage Post Exploitation

{{#include ../../../banners/hacktricks-training.md}}

## ストレージの権限昇格

ストレージに関する詳細情報は以下を確認してください:

{{#ref}}
../az-services/az-storage.md
{{#endref}}

### Microsoft.Storage/storageAccounts/blobServices/containers/blobs/read

この権限を持つプリンシパルは、コンテナ内のブロブ（ファイル）を**一覧表示**し、**機密情報**を含む可能性のあるファイルを**ダウンロード**することができます。
```bash
# e.g. Microsoft.Storage/storageAccounts/blobServices/containers/blobs/read
az storage blob list \
--account-name <acc-name> \
--container-name <container-name> --auth-mode login

az storage blob download \
--account-name <acc-name> \
--container-name <container-name> \
-n file.txt --auth-mode login
```
### Microsoft.Storage/storageAccounts/blobServices/containers/blobs/write

この権限を持つプリンシパルは、**コンテナ内のファイルを書き込みおよび上書きすることができ**、これにより損害を引き起こしたり、特権を昇格させたりする可能性があります（例：ブロブに保存されているコードを上書きする）。
```bash
# e.g. Microsoft.Storage/storageAccounts/blobServices/containers/blobs/write
az storage blob upload \
--account-name <acc-name> \
--container-name <container-name> \
--file /tmp/up.txt --auth-mode login --overwrite
```
### \*/delete

これにより、ストレージアカウント内のオブジェクトを削除でき、**いくつかのサービスが中断される**可能性があるか、クライアントが**貴重な情報を失う**ことになります。

{{#include ../../../banners/hacktricks-training.md}}
