# Гібридні ідентичності Різноманітні атаки

{{#include ../../../../banners/hacktricks-training.md}}


## Примусова синхронізація користувачів Entra ID з локальним

Як згадувалося в [https://www.youtube.com/watch?v=JEIR5oGCwdg](https://www.youtube.com/watch?v=JEIR5oGCwdg), було можливим змінити значення **`ProxyAddress`** у користувача AD в локальному AD, додавши електронну пошту адміністратора Entra ID та також переконавшись, що UPN користувача в AD та в Entra ID збігаються (це знову Entra ID), як **`SMTP:admin@domain.onmicrosoft.com`**. І це **примусить синхронізацію цього користувача** з Entra ID до локального AD, тому якщо пароль користувача був відомий, його можна було б використати для **доступу до адміністратора в Entra ID.**

Щоб синхронізувати нового користувача з Entra ID до локального AD, ці вимоги є єдиними вимогами:

- Контролювати атрибути користувача в локальному AD (або мати дозволи на створення нових користувачів)
- Знати користувача, який існує тільки в хмарі, щоб синхронізувати з Entra ID до локального AD
- Вам також може знадобитися змінити атрибут immutableID з користувача Entra ID на користувача локального AD, щоб зробити **жорстке співпадіння**.


> [!CAUTION]
> Entra ID більше не дозволяє синхронізувати адміністраторів з Entra ID до локального AD.
> Також це **не обійде MFA**.



## Посилання

- [https://www.youtube.com/watch?v=JEIR5oGCwdg](https://www.youtube.com/watch?v=JEIR5oGCwdg)
- [https://activedirectorypro.com/sync-on-prem-ad-with-existing-azure-ad-users/](https://activedirectorypro.com/sync-on-prem-ad-with-existing-azure-ad-users/)
- [https://www.orbid365.be/manually-match-on-premise-ad-user-to-existing-office365-user/](https://www.orbid365.be/manually-match-on-premise-ad-user-to-existing-office365-user/)

{{#include ../../../../banners/hacktricks-training.md}}
