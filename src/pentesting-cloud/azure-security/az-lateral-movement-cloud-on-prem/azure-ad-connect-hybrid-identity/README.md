# Az AD Connect - Hybrid Identity

{{#include ../../../../banners/hacktricks-training.md}}

## Basic Information

Ushirikiano kati ya **On-premises Active Directory (AD)** na **Azure AD** unarahisishwa na **Azure AD Connect**, ukitoa mbinu mbalimbali zinazosaidia **Single Sign-on (SSO)**. Kila mbinu, ingawa ni muhimu, ina hatari za usalama zinazoweza kutumiwa kuathiri mazingira ya wingu au ya ndani:

- **Pass-Through Authentication (PTA)**:
- Uwezekano wa kuathiriwa kwa wakala kwenye AD ya ndani, kuruhusu uthibitishaji wa nywila za watumiaji kwa ajili ya muunganisho wa Azure (kutoka ndani hadi Wingu).
- Uwezekano wa kujiandikisha wakala mpya ili kuthibitisha uthibitisho katika eneo jipya (kutoka Wingu hadi ndani).

{{#ref}}
pta-pass-through-authentication.md
{{#endref}}

- **Password Hash Sync (PHS)**:
- Uwezekano wa kutoa nywila za wazi za watumiaji wenye mamlaka kutoka AD, ikiwa ni pamoja na akidi za mtumiaji wa AzureAD aliyejengwa kwa mamlaka ya juu.

{{#ref}}
phs-password-hash-sync.md
{{#endref}}

- **Federation**:
- Wizi wa funguo binafsi zinazotumika kwa ajili ya saini ya SAML, kuruhusu uigaji wa vitambulisho vya ndani na vya wingu.

{{#ref}}
federation.md
{{#endref}}

- **Seamless SSO:**
- Wizi wa nywila ya mtumiaji `AZUREADSSOACC`, inayotumika kwa ajili ya kusaini tiketi za Kerberos za fedha, kuruhusu uigaji wa mtumiaji yeyote wa wingu.

{{#ref}}
seamless-sso.md
{{#endref}}

- **Cloud Kerberos Trust**:
- Uwezekano wa kupandisha kutoka kwa Global Admin hadi kwa Domain Admin wa ndani kwa kubadilisha majina ya watumiaji wa AzureAD na SIDs na kuomba TGTs kutoka AzureAD.

{{#ref}}
az-cloud-kerberos-trust.md
{{#endref}}

- **Default Applications**:
- Kuathiri akaunti ya Msimamizi wa Programu au Akaunti ya Sync ya ndani kunaruhusu mabadiliko ya mipangilio ya directory, uanachama wa vikundi, akaunti za watumiaji, tovuti za SharePoint, na faili za OneDrive.

{{#ref}}
az-default-applications.md
{{#endref}}

Kwa kila mbinu ya ushirikiano, usawazishaji wa watumiaji unafanywa, na akaunti ya `MSOL_<installationidentifier>` inaundwa katika AD ya ndani. Kwa kuzingatia, mbinu zote mbili **PHS** na **PTA** zinasaidia **Seamless SSO**, kuruhusu kuingia kiotomatiki kwa kompyuta za Azure AD zilizounganishwa na eneo la ndani.

Ili kuthibitisha usakinishaji wa **Azure AD Connect**, amri ifuatayo ya PowerShell, ikitumia moduli ya **AzureADConnectHealthSync** (iliyowekwa kwa chaguo-msingi na Azure AD Connect), inaweza kutumika:
```powershell
Get-ADSyncConnector
```
{{#include ../../../../banners/hacktricks-training.md}}
