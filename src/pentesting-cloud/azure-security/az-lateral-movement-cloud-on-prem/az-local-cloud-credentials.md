# Az - Credenziali Locali del Cloud

{{#include ../../../banners/hacktricks-training.md}}

## Archiviazione Locale dei Token e Considerazioni sulla Sicurezza

### Azure CLI (Interfaccia della Riga di Comando)

I token e i dati sensibili sono archiviati localmente da Azure CLI, sollevando preoccupazioni di sicurezza:

1. **Token di Accesso**: Archiviati in testo semplice all'interno di `accessTokens.json` situato in `C:\Users\<username>\.Azure`.
2. **Informazioni sull'Abbonamento**: `azureProfile.json`, nella stessa directory, contiene i dettagli dell'abbonamento.
3. **File di Log**: La cartella `ErrorRecords` all'interno di `.azure` potrebbe contenere log con credenziali esposte, come:
- Comandi eseguiti con credenziali incorporate.
- URL accessibili utilizzando token, che potrebbero rivelare informazioni sensibili.

### Azure PowerShell

Azure PowerShell archivia anche token e dati sensibili, che possono essere accessibili localmente:

1. **Token di Accesso**: `TokenCache.dat`, situato in `C:\Users\<username>\.Azure`, archivia i token di accesso in testo semplice.
2. **Segreti del Principale di Servizio**: Questi sono archiviati non crittografati in `AzureRmContext.json`.
3. **Funzione di Salvataggio del Token**: Gli utenti hanno la possibilità di persistere i token utilizzando il comando `Save-AzContext`, che dovrebbe essere usato con cautela per prevenire accessi non autorizzati.

## Strumenti Automatici per Trovarli

- [**Winpeas**](https://github.com/carlospolop/PEASS-ng/tree/master/winPEAS/winPEASexe)
- [**Get-AzurePasswords.ps1**](https://github.com/NetSPI/MicroBurst/blob/master/AzureRM/Get-AzurePasswords.ps1)

## Raccomandazioni di Sicurezza

Considerando l'archiviazione di dati sensibili in testo semplice, è cruciale proteggere questi file e directory:

- Limitare i diritti di accesso a questi file.
- Monitorare e auditare regolarmente queste directory per accessi non autorizzati o cambiamenti inaspettati.
- Impiegare la crittografia per file sensibili dove possibile.
- Educare gli utenti sui rischi e le migliori pratiche per gestire tali informazioni sensibili.

{{#include ../../../banners/hacktricks-training.md}}
