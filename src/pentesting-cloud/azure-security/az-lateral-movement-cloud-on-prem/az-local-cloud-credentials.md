# Az - Lokalne Cloud Akreditivi

{{#include ../../../banners/hacktricks-training.md}}

## Lokalna Pohrana Tokena i Bezbednosne Razmatranja

### Azure CLI (Interfejs Komandne Linije)

Tokeni i osetljivi podaci se lokalno čuvaju od strane Azure CLI, što izaziva bezbednosne brige:

1. **Pristupni Tokeni**: Čuvaju se u običnom tekstu unutar `accessTokens.json` koji se nalazi na `C:\Users\<username>\.Azure`.
2. **Informacije o Pretplati**: `azureProfile.json`, u istoj direktoriji, sadrži detalje o pretplati.
3. **Log Fajlovi**: Folder `ErrorRecords` unutar `.azure` može sadržati logove sa izloženim akreditivima, kao što su:
- Izvršene komande sa ugrađenim akreditivima.
- URL-ovi pristupani korišćenjem tokena, što može otkriti osetljive informacije.

### Azure PowerShell

Azure PowerShell takođe čuva tokene i osetljive podatke, koji se mogu lokalno pristupiti:

1. **Pristupni Tokeni**: `TokenCache.dat`, koji se nalazi na `C:\Users\<username>\.Azure`, čuva pristupne tokene u običnom tekstu.
2. **Tajni Ključevi Servisnog Principala**: Ovi se čuvaju nešifrovani u `AzureRmContext.json`.
3. **Funkcija Čuvanja Tokena**: Korisnici imaju mogućnost da trajno sačuvaju tokene koristeći komandu `Save-AzContext`, koja treba da se koristi oprezno kako bi se sprečio neovlašćen pristup.

## Automatski Alati za Pronalaženje

- [**Winpeas**](https://github.com/carlospolop/PEASS-ng/tree/master/winPEAS/winPEASexe)
- [**Get-AzurePasswords.ps1**](https://github.com/NetSPI/MicroBurst/blob/master/AzureRM/Get-AzurePasswords.ps1)

## Preporuke za Bezbednost

Uzimajući u obzir pohranu osetljivih podataka u običnom tekstu, ključno je osigurati ove fajlove i direktorijume:

- Ograničiti prava pristupa ovim fajlovima.
- Redovno pratiti i revizirati ove direktorijume zbog neovlašćenog pristupa ili neočekivanih promena.
- Koristiti enkripciju za osetljive fajlove gde je to moguće.
- Obrazovati korisnike o rizicima i najboljim praksama za rukovanje takvim osetljivim informacijama.

{{#include ../../../banners/hacktricks-training.md}}
