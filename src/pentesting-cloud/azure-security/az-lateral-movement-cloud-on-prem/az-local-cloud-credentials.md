# Az - Local Cloud Credentials

{{#include ../../../banners/hacktricks-training.md}}

## Local Token Storage and Security Considerations

### Azure CLI (Command-Line Interface)

Токени та чутливі дані зберігаються локально Azure CLI, що викликає занепокоєння щодо безпеки:

1. **Access Tokens**: Зберігаються у відкритому вигляді в `accessTokens.json`, розташованому за адресою `C:\Users\<username>\.Azure`.
2. **Subscription Information**: `azureProfile.json`, у тій же директорії, містить деталі підписки.
3. **Log Files**: Папка `ErrorRecords` у `.azure` може містити журнали з відкритими обліковими даними, такі як:
- Виконані команди з вбудованими обліковими даними.
- URL-адреси, доступ до яких здійснювався за допомогою токенів, що потенційно розкриває чутливу інформацію.

### Azure PowerShell

Azure PowerShell також зберігає токени та чутливі дані, до яких можна отримати доступ локально:

1. **Access Tokens**: `TokenCache.dat`, розташований за адресою `C:\Users\<username>\.Azure`, зберігає токени доступу у відкритому вигляді.
2. **Service Principal Secrets**: Ці дані зберігаються у незашифрованому вигляді в `AzureRmContext.json`.
3. **Token Saving Feature**: Користувачі мають можливість зберігати токени за допомогою команди `Save-AzContext`, яку слід використовувати обережно, щоб запобігти несанкціонованому доступу.

## Automatic Tools to find them

- [**Winpeas**](https://github.com/carlospolop/PEASS-ng/tree/master/winPEAS/winPEASexe)
- [**Get-AzurePasswords.ps1**](https://github.com/NetSPI/MicroBurst/blob/master/AzureRM/Get-AzurePasswords.ps1)

## Security Recommendations

Враховуючи зберігання чутливих даних у відкритому вигляді, важливо захистити ці файли та директорії, дотримуючись таких рекомендацій:

- Обмежити права доступу до цих файлів.
- Регулярно моніторити та перевіряти ці директорії на наявність несанкціонованого доступу або несподіваних змін.
- Використовувати шифрування для чутливих файлів, де це можливо.
- Освітлювати користувачів про ризики та найкращі практики обробки такої чутливої інформації.

{{#include ../../../banners/hacktricks-training.md}}
