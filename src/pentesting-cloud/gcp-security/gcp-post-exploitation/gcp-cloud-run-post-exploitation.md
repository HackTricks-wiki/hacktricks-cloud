# GCP - Cloud Run Post Exploitation

{{#include ../../../banners/hacktricks-training.md}}

## Cloud Run

Pour plus d'informations sur Cloud Run, consultez :

{{#ref}}
../gcp-services/gcp-cloud-run-enum.md
{{#endref}}

### Suppression d'un job CloudRun
Les permissions `run.services.delete` et `run.services.get`, ainsi que `run.jobs.delete`, permettent à une identité de supprimer complètement un service ou un job Cloud Run, y compris sa configuration et son historique. Entre les mains d'un attaquant, cela peut provoquer une interruption immédiate des applications ou des workflows critiques, entraînant une denial of service (DoS) pour les utilisateurs et les systèmes qui dépendent de la logique du service ou des tâches planifiées essentielles.

Pour supprimer un job, l'opération suivante peut être effectuée.
```bash
gcloud run jobs delete <JOB_NAME> --region=<REGION> --quiet
```
Pour supprimer un service, l'opération suivante peut être effectuée.
```bash
gcloud run services delete <SERVICE_NAME> --region=<REGION> --quiet
```
### Accéder aux images

Si vous pouvez accéder aux images de conteneur, vérifiez le code pour des vulnérabilités et des informations sensibles codées en dur. Vérifiez aussi les informations sensibles dans les variables d'environnement.

Si les images sont stockées dans des dépôts au sein du service Artifact Registry et que l'utilisateur a un accès en lecture sur les dépôts, il pourrait également télécharger l'image depuis ce service.

### Modifier et redéployer l'image

Modifier l'image de run pour voler des informations et redéployer la nouvelle version (le simple téléversement d'un nouveau docker container avec les mêmes tags ne le fera pas exécuter). Par exemple, si elle expose une page de connexion, volez les identifiants envoyés par les utilisateurs.

{{#include ../../../banners/hacktricks-training.md}}
