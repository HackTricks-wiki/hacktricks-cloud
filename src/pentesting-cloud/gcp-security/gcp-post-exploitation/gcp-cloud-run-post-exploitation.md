# GCP - Cloud Run Post Exploitation

{{#include ../../../banners/hacktricks-training.md}}

## Cloud Run

有关 Cloud Run 的更多信息，请查看：

{{#ref}}
../gcp-services/gcp-cloud-run-enum.md
{{#endref}}

### 删除 CloudRun 作业
具有 `run.services.delete` 和 `run.services.get` 权限，以及 `run.jobs.delete` 权限的主体，可以完全删除一个 Cloud Run 服务或作业，包括其配置和历史。在攻击者手中，这可能立即中断应用或关键工作流，导致依赖该服务逻辑或关键计划任务的用户和系统出现 denial of service (DoS)。

要删除一个作业，可以执行以下操作。
```bash
gcloud run jobs delete <JOB_NAME> --region=<REGION> --quiet
```
要删除服务，可以执行以下操作。
```bash
gcloud run services delete <SERVICE_NAME> --region=<REGION> --quiet
```
### 访问镜像

如果你可以访问 container images，请检查代码是否存在漏洞和硬编码的敏感信息，也要检查 env variables 中的敏感信息。

如果镜像存储在 Artifact Registry 服务内的仓库中，且用户对这些仓库具有读取权限，他也可以从该服务下载镜像。

### 修改并重新部署镜像

修改运行镜像以窃取信息并重新部署新版本（仅上传具有相同 tags 的新的 docker container 并不会使其被执行）。例如，如果它暴露了一个 login page，可以窃取用户提交的凭证。

{{#include ../../../banners/hacktricks-training.md}}
