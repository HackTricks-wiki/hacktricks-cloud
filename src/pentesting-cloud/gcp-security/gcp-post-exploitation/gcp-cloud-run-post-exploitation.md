# GCP - Cloud Run Post Exploitation

{{#include ../../../banners/hacktricks-training.md}}

## Cloud Run

Cloud Run에 대한 자세한 정보는 다음을 확인하세요:

{{#ref}}
../gcp-services/gcp-cloud-run-enum.md
{{#endref}}

### Delete CloudRun Job
`run.services.delete` 및 `run.services.get` 권한과 `run.jobs.delete` 권한은 권한을 가진 주체가 구성 및 이력을 포함하여 Cloud Run 서비스 또는 작업을 완전히 삭제할 수 있도록 허용합니다. 공격자의 손에 들어가면 이는 애플리케이션이나 중요한 워크플로에 즉각적인 중단을 초래할 수 있으며, 서비스 로직이나 필수 예약 작업에 의존하는 사용자와 시스템에 대해 denial of service (DoS)를 발생시킬 수 있습니다.

작업을 삭제하려면 다음 작업을 수행할 수 있습니다.
```bash
gcloud run jobs delete <JOB_NAME> --region=<REGION> --quiet
```
서비스를 삭제하려면 다음 작업을 수행할 수 있습니다.
```bash
gcloud run services delete <SERVICE_NAME> --region=<REGION> --quiet
```
### 이미지에 접근

container images에 접근할 수 있다면 코드에서 취약점과 하드코딩된 민감한 정보를 확인하세요. 또한 env variables에 있는 민감한 정보도 확인하세요.

이미지가 Artifact Registry 서비스 내의 repos에 저장되어 있고 사용자가 해당 repos에 대한 read access를 가지고 있다면, 해당 서비스에서 이미지를 다운로드할 수도 있습니다.

### 이미지 수정 및 redeploy

run image를 수정해 정보를 훔치고 새 버전을 redeploy하세요 (단, 동일한 tags로 새 docker container를 업로드하는 것만으로는 실행되지 않습니다). 예를 들어 login page를 노출하고 있다면 사용자가 전송하는 credentials를 탈취하세요.

{{#include ../../../banners/hacktricks-training.md}}
