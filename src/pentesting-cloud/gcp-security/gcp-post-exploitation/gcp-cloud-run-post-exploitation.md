# GCP - Cloud Run Post-explotación

{{#include ../../../banners/hacktricks-training.md}}

## Cloud Run

Para más información sobre Cloud Run consulta:

{{#ref}}
../gcp-services/gcp-cloud-run-enum.md
{{#endref}}

### Eliminar CloudRun Job
Los permisos `run.services.delete` y `run.services.get`, así como `run.jobs.delete`, permiten a una identidad eliminar completamente un servicio o job de Cloud Run, incluida su configuración e historial. En manos de un atacante, esto puede provocar una interrupción inmediata de aplicaciones o flujos de trabajo críticos, resultando en un denial of service (DoS) para los usuarios y sistemas que dependen de la lógica del servicio o de tareas programadas esenciales.

Para eliminar un job, se puede realizar la siguiente operación.
```bash
gcloud run jobs delete <JOB_NAME> --region=<REGION> --quiet
```
Para eliminar un servicio, se puede realizar la siguiente operación.
```bash
gcloud run services delete <SERVICE_NAME> --region=<REGION> --quiet
```
### Accede a las imágenes

Si puedes acceder a las imágenes de contenedor, revisa el código en busca de vulnerabilidades e información sensible hardcodeada. También busca información sensible en las variables de entorno.

Si las imágenes están almacenadas en repositorios dentro del servicio Artifact Registry y el usuario tiene acceso de lectura a los repositorios, también podría descargar la imagen desde este servicio.

### Modifica y vuelve a desplegar la imagen

Modifica la imagen en ejecución para robar información y vuelve a desplegar la nueva versión (subir un nuevo contenedor docker con las mismas etiquetas no hará que se ejecute). Por ejemplo, si expone una página de login, roba las credenciales que los usuarios envían.

{{#include ../../../banners/hacktricks-training.md}}
