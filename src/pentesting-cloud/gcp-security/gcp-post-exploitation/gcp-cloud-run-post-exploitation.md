# GCP - Cloud Run Post Exploitation

{{#include ../../../banners/hacktricks-training.md}}

## Cloud Run

Para mais informações sobre Cloud Run, consulte:

{{#ref}}
../gcp-services/gcp-cloud-run-enum.md
{{#endref}}

### Excluir CloudRun Job
As permissões `run.services.delete` e `run.services.get`, assim como `run.jobs.delete`, permitem que uma identidade exclua completamente um serviço ou job do Cloud Run, incluindo sua configuração e histórico. Nas mãos de um atacante, isso pode causar interrupção imediata de aplicações ou fluxos de trabalho críticos, resultando em uma denial of service (DoS) para usuários e sistemas que dependem da lógica do serviço ou de tarefas agendadas essenciais.

Para excluir um job, a seguinte operação pode ser executada.
```bash
gcloud run jobs delete <JOB_NAME> --region=<REGION> --quiet
```
Para excluir um serviço, a operação a seguir pode ser realizada.
```bash
gcloud run services delete <SERVICE_NAME> --region=<REGION> --quiet
```
### Acessar as images

Se você conseguir acessar as container images, verifique o código em busca de vulnerabilidades e de informações sensíveis hardcoded. Verifique também informações sensíveis nas env variables.

Se as images estiverem armazenadas em repositórios dentro do serviço Artifact Registry e o usuário tiver acesso de leitura aos repositórios, ele também pode fazer o download da image a partir desse serviço.

### Modify & redeploy the image

Modifique a imagem em execução para roubar informações e reimplante a nova versão (apenas enviar um novo docker container com as mesmas tags não fará com que ela seja executada). Por exemplo, se estiver expondo uma página de login, capture as credenciais que os usuários estiverem enviando.

{{#include ../../../banners/hacktricks-training.md}}
