# GCP - Secretmanager Post Exploitation

{{#include ../../../banners/hacktricks-training.md}}

## Secretmanager

Για περισσότερες πληροφορίες σχετικά με το Secret Manager δείτε:

{{#ref}}
../gcp-services/gcp-secrets-manager-enum.md
{{#endref}}

### `secretmanager.versions.access`

Αυτό σας δίνει πρόσβαση για ανάγνωση των μυστικών από το secret manager και ίσως αυτό να βοηθήσει στην κλιμάκωση προνομίων (ανάλογα με τις πληροφορίες που είναι αποθηκευμένες μέσα στο μυστικό):

<details>

<summary>Πρόσβαση σε έκδοση μυστικού</summary>
```bash
# Get clear-text of version 1 of secret: "<secret name>"
gcloud secrets versions access 1 --secret="<secret_name>"
```
</details>

### `secretmanager.versions.destroy`
Η άδεια `secretmanager.versions.destroy` επιτρέπει σε μια οντότητα να καταστρέψει οριστικά (να επισημάνει ως μη αναστρέψιμα διαγραμμένη) μια συγκεκριμένη έκδοση ενός secret στο Secret Manager, κάτι που μπορεί να επιτρέψει την αφαίρεση κρίσιμων credentials και ενδεχομένως να προκαλέσει denial of service ή να αποτρέψει την ανάκτηση ευαίσθητων δεδομένων.
```bash
gcloud secrets versions destroy <VERSION> --secret="<SECRET_NAME>" --project=<PROJECTID>
```
### `secretmanager.versions.disable`
Η άδεια `secretmanager.versions.disable` επιτρέπει σε μια ταυτότητα να απενεργοποιεί ενεργές εκδόσεις μυστικών στο Secret Manager, προσωρινά μπλοκάροντας τη χρήση τους από εφαρμογές ή υπηρεσίες που εξαρτώνται από αυτές.
```bash
gcloud secrets versions disable <VERSION> --secret="<SECRET_NAME>" --project=<PROJECTID>
```
### `secretmanager.secrets.delete`
Το σύνολο δικαιωμάτων `secretmanager.secrets.delete` επιτρέπει σε μια ταυτότητα να διαγράψει πλήρως ένα secret και όλες τις αποθηκευμένες εκδόσεις του στο Secret Manager.
```bash
gcloud secrets delete <SECRET_NAME> --project=<PROJECT_ID>
```
### `secretmanager.secrets.update`
Η άδεια `secretmanager.secrets.update` επιτρέπει σε μια ταυτότητα να τροποποιήσει τα μεταδεδομένα και τη διαμόρφωση ενός secret (για παράδειγμα, ρυθμίσεις rotation, πολιτική εκδόσεων, labels, και ορισμένες ιδιότητες του secret).
```bash
gcloud secrets update SECRET_NAME \
--project=PROJECT_ID \
--clear-labels \
--rotation-period=DURATION
```
{{#include ../../../banners/hacktricks-training.md}}
