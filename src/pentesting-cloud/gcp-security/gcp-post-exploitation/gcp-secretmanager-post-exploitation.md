# GCP - Secretmanager Pós-Exploração

{{#include ../../../banners/hacktricks-training.md}}

## Secretmanager

Para mais informações sobre o Secret Manager, consulte:

{{#ref}}
../gcp-services/gcp-secrets-manager-enum.md
{{#endref}}

### `secretmanager.versions.access`

Isso fornece acesso para ler os segredos do Secret Manager e talvez isso possa ajudar a escalar privilégios (dependendo de quais informações estejam armazenadas dentro do segredo):

<details>

<summary>Acessar versão do segredo</summary>
```bash
# Get clear-text of version 1 of secret: "<secret name>"
gcloud secrets versions access 1 --secret="<secret_name>"
```
</details>

### `secretmanager.versions.destroy`
A permissão `secretmanager.versions.destroy` permite que uma identidade destrua permanentemente (marque como excluída de forma irreversível) uma versão específica de um segredo no Secret Manager, o que pode possibilitar a remoção de credenciais críticas e potencialmente causar negação de serviço ou impedir a recuperação de dados sensíveis.
```bash
gcloud secrets versions destroy <VERSION> --secret="<SECRET_NAME>" --project=<PROJECTID>
```
### `secretmanager.versions.disable`
A permissão `secretmanager.versions.disable` permite que uma identidade desative versões ativas de segredos no Secret Manager, bloqueando temporariamente seu uso por aplicações ou serviços que delas dependam.
```bash
gcloud secrets versions disable <VERSION> --secret="<SECRET_NAME>" --project=<PROJECTID>
```
### `secretmanager.secrets.delete`
O conjunto de permissões `secretmanager.secrets.delete` permite que uma identidade exclua completamente um secret e todas as suas versões armazenadas no Secret Manager.
```bash
gcloud secrets delete <SECRET_NAME> --project=<PROJECT_ID>
```
### `secretmanager.secrets.update`
A permissão `secretmanager.secrets.update` permite que uma identidade modifique os metadados e a configuração de um secret (por exemplo, rotation settings, version policy, labels e certas propriedades do secret).
```bash
gcloud secrets update SECRET_NAME \
--project=PROJECT_ID \
--clear-labels \
--rotation-period=DURATION
```
{{#include ../../../banners/hacktricks-training.md}}
