# GCP - Secretmanager Post Exploitation

{{#include ../../../banners/hacktricks-training.md}}

## Secretmanager

Secret Manager에 대한 자세한 내용은 다음을 확인하세요:

{{#ref}}
../gcp-services/gcp-secrets-manager-enum.md
{{#endref}}

### `secretmanager.versions.access`

이 권한은 Secret Manager에서 비밀을 읽을 수 있는 접근을 제공합니다. 저장된 정보에 따라 권한 상승에 도움이 될 수 있습니다:

<details>

<summary>시크릿 버전 접근</summary>
```bash
# Get clear-text of version 1 of secret: "<secret name>"
gcloud secrets versions access 1 --secret="<secret_name>"
```
</details>

### `secretmanager.versions.destroy`
`secretmanager.versions.destroy` 권한은 주체가 Secret Manager에서 특정 시크릿 버전을 영구 삭제(되돌릴 수 없도록 표시)할 수 있도록 허용합니다. 이는 중요한 자격 증명 제거를 초래하여 서비스 거부를 발생시키거나 민감한 데이터의 복구를 방해할 수 있습니다.
```bash
gcloud secrets versions destroy <VERSION> --secret="<SECRET_NAME>" --project=<PROJECTID>
```
### `secretmanager.versions.disable`
`secretmanager.versions.disable` 권한은 주체가 Secret Manager에서 활성 비밀 버전을 비활성화하여 이를 사용하는 애플리케이션이나 서비스의 사용을 일시적으로 차단할 수 있게 합니다.
```bash
gcloud secrets versions disable <VERSION> --secret="<SECRET_NAME>" --project=<PROJECTID>
```
### `secretmanager.secrets.delete`
`secretmanager.secrets.delete` 권한 세트는 아이덴티티가 Secret Manager에서 시크릿과 그에 저장된 모든 버전을 완전히 삭제할 수 있도록 허용합니다.
```bash
gcloud secrets delete <SECRET_NAME> --project=<PROJECT_ID>
```
### `secretmanager.secrets.update`
`secretmanager.secrets.update` 권한은 아이덴티티가 시크릿의 메타데이터와 구성(예: 회전 설정, 버전 정책, 레이블 및 특정 시크릿 속성)을 수정할 수 있도록 허용합니다.
```bash
gcloud secrets update SECRET_NAME \
--project=PROJECT_ID \
--clear-labels \
--rotation-period=DURATION
```
{{#include ../../../banners/hacktricks-training.md}}
