# GCP - Secretmanager Post Exploitation

{{#include ../../../banners/hacktricks-training.md}}

## Secretmanager

Aby uzyskać więcej informacji o Secret Manager, zobacz:

{{#ref}}
../gcp-services/gcp-secrets-manager-enum.md
{{#endref}}

### `secretmanager.versions.access`

To daje możliwość odczytu secrets ze Secret Manager i może pomóc w eskalacji uprawnień (w zależności od tego, jakie informacje są przechowywane w secret):

<details>

<summary>Dostęp do secret version</summary>
```bash
# Get clear-text of version 1 of secret: "<secret name>"
gcloud secrets versions access 1 --secret="<secret_name>"
```
</details>

### `secretmanager.versions.destroy`
Uprawnienie `secretmanager.versions.destroy` pozwala tożsamości trwale zniszczyć (oznaczyć jako nieodwracalnie usuniętą) konkretną wersję sekretu w Secret Manager, co może umożliwić usunięcie krytycznych credentials i potencjalnie spowodować odmowę usługi lub uniemożliwić odzyskanie danych wrażliwych.
```bash
gcloud secrets versions destroy <VERSION> --secret="<SECRET_NAME>" --project=<PROJECTID>
```
### `secretmanager.versions.disable`
Uprawnienie `secretmanager.versions.disable` umożliwia tożsamości wyłączenie aktywnych wersji sekretów w Secret Manager, tymczasowo blokując ich użycie przez aplikacje lub usługi, które od nich zależą.
```bash
gcloud secrets versions disable <VERSION> --secret="<SECRET_NAME>" --project=<PROJECTID>
```
### `secretmanager.secrets.delete`
Zestaw uprawnień `secretmanager.secrets.delete` pozwala tożsamości na całkowite usunięcie sekretu i wszystkich jego przechowywanych wersji w Secret Manager.
```bash
gcloud secrets delete <SECRET_NAME> --project=<PROJECT_ID>
```
### `secretmanager.secrets.update`
Uprawnienie `secretmanager.secrets.update` pozwala tożsamości modyfikować metadane i konfigurację sekretu (na przykład ustawienia rotacji, politykę wersji, etykiety i niektóre właściwości sekretu).
```bash
gcloud secrets update SECRET_NAME \
--project=PROJECT_ID \
--clear-labels \
--rotation-period=DURATION
```
{{#include ../../../banners/hacktricks-training.md}}
