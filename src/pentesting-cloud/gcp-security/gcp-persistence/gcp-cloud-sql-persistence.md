# GCP - Cloud SQL Persistence

{{#include ../../../banners/hacktricks-training.md}}

## Cloud SQL

Para más información sobre Cloud SQL consulta:

{{#ref}}
../gcp-services/gcp-cloud-sql-enum.md
{{#endref}}

### Exponer la base de datos y añadir tu dirección IP a la lista blanca

Una base de datos accesible solo desde una VPC interna puede ser expuesta externamente y tu dirección IP puede ser añadida a la lista blanca para que puedas acceder a ella.\
Para más información consulta la técnica en:

{{#ref}}
../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md
{{#endref}}

### Crear un nuevo usuario / Actualizar la contraseña de los usuarios / Obtener la contraseña de un usuario

Para conectarte a una base de datos **solo necesitas acceso al puerto** expuesto por la base de datos y un **nombre de usuario** y **contraseña**. Con **suficientes privilegios** podrías **crear un nuevo usuario** o **actualizar** la **contraseña** de un usuario existente.\
Otra opción sería **forzar la contraseña de un usuario** intentando varias contraseñas o accediendo a la contraseña **hash** del usuario dentro de la base de datos (si es posible) y crackeándola.\
Recuerda que **es posible listar los usuarios de una base de datos** usando la API de GCP.

> [!NOTE]
> Puedes crear/actualizar usuarios usando la API de GCP o desde dentro de la base de datos si tienes suficientes permisos.

Para más información consulta la técnica en:

{{#ref}}
../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md
{{#endref}}

{{#include ../../../banners/hacktricks-training.md}}
