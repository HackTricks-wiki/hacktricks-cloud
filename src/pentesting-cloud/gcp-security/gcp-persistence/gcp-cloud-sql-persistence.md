# GCP - Persistência do Cloud SQL

{{#include ../../../banners/hacktricks-training.md}}

## Cloud SQL

Para mais informações sobre o Cloud SQL, consulte:

{{#ref}}
../gcp-services/gcp-cloud-sql-enum.md
{{#endref}}

### Expor o banco de dados e adicionar seu endereço IP à lista de permissões

Um banco de dados acessível apenas a partir de uma VPC interna pode ser exposto externamente e seu endereço IP pode ser adicionado à lista de permissões para que você possa acessá-lo.\
Para mais informações, consulte a técnica em:

{{#ref}}
../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md
{{#endref}}

### Criar um novo usuário / Atualizar a senha dos usuários / Obter a senha de um usuário

Para se conectar a um banco de dados, você **precisa apenas de acesso à porta** exposta pelo banco de dados e de um **nome de usuário** e **senha**. Com **privilégios suficientes**, você poderia **criar um novo usuário** ou **atualizar** a **senha** de um usuário existente.\
Outra opção seria **forçar a senha de um usuário** tentando várias senhas ou acessando a senha **hash** do usuário dentro do banco de dados (se possível) e quebrando-a.\
Lembre-se de que **é possível listar os usuários de um banco de dados** usando a API do GCP.

> [!NOTE]
> Você pode criar/atualizar usuários usando a API do GCP ou de dentro do banco de dados se tiver permissões suficientes.

Para mais informações, consulte a técnica em:

{{#ref}}
../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md
{{#endref}}

{{#include ../../../banners/hacktricks-training.md}}
