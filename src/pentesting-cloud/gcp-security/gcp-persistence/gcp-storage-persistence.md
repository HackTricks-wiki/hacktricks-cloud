# GCP - 存储持久化

{{#include ../../../banners/hacktricks-training.md}}

## 存储

有关 Cloud Storage 的更多信息，请查看：

{{#ref}}
../gcp-services/gcp-storage-enum.md
{{#endref}}

### `storage.hmacKeys.create`

你可以创建一个 HMAC 来在存储桶上保持持久性。有关该技术的更多信息，请[**在此查看**](../gcp-privilege-escalation/gcp-storage-privesc.md#storage.hmackeys.create)。

<details>

<summary>创建并使用 HMAC 密钥以访问 Storage</summary>
```bash
# Create key
gsutil hmac create <sa-email>

# Configure gsutil to use it
gsutil config -a

# Use it
gsutil ls gs://[BUCKET_NAME]
```
</details>

另一个 exploit script 用于此方法，可以在 [here](https://github.com/RhinoSecurityLabs/GCP-IAM-Privilege-Escalation/blob/master/ExploitScripts/storage.hmacKeys.create.py) 找到。

### 赋予公共访问

**将 bucket 设为公开访问** 是保持对该 bucket 访问的另一种方法。查看如何操作：

{{#ref}}
../gcp-post-exploitation/gcp-storage-post-exploitation.md
{{#endref}}

{{#include ../../../banners/hacktricks-training.md}}
