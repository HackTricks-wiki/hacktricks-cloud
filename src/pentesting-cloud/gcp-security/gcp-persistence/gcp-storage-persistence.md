# GCP - Storage Persistence

{{#include ../../../banners/hacktricks-training.md}}

## Storage

Cloud Storage에 대한 자세한 내용은 다음을 확인하세요:

{{#ref}}
../gcp-services/gcp-storage-enum.md
{{#endref}}

### `storage.hmacKeys.create`

버킷에 대한 persistence를 유지하기 위해 HMAC을 생성할 수 있습니다. 이 기법에 대한 자세한 정보는 [**여기**](../gcp-privilege-escalation/gcp-storage-privesc.md#storage.hmackeys.create)를 확인하세요.

<details>

<summary>Storage 접근을 위한 HMAC 키 생성 및 사용</summary>
```bash
# Create key
gsutil hmac create <sa-email>

# Configure gsutil to use it
gsutil config -a

# Use it
gsutil ls gs://[BUCKET_NAME]
```
</details>

이 방법에 대한 또 다른 exploit script는 [here](https://github.com/RhinoSecurityLabs/GCP-IAM-Privilege-Escalation/blob/master/ExploitScripts/storage.hmacKeys.create.py)에서 찾을 수 있습니다.

### 공개 액세스 허용

**버킷을 공개적으로 접근 가능하게 만드는 것**은 버킷에 대한 액세스를 유지하는 또 다른 방법입니다. 방법은 다음에서 확인하세요:

{{#ref}}
../gcp-post-exploitation/gcp-storage-post-exploitation.md
{{#endref}}

{{#include ../../../banners/hacktricks-training.md}}
