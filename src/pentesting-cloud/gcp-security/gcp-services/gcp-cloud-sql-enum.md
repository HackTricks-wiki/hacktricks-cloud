# GCP - Cloud SQL Enum

{{#include ../../../banners/hacktricks-training.md}}

## Basic Information

Google Cloud SQL ni huduma inayosimamiwa ambayo **inasimplisha kuweka, kudumisha, na kusimamia hifadhidata za uhusiano** kama MySQL, PostgreSQL, na SQL Server kwenye Google Cloud Platform, ikiondoa hitaji la kushughulikia kazi kama vile upatikanaji wa vifaa, kuweka hifadhidata, kusasisha, na nakala za akiba.

Vipengele muhimu vya Google Cloud SQL ni pamoja na:

1. **Fully Managed**: Google Cloud SQL ni huduma inayosimamiwa kikamilifu, ikimaanisha kwamba Google inashughulikia kazi za matengenezo ya hifadhidata kama vile kusasisha, nakala za akiba, na usanidi.
2. **Scalability**: Inatoa uwezo wa kupanua uwezo wa uhifadhi wa hifadhidata yako na rasilimali za kompyuta, mara nyingi bila kusimama.
3. **High Availability**: Inatoa usanidi wa upatikanaji wa juu, kuhakikisha kwamba huduma zako za hifadhidata ni za kuaminika na zinaweza kustahimili kushindwa kwa eneo au mfano.
4. **Security**: Inatoa vipengele vya usalama imara kama vile usimbaji wa data, udhibiti wa Utambulisho na Usimamizi wa Ufikiaji (IAM), na kutengwa kwa mtandao kwa kutumia IP za kibinafsi na VPC.
5. **Backups and Recovery**: Inasaidia nakala za akiba za kiotomatiki na urejeleaji wa wakati maalum, ikikusaidia kulinda na kurejesha data yako.
6. **Integration**: Inajumuisha kwa urahisi na huduma nyingine za Google Cloud, ikitoa suluhisho kamili la kujenga, kupeleka, na kusimamia programu.
7. **Performance**: Inatoa vipimo vya utendaji na uchunguzi wa matatizo ili kufuatilia, kutatua matatizo, na kuboresha utendaji wa hifadhidata.

### Password

Katika console ya wavuti Cloud SQL inaruhusu mtumiaji **kueka** **nenosiri** la hifadhidata, pia kuna kipengele cha kuunda, lakini muhimu zaidi, **MySQL** inaruhusu **kuacha nenosiri tupu na zote zinaruhusu kuweka kama nenosiri herufi "a":**

<figure><img src="../../../images/image (14).png" alt=""><figcaption></figcaption></figure>

Pia inawezekana kusanidi sera ya nenosiri inayohitaji **urefu**, **ugumu**, **kuondoa matumizi tena** na **kuondoa jina la mtumiaji katika nenosiri**. Zote zimezimwa kwa default.

**SQL Server** inaweza kusanidiwa na **Uthibitishaji wa Active Directory**.

### Zone Availability

Hifadhidata inaweza kuwa **inapatikana katika eneo 1 au katika mengi**, bila shaka, inapendekezwa kuwa na hifadhidata muhimu katika maeneo mengi.

### Encryption

Kwa default, funguo za usimbaji zinazodhibitiwa na Google zinatumika, lakini pia **inawezekana kuchagua funguo za usimbaji zinazodhibitiwa na Mteja (CMEK)**.

### Connections

- **Private IP**: Onyesha mtandao wa VPC na hifadhidata itapata IP ya kibinafsi ndani ya mtandao
- **Public IP**: Hifadhidata itapata IP ya umma, lakini kwa default hakuna atakayekuwa na uwezo wa kuungana
- **Authorized networks**: Onyesha **mipangilio ya IP za umma ambazo zinapaswa kuruhusiwa** kuungana na hifadhidata
- **Private Path**: Ikiwa DB imeunganishwa katika VPC fulani, inawezekana kuwezesha chaguo hili na kutoa **huduma nyingine za GCP kama BigQuery ufikiaji juu yake**

<figure><img src="../../../images/image (15).png" alt=""><figcaption></figcaption></figure>

### Data Protection

- **Daily backups**: Fanya nakala za akiba za kiotomatiki kila siku na onyesha idadi ya nakala za akiba unazotaka kudumisha.
- **Point-in-time recovery**: Inakuruhusu kurejesha data kutoka wakati maalum, hadi sehemu ya sekunde.
- **Deletion Protection**: Ikiwa imewezeshwa, DB haitakuwa na uwezo wa kufutwa hadi kipengele hiki kiweze kuzimwa.

### Enumeration
```bash
# Get SQL instances
gcloud sql instances list
gcloud sql instances describe <inst-name> # get IPs, CACert, settings

# Get database names inside an instance (like information_schema, sys...)
gcloud sql databases list --instance <intance-name>
gcloud sql databases describe <db-name> --instance <intance-name>

# Get usernames inside the db instance
gcloud sql users list --instance <intance-name>

# Backups
gcloud sql backups list --instance <intance-name>
gcloud sql backups describe <backup-name> --instance <intance-name>
```
### Uthibitisho wa Enum

{{#ref}}
../gcp-unauthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md
{{#endref}}

### Baada ya Kutekeleza

{{#ref}}
../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md
{{#endref}}

### Kudumu

{{#ref}}
../gcp-persistence/gcp-cloud-sql-persistence.md
{{#endref}}

{{#include ../../../banners/hacktricks-training.md}}
