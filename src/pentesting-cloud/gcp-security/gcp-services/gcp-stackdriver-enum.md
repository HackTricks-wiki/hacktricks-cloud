# GCP - Stackdriver Enum

{{#include ../../../banners/hacktricks-training.md}}

## [Stackdriver logging](https://cloud.google.com/sdk/gcloud/reference/logging/)

[**Stackdriver**](https://cloud.google.com/stackdriver/)는 Google에서 제공하는 포괄적인 인프라 **로깅 스위트**로 인정받고 있습니다. 이는 Compute Instances 내에서 실행된 개별 명령을 보고하는 syslog와 같은 기능을 통해 민감한 데이터를 캡처할 수 있는 능력을 가지고 있습니다. 또한, 로드 밸런서나 App Engine 애플리케이션에 전송된 HTTP 요청, VPC 통신 내의 네트워크 패킷 메타데이터 등을 모니터링합니다.

Compute Instance의 경우, 해당 서비스 계정은 인스턴스 활동의 로깅을 용이하게 하기 위해 단지 **WRITE** 권한만 필요합니다. 그럼에도 불구하고, 관리자가 서비스 계정에 **READ** 및 **WRITE** 권한을 **우연히** 부여할 가능성이 있습니다. 이러한 경우, 로그를 통해 민감한 정보를 조사할 수 있습니다.

이를 달성하기 위해, [gcloud logging](https://cloud.google.com/sdk/gcloud/reference/logging/) 유틸리티는 도구 세트를 제공합니다. 처음에는 현재 프로젝트에 존재하는 로그 유형을 식별하는 것이 권장됩니다.
```bash
# List logs
gcloud logging logs list

# Read logs
gcloud logging read [FOLDER]

# Write logs
# An attacker writing logs may confuse the Blue Team
gcloud logging write [FOLDER] [MESSAGE]

# List Buckets
gcloud logging buckets list
```
## References

- [https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/#reviewing-stackdriver-logging](https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/#reviewing-stackdriver-logging)
- [https://initblog.com/2020/gcp-post-exploitation/](https://initblog.com/2020/gcp-post-exploitation/)

{{#include ../../../banners/hacktricks-training.md}}
