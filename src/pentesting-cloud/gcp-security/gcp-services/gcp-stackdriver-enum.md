# GCP - Stackdriver Enum

{{#include ../../../banners/hacktricks-training.md}}

## [Stackdriver logging](https://cloud.google.com/sdk/gcloud/reference/logging/)

[**Stackdriver**](https://cloud.google.com/stackdriver/) 被认为是 Google 提供的全面基础设施 **日志记录套件**。它能够通过 syslog 等功能捕获敏感数据，syslog 报告在计算实例中执行的单个命令。此外，它还监控发送到负载均衡器或 App Engine 应用程序的 HTTP 请求、VPC 通信中的网络数据包元数据等。

对于计算实例，相应的服务账户仅需 **WRITE** 权限即可促进实例活动的日志记录。然而，管理员可能会 **无意中** 为服务账户提供 **READ** 和 **WRITE** 权限。在这种情况下，可以检查日志以获取敏感信息。

为此，[gcloud logging](https://cloud.google.com/sdk/gcloud/reference/logging/) 工具提供了一套工具。最初，建议识别当前项目中存在的日志类型。
```bash
# List logs
gcloud logging logs list

# Read logs
gcloud logging read [FOLDER]

# Write logs
# An attacker writing logs may confuse the Blue Team
gcloud logging write [FOLDER] [MESSAGE]

# List Buckets
gcloud logging buckets list
```
## 参考文献

- [https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/#reviewing-stackdriver-logging](https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/#reviewing-stackdriver-logging)
- [https://initblog.com/2020/gcp-post-exploitation/](https://initblog.com/2020/gcp-post-exploitation/)

{{#include ../../../banners/hacktricks-training.md}}
