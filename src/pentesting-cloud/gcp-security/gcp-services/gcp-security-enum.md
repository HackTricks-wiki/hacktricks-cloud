# GCP - 보안 열거

{{#include ../../../banners/hacktricks-training.md}}

## 기본 정보

Google Cloud Platform (GCP) 보안은 Google Cloud 환경 내의 리소스와 데이터의 **보안**을 보장하기 위해 설계된 **종합적인 도구** 및 관행을 포함하며, **보안 명령 센터, 탐지 및 제어, 데이터 보호 및 제로 트러스트**의 네 가지 주요 섹션으로 나뉩니다.

## **보안 명령 센터**

Google Cloud Platform (GCP) 보안 명령 센터(SCC)는 조직이 클라우드 자산에 대한 가시성과 제어를 얻을 수 있도록 하는 **GCP 리소스에 대한 보안 및 위험 관리 도구**입니다. 이는 포괄적인 보안 분석을 제공하고, **구성 오류를 식별하며**, 보안 표준 준수를 보장하고, 자동화된 위협 탐지 및 대응을 위해 다른 보안 도구와 **통합**하여 **위협을 탐지하고 대응**하는 데 도움을 줍니다.

- **개요**: 보안 명령 센터의 모든 결과를 **시각화하는 패널**입니다.
- 위협: \[프리미엄 필요] 모든 **탐지된 위협을 시각화하는 패널**입니다. 아래에서 위협에 대한 자세한 내용을 확인하세요.
- **취약점**: GCP 계정에서 **발견된 구성 오류를 시각화하는 패널**입니다.
- **준수**: \[프리미엄 필요] 이 섹션은 조직에 대해 여러 준수 검사를 **테스트할 수 있게 해줍니다** (예: PCI-DSS, NIST 800-53, CIS 벤치마크 등).
- **자산**: 이 섹션은 **사용 중인 모든 자산을 보여줍니다**, 시스템 관리자(및 아마도 공격자)가 단일 페이지에서 실행 중인 내용을 확인하는 데 매우 유용합니다.
- **발견 사항**: GCP 보안의 다양한 섹션(명령 센터뿐만 아니라)의 **발견 사항을 테이블로 집계**하여 중요한 발견 사항을 쉽게 시각화할 수 있습니다.
- **출처**: GCP 보안의 다양한 섹션의 **발견 사항 요약**을 **섹션별로** 보여줍니다.
- **자세한 정보**: \[프리미엄 필요] 보안 자세는 GCP 환경의 **보안을 정의, 평가 및 모니터링**할 수 있게 해줍니다. 이는 GCP의 리소스를 제어/모니터링하는 제약이나 제한을 정의하는 정책을 생성하여 작동합니다. [https://cloud.google.com/security-command-center/docs/security-posture-overview?authuser=2#predefined-policy](https://cloud.google.com/security-command-center/docs/security-posture-overview?authuser=2#predefined-policy)에서 찾을 수 있는 여러 사전 정의된 자세 템플릿이 있습니다.

### **위협**

공격자의 관점에서 볼 때, 이는 아마도 **공격자를 탐지할 수 있는 가장 흥미로운 기능**일 것입니다. 그러나 이 기능은 **프리미엄**이 필요하므로(즉, 회사가 더 많은 비용을 지불해야 함) **활성화되지 않을 수도 있습니다**.

위협 탐지 메커니즘에는 3가지 유형이 있습니다:

- **이벤트 위협**: Google이 내부적으로 생성한 **규칙**에 따라 **Cloud Logging**의 이벤트를 일치시켜 생성된 발견 사항입니다. **Google Workspace 로그**도 스캔할 수 있습니다.
- 모든 [**탐지 규칙에 대한 설명은 문서에서 확인할 수 있습니다**](https://cloud.google.com/security-command-center/docs/concepts-event-threat-detection-overview?authuser=2#how_works).
- **컨테이너 위협**: 컨테이너의 커널의 저수준 동작을 분석한 후 생성된 발견 사항입니다.
- **사용자 정의 위협**: 회사에서 생성한 규칙입니다.

두 유형의 탐지된 위협에 대한 권장 대응 사항은 [https://cloud.google.com/security-command-center/docs/how-to-investigate-threats?authuser=2#event_response](https://cloud.google.com/security-command-center/docs/how-to-investigate-threats?authuser=2#event_response)에서 확인할 수 있습니다.

### 열거
```bash
# Get a source
gcloud scc sources describe <org-number> --source=5678
## If the response is that the service is disabled or that the source is not found, then, it isn't enabled

# Get notifications
gcloud scc notifications list <org-number>

# Get findings (if not premium these are just vulnerabilities)
gcloud scc findings list <org-number>
```
### Post Exploitation

{{#ref}}
../gcp-post-exploitation/gcp-security-post-exploitation.md
{{#endref}}

## Detections and Controls

- **Chronicle SecOps**: 팀이 위협 탐지, 조사 및 대응을 포함한 보안 운영의 속도와 영향을 높이는 데 도움을 주기 위해 설계된 고급 보안 운영 스위트입니다.
- **reCAPTCHA Enterprise**: 인간 사용자와 봇을 구별하여 웹사이트를 스크래핑, 자격 증명 채우기 및 자동화된 공격과 같은 사기 활동으로부터 보호하는 서비스입니다.
- **Web Security Scanner**: Google Cloud 또는 다른 웹 서비스에 호스팅된 웹 애플리케이션의 취약점 및 일반적인 보안 문제를 감지하는 자동화된 보안 스캐닝 도구입니다.
- **Risk Manager**: 조직이 Google Cloud 위험 태세를 평가, 문서화 및 이해하는 데 도움을 주는 거버넌스, 위험 및 컴플라이언스(GRC) 도구입니다.
- **Binary Authorization**: 기업이 설정한 정책에 따라 신뢰할 수 있는 컨테이너 이미지만 Kubernetes Engine 클러스터에 배포되도록 보장하는 컨테이너에 대한 보안 제어입니다.
- **Advisory Notifications**: 잠재적인 보안 문제, 취약점 및 리소스를 안전하게 유지하기 위한 권장 조치에 대한 경고 및 자문을 제공하는 서비스입니다.
- **Access Approval**: Google 직원이 데이터나 구성에 접근하기 전에 명시적인 승인을 요구할 수 있도록 하는 기능으로, 추가적인 제어 및 감사 가능성을 제공합니다.
- **Managed Microsoft AD**: 사용자가 Google Cloud에서 기존 Microsoft AD 의존 앱 및 워크로드를 사용할 수 있도록 하는 관리형 Microsoft Active Directory(AD) 서비스를 제공합니다.

## Data Protection

- **Sensitive Data Protection**: 개인 정보나 지적 재산과 같은 민감한 데이터를 무단 접근이나 노출로부터 보호하기 위한 도구 및 관행입니다.
- **Data Loss Prevention (DLP)**: 사용 중, 이동 중 및 정지 상태의 데이터를 식별, 모니터링 및 보호하기 위해 심층 콘텐츠 검사를 통해 포괄적인 데이터 보호 규칙 세트를 적용하는 도구 및 프로세스입니다.
- **Certificate Authority Service**: 내부 및 외부 서비스에 대한 SSL/TLS 인증서의 관리, 배포 및 갱신을 단순화하고 자동화하는 확장 가능하고 안전한 서비스입니다.
- **Key Management**: 애플리케이션을 위한 암호화 키를 관리할 수 있는 클라우드 기반 서비스로, 암호화 키의 생성, 가져오기, 회전, 사용 및 파기를 포함합니다. 더 많은 정보는 다음에서 확인할 수 있습니다:

{{#ref}}
gcp-kms-enum.md
{{#endref}}

- **Certificate Manager**: SSL/TLS 인증서를 관리하고 배포하여 웹 서비스 및 애플리케이션에 대한 안전하고 암호화된 연결을 보장하는 서비스입니다.
- **Secret Manager**: API 키, 비밀번호, 인증서 및 기타 민감한 데이터를 위한 안전하고 편리한 저장 시스템으로, 애플리케이션에서 이러한 비밀에 대한 쉽고 안전한 접근 및 관리를 가능하게 합니다. 더 많은 정보는 다음에서 확인할 수 있습니다:

{{#ref}}
gcp-secrets-manager-enum.md
{{#endref}}

## Zero Trust

- **BeyondCorp Enterprise**: 사용자 및 장치 신뢰의 검증에 의존하여 전통적인 VPN 없이 내부 애플리케이션에 대한 안전한 접근을 가능하게 하는 제로 트러스트 보안 플랫폼입니다.
- **Policy Troubleshooter**: 관리자가 조직 내에서 특정 리소스에 대한 사용자 접근 권한의 이유나 접근이 거부된 이유를 식별하여 제로 트러스트 정책의 시행을 돕는 도구입니다.
- **Identity-Aware Proxy (IAP)**: 요청의 출처가 아닌 요청의 신원 및 맥락에 따라 Google Cloud, 온프레미스 또는 다른 클라우드에서 실행되는 클라우드 애플리케이션 및 VM에 대한 접근을 제어하는 서비스입니다.
- **VPC Service Controls**: Google Cloud의 Virtual Private Cloud(VPC)에 호스팅된 리소스 및 서비스에 추가적인 보호 계층을 제공하여 데이터 유출을 방지하고 세분화된 접근 제어를 제공합니다.
- **Access Context Manager**: Google Cloud의 BeyondCorp Enterprise의 일부로, 사용자의 신원 및 요청의 맥락(예: 장치 보안 상태, IP 주소 등)에 따라 세분화된 접근 제어 정책을 정의하고 시행하는 데 도움을 주는 도구입니다.

{{#include ../../../banners/hacktricks-training.md}}
