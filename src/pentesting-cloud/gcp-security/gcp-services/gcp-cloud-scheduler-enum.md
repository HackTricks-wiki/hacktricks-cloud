# GCP - Cloud Scheduler Enum

{{#include ../../../banners/hacktricks-training.md}}

## Basic Information

Η Google Cloud Scheduler είναι μια πλήρως διαχειριζόμενη **υπηρεσία cron job** που σας επιτρέπει να εκτελείτε αυθαίρετες εργασίες—όπως εργασίες batch, big data, λειτουργίες υποδομής cloud—σε καθορισμένες ώρες, ημερομηνίες ή διαστήματα. Είναι ενσωματωμένη με τις υπηρεσίες Google Cloud, παρέχοντας έναν τρόπο για να **αυτοματοποιείτε διάφορες εργασίες όπως ενημερώσεις ή επεξεργασία batch σε τακτική βάση**.

Αν και από επιθετική άποψη αυτό ακούγεται καταπληκτικό, στην πραγματικότητα δεν είναι τόσο ενδιαφέρον γιατί η υπηρεσία απλώς επιτρέπει τον προγραμματισμό ορισμένων απλών ενεργειών σε μια συγκεκριμένη ώρα και όχι την εκτέλεση αυθαίρετου κώδικα.

Αυτή τη στιγμή που γράφεται αυτό, αυτές είναι οι ενέργειες που επιτρέπει να προγραμματιστούν αυτή η υπηρεσία:

<figure><img src="../../../images/image (347).png" alt="" width="563"><figcaption></figcaption></figure>

- **HTTP**: Στείλτε ένα HTTP αίτημα καθορίζοντας τις κεφαλίδες και το σώμα του αιτήματος.
- **Pub/Sub**: Στείλτε ένα μήνυμα σε ένα συγκεκριμένο θέμα.
- **App Engine HTTP**: Στείλτε ένα HTTP αίτημα σε μια εφαρμογή που έχει κατασκευαστεί στο App Engine.
- **Workflows**: Καλέστε ένα GCP Workflow.

## Service Accounts

Ένας λογαριασμός υπηρεσίας δεν απαιτείται πάντα από κάθε προγραμματιστή. Οι τύποι **Pub/Sub** και **App Engine HTTP** δεν απαιτούν κανέναν λογαριασμό υπηρεσίας. Ο **Workflow** απαιτεί λογαριασμό υπηρεσίας, αλλά θα καλέσει απλώς το workflow.\
Τέλος, ο κανονικός τύπος HTTP δεν απαιτεί λογαριασμό υπηρεσίας, αλλά είναι δυνατόν να υποδείξετε ότι απαιτείται κάποιος τύπος αυθεντικοποίησης από το workflow και να προσθέσετε είτε ένα **OAuth token είτε ένα OIDC token στο αποσταλμένο** HTTP αίτημα.

> [!CAUTION]
> Επομένως, είναι δυνατόν να κλέψετε το **OIDC** token και να καταχραστείτε το **OAuth** token από λογαριασμούς υπηρεσίας **καταχρώντας τον τύπο HTTP**. Περισσότερα σχετικά με αυτό στη σελίδα κλιμάκωσης προνομίων.

Σημειώστε ότι είναι δυνατόν να περιορίσετε το πεδίο του OAuth token που αποστέλλεται, ωστόσο, από προεπιλογή, θα είναι `cloud-platform`.

## Enumeration
```bash
# Get schedulers in a location
gcloud scheduler jobs list --location us-central1

# Get information of an specific scheduler
gcloud scheduler jobs describe --location us-central1 <scheduler-name>
```
## Ανύψωση Δικαιωμάτων

{{#ref}}
../gcp-privilege-escalation/gcp-cloudscheduler-privesc.md
{{#endref}}

{{#include ../../../banners/hacktricks-training.md}}
