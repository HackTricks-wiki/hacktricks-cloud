# GCP - Bigtable Enum

{{#include ../../../banners/hacktricks-training.md}}

## Bigtable

Google Cloud Bigtable, son derece yüksek throughput ve düşük gecikme gerektiren uygulamalar için tasarlanmış tamamen yönetilen, ölçeklenebilir bir NoSQL veritabanıdır. Petabaytlarca veriyi binlerce node'a yayarak işlerken hızlı okuma ve yazma performansı sağlar. Bigtable, zaman serisi verileri, IoT telemetri, finansal analiz, kişiselleştirme motorları ve büyük ölçekli operasyonel veritabanları gibi iş yükleri için idealdir. Altında yatan depolama modeli olarak seyrek, dağıtılmış, çok boyutlu sıralı bir harita kullanır; bu, birçok sütunun boş olabileceği geniş tabloları verimli şekilde saklamasını sağlar. [Learn more](https://cloud.google.com/bigtable).

### Hiyerarşi

1. **Bigtable Instance**

A Bigtable instance, oluşturduğunuz en üst düzey kaynaktır.
Kendi başına veri depolamaz—cluster'larınızı ve tablolarınızı bir arada gruplayan mantıksal bir konteyner olarak düşünün.

İki tür instance vardır:

- Development instance (tek-node, ucuz, production için uygun değil)
- Production instance (birden fazla cluster içerebilir)

2. **Clusters**

Bir cluster, Bigtable verilerini sunmak için kullanılan gerçek compute ve depolama kaynaklarını içerir.

- Her cluster tek bir bölgede (region) bulunur.
- CPU, RAM ve ağ kapasitesi sağlayan node'lardan oluşur.
- Yüksek kullanılabilirlik veya küresel okuma/yazma için multi-cluster instance'lar oluşturabilirsiniz.
- Aynı instance içindeki cluster'lar arasında veri otomatik olarak replike edilir.

Önemli:
- Tablolar belirli bir cluster'a değil, instance'a aittir.
- Cluster'lar yalnızca veriyi sunmak için gereken kaynakları sağlar.

3. **Tables**

A table in Bigtable, NoSQL veritabanlarındaki bir tabloya benzer:

- Veriler, bir row key ile tanımlanan satırlarda saklanır.
- Her satır, sütun aileleri (column families) içerir; bunlar sütunları barındırır.
- Seyrektir: boş hücreler alan tüketmez.
- Bigtable verileri row key'e göre leksikografik olarak sıralanmış şekilde depolar.

Tablolar, instance içindeki tüm cluster'lar tarafından sunulur.

4. **Tablets (and Hot Tablets)**

Bigtable, her tabloyu tablet adı verilen yatay bölümlere ayırır. Bir tablet:

- Row key aralığının kesintisiz bir bölümüdür.
- Herhangi bir anda tek bir node üzerinde depolanır.
- Tablet'ler Bigtable tarafından otomatik olarak bölünür, birleştirilir ve taşınır.

Bir **hot tablet** şu durumda oluşur:

- Çok fazla okuma veya yazma aynı row-key aralığına (aynı tablet'e) isabet ettiğinde.
- O belirli tablet/node aşırı yüklenir.
- Bu, hotspot'lara (performans darboğazlarına) yol açar.

5. **Authorized Views**

Authorized views, bir tablonun verilerinin alt kümesini belirli kullanıcılar veya uygulamalarla tüm tabloya erişim vermeden paylaşmanıza olanak tanır. Bu şunlar için faydalıdır:

- Hassas verilere erişimi sınırlamak.
- Belirli sütunlar veya satırlar için salt-okunur erişim sağlamak.

6. **App Profiles**

Bir Bigtable app profile, özellikle birden fazla cluster bulunan ortamlarda belirli bir uygulama veya istemcinin bir Bigtable instance ile nasıl etkileşeceğini tanımlayan yapılandırmadır. Yönlendirme davranışını kontrol eder—isteklerin tek bir cluster'a mı yoksa yüksek kullanılabilirlik için birden fazla cluster'a mı yönlendirileceğini belirler—ve yazıların nasıl replikasyon yapılacağını yönetir; eşzamanlı (daha güçlü tutarlılık) veya eşzamansız (daha düşük gecikme) modlar arasında seçim yapar.
```bash
# Cloud Bigtable
gcloud bigtable instances list
gcloud bigtable instances describe <instance>
gcloud bigtable instances get-iam-policy <instance>

## Clusters
gcloud bigtable clusters list
gcloud bigtable clusters describe <cluster>

## Tables
gcloud bigtable tables list --instance <INSTANCE>
gcloud bigtable tables describe --instance <INSTANCE> <TABLE>
gcloud bigtable tables get-iam-policy --instance <INSTANCE> <TABLE>

## Backups
gcloud bigtable backups list --instance <INSTANCE>
gcloud bigtable backups describe --instance <INSTANCE> <backupname>
gcloud bigtable backups get-iam-policy --instance <INSTANCE> <backupname>

## Hot Tables
gcloud bigtable hot-tablets list

## App Profiles
gcloud bigtable app-profiles list --instance <INSTANCE>
gcloud bigtable app-profiles describe --instance <INSTANCE> <app-prof>

## Authorized Views
gcloud bigtable authorized-views list --instance <INSTANCE> --table <TABLE>
gcloud bigtable authorized-views describe --instance <INSTANCE> --table <TABLE> <VIEW>
```
## Privilege Escalation

{{#ref}}
../gcp-privilege-escalation/gcp-bigtable-privesc.md
{{#endref}}

## Post Exploitation

{{#ref}}
../gcp-post-exploitation/gcp-bigtable-post-exploitation.md
{{#endref}}

## Persistence

{{#ref}}
../gcp-persistence/gcp-bigtable-persistence.md
{{#endref}}

{{#include ../../../banners/hacktricks-training.md}}
