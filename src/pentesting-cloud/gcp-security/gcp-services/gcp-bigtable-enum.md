# GCP - Bigtable Enum

{{#include ../../../banners/hacktricks-training.md}}

## Bigtable

Google Cloud Bigtable एक fully managed, scalable NoSQL डेटाबेस है जो उन applications के लिए डिज़ाइन किया गया है जिन्हें अत्यधिक high throughput और low latency की आवश्यकता होती है। यह massive मात्रा में डेटा—हज़ारों nodes पर petabytes—हैंडल करने के लिए बनाया गया है, फिर भी तेज read और write प्रदर्शन देता है। Bigtable उन workloads के लिए उपयुक्त है जैसे time-series data, IoT telemetry, financial analytics, personalization engines, और large-scale operational databases। यह एक sparse, distributed, multidimensional sorted map को underlying storage model के रूप में उपयोग करता है, जो wide tables को कुशलता से स्टोर करने में मदद करता है जहाँ कई कॉलम खाली हो सकते हैं। [Learn more](https://cloud.google.com/bigtable).

### Hierarchy

1. **Bigtable Instance**

A Bigtable instance वह top-level resource है जिसे आप बनाते हैं।
यह स्वयं डेटा स्टोर नहीं करता—इसे एक logical container के रूप में सोचें जो आपके clusters और tables को एक साथ समूहित करता है।

दो प्रकार के instances होते हैं:

- Development instance (single-node, सस्ता, production के लिए नहीं)
- Production instance (में multiple clusters हो सकते हैं)

2. **Clusters**

A cluster में वास्तविक compute और storage संसाधन होते हैं जो Bigtable डेटा को सर्व करने के लिए उपयोग किए जाते हैं।

- प्रत्येक cluster एक single क्षेत्र (region) में रहता है।
- यह nodes से बना होता है, जो CPU, RAM, और network क्षमता प्रदान करते हैं।
- आप high availability या global reads/writes के लिए multi-cluster instances बना सकते हैं।
- उसी instance के clusters के बीच डेटा स्वचालित रूप से replicate होता है।

महत्वपूर्ण:
- Tables instance के अंतर्गत आते हैं, किसी specific cluster के नहीं।
- Clusters केवल डेटा को सर्व करने के लिए संसाधन प्रदान करते हैं।

3. **Tables**

Bigtable में एक table NoSQL डेटाबेस के table के समान होता है:

- डेटा rows में स्टोर होता है, जिन्हें एक row key द्वारा पहचाना जाता है।
- हर row में column families होते हैं, जो columns को contain करते हैं।
- यह sparse है: खाली cells जगह नहीं लेते।
- Bigtable row key के अनुसार lexicographically sort करके डेटा स्टोर करता है।

Tables instance के सभी clusters द्वारा सर्व किए जाते हैं।

4. **Tablets (and Hot Tablets)**

Bigtable प्रत्येक table को horizontal partitions में विभाजित करता है जिन्हें tablets कहा जाता है। एक tablet:

- row keys की एक contiguous range होती है।
- किसी भी समय एक single node पर स्टोर रहती है।
- Tablets को Bigtable द्वारा स्वचालित रूप से split, merge और move किया जाता है।

A **hot tablet** तब होता है जब:

- बहुत सारे reads या writes एक ही row-key range (एक ही tablet) को टार्गेट करते हैं।
- वह विशेष tablet/node overloaded हो जाता है।
- इससे hotspots (performance bottlenecks) बनते हैं।

5. **Authorized Views**

Authorized views आपको table के डेटा का एक subset बनाने की अनुमति देती है जिसे आप specific users या applications के साथ साझा कर सकते हैं बिना उन्हें पूरे table तक पहुंच दिए। यह उपयोगी है:

- संवेदनशील डेटा तक पहुँच सीमित करने के लिए।
- विशेष columns या rows के लिए read-only एक्सेस प्रदान करने के लिए।

6. **App Profiles**

A Bigtable app profile एक configuration है जो परिभाषित करता है कि कोई specific application या client किसी Bigtable instance के साथ कैसे interact करे, विशेषकर multi-cluster वातावरण में। यह routing व्यवहार को नियंत्रित करता है—यह तय करता है कि requests को single cluster पर भेजना चाहिए या high availability के लिए multiple clusters में distribute करना चाहिए—और यह writes के replication के तरीके को भी नियंत्रित करता है, synchronous (stronger consistency) या asynchronous (lower latency) मोड के बीच चुनाव करते हुए।
```bash
# Cloud Bigtable
gcloud bigtable instances list
gcloud bigtable instances describe <instance>
gcloud bigtable instances get-iam-policy <instance>

## Clusters
gcloud bigtable clusters list
gcloud bigtable clusters describe <cluster>

## Tables
gcloud bigtable tables list --instance <INSTANCE>
gcloud bigtable tables describe --instance <INSTANCE> <TABLE>
gcloud bigtable tables get-iam-policy --instance <INSTANCE> <TABLE>

## Backups
gcloud bigtable backups list --instance <INSTANCE>
gcloud bigtable backups describe --instance <INSTANCE> <backupname>
gcloud bigtable backups get-iam-policy --instance <INSTANCE> <backupname>

## Hot Tables
gcloud bigtable hot-tablets list

## App Profiles
gcloud bigtable app-profiles list --instance <INSTANCE>
gcloud bigtable app-profiles describe --instance <INSTANCE> <app-prof>

## Authorized Views
gcloud bigtable authorized-views list --instance <INSTANCE> --table <TABLE>
gcloud bigtable authorized-views describe --instance <INSTANCE> --table <TABLE> <VIEW>
```
## Privilege Escalation

{{#ref}}
../gcp-privilege-escalation/gcp-bigtable-privesc.md
{{#endref}}

## Post Exploitation

{{#ref}}
../gcp-post-exploitation/gcp-bigtable-post-exploitation.md
{{#endref}}

## Persistence

{{#ref}}
../gcp-persistence/gcp-bigtable-persistence.md
{{#endref}}

{{#include ../../../banners/hacktricks-training.md}}
