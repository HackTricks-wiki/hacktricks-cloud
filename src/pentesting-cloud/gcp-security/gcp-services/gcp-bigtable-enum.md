# GCP - Bigtable Uorodheshaji

{{#include ../../../banners/hacktricks-training.md}}

## Bigtable

Google Cloud Bigtable ni hifadhidata ya NoSQL iliyosimamiwa kikamilifu na inayoweza kupanuka, iliyoundwa kwa programu zinazohitaji throughput ya juu sana na latency ya chini. Imejengwa kushughulikia kiasi kikubwa cha data — petabytes katika maelfu ya nodes — na bado kutoa utendaji wa kusoma na kuandika kwa haraka. Bigtable ni bora kwa mizigo ya kazi kama data za time-series, telemetri ya IoT, uchambuzi wa kifedha, engines za personalization, na hifadhidata kubwa za uendeshaji. Inatumia muundo wa hifadhi wa ramani isiyojazwa, iliyogawanywa, yenye vipimo vingi na iliyopangwa kwa kisarufi, jambo linalofanya iwe ya ufanisi kuhifadhi jedwali pana ambapo safu nyingi zinaweza kuwa tupu. [Learn more](https://cloud.google.com/bigtable).

### Hierarki

1. **Bigtable Instance**

Mfano wa Bigtable ni rasilimali ya ngazi ya juu unayoitengeneza.
Hauhifadhi data yenyewe — fikiria kama kontena la kimantiki linalounganisha clusters na tables zako.

Kuna aina mbili za instances:

- Development instance (single-node, nafuu, si kwa uzalishaji)
- Production instance (inaweza kuwa na clusters nyingi)

2. **Clusters**

Cluster ina rasilimali halisi za compute na storage zinazotumika kutumikia data ya Bigtable.

- Kila cluster iko katika region moja.
- Imetengenezwa kwa nodes, ambazo zinatoa CPU, RAM, na uwezo wa mtandao.
- Unaweza kuunda instances zenye clusters nyingi kwa ajili ya upatikanaji wa juu au kusoma/kuandika duniani kote.
- Data inarekebishwa (replicated) kiotomatiki kati ya clusters katika instance ileile.

Muhimu:
- Jedwali (Tables) zinamilikiwa na instance, si cluster maalum.
- Clusters hutoa tu rasilimali za kutumikia data.

3. **Tables**

Jedwali katika Bigtable ni sawa na jedwali katika hifadhidata za NoSQL:

- Data huhifadhiwa kwa safu, zinazo tambuliwa kwa row key.
- Kila safu ina familia za safu (column families), ambazo zina safu (columns).
- Ni isiyojazwa: seli tupu hazitumiwi nafasi.
- Bigtable huhifadhi data iliyopangwa kwa msanii wa lexicographic kwa row key.

Jedwali hutumikishwa na clusters zote ndani ya instance.

4. **Tablets (and Hot Tablets)**

Bigtable hugawanya kila jedwali katika sehemu za usawa zinazoitwa tablets. Tablet ni:

- Anuwai ya mfululizo wa row keys.
- Imehifadhiwa kwenye node moja kwa wakati fulani.
- Tablets hugawanywa, kuunganishwa, na kuhamishwa kiotomatiki na Bigtable.

Hot tablet hutokea wakati:

- Kusoma au kuandika nyingi zinafika katika eneo lile la row-key (tablet moja).
- Tablet/node husika inazidiwa mzigo.
- Hii husababisha hotspots (vizuizi vya utendakazi).

5. **Authorized Views**

Authorized views zinakuwezesha kuunda kundi ndogo la data ya jedwali ambalo linaweza kushirikiwa na watumiaji au programu maalum bila kuwapa ufikiaji wa jedwali lote. Hii ni muhimu kwa:

- Kuzuia ufikiaji wa data nyeti.
- Kutoa ufikiaji wa kusoma pekee kwa safu au safu maalum.

6. **App Profiles**

App profile ya Bigtable ni usanidi unaobainisha jinsi programu au mteja anavyopaswa kuingiliana na instance ya Bigtable, hasa katika mazingira yenye clusters nyingi. Inasimamia tabia ya routing — kama maombi yaelekezwe kwa cluster moja au kugawanywa kwa clusters nyingi kwa ajili ya upatikanaji wa juu — na inadhibiti jinsi maandishi yanavyorekebishwa, kuchagua kati ya synchronous (muingiliano thabiti zaidi) au asynchronous (latency ya chini) modes.
```bash
# Cloud Bigtable
gcloud bigtable instances list
gcloud bigtable instances describe <instance>
gcloud bigtable instances get-iam-policy <instance>

## Clusters
gcloud bigtable clusters list
gcloud bigtable clusters describe <cluster>

## Tables
gcloud bigtable tables list --instance <INSTANCE>
gcloud bigtable tables describe --instance <INSTANCE> <TABLE>
gcloud bigtable tables get-iam-policy --instance <INSTANCE> <TABLE>

## Backups
gcloud bigtable backups list --instance <INSTANCE>
gcloud bigtable backups describe --instance <INSTANCE> <backupname>
gcloud bigtable backups get-iam-policy --instance <INSTANCE> <backupname>

## Hot Tables
gcloud bigtable hot-tablets list

## App Profiles
gcloud bigtable app-profiles list --instance <INSTANCE>
gcloud bigtable app-profiles describe --instance <INSTANCE> <app-prof>

## Authorized Views
gcloud bigtable authorized-views list --instance <INSTANCE> --table <TABLE>
gcloud bigtable authorized-views describe --instance <INSTANCE> --table <TABLE> <VIEW>
```
## Privilege Escalation

{{#ref}}
../gcp-privilege-escalation/gcp-bigtable-privesc.md
{{#endref}}

## Post Exploitation

{{#ref}}
../gcp-post-exploitation/gcp-bigtable-post-exploitation.md
{{#endref}}

## Persistence

{{#ref}}
../gcp-persistence/gcp-bigtable-persistence.md
{{#endref}}

{{#include ../../../banners/hacktricks-training.md}}
