# GCP - Pub/Sub Enum

{{#include ../../../banners/hacktricks-training.md}}

## Pub/Sub <a href="#reviewing-cloud-pubsub" id="reviewing-cloud-pubsub"></a>

[Google **Cloud Pub/Sub**](https://cloud.google.com/pubsub/) को स्वतंत्र अनुप्रयोगों के बीच संदेशों के आदान-प्रदान की सुविधा देने वाली सेवा के रूप में वर्णित किया गया है। इसके मुख्य घटक **विषय** हैं, जिनसे अनुप्रयोग **सदस्यता** ले सकते हैं। सदस्यता लेने वाले अनुप्रयोगों में **संदेश भेजने और प्राप्त करने** की क्षमता होती है। प्रत्येक संदेश में वास्तविक सामग्री के साथ संबंधित मेटाडेटा शामिल होता है।

**विषय वह कतार है** जहाँ संदेश भेजे जाने वाले हैं, जबकि **सदस्यताएँ** वे **वस्तुएँ** हैं जिनका उपयोग उपयोगकर्ता **विषयों में संदेशों तक पहुँचने** के लिए करेंगे। एक विषय के लिए **1 से अधिक सदस्यता** हो सकती है और सदस्यताओं के 4 प्रकार हैं:

- **पुल**: इस सदस्यता के उपयोगकर्ता को संदेशों के लिए पुल करना होगा।
- **पुश**: एक URL अंत बिंदु निर्दिष्ट किया गया है और संदेश तुरंत वहाँ भेजे जाएंगे।
- **बिग क्वेरी टेबल**: पुश की तरह लेकिन संदेशों को एक बिग क्वेरी टेबल के अंदर सेट करना।
- **क्लाउड स्टोरेज**: संदेशों को सीधे एक मौजूदा बकेट में पहुँचाना।

**डिफ़ॉल्ट** के अनुसार, एक **सदस्यता 31 दिनों के बाद समाप्त हो जाती है**, हालाँकि इसे कभी समाप्त न होने के लिए सेट किया जा सकता है।

**डिफ़ॉल्ट** के अनुसार, एक संदेश **7 दिनों के लिए बनाए रखा जाता है**, लेकिन इस समय को **31 दिनों तक बढ़ाया** जा सकता है। इसके अलावा, यदि इसे **10 सेकंड में ACK नहीं किया गया** तो यह फिर से कतार में चला जाता है। यह भी सेट किया जा सकता है कि ACK किए गए संदेशों को संग्रहीत किया जाना चाहिए।

एक विषय डिफ़ॉल्ट रूप से **Google प्रबंधित एन्क्रिप्शन कुंजी** का उपयोग करके एन्क्रिप्ट किया जाता है। लेकिन KMS से एक **CMEK** (ग्राहक प्रबंधित एन्क्रिप्शन कुंजी) भी चुनी जा सकती है।

**डेड लेटर**: सदस्यताएँ **डिलीवरी प्रयासों की अधिकतम संख्या** को कॉन्फ़िगर कर सकती हैं। जब एक संदेश वितरित नहीं किया जा सकता है, तो इसे **निर्दिष्ट डेड लेटर विषय पर पुनः प्रकाशित किया जाता है**।

### स्नैपशॉट और स्कीमा

एक स्नैपशॉट एक विशेष समय पर **एक सदस्यता की स्थिति को कैप्चर करने** की विशेषता है। यह मूल रूप से एक **सदस्यता में अनस्वीकृत संदेशों का सुसंगत बैकअप** है। एक स्नैपशॉट बनाकर, आप सदस्यता की संदेश स्वीकृति स्थिति को संरक्षित करते हैं, जिससे आप स्नैपशॉट लिए गए बिंदु से संदेशों का उपभोग फिर से शुरू कर सकते हैं, भले ही मूल संदेश अन्यथा हटा दिए गए होते।\
यदि आप बहुत भाग्यशाली हैं, तो एक स्नैपशॉट में **पुरानी संवेदनशील जानकारी** हो सकती है जब स्नैपशॉट लिया गया था।

एक विषय बनाते समय, आप संकेत कर सकते हैं कि **विषय संदेशों को एक स्कीमा का पालन करना चाहिए**।

### Enumeration
```bash
# Get a list of topics in the project
gcloud pubsub topics list
gcloud pubsub topics describe <topic>
gcloud pubsub topics list-subscriptions <topic>
gcloud pubsub topics get-iam-policy <topic>

# Get a list of subscriptions across all topics
gcloud pubsub subscriptions list
gcloud pubsub subscriptions describe <subscription>
gcloud pubsub subscriptions get-iam-policy <subscription>

# Get list of schemas
gcloud pubsub schemas list
gcloud pubsub schemas describe <schema>
gcloud pubsub schemas list-revisions <schema>

# Get list of snapshots
gcloud pubsub snapshots list
gcloud pubsub snapshots describe <snapshot>
```
हालांकि, आप [**बड़े डेटा सेट के लिए पूछने**](https://cloud.google.com/pubsub/docs/replay-overview) पर बेहतर परिणाम प्राप्त कर सकते हैं, जिसमें पुराने संदेश शामिल हैं। इसके कुछ पूर्वापेक्षाएँ हैं और यह अनुप्रयोगों को प्रभावित कर सकता है, इसलिए सुनिश्चित करें कि आप वास्तव में जानते हैं कि आप क्या कर रहे हैं।

### विशेषाधिकार वृद्धि और पोस्ट शोषण

{{#ref}}
../gcp-post-exploitation/gcp-pub-sub-post-exploitation.md
{{#endref}}

## Pub/Sub Lite

[**Pub/Sub Lite**](https://cloud.google.com/pubsub/docs/choosing-pubsub-or-lite) एक संदेश सेवा है जिसमें **क्षेत्रीय भंडारण** है। Pub/Sub Lite **Pub/Sub का एक अंश** है और इसे **उच्च मात्रा के स्ट्रीमिंग** (प्रति सेकंड 10 मिलियन संदेशों तक) पाइपलाइनों और इवेंट-चालित प्रणाली के लिए डिज़ाइन किया गया है जहाँ कम लागत प्राथमिक विचार है।

PubSub Lite में **विषय** और **सदस्यताएँ** हैं, वहाँ **स्नैपशॉट** और **स्कीमा** नहीं हैं और वहाँ हैं:

- **आरक्षण**: Pub/Sub Lite आरक्षण एक विशेषता है जो उपयोगकर्ताओं को अपने संदेश धाराओं के लिए एक विशिष्ट क्षेत्र में क्षमता आरक्षित करने की अनुमति देती है।
- **ऑपरेशंस**: Pub/Sub Lite का प्रबंधन और प्रशासन करने में शामिल क्रियाएँ और कार्यों को संदर्भित करता है।

### गणना
```bash
# lite-topics
gcloud pubsub lite-topics list
gcloud pubsub lite-topics describe <topic>
gcloud pubsub lite-topics list-subscriptions <topic>

# lite-subscriptions
gcloud pubsub lite-subscriptions list
gcloud pubsub lite-subscriptions describe <subscription>

# lite-reservations
gcloud pubsub lite-reservations list
gcloud pubsub lite-reservations describe <topic>
gcloud pubsub lite-reservations list-topics <topic>

# lite-operations
gcloud pubsub lite-operations list
gcloud pubsub lite-operations describe <topic>
```
{{#include ../../../banners/hacktricks-training.md}}
