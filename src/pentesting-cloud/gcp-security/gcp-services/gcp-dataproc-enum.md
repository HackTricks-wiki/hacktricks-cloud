# GCP -  Dataproc Enum

{{#include ../../../banners/hacktricks-training.md}}

## Informations de base

Google Cloud Dataproc est un service entièrement géré pour exécuter Apache Spark, Apache Hadoop, Apache Flink et d'autres frameworks de big data. Il est principalement utilisé pour le traitement des données, les requêtes, l'apprentissage automatique et l'analyse de flux. Dataproc permet aux organisations de créer des clusters pour le calcul distribué avec facilité, s'intégrant parfaitement avec d'autres services de Google Cloud Platform (GCP) comme Cloud Storage, BigQuery et Cloud Monitoring.

Les clusters Dataproc s'exécutent sur des machines virtuelles (VM), et le compte de service associé à ces VM détermine les autorisations et le niveau d'accès du cluster.

## Composants

Un cluster Dataproc comprend généralement :

Nœud maître : Gère les ressources du cluster et coordonne les tâches distribuées.

Nœuds de travail : Exécutent des tâches distribuées.

Comptes de service : Gèrent les appels API et accèdent à d'autres services GCP.

## Énumération

Les clusters, les travaux et les configurations Dataproc peuvent être énumérés pour recueillir des informations sensibles, telles que les comptes de service, les autorisations et les configurations potentielles incorrectes.

### Énumération des clusters

Pour énumérer les clusters Dataproc et récupérer leurs détails :
```
gcloud dataproc clusters list --region=<region>
gcloud dataproc clusters describe <cluster-name> --region=<region>
```
### Énumération des travaux
```
gcloud dataproc jobs list --region=<region>
gcloud dataproc jobs describe <job-id> --region=<region>
```
### Privesc

{{#ref}}
../gcp-privilege-escalation/gcp-dataproc-privesc.md
{{#endref}}

{{#include ../../../banners/hacktricks-training.md}}
