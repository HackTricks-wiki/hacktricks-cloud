# GCP - Composer Enum

{{#include ../../../banners/hacktricks-training.md}}

## Informações Básicas

**Google Cloud Composer** é um **serviço de orquestração de fluxo de trabalho** totalmente gerenciado, construído sobre **Apache Airflow**. Ele permite que você crie, agende e monitore pipelines que abrangem nuvens e data centers locais. Com o GCP Composer, você pode integrar facilmente seus fluxos de trabalho com outros serviços do Google Cloud, facilitando tarefas eficientes de integração e análise de dados. Este serviço é projetado para simplificar a complexidade de gerenciar fluxos de trabalho de dados baseados em nuvem, tornando-se uma ferramenta valiosa para engenheiros de dados e desenvolvedores que lidam com tarefas de processamento de dados em larga escala.

### Enumeração
```bash
# Get envs info
gcloud composer environments list --locations <loc>
gcloud composer environments describe --location <loc> <environment>

# Get list of dags
gcloud composer environments storage dags list --environment <environment> --location <loc>
# Download dags code
mkdir /tmp/dags
gcloud composer environments storage dags export --environment <environment> --location <loc> --destination /tmp/dags

# List Data from composer
gcloud composer environments storage data list --environment <environment> --location <loc>
# Download data
mkdir /tmp/data
gcloud composer environments storage data export --environment <environment> --location <loc> --destination /tmp/data

# List Plugins from composer
gcloud composer environments storage plugins list --environment <environment> --location <loc>
# Download plugins
mkdir /tmp/plugins
gcloud composer environments storage data export --environment <environment> --location <loc> --destination /tmp/plugins
```
### Privesc

Na página a seguir, você pode verificar como **abusar das permissões do composer para escalar privilégios**:

{{#ref}}
../gcp-privilege-escalation/gcp-composer-privesc.md
{{#endref}}

{{#include ../../../banners/hacktricks-training.md}}
