# GCP - Source Repositories Enum

{{#include ../../../banners/hacktricks-training.md}}

## Basic Information <a href="#reviewing-cloud-git-repositories" id="reviewing-cloud-git-repositories"></a>

Google Cloud Source Repositories ni huduma ya **repositi ya Git ya kibinafsi** yenye vipengele kamili na inayoweza kupanuka. Imeundwa ili **kuhifadhi msimbo wako wa chanzo katika mazingira yanayosimamiwa kikamilifu**, ikijumuisha kwa urahisi na zana na huduma nyingine za GCP. Inatoa mahali salama na ya ushirikiano kwa timu kuhifadhi, kusimamia, na kufuatilia msimbo wao.

Vipengele muhimu vya Cloud Source Repositories ni pamoja na:

1. **Kuhifadhi Git kwa Usimamizi Kamili**: Inatoa kazi zinazofahamika za Git, ikimaanisha unaweza kutumia amri na michakato ya kawaida ya Git.
2. **Ujumuishaji na Huduma za GCP**: Inajumuisha na huduma nyingine za GCP kama Cloud Build, Pub/Sub, na App Engine kwa ufuatiliaji wa mwisho hadi mwisho kutoka kwa msimbo hadi kutekelezwa.
3. **Repositi za Kibinafsi**: Inahakikisha msimbo wako unahifadhiwa kwa usalama na kwa faragha. Unaweza kudhibiti ufikiaji kwa kutumia majukumu ya Cloud Identity na Access Management (IAM).
4. **Analizi ya Msimbo wa Chanzo**: Inafanya kazi na zana nyingine za GCP kutoa uchambuzi wa kiotomatiki wa msimbo wako wa chanzo, ikitambua masuala yanayoweza kutokea kama makosa, udhaifu, au mbinu mbaya za uandishi wa msimbo.
5. **Zana za Ushirikiano**: Inasaidia uandishi wa msimbo kwa ushirikiano kwa kutumia zana kama maombi ya kuungana, maoni, na mapitio.
6. **Msaada wa Kioo**: Inakuruhusu kuunganisha Cloud Source Repositories na repositi zinazohifadhiwa kwenye GitHub au Bitbucket, ikiruhusu usawazishaji wa kiotomatiki na kutoa mtazamo mmoja wa repositi zako zote.

### OffSec information <a href="#reviewing-cloud-git-repositories" id="reviewing-cloud-git-repositories"></a>

- Usanidi wa repositi za chanzo ndani ya mradi utakuwa na **Akaunti ya Huduma** inayotumika kutuma ujumbe wa Cloud Pub/Sub. Moja ya kawaida inayotumika ni **Compute SA**. Hata hivyo, **sidhani kama inawezekana kuiba token yake** kutoka Source Repositories kwani inatekelezwa kwa nyuma.
- Ili kuona msimbo ndani ya konsoli ya wavuti ya GCP Cloud Source Repositories ([https://source.cloud.google.com/](https://source.cloud.google.com/)), unahitaji msimbo uwe **ndani ya tawi la master kwa kawaida**.
- Unaweza pia **kuunda repositi ya kioo ya Cloud** ikielekeza kwenye repo kutoka **Github** au **Bitbucket** (ukitoa ufikiaji kwa majukwaa hayo).
- Inawezekana **kuandika na kutatua matatizo kutoka ndani ya GCP**.
- Kwa kawaida, Source Repositories **inaepuka funguo za kibinafsi kuingizwa katika commits**, lakini hii inaweza kuzuiliwa.

### Open In Cloud Shell

Inawezekana kufungua repositi katika Cloud Shell, ujumbe kama huu utaonekana:

<figure><img src="../../../images/image (325).png" alt=""><figcaption></figcaption></figure>

Hii itakuruhusu kuandika na kutatua matatizo katika Cloud Shell (ambayo inaweza kuathiriwa). 

### Enumeration
```bash
# Repos enumeration
gcloud source repos list #Get names and URLs
gcloud source repos describe <repo_name>
gcloud source repos get-iam-policy <repo_name>

# gcloud repo clone
gcloud source repos clone <REPO NAME>
gcloud source repos get-iam-policy <REPO NAME>
... git add & git commit -m ...
git push --set-upstream origin master
git push -u origin master

# Access via git
## To add a SSH key go to https://source.cloud.google.com/user/ssh_keys (no gcloud command)
git clone ssh://username@domain.com@source.developers.google.com:2022/p/<proj-name>/r/<repo-name>
git add, commit, push...
```
### Kuinua Mamlaka & Baada ya Kutekeleza

{{#ref}}
../gcp-privilege-escalation/gcp-sourcerepos-privesc.md
{{#endref}}

### Enum Isiyo na Uthibitisho

{{#ref}}
../gcp-unauthenticated-enum-and-access/gcp-source-repositories-unauthenticated-enum.md
{{#endref}}

{{#include ../../../banners/hacktricks-training.md}}
