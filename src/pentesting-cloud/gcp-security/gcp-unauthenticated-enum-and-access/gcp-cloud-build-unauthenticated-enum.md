# GCP - Cloud Build Kimlik Doğrulaması Olmadan Enum

{{#include ../../../banners/hacktricks-training.md}}

## Cloud Build

Cloud Build hakkında daha fazla bilgi için kontrol edin:

{{#ref}}
../gcp-services/gcp-cloud-build-enum.md
{{#endref}}

### cloudbuild.yml

Eğer **`cloudbuild.yml`** adında bir dosya içeren bir depoya yazma erişimini ele geçirirseniz, bu dosyayı **arka kapı** ile değiştirebilir, Cloud Build içinde **çalıştırılacak komutları** belirtebilir ve gizli bilgileri dışarı sızdırabilir, yapılan işlemleri tehlikeye atabilir ve ayrıca **Cloud Build hizmet hesabını** tehlikeye atabilirsiniz.

> [!NOTE]
> GCP'nin, yöneticilerin dış PR'lerden inşa sistemlerinin yürütülmesini kontrol etmelerine izin verme seçeneği olduğunu unutmayın. Yorum Kontrolü, işbirlikçiler/proje sahiplerinin **inşayı tetiklemek için “/gcbrun” yorumunu yapmaları gerektiği** bir özelliktir ve bu özellik, internetten herhangi birinin inşa sistemlerinizi tetiklemesini engeller.

İlgili bazı bilgiler için Github Actions'a nasıl saldırılacağına dair sayfayı kontrol edebilirsiniz (buna benzer):

{{#ref}}
../../../pentesting-ci-cd/github-security/abusing-github-actions/
{{#endref}}

### PR Onayları

Tetikleyici PR olduğunda, çünkü **herkes kamuya açık depolara PR yapabilir**, herhangi bir PR ile tetikleyicinin yürütülmesine izin vermek çok tehlikeli olacaktır. Bu nedenle, varsayılan olarak, yürütme yalnızca **sahipler ve işbirlikçiler için otomatik** olacaktır ve diğer kullanıcıların PR'leri ile tetikleyiciyi yürütmek için bir sahip veya işbirlikçi `/gcbrun` yorumunu yapmalıdır.

<figure><img src="../../../images/image (339).png" alt="" width="563"><figcaption></figcaption></figure>

> [!CAUTION]
> Bu nedenle, eğer bu **`Gerekli değil`** olarak ayarlandıysa, bir saldırgan **dal için bir PR** gerçekleştirebilir ve kötü niyetli kod yürütmesini **`cloudbuild.yml`** dosyasına ekleyerek cloudbuild yürütmesini tehlikeye atabilir (cloudbuild'in kodu PR'den indireceğini unutmayın, bu nedenle kötü niyetli **`cloudbuild.yml`** dosyasını çalıştıracaktır).

Ayrıca, bir PR gönderdiğinizde bazı cloudbuild yürütmelerinin gerçekleştirilmesi gerektiğini görmek kolaydır çünkü Github'da görünür:

<figure><img src="../../../images/image (340).png" alt=""><figcaption></figcaption></figure>

> [!WARNING]
> Bu durumda, cloudbuild yürütülmese bile, saldırgan şirketin ait olduğu **GCP projesinin adını** görebilecektir.

{{#include ../../../banners/hacktricks-training.md}}
