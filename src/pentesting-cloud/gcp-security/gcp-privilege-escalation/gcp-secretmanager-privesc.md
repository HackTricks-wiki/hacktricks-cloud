# GCP - Secretmanager Privesc

{{#include ../../../banners/hacktricks-training.md}}

## secretmanager

secretmanager के बारे में अधिक जानकारी के लिए:

{{#ref}}
../gcp-services/gcp-secrets-manager-enum.md
{{#endref}}

### `secretmanager.versions.access`

यह आपको secretmanager से secrets पढ़ने की अनुमति देता है और यह privilege escalation में मदद कर सकता है (यह इस बात पर निर्भर करेगा कि secret के अंदर कौन-सी जानकारी संग्रहीत है):

<details><summary>क्लियर-टेक्स्ट secret version प्राप्त करें</summary>
```bash
# Get clear-text of version 1 of secret: "<secret name>"
gcloud secrets versions access 1 --secret="<secret_name>"
```
</details>

चूँकि यह भी एक पोस्ट-एक्सप्लॉइटेशन तकनीक है, इसे यहाँ पाया जा सकता है:

{{#ref}}
../gcp-post-exploitation/gcp-secretmanager-post-exploitation.md
{{#endref}}

### `secretmanager.secrets.setIamPolicy`

यह आपको secret manager से secrets पढ़ने की अनुमति देता है, उदाहरण के लिए:

<details><summary>Secret पर IAM policy binding जोड़ें</summary>
```bash
gcloud secrets add-iam-policy-binding <scret-name> \
--member="serviceAccount:<sa-name>@$PROJECT_ID.iam.gserviceaccount.com" \
--role="roles/secretmanager.secretAccessor"
```
या नीतियों को रद्द करें:
```bash
gcloud secrets remove-iam-policy-binding <secret-name> \
--member="serviceAccount:<sa-name>@<PROJECT_ID>.iam.gserviceaccount.com" \
--role="roles/secretmanager.secretAccessor"
```
</details>

{{#include ../../../banners/hacktricks-training.md}}
