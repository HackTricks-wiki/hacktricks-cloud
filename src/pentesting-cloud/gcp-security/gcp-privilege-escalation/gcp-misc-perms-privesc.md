# GCP - 一般的な権限昇格

{{#include ../../../banners/hacktricks-training.md}}

## 一般的に興味深い権限

### \*.setIamPolicy

あなたがリソース内で**`setIamPolicy`**権限を持つユーザーを所有している場合、そのリソース内で**権限を昇格させる**ことができます。なぜなら、そのリソースのIAMポリシーを変更して、より多くの権限を与えることができるからです。\
この権限は、リソースがコードを実行できる場合に**他のプリンシパルに昇格する**ことも可能です。また、iam.ServiceAccounts.actAsは必要ありません。

- _cloudfunctions.functions.setIamPolicy_
- Cloud Functionのポリシーを変更して、自分自身がそれを呼び出せるようにします。

この種の権限を持つリソースタイプは数十種類あり、[https://cloud.google.com/iam/docs/permissions-reference](https://cloud.google.com/iam/docs/permissions-reference)でsetIamPolicyを検索することで、すべてを見つけることができます。

### \*.create, \*.update

これらの権限は、リソース内で**新しいものを作成したり、更新したりすることによって権限を昇格させる**ために非常に便利です。この種の権限は、サービスアカウントに対して**iam.serviceAccounts.actAs**権限を持っている場合、特に有用です。また、あなたが.create/.update権限を持つリソースがサービスアカウントをアタッチできる場合にも有効です。

### \*ServiceAccount\*

この権限は通常、**リソース内のサービスアカウントにアクセスまたは変更することを許可します**（例：compute.instances.setServiceAccount）。これは**権限昇格**のベクトルにつながる可能性がありますが、各ケースによります。

{{#include ../../../banners/hacktricks-training.md}}
