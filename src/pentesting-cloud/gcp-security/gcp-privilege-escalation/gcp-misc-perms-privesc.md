# GCP - Generic Permissions Privesc

{{#include ../../../banners/hacktricks-training.md}}

## Genel İlginç İzinler

### \*.setIamPolicy

Eğer bir kullanıcı kaynak üzerinde **`setIamPolicy`** iznine sahipse, bu kaynağın IAM politikasını değiştirebileceğiniz için o kaynakta ayrıcalıkları yükseltebilirsiniz.\
Bu izin ayrıca, kaynak kod çalıştırmaya izin veriyorsa ve `iam.ServiceAccounts.actAs` gerekli değilse, **başka principal'lara yükselme** imkanı da sağlayabilir.

- _cloudfunctions.functions.setIamPolicy_
- Cloud Function'ın politikasını değiştirerek kendinize invoke etme izni verebilirsiniz.

Bu tür izne sahip onlarca kaynak türü vardır; hepsini [https://cloud.google.com/iam/docs/permissions-reference](https://cloud.google.com/iam/docs/permissions-reference) adresinde setIamPolicy araması yaparak bulabilirsiniz.

### \*.create, \*.update

Bu izinler, yeni bir kaynak oluşturarak veya mevcut bir kaynağı güncelleyerek kaynaklarda ayrıcalıkları yükseltmeye çalışmak için çok yararlı olabilir. Bu tür izinler özellikle, bir Service Account üzerinde **iam.serviceAccounts.actAs** iznine de sahipseniz ve .create/.update yetkisine sahip olduğunuz kaynak bir service account iliştirebiliyorsa faydalıdır.

### \*ServiceAccount\*

Bu izin genellikle belirli bir kaynaktaki bir Service Account'a **erişim veya değişiklik** yapmanıza izin verir (ör.: compute.instances.setServiceAccount). Bu bir **privilege escalation** vektörüne yol açabilir, ancak duruma göre değişir.

### iam.ServiceAccounts.actAs

Bu izin, destekleyen bir kaynağa (ör.: Compute Engine VM, Cloud Function, Cloud Run, vb.) bir Service Account iliştirmenize izin verir.\
Eğer kullanıcınızdan daha fazla ayrıcalığa sahip bir Service Account'u kod çalıştırabilen bir kaynağa iliştirebiliyorsanız, o Service Account ile kod çalıştırarak ayrıcalıklarınızı yükseltebilirsiniz.

Cloud Hacktricks'te `iam.ServiceAccounts.actAs` araması yaparak bu izinle ayrıcalıkları nasıl yükseltebileceğinize dair birçok örnek bulabilirsiniz.

{{#include ../../../banners/hacktricks-training.md}}
