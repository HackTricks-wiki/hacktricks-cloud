# GCP - Escalación de Privilegios por Permisos Genéricos

{{#include ../../../banners/hacktricks-training.md}}

## Permisos Interesantes Genéricos

### \*.setIamPolicy

Si posees un usuario que tiene el permiso **`setIamPolicy`** en un recurso, puedes **escalar privilegios en ese recurso** porque podrás cambiar la política IAM de ese recurso y darte más privilegios sobre él.\
Este permiso también puede permitir **escalar a otros principales** si el recurso permite ejecutar código y no es necesario el iam.ServiceAccounts.actAs.

- _cloudfunctions.functions.setIamPolicy_
- Modifica la política de una Cloud Function para permitirte invocarla.

Hay decenas de tipos de recursos con este tipo de permiso, puedes encontrarlos todos en [https://cloud.google.com/iam/docs/permissions-reference](https://cloud.google.com/iam/docs/permissions-reference) buscando setIamPolicy.

### \*.create, \*.update

Estos permisos pueden ser muy útiles para intentar escalar privilegios en recursos al **crear uno nuevo o actualizar uno existente**. Este tipo de permisos es especialmente útil si también tienes el permiso **iam.serviceAccounts.actAs** sobre una Cuenta de Servicio y el recurso sobre el que tienes .create/.update puede adjuntar una cuenta de servicio.

### \*ServiceAccount\*

Este permiso generalmente te permitirá **acceder o modificar una Cuenta de Servicio en algún recurso** (por ejemplo: compute.instances.setServiceAccount). Esto **podría llevar a un vector de escalación de privilegios**, pero dependerá de cada caso.

{{#include ../../../banners/hacktricks-training.md}}
