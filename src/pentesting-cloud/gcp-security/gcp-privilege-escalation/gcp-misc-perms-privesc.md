# GCP - Γενικά Δικαιώματα Privesc

{{#include ../../../banners/hacktricks-training.md}}

## Γενικά Ενδιαφέροντα Δικαιώματα

### \*.setIamPolicy

Αν έχετε έναν χρήστη που έχει την άδεια **`setIamPolicy`** σε έναν πόρο μπορείτε να **αυξήσετε προνόμια σε αυτόν τον πόρο** επειδή θα μπορείτε να αλλάξετε την IAM πολιτική του πόρου και να δώσετε στον εαυτό σας περισσότερα προνόμια.\
Αυτή η άδεια μπορεί επίσης να επιτρέψει την **αύξηση προνομίων σε άλλους principals** αν ο πόρος επιτρέπει την εκτέλεση κώδικα και το `iam.ServiceAccounts.actAs` δεν είναι απαραίτητο.

- _cloudfunctions.functions.setIamPolicy_
- Τροποποιήστε την πολιτική ενός Cloud Function ώστε να επιτρέψετε στον εαυτό σας να το καλέσετε.

Υπάρχουν δεκάδες τύποι πόρων με αυτό το είδος άδειας, μπορείτε να βρείτε όλους τους σε [https://cloud.google.com/iam/docs/permissions-reference](https://cloud.google.com/iam/docs/permissions-reference) ψάχνοντας για setIamPolicy.

### \*.create, \*.update

Αυτές οι άδειες μπορούν να είναι πολύ χρήσιμες για να προσπαθήσετε να αυξήσετε προνόμια σε πόρους δημιουργώντας έναν νέο ή ενημερώνοντας έναν υπάρχοντα. Αυτός ο τύπος αδειών είναι ιδιαίτερα χρήσιμος αν έχετε επίσης την άδεια **iam.serviceAccounts.actAs** πάνω σε ένα Service Account και ο πόρος πάνω στον οποίο έχετε .create/.update μπορεί να επισυνάψει ένα Service Account.

### \*ServiceAccount\*

Αυτή η άδεια συνήθως θα σας επιτρέψει να **έχετε πρόσβαση ή να τροποποιήσετε ένα Service Account σε κάποιον πόρο** (π.χ.: compute.instances.setServiceAccount). Αυτό **μπορεί να οδηγήσει σε privilege escalation**, αλλά θα εξαρτηθεί από την κάθε περίπτωση.

### iam.ServiceAccounts.actAs

Αυτή η άδεια θα σας επιτρέψει να επισυνάψετε ένα Service Account σε έναν πόρο που το υποστηρίζει (π.χ.: Compute Engine VM, Cloud Function, Cloud Run, κ.λπ.).\
Αν μπορείτε να επισυνάψετε ένα Service Account που έχει περισσότερα προνόμια από τον χρήστη σας σε έναν πόρο που μπορεί να εκτελέσει κώδικα, θα μπορέσετε να αυξήσετε τα προνόμιά σας εκτελώντας κώδικα με αυτό το Service Account.

Αναζητήστε στο Cloud Hacktricks το `iam.ServiceAccounts.actAs` για να βρείτε αρκετά παραδείγματα του πώς να escalate privileges με αυτήν την άδεια.

{{#include ../../../banners/hacktricks-training.md}}
