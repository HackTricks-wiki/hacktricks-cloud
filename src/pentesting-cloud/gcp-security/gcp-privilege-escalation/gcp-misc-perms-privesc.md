# GCP - Ruhusa za Kawaida Privesc

{{#include ../../../banners/hacktricks-training.md}}

## Ruhusa za Kawaida Zinazovutia

### \*.setIamPolicy

Ikiwa una mtumiaji aliye na ruhusa ya **`setIamPolicy`** kwenye rasilimali, unaweza **escalate privileges in that resource** kwa sababu utaweza kubadilisha sera ya IAM ya rasilimali hiyo na kujipa ruhusa zaidi juu yake.\
Ruhusa hii pia inaweza kuruhusu **escalate to other principals** ikiwa rasilimali inaruhusu kutekeleza code na `iam.ServiceAccounts.actAs` si lazima.

- _cloudfunctions.functions.setIamPolicy_
- Badilisha sera ya Cloud Function ili kujiruhusu kuitisha.

Kuna aina nyingi za rasilimali zenye ruhusa ya aina hii; unaweza kuzipata zote kwenye [https://cloud.google.com/iam/docs/permissions-reference] ukitafuta setIamPolicy.

### \*.create, \*.update

Ruhusa hizi zinaweza kuwa muhimu sana kujaribu kupandisha ruhusa katika rasilimali kwa **kuunda rasilimali mpya au kusasisha rasilimali mpya**. Aina hizi za ruhusa zinakuwa muhimu hasa ikiwa pia una ruhusa **iam.serviceAccounts.actAs** juu ya Service Account na rasilimali unayo .create/.update juu yake inaweza kuambatanisha Service Account.

### \*ServiceAccount\*

Ruhusa hii kwa kawaida itakuwezesha **kupata au kubadilisha Service Account katika rasilimali fulani** (mfano: compute.instances.setServiceAccount). Hii **could lead to a privilege escalation** vector, lakini itategemea kila kesi.

### iam.ServiceAccounts.actAs

Ruhusa hii itakuwezesha kuambatanisha Service Account kwa rasilimali inayoiunga mkono (mfano: Compute Engine VM, Cloud Function, Cloud Run, n.k.).\
Ikiwa unaweza kuambatanisha Service Account ambayo ina ruhusa zaidi kuliko mtumiaji wako kwenye rasilimali inayoweza kutekeleza code, utaweza **escalate your privileges** kwa kutekeleza code ukiitumia Service Account hiyo.

{{#include ../../../banners/hacktricks-training.md}}
