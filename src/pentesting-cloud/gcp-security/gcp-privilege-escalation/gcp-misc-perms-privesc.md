# GCP - 一般的な権限昇格

{{#include ../../../banners/hacktricks-training.md}}

## 一般的に興味深い権限

### \*.setIamPolicy

あなたが**`setIamPolicy`**権限を持つユーザーを所有している場合、そのリソース内で**権限を昇格させる**ことができます。なぜなら、そのリソースのIAMポリシーを変更して、より多くの権限を与えることができるからです。\
この権限は、リソースがコードを実行できる場合に**他のプリンシパルに昇格する**ことも可能です。iam.ServiceAccounts.actAsが必要ない場合です。

- _cloudfunctions.functions.setIamPolicy_
- Cloud Functionのポリシーを変更して、自分自身がそれを呼び出せるようにします。

この種の権限を持つリソースタイプは数十種類あり、[https://cloud.google.com/iam/docs/permissions-reference](https://cloud.google.com/iam/docs/permissions-reference)でsetIamPolicyを検索することで、すべて見つけることができます。

### \*.create, \*.update

これらの権限は、**新しいリソースを作成するか、既存のリソースを更新することによって権限を昇格させる**ために非常に便利です。この種の権限は、サービスアカウントに対して**iam.serviceAccounts.actAs**権限を持っている場合、特に有用です。また、あなたが.create/.update権限を持つリソースがサービスアカウントをアタッチできる場合にも有効です。

### \*ServiceAccount\*

この権限は通常、**特定のリソース内のサービスアカウントにアクセスまたは変更する**ことを許可します（例：compute.instances.setServiceAccount）。これは**権限昇格**のベクトルにつながる可能性がありますが、ケースバイケースで異なります。

{{#include ../../../banners/hacktricks-training.md}}
