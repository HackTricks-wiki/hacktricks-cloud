# GCP - Privilégios Genéricos Privesc

{{#include ../../../banners/hacktricks-training.md}}

## Permissões Genéricas Interessantes

### \*.setIamPolicy

Se você possui um usuário que tem a permissão **`setIamPolicy`** em um recurso, você pode **escalar privilégios nesse recurso** porque poderá alterar a política IAM desse recurso e lhe dar mais privilégios sobre ele.\
Essa permissão também pode permitir **escalar para outros principais** se o recurso permitir a execução de código e o iam.ServiceAccounts.actAs não for necessário.

- _cloudfunctions.functions.setIamPolicy_
- Modifique a política de uma Cloud Function para permitir que você a invoque.

Existem dezenas de tipos de recursos com esse tipo de permissão, você pode encontrar todos eles em [https://cloud.google.com/iam/docs/permissions-reference](https://cloud.google.com/iam/docs/permissions-reference) pesquisando por setIamPolicy.

### \*.create, \*.update

Essas permissões podem ser muito úteis para tentar escalar privilégios em recursos **criando um novo ou atualizando um novo**. Esse tipo de permissão é especialmente útil se você também tiver a permissão **iam.serviceAccounts.actAs** sobre uma Conta de Serviço e o recurso que você tem .create/.update pode anexar uma conta de serviço.

### \*ServiceAccount\*

Essa permissão geralmente permitirá que você **acesse ou modifique uma Conta de Serviço em algum recurso** (por exemplo: compute.instances.setServiceAccount). Isso **pode levar a um vetor de escalonamento de privilégios**, mas dependerá de cada caso.

{{#include ../../../banners/hacktricks-training.md}}
