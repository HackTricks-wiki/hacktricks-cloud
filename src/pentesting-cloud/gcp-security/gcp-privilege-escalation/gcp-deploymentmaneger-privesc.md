# GCP - Deploymentmaneger Privesc

{{#include ../../../banners/hacktricks-training.md}}

## deploymentmanager

### `deploymentmanager.deployments.create`

Ця єдина дозволена дія дозволяє вам **запускати нові розгортання** ресурсів у GCP з довільними обліковими записами служби. Ви, наприклад, можете запустити обчислювальний екземпляр з SA, щоб ескалювати до нього.

Ви насправді можете **запустити будь-який ресурс**, зазначений у `gcloud deployment-manager types list`

У [**оригінальному дослідженні**](https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/) використовується [**скрипт**](https://github.com/RhinoSecurityLabs/GCP-IAM-Privilege-Escalation/blob/master/ExploitScripts/deploymentmanager.deployments.create.py) для розгортання обчислювального екземпляра, однак цей скрипт не працюватиме. Перевірте скрипт для автоматизації [**створення, експлуатації та очищення вразливого середовища тут**](https://github.com/carlospolop/gcp_privesc_scripts/blob/main/tests/1-deploymentmanager.deployments.create.sh)**.**

### `deploymentmanager.deployments.update`

Це схоже на попереднє зловживання, але замість створення нового розгортання ви модифікуєте вже існуюче (тому будьте обережні)

Перевірте скрипт для автоматизації [**створення, експлуатації та очищення вразливого середовища тут**](https://github.com/carlospolop/gcp_privesc_scripts/blob/main/tests/e-deploymentmanager.deployments.update.sh)**.**

### `deploymentmanager.deployments.setIamPolicy`

Це схоже на попереднє зловживання, але замість безпосереднього створення нового розгортання, спочатку ви надаєте собі цей доступ, а потім зловживаєте дозволом, як пояснено в попередньому розділі _deploymentmanager.deployments.create_.

## References

- [https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/](https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/)

{{#include ../../../banners/hacktricks-training.md}}
