# GCP - Deploymentmaneger Privesc

{{#include ../../../banners/hacktricks-training.md}}

## deploymentmanager

### `deploymentmanager.deployments.create`

이 단일 권한은 임의의 서비스 계정을 사용하여 GCP에 **새 배포**를 **시작**할 수 있게 해줍니다. 예를 들어, SA를 사용하여 컴퓨트 인스턴스를 시작하여 권한 상승을 할 수 있습니다.

실제로 `gcloud deployment-manager types list`에 나열된 **모든 리소스**를 **시작**할 수 있습니다.

[**원본 연구**](https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/)에서 다음[ **스크립트**](https://github.com/RhinoSecurityLabs/GCP-IAM-Privilege-Escalation/blob/master/ExploitScripts/deploymentmanager.deployments.create.py)는 컴퓨트 인스턴스를 배포하는 데 사용되지만, 해당 스크립트는 작동하지 않습니다. [**취약한 환경의 생성, 악용 및 정리를 자동화하는 스크립트는 여기에서 확인하세요**](https://github.com/carlospolop/gcp_privesc_scripts/blob/main/tests/1-deploymentmanager.deployments.create.sh)**.**

### `deploymentmanager.deployments.update`

이것은 이전의 악용과 비슷하지만, 새 배포를 생성하는 대신 이미 존재하는 배포를 수정합니다(따라서 주의해야 합니다).

[**취약한 환경의 생성, 악용 및 정리를 자동화하는 스크립트는 여기에서 확인하세요**](https://github.com/carlospolop/gcp_privesc_scripts/blob/main/tests/e-deploymentmanager.deployments.update.sh)**.**

### `deploymentmanager.deployments.setIamPolicy`

이것은 이전의 악용과 비슷하지만, 새 배포를 직접 생성하는 대신 먼저 해당 접근 권한을 부여한 후, 이전 _deploymentmanager.deployments.create_ 섹션에서 설명한 대로 권한을 악용합니다.

## References

- [https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/](https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/)

{{#include ../../../banners/hacktricks-training.md}}
