# GCP - Deploymentmaneger Privesc

{{#include ../../../banners/hacktricks-training.md}}

## deploymentmanager

### `deploymentmanager.deployments.create`

Questo singolo permesso ti consente di **lanciare nuove distribuzioni** di risorse in GCP con account di servizio arbitrari. Potresti, ad esempio, lanciare un'istanza di calcolo con un SA per eseguire un'escursione su di essa.

In realtà potresti **lanciare qualsiasi risorsa** elencata in `gcloud deployment-manager types list`

Nella [**ricerca originale**](https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/) il seguente [**script**](https://github.com/RhinoSecurityLabs/GCP-IAM-Privilege-Escalation/blob/master/ExploitScripts/deploymentmanager.deployments.create.py) è utilizzato per distribuire un'istanza di calcolo, tuttavia quello script non funzionerà. Controlla uno script per automatizzare la [**creazione, sfruttamento e pulizia di un ambiente vulnerabile qui**](https://github.com/carlospolop/gcp_privesc_scripts/blob/main/tests/1-deploymentmanager.deployments.create.sh)**.**

### `deploymentmanager.deployments.update`

Questo è simile all'abuso precedente, ma invece di creare una nuova distribuzione, modifichi una già esistente (quindi fai attenzione)

Controlla uno script per automatizzare la [**creazione, sfruttamento e pulizia di un ambiente vulnerabile qui**](https://github.com/carlospolop/gcp_privesc_scripts/blob/main/tests/e-deploymentmanager.deployments.update.sh)**.**

### `deploymentmanager.deployments.setIamPolicy`

Questo è simile all'abuso precedente, ma invece di creare direttamente una nuova distribuzione, prima ti concedi quell'accesso e poi abusi del permesso come spiegato nella sezione precedente _deploymentmanager.deployments.create_.

## References

- [https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/](https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/)

{{#include ../../../banners/hacktricks-training.md}}
