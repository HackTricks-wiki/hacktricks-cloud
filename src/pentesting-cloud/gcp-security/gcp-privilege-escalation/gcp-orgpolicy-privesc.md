# GCP - Orgpolicy Privesc

{{#include ../../../banners/hacktricks-training.md}}

## orgpolicy

### `orgpolicy.policy.set`

Ένας επιτιθέμενος που εκμεταλλεύεται το **orgpolicy.policy.set** μπορεί να χειριστεί τις οργανωτικές πολιτικές, οι οποίες θα του επιτρέψουν να αφαιρέσει ορισμένους περιορισμούς που εμποδίζουν συγκεκριμένες λειτουργίες. Για παράδειγμα, ο περιορισμός **appengine.disableCodeDownload** συνήθως μπλοκάρει τη λήψη του πηγαίου κώδικα του App Engine. Ωστόσο, χρησιμοποιώντας το **orgpolicy.policy.set**, ένας επιτιθέμενος μπορεί να απενεργοποιήσει αυτόν τον περιορισμό, αποκτώντας έτσι πρόσβαση για να κατεβάσει τον πηγαίο κώδικα, παρά το γεγονός ότι αρχικά ήταν προστατευμένος.
```bash
# Get info
gcloud resource-manager org-policies describe <org-policy> [--folder <id> | --organization <id> | --project <id>]

# Disable
gcloud resource-manager org-policies disable-enforce <org-policy> [--folder <id> | --organization <id> | --project <id>]
```
Ένα σενάριο python για αυτή τη μέθοδο μπορεί να βρεθεί [εδώ](https://github.com/RhinoSecurityLabs/GCP-IAM-Privilege-Escalation/blob/master/ExploitScripts/orgpolicy.policy.set.py).

## Αναφορές

- [https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/](https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/)

{{#include ../../../banners/hacktricks-training.md}}
