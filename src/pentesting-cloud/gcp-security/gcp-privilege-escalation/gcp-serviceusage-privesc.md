# GCP - Serviceusage Privesc

{{#include ../../../banners/hacktricks-training.md}}

## serviceusage

ä¸‹é¢çš„æƒé™æœ‰åŠ©äºåˆ›å»ºå’Œçªƒå– API keysï¼Œæ³¨æ„æ–‡æ¡£ä¸­çš„è¯´æ˜ï¼š _An API key is a simple encrypted string that **identifies an application without any principal**. They are useful for accessing **public data anonymously**, and are used to **associate** API requests with your project for quota and **billing**._

å› æ­¤ï¼Œä½¿ç”¨ API key å¯ä»¥è®©ç›®æ ‡å…¬å¸ä¸ºä½ ä½¿ç”¨ API æ”¯ä»˜è´¹ç”¨ï¼Œä½†ä½ æ— æ³•åˆ©ç”¨å®ƒæ¥æå‡æƒé™ã€‚

è¦äº†è§£å…¶ä»–æƒé™ä»¥åŠç”Ÿæˆ API keys çš„æ–¹æ³•ï¼Œè¯·æŸ¥çœ‹ï¼š

{{#ref}}
gcp-apikeys-privesc.md
{{#endref}}

### `serviceusage.apiKeys.create`

å‘ç°äº†ä¸€ä¸ªæœªè®°å½•çš„ APIï¼Œå¯ç”¨äº **åˆ›å»º API keysï¼š**

<details><summary>ä½¿ç”¨æœªè®°å½•çš„ API åˆ›å»º API key</summary>
```bash
curl -XPOST "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
</details>

### `serviceusage.apiKeys.list`

å‘ç°äº†å¦ä¸€ä¸ªæœªè®°å½•çš„ APIï¼Œç”¨äºåˆ—å‡ºå·²åˆ›å»ºçš„ API å¯†é’¥ï¼ˆAPI å¯†é’¥å‡ºç°åœ¨å“åº”ä¸­ï¼‰ï¼š

<details><summary>ä½¿ç”¨æœªè®°å½•çš„ API åˆ—å‡º API å¯†é’¥</summary>
```bash
curl "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
</details>

### **`serviceusage.services.enable`** , **`serviceusage.services.use`**

æ‹¥æœ‰è¿™äº›æƒé™æ—¶ï¼Œattacker å¯ä»¥åœ¨é¡¹ç›®ä¸­å¯ç”¨å¹¶ä½¿ç”¨æ–°çš„æœåŠ¡ã€‚è¿™å¯èƒ½å…è®¸ attacker å¯ç”¨åƒ admin æˆ– cloudidentity è¿™æ ·çš„æœåŠ¡ä»¥å°è¯•è®¿é—® Workspace ä¿¡æ¯ï¼Œæˆ–å¯ç”¨å…¶ä»–æœåŠ¡æ¥è®¿é—®æœ‰ä»·å€¼çš„æ•°æ®ã€‚

## **å‚è€ƒèµ„æ–™**

- [https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/](https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/)

<details>

<summary><strong>æ”¯æŒ HackTricks å¹¶è·å–ç¦åˆ©ï¼</strong></summary>

ä½ åœ¨ä¸€å®¶ **ç½‘ç»œå®‰å…¨å…¬å¸** å·¥ä½œå—ï¼Ÿä½ æƒ³è®©ä½ çš„ **å…¬å¸åœ¨ HackTricks ä¸Šéœ²å‡ºå¹¿å‘Š** å—ï¼Ÿè¿˜æ˜¯ä½ æƒ³è·å– **æœ€æ–°ç‰ˆæœ¬çš„ PEASS æˆ–ä»¥ PDF ä¸‹è½½ HackTricks**ï¼ŸæŸ¥çœ‹ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ï¼

æ¢ç´¢ [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶ [**NFTs**](https://opensea.io/collection/the-peass-family) æ”¶è—

è·å– [**å®˜æ–¹ PEASS & HackTricks å‘¨è¾¹**](https://peass.creator-spring.com)

**åŠ å…¥** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord group**](https://discord.gg/hRep4RUj7f) æˆ–è€… [**telegram group**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘åœ¨ **Twitter** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/carlospolopm)**.**

**é€šè¿‡æäº¤ PR å°†ä½ çš„ hacking tricks åˆ†äº«åˆ°** [**hacktricks github repo**](https://github.com/carlospolop/hacktricks)\*\*\*\*

**.**

</details>



{{#include ../../../banners/hacktricks-training.md}}
