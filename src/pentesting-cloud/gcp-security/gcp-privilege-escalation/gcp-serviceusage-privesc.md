# GCP - Serviceusage Privesc

{{#include ../../../banners/hacktricks-training.md}}

## serviceusage

ë‹¤ìŒ ê¶Œí•œë“¤ì€ API keysë¥¼ ìƒì„±í•˜ê³  íƒˆì·¨í•˜ëŠ” ë° ìœ ìš©í•©ë‹ˆë‹¤. ë¬¸ì„œì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì„¤ëª…í•©ë‹ˆë‹¤: _An API key is a simple encrypted string that **identifies an application without any principal**. They are useful for accessing **public data anonymously**, and are used to **associate** API requests with your project for quota and **billing**._

ë”°ë¼ì„œ API keyë¡œ íšŒì‚¬ê°€ API ì‚¬ìš© ìš”ê¸ˆì„ ëŒ€ì‹  ë¶€ë‹´í•˜ê²Œ ë§Œë“¤ ìˆ˜ëŠ” ìˆì§€ë§Œ, ê¶Œí•œ ìƒìŠ¹ì€ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

ë‹¤ë¥¸ ê¶Œí•œë“¤ê³¼ API keys ìƒì„± ë°©ë²•ì„ ì•Œì•„ë³´ë ¤ë©´ ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:

{{#ref}}
gcp-apikeys-privesc.md
{{#endref}}

### `serviceusage.apiKeys.create`

ë¬¸ì„œí™”ë˜ì§€ ì•Šì€ APIê°€ ë°œê²¬ë˜ì—ˆìœ¼ë©°, ì´ë¥¼ ì‚¬ìš©í•´ **API keysë¥¼ ìƒì„±**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

<details><summary>ë¬¸ì„œí™”ë˜ì§€ ì•Šì€ APIë¡œ API key ìƒì„±</summary>
```bash
curl -XPOST "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
</details>

### `serviceusage.apiKeys.list`

ì´ë¯¸ ìƒì„±ëœ API keysë¥¼ ë‚˜ì—´í•˜ê¸° ìœ„í•œ ë˜ ë‹¤ë¥¸ ë¬¸ì„œí™”ë˜ì§€ ì•Šì€ APIê°€ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤(ì‘ë‹µì— API keysê°€ í‘œì‹œë©ë‹ˆë‹¤):

<details><summary>ë¬¸ì„œí™”ë˜ì§€ ì•Šì€ APIë¡œ API keys ë‚˜ì—´</summary>
```bash
curl "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
</details>

### **`serviceusage.services.enable`** , **`serviceusage.services.use`**

ì´ ê¶Œí•œë“¤ì„ ê°€ì§„ ê²½ìš° attackerëŠ” í”„ë¡œì íŠ¸ì—ì„œ ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ë¥¼ í™œì„±í™”í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” **attackerê°€ admin ë˜ëŠ” cloudidentity ê°™ì€ ì„œë¹„ìŠ¤ë¥¼ í™œì„±í™”í•  ìˆ˜ ìˆê²Œ í•˜ì—¬** Workspace ì •ë³´ë¥¼ ì¡°íšŒí•˜ë ¤ ì‹œë„í•˜ê±°ë‚˜, ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë¥¼ í†µí•´ í¥ë¯¸ë¡œìš´ ë°ì´í„°ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## **ì°¸ê³ ìë£Œ**

- [https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/](https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/)

<details>

<summary><strong>HackTricksë¥¼ ì§€ì›í•˜ê³  í˜œíƒì„ ë°›ìœ¼ì„¸ìš”!</strong></summary>

ì‚¬ì´ë²„ë³´ì•ˆ íšŒì‚¬ì—ì„œ ê·¼ë¬´í•˜ì‹­ë‹ˆê¹Œ? HackTricksì— ê·€ì‚¬ì˜ **company advertised in HackTricks**ë¥¼ ë³´ê³  ì‹¶ìœ¼ì‹ ê°€ìš”? ë˜ëŠ” PEASSì˜ ìµœì‹  ë²„ì „ì— ì ‘ê·¼í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œí•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”? [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ì„ í™•ì¸í•´ ë³´ì„¸ìš”!

[**The PEASS Family**](https://opensea.io/collection/the-peass-family), ìš°ë¦¬ë§Œì˜ ë…ì ì ì¸ ì»¬ë ‰ì…˜ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family)ë¥¼ í™•ì¸í•´ ë³´ì„¸ìš”.

[**official PEASS & HackTricks swag**](https://peass.creator-spring.com)ì„ ë°›ì•„ë³´ì„¸ìš”.

**Join the** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** me on **Twitter** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/carlospolopm)**.**

**Share your hacking tricks submitting PRs to the** [**hacktricks github repo**](https://github.com/carlospolop/hacktricks)\*\*\*\*

**.**

</details>



{{#include ../../../banners/hacktricks-training.md}}
