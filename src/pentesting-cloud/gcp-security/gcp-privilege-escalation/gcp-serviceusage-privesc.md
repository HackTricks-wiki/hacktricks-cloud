# GCP - Serviceusage Privesc

{{#include ../../../banners/hacktricks-training.md}}

## serviceusage

рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд permissions API keys рдмрдирд╛рдиреЗ рдФрд░ рдЪреБрд░рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реИрдВ, рдбреЙрдХреНрдпреВрдореЗрдВрдЯреНрд╕ рд╕реЗ рдиреЛрдЯ рдХрд░реЗрдВ: _API key рдПрдХ рд╕рд░рд▓ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╣реИ рдЬреЛ **рдХрд┐рд╕реА principal рдХреЗ рдмрд┐рдирд╛ рдХрд┐рд╕реА application рдХреА рдкрд╣рдЪрд╛рди рдХрд░рддреА рд╣реИ**ред рдпреЗ **рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдбреЗрдЯрд╛ рдХреЛ рдЧреБрдордирд╛рдо рд░реВрдк рд╕реЗ** рдПрдХреНрд╕реЗрд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реЛрддреЗ рд╣реИрдВ, рдФрд░ quota рдФрд░ **billing** рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЗ project рдХреЗ рд╕рд╛рде API requests рдХреЛ **associate** рдХрд░рдиреЗ рдореЗрдВ рдЗрд╕реНрддреЗрдорд╛рд▓ рд╣реЛрддреЗ рд╣реИрдВред_

рдЗрд╕рд▓рд┐рдП, рдПрдХ API key рдХреЗ рд╕рд╛рде рдЖрдк рдЙрд╕ рдХрдВрдкрдиреА рдХреЛ рдЕрдкрдиреЗ API рдЙрдкрдпреЛрдЧ рдХрд╛ рднреБрдЧрддрд╛рди рдХрд░рд╡рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдордЬрдмреВрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЖрдк privileges escalate рдирд╣реАрдВ рдХрд░ рдкрд╛рдПрдБрдЧреЗред

рдЕрдиреНрдп permissions рдФрд░ API keys рдЬрдирд░реЗрдЯ рдХрд░рдиреЗ рдХреЗ рддрд░реАрдХреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдиреЗ рдХреЗ рд▓рд┐рдП рджреЗрдЦреЗрдВ:

{{#ref}}
gcp-apikeys-privesc.md
{{#endref}}

### `serviceusage.apiKeys.create`

рдПрдХ undocumented API рдорд┐рд▓рд╛ рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ **create API keys** рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ:

<details><summary>Create API key using undocumented API</summary>
```bash
curl -XPOST "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
</details>

### `serviceusage.apiKeys.list`

рдкрд╣рд▓реЗ рд╕реЗ рдмрдирд╛рдП рдЧрдП API keys рдХреЛ рд╕реВрдЪреАрдмрджреНрдз рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдФрд░ рдЕрдирджрд╕реНрддрд╛рд╡реЗрдЬрд╝ API рдорд┐рд▓рд╛ (API keys рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдкреНрд░рджрд░реНрд╢рд┐рдд рд╣реЛрддреЗ рд╣реИрдВ):

<details><summary>рдЕрдирджрд╕реНрддрд╛рд╡реЗрдЬрд╝ API рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ API keys рд╕реВрдЪреАрдмрджреНрдз рдХрд░реЗрдВ</summary>
```bash
curl "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
</details>

### **`serviceusage.services.enable`** , **`serviceusage.services.use`**

рдЗрди permissions рдХреЗ рд╕рд╛рде рдПрдХ attacker рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ рдирдП services рдХреЛ enable рдФрд░ use рдХрд░ рд╕рдХрддрд╛ рд╣реИред рдЗрд╕рд╕реЗ рдПрдХ **attacker рдХреЛ admin рдпрд╛ cloudidentity рдЬреИрд╕реА service enable** рдХрд░рдХреЗ Workspace рдЬрд╛рдирдХрд╛рд░реА рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рдиреЗ, рдпрд╛ рдЕрдиреНрдп services рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд░реЛрдЪрдХ рдбреЗрдЯрд╛ рдПрдХреНрд╕реЗрд╕ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдорд┐рд▓ рд╕рдХрддреА рд╣реИред

## **рд╕рдВрджрд░реНрдн**

- [https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/](https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/)

<details>

<summary><strong>HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ рдФрд░ рд▓рд╛рдн рдкрд╛рдПрдВ!</strong></summary>

рдХреНрдпрд╛ рдЖрдк рдХрд┐рд╕реА **cybersecurity company** рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ? рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА **company рдХреЛ HackTricks рдореЗрдВ рд╡рд┐рдЬреНрдЮрд╛рдкрд┐рдд** рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? рдпрд╛ рдХреНрдпрд╛ рдЖрдк **PEASS рдХреЗ latest version рдпрд╛ HackTricks рдХреЛ PDF рдореЗрдВ рдбрд╛рдЙрдирд▓реЛрдб** рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? Check the [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!

Discover [**The PEASS Family**](https://opensea.io/collection/the-peass-family), рд╣рдорд╛рд░реА exclusive [**NFTs**](https://opensea.io/collection/the-peass-family) рдХрд▓реЗрдХреНрд╢рди

Get the [**official PEASS & HackTricks swag**](https://peass.creator-spring.com)

**Join the** [**ЁЯТм**](https://emojipedia.org/speech-balloon/) [**Discord group**](https://discord.gg/hRep4RUj7f) рдпрд╛ the [**telegram group**](https://t.me/peass) рдпрд╛ **follow рдХрд░реЗрдВ** рдореБрдЭреЗ **Twitter** рдкрд░ [**ЁЯРж**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/carlospolopm)**.**

**рдЕрдкрдиреЗ hacking tricks рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ to the** [**hacktricks github repo**](https://github.com/carlospolop/hacktricks)\*\*\*\*

**.**

</details>



{{#include ../../../banners/hacktricks-training.md}}
