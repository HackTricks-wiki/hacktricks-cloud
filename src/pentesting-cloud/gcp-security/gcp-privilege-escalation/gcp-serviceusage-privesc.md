# GCP - Serviceusage Privesc

{{#include ../../../banners/hacktricks-training.md}}

## serviceusage

ÎŸÎ¹ Î±ÎºÏŒÎ»Î¿Ï…Î¸ÎµÏ‚ Î¬Î´ÎµÎ¹ÎµÏ‚ ÎµÎ¯Î½Î±Î¹ Ï‡ÏÎ®ÏƒÎ¹Î¼ÎµÏ‚ Î³Î¹Î± Ï„Î· Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± ÎºÎ±Î¹ ÎºÎ»Î¿Ï€Î® API keys â€” ÏƒÎ·Î¼ÎµÎ¯Ï‰ÏƒÎ· Î±Ï€ÏŒ Ï„Î± docs: _An API key is a simple encrypted string that **identifies an application without any principal**. They are useful for accessing **Î´Î·Î¼ÏŒÏƒÎ¹Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± Î±Î½ÏÎ½Ï…Î¼Î±**, and are used to **associate** API requests with your project for quota and **billing**._

Î•Ï€Î¿Î¼Î­Î½Ï‰Ï‚, Î¼Îµ Î­Î½Î± API key Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± ÎºÎ¬Î½ÎµÏ„Îµ Ï„Î·Î½ ÎµÏ„Î±Î¹ÏÎµÎ¯Î± Î½Î± Ï€Î»Î·ÏÏÏƒÎµÎ¹ Î³Î¹Î± Ï„Î· Ï‡ÏÎ®ÏƒÎ· Ï„Î¿Ï… API, Î±Î»Î»Î¬ Î´ÎµÎ½ Î¸Î± Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± escalate privileges.

Î“Î¹Î± Î½Î± Î¼Î¬Î¸ÎµÏ„Îµ Î¬Î»Î»ÎµÏ‚ Î¬Î´ÎµÎ¹ÎµÏ‚ ÎºÎ±Î¹ Ï„ÏÏŒÏ€Î¿Ï…Ï‚ Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î±Ï‚ API keys Î´ÎµÎ¯Ï„Îµ:

{{#ref}}
gcp-apikeys-privesc.md
{{#endref}}

### `serviceusage.apiKeys.create`

Î’ÏÎ­Î¸Î·ÎºÎµ Î­Î½Î± Î¼Î· Ï„ÎµÎºÎ¼Î·ÏÎ¹Ï‰Î¼Î­Î½Î¿ API Ï€Î¿Ï… Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î·Î¸ÎµÎ¯ Î³Î¹Î± Î½Î± **Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î®ÏƒÎµÎ¹ API keys:**

<details><summary>Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± API key Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÏÎ½Ï„Î±Ï‚ Î¼Î· Ï„ÎµÎºÎ¼Î·ÏÎ¹Ï‰Î¼Î­Î½Î¿ API</summary>
```bash
curl -XPOST "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
</details>

### `serviceusage.apiKeys.list`

Î’ÏÎ­Î¸Î·ÎºÎµ Î¬Î»Î»Î¿ Î¼Î· Ï„ÎµÎºÎ¼Î·ÏÎ¹Ï‰Î¼Î­Î½Î¿ API Î³Î¹Î± Ï„Î·Î½ ÎµÎ¼Ï†Î¬Î½Î¹ÏƒÎ· Ï„Ï‰Î½ API keys Ï€Î¿Ï… Î­Ï‡Î¿Ï…Î½ Î®Î´Î· Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î·Î¸ÎµÎ¯ (Ï„Î± API keys ÎµÎ¼Ï†Î±Î½Î¯Î¶Î¿Î½Ï„Î±Î¹ ÏƒÏ„Î·Î½ Î±Ï€ÏŒÎºÏÎ¹ÏƒÎ·):

<details><summary>Î›Î¯ÏƒÏ„Î± API keys Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÏÎ½Ï„Î±Ï‚ Î¼Î· Ï„ÎµÎºÎ¼Î·ÏÎ¹Ï‰Î¼Î­Î½Î¿ API</summary>
```bash
curl "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
</details>

### **`serviceusage.services.enable`** , **`serviceusage.services.use`**

ÎœÎµ Î±Ï…Ï„Î­Ï‚ Ï„Î¹Ï‚ Î¬Î´ÎµÎ¹ÎµÏ‚ Î­Î½Î±Ï‚ attacker Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î®ÏƒÎµÎ¹ ÎºÎ±Î¹ Î½Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÎµÎ¹ Î½Î­Î± services ÏƒÏ„Î¿ project. Î‘Ï…Ï„ÏŒ Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± ÎµÏ€Î¹Ï„ÏÎ­ÏˆÎµÎ¹ ÏƒÎµ **attacker Î½Î± ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î®ÏƒÎµÎ¹ Ï…Ï€Î·ÏÎµÏƒÎ¯Î± ÏŒÏ€Ï‰Ï‚ admin Î® cloudidentity** Î³Î¹Î± Î½Î± Ï€ÏÎ¿ÏƒÏ€Î±Î¸Î®ÏƒÎµÎ¹ Î½Î± Î±Ï€Î¿ÎºÏ„Î®ÏƒÎµÎ¹ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÎµ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ Ï„Î¿Ï… Workspace, Î® Î¬Î»Î»ÎµÏ‚ Ï…Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚ Î³Î¹Î± Î½Î± Î±Ï€Î¿ÎºÏ„Î®ÏƒÎµÎ¹ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÎµ ÎµÎ½Î´Î¹Î±Ï†Î­ÏÎ¿Î½Ï„Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î±.

## **Î‘Î½Î±Ï†Î¿ÏÎ­Ï‚**

- [https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/](https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/)

<details>

<summary><strong>Î¥Ï€Î¿ÏƒÏ„Î·ÏÎ¯Î¾Ï„Îµ Ï„Î¿ HackTricks ÎºÎ±Î¹ ÎºÎµÏÎ´Î¯ÏƒÏ„Îµ Ï€ÏÎ¿Î½ÏŒÎ¼Î¹Î±!</strong></summary>

Î•ÏÎ³Î¬Î¶ÎµÏƒÏ„Îµ ÏƒÎµ Î¼Î¹Î± **cybersecurity company**; Î˜Î­Î»ÎµÏ„Îµ Î½Î± Î´ÎµÎ¯Ï„Îµ Ï„Î·Î½ **company advertised in HackTricks**; Î® Î¸Î­Î»ÎµÏ„Îµ Î½Î± Î­Ï‡ÎµÏ„Îµ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÏ„Î·Î½ **latest version of the PEASS or download HackTricks in PDF**; Î•Î»Î­Î³Î¾Ï„Îµ Ï„Î± [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!

Î‘Î½Î±ÎºÎ±Î»ÏÏˆÏ„Îµ [**The PEASS Family**](https://opensea.io/collection/the-peass-family), Ï„Î· ÏƒÏ…Î»Î»Î¿Î³Î® Î¼Î±Ï‚ Î¼Îµ Î±Ï€Î¿ÎºÎ»ÎµÎ¹ÏƒÏ„Î¹ÎºÎ¬ [**NFTs**](https://opensea.io/collection/the-peass-family)

Î‘Ï€Î¿ÎºÏ„Î®ÏƒÏ„Îµ Ï„Î¿ [**official PEASS & HackTricks swag**](https://peass.creator-spring.com)

**Join the** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord group**](https://discord.gg/hRep4RUj7f) Î® Ï„Î·Î½ [**telegram group**](https://t.me/peass) Î® **Î±ÎºÎ¿Î»Î¿Ï…Î¸Î®ÏƒÏ„Îµ** Î¼Îµ ÏƒÏ„Î¿ **Twitter** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/carlospolopm)**.**

**Share your hacking tricks submitting PRs to the** [**hacktricks github repo**](https://github.com/carlospolop/hacktricks)\*\*\*\*

**.**

</details>



{{#include ../../../banners/hacktricks-training.md}}
