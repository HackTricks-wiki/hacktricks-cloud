# GCP - Serviceusage Privesc

{{#include ../../../banners/hacktricks-training.md}}

## serviceusage

As permiss√µes a seguir s√£o √∫teis para criar e roubar chaves de API, n√£o esque√ßa disso nos docs: _Uma chave de API √© uma string simples criptografada que **identifica uma aplica√ß√£o sem qualquer principal**. Elas s√£o √∫teis para acessar **dados p√∫blicos anonimamente** e s√£o usadas para **associar** solicita√ß√µes de API ao seu projeto para cota e **cobran√ßa**._

Portanto, com uma chave de API, voc√™ pode fazer com que a empresa pague pelo seu uso da API, mas voc√™ n√£o conseguir√° escalar privil√©gios.

Para aprender sobre outras permiss√µes e maneiras de gerar chaves de API, consulte:

{{#ref}}
gcp-apikeys-privesc.md
{{#endref}}

### `serviceusage.apiKeys.create`

Uma API n√£o documentada foi encontrada que pode ser usada para **criar chaves de API:**
```bash
curl -XPOST "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
### `serviceusage.apiKeys.list`

Outra API n√£o documentada foi encontrada para listar as chaves de API que j√° foram criadas (as chaves de API aparecem na resposta):
```bash
curl "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
### **`serviceusage.services.enable`** , **`serviceusage.services.use`**

Com essas permiss√µes, um atacante pode habilitar e usar novos servi√ßos no projeto. Isso poderia permitir que um **atacante habilitasse servi√ßos como admin ou cloudidentity** para tentar acessar informa√ß√µes do Workspace, ou outros servi√ßos para acessar dados interessantes.

## **Refer√™ncias**

- [https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/](https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/)

<details>

<summary><strong>Support HackTricks and get benefits!</strong></summary>

Voc√™ trabalha em uma **empresa de ciberseguran√ßa**? Voc√™ quer ver sua **empresa anunciada no HackTricks**? ou voc√™ quer ter acesso √† **√∫ltima vers√£o do PEASS ou baixar o HackTricks em PDF**? Confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!

Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivas

Obtenha o [**merch oficial do PEASS & HackTricks**](https://peass.creator-spring.com)

**Junte-se ao** [**üí¨**](https://emojipedia.org/speech-balloon/) [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **me siga** no **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/carlospolopm)**.**

**Compartilhe suas dicas de hacking enviando PRs para o** [**reposit√≥rio do hacktricks no github**](https://github.com/carlospolop/hacktricks)\*\*\*\*

**.**

</details>
