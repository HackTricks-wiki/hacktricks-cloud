# GCP - Serviceusage Privesc

{{#include ../../../banners/hacktricks-training.md}}

## serviceusage

ë‹¤ìŒ ê¶Œí•œì€ API í‚¤ë¥¼ ìƒì„±í•˜ê³  í›”ì¹˜ëŠ” ë° ìœ ìš©í•©ë‹ˆë‹¤. ë¬¸ì„œì—ì„œ ë‹¤ìŒì„ ì£¼ëª©í•˜ì„¸ìš”: _API í‚¤ëŠ” **ì£¼ì²´ ì—†ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹ë³„í•˜ëŠ” ê°„ë‹¨í•œ ì•”í˜¸í™”ëœ ë¬¸ìì—´**ì…ë‹ˆë‹¤. ì´ëŠ” **ê³µê°œ ë°ì´í„°ì— ìµëª…ìœ¼ë¡œ ì ‘ê·¼**í•˜ëŠ” ë° ìœ ìš©í•˜ë©°, **ì¿¼í„°** ë° **ì²­êµ¬**ë¥¼ ìœ„í•´ API ìš”ì²­ì„ í”„ë¡œì íŠ¸ì™€ **ì—°ê´€**ì‹œí‚¤ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤._

ë”°ë¼ì„œ API í‚¤ë¥¼ ì‚¬ìš©í•˜ë©´ í•´ë‹¹ íšŒì‚¬ê°€ API ì‚¬ìš©ì— ëŒ€í•œ ë¹„ìš©ì„ ì§€ë¶ˆí•˜ê²Œ í•  ìˆ˜ ìˆì§€ë§Œ, ê¶Œí•œ ìƒìŠ¹ì€ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

ë‹¤ë¥¸ ê¶Œí•œ ë° API í‚¤ ìƒì„± ë°©ë²•ì„ ë°°ìš°ë ¤ë©´ í™•ì¸í•˜ì„¸ìš”:

{{#ref}}
gcp-apikeys-privesc.md
{{#endref}}

### `serviceusage.apiKeys.create`

ë¬¸ì„œí™”ë˜ì§€ ì•Šì€ APIê°€ ë°œê²¬ë˜ì–´ **API í‚¤ë¥¼ ìƒì„±í•˜ëŠ” ë°** ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```bash
curl -XPOST "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
### `serviceusage.apiKeys.list`

ì´ë¯¸ ìƒì„±ëœ API í‚¤ë¥¼ ë‚˜ì—´í•˜ê¸° ìœ„í•œ ë¬¸ì„œí™”ë˜ì§€ ì•Šì€ APIê°€ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤(ì‘ë‹µì— API í‚¤ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤):
```bash
curl "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
### **`serviceusage.services.enable`** , **`serviceusage.services.use`**

ì´ ê¶Œí•œì„ ê°€ì§„ ê³µê²©ìëŠ” í”„ë¡œì íŠ¸ì—ì„œ ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ë¥¼ í™œì„±í™”í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” **ê³µê²©ìê°€ admin ë˜ëŠ” cloudidentityì™€ ê°™ì€ ì„œë¹„ìŠ¤ë¥¼ í™œì„±í™”í•˜ì—¬ Workspace ì •ë³´ë¥¼ ì ‘ê·¼í•˜ë ¤ í•˜ê±°ë‚˜, í¥ë¯¸ë¡œìš´ ë°ì´í„°ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**

## **References**

- [https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/](https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/)

<details>

<summary><strong>HackTricksë¥¼ ì§€ì›í•˜ê³  í˜œíƒì„ ë°›ìœ¼ì„¸ìš”!</strong></summary>

ë‹¹ì‹ ì€ **ì‚¬ì´ë²„ ë³´ì•ˆ íšŒì‚¬**ì—ì„œ ì¼í•˜ê³  ìˆìŠµë‹ˆê¹Œ? ë‹¹ì‹ ì˜ **íšŒì‚¬ê°€ HackTricksì— ê´‘ê³ ë˜ê¸°ë¥¼ ì›í•˜ì‹­ë‹ˆê¹Œ**? ì•„ë‹ˆë©´ **ìµœì‹  ë²„ì „ì˜ PEASSì— ì ‘ê·¼í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ê³  ì‹¶ìœ¼ì‹­ë‹ˆê¹Œ? [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop)ì„ í™•ì¸í•˜ì„¸ìš”!

[**PEASS ê°€ì¡±**](https://opensea.io/collection/the-peass-family)ì„ ë°œê²¬í•˜ì„¸ìš”, ìš°ë¦¬ì˜ ë…ì  [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.

[**ê³µì‹ PEASS & HackTricks ìƒí’ˆ**](https://peass.creator-spring.com)ì„ ë°›ìœ¼ì„¸ìš”.

**Join the** [**ğŸ’¬**](https://emojipedia.org/speech-balloon/) [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** me on **Twitter** [**ğŸ¦**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/carlospolopm)**.**

**Share your hacking tricks submitting PRs to the** [**hacktricks github repo**](https://github.com/carlospolop/hacktricks)\*\*\*\*

**.**

</details>
