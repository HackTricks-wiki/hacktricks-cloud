# GCP - Serviceusage Privesc

{{#include ../../../banners/hacktricks-training.md}}

## serviceusage

Les permissions suivantes sont utiles pour cr√©er et voler des API keys. Notez ceci d'apr√®s la documentation : _An API key is a simple encrypted string that **identifies an application without any principal**. They are useful for accessing **public data anonymously**, and are used to **associate** API requests with your project for quota and **billing**._

Ainsi, avec une API key vous pouvez faire en sorte que l'entreprise paie pour votre utilisation de l'API, mais vous ne pourrez pas escalate privileges.

Pour conna√Ætre d'autres permissions et fa√ßons de g√©n√©rer des API keys consultez :

{{#ref}}
gcp-apikeys-privesc.md
{{#endref}}

### `serviceusage.apiKeys.create`

Une API non document√©e a √©t√© trouv√©e qui peut √™tre utilis√©e pour **cr√©er des API keys :**

<details><summary>Cr√©er une API key en utilisant une API non document√©e</summary>
```bash
curl -XPOST "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
</details>

### `serviceusage.apiKeys.list`

Une autre API non document√©e a √©t√© trouv√©e pour lister les API keys qui ont d√©j√† √©t√© cr√©√©es (les API keys apparaissent dans la r√©ponse):

<details><summary>Lister les API keys en utilisant une API non document√©e</summary>
```bash
curl "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
</details>

### **`serviceusage.services.enable`** , **`serviceusage.services.use`**

Avec ces permissions, un attacker peut activer et utiliser de nouveaux services dans le projet. Cela pourrait permettre √† un attacker d'activer des services comme admin ou cloudidentity pour tenter d'acc√©der aux informations Workspace, ou d'activer d'autres services afin d'acc√©der √† des donn√©es int√©ressantes.

## **R√©f√©rences**

- [https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/](https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/)

<details>

<summary><strong>Soutenez HackTricks et obtenez des avantages !</strong></summary>

Travaillez-vous dans une **entreprise de cybers√©curit√©** ? Voulez-vous voir votre **company advertised in HackTricks** ? Ou voulez-vous avoir acc√®s √† la **latest version of the PEASS or download HackTricks in PDF** ? Consultez les [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!

D√©couvrez [**The PEASS Family**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs

Procurez-vous le [**official PEASS & HackTricks swag**](https://peass.creator-spring.com)

Rejoignez le [**üí¨**](https://emojipedia.org/speech-balloon/) [**Discord group**](https://discord.gg/hRep4RUj7f) ou le [**telegram group**](https://t.me/peass) ou suivez-moi sur **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/carlospolopm)**.**

**Partagez vos hacking tricks en soumettant des PRs au** [**hacktricks github repo**](https://github.com/carlospolop/hacktricks)\*\*\*\*

**.**

</details>



{{#include ../../../banners/hacktricks-training.md}}
