# GCP - Serviceusage Privesc

{{#include ../../../banners/hacktricks-training.md}}

## serviceusage

As permiss√µes a seguir s√£o √∫teis para criar e roubar API keys, observe isto da documenta√ß√£o: _Uma API key √© uma string simples encriptada que **identifica uma aplica√ß√£o sem qualquer principal**. Elas s√£o √∫teis para acessar **dados p√∫blicos anonimamente**, e s√£o usadas para **associar** requisi√ß√µes de API ao seu projeto para quota e **cobran√ßa**._

Portanto, com uma API key voc√™ pode fazer a empresa pagar pelo seu uso da API, mas voc√™ n√£o ser√° capaz de escalar privil√©gios.

Para aprender outras permiss√µes e maneiras de gerar API keys confira:

{{#ref}}
gcp-apikeys-privesc.md
{{#endref}}

### `serviceusage.apiKeys.create`

Uma API n√£o documentada foi encontrada que pode ser usada para **criar API keys:**

<details><summary>Criar API key usando API n√£o documentada</summary>
```bash
curl -XPOST "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
</details>

### `serviceusage.apiKeys.list`

Outra API n√£o documentada foi encontrada para listar API keys que j√° foram criadas (as API keys aparecem na resposta):

<details><summary>Listar API keys usando a API n√£o documentada</summary>
```bash
curl "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
</details>

### **`serviceusage.services.enable`** , **`serviceusage.services.use`**

Com essas permiss√µes um atacante pode habilitar e usar novos servi√ßos no projeto. Isso poderia permitir que um **atacante habilite servi√ßos como admin ou cloudidentity** para tentar acessar informa√ß√µes do Workspace, ou outros servi√ßos para acessar dados interessantes.

## **References**

- [https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/](https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/)

<details>

<summary><strong>Support HackTricks and get benefits!</strong></summary>

Voc√™ trabalha em uma **cybersecurity company**? Quer ver sua **company advertised in HackTricks**? Ou quer ter acesso √† **latest version of the PEASS or download HackTricks in PDF**? Confira os [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!

Discover [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o de exclusivos [**NFTs**](https://opensea.io/collection/the-peass-family)

Get the [**official PEASS & HackTricks swag**](https://peass.creator-spring.com)

**Join the** [**üí¨**](https://emojipedia.org/speech-balloon/) [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** me on **Twitter** [**üê¶**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/carlospolopm)**.**

**Share your hacking tricks submitting PRs to the** [**hacktricks github repo**](https://github.com/carlospolop/hacktricks)\*\*\*\*

**.**

</details>

{{#include ../../../banners/hacktricks-training.md}}
