# GWS - Post Exploitation

{{#include ../../banners/hacktricks-training.md}}

## Google Groups Privesc

Podrazumevano, u workspace-u **grupa** može biti **slobodno dostupna** bilo kojem članu organizacije.\
Workspace takođe omogućava da se **dodele dozvole grupama** (čak i GCP dozvole), tako da ako se grupe mogu pridružiti i imaju dodatne dozvole, napadač može **iskoristiti tu putanju za eskalaciju privilegija**.

Potrebno je da imate pristup konzoli da biste se pridružili grupama koje dozvoljavaju pridruživanje bilo kome u organizaciji. Proverite informacije o grupama na [**https://groups.google.com/all-groups**](https://groups.google.com/all-groups).

### Access Groups Mail info

Ako ste uspeli da **kompromitujete sesiju google korisnika**, sa [**https://groups.google.com/all-groups**](https://groups.google.com/all-groups) možete videti istoriju mejlova poslatih grupama mejlova čiji je korisnik član, i možda ćete pronaći **akreditive** ili druge **osetljive podatke**.

## GCP <--> GWS Pivoting

{{#ref}}
../gcp-security/gcp-to-workspace-pivoting/
{{#endref}}

## Takeout - Preuzmi sve što Google zna o nalogu

Ako imate **sesiju unutar google naloga žrtve**, možete preuzeti sve što Google čuva o tom nalogu sa [**https://takeout.google.com**](https://takeout.google.com/u/1/?pageId=none)

## Vault - Preuzmi sve podatke Workspace-a korisnika

Ako organizacija ima **Google Vault omogućen**, možda ćete moći da pristupite [**https://vault.google.com**](https://vault.google.com/u/1/) i **preuzmete** sve **informacije**.

## Contacts download

Sa [**https://contacts.google.com**](https://contacts.google.com/u/1/?hl=es&tab=mC) možete preuzeti sve **kontakte** korisnika.

## Cloudsearch

Na [**https://cloudsearch.google.com/**](https://cloudsearch.google.com) možete jednostavno pretraživati **sadržaj Workspace-a** (email, drive, sajtove...) kojem korisnik ima pristup. Idealno za **brzo pronalaženje osetljivih informacija**.

## Google Chat

Na [**https://mail.google.com/chat**](https://mail.google.com/chat) možete pristupiti Google **Chat-u**, i možda ćete pronaći osetljive informacije u razgovorima (ako ih ima).

## Google Drive Mining

Kada **delite** dokument, možete **navesti** **ljude** koji mogu da mu pristupe jedan po jedan, **podeliti** ga sa vašom **celom kompanijom** (**ili** sa nekim specifičnim **grupama**) generisanjem linka.

Kada delite dokument, u naprednim podešavanjima takođe možete **dozvoliti ljudima da pretražuju** ovaj fajl (po **default-u** je **onemogućeno**). Međutim, važno je napomenuti da kada korisnici pogledaju dokument, on postaje pretraživ za njih.

Radi jednostavnosti, većina ljudi će generisati i deliti link umesto da dodaju ljude koji mogu da pristupe dokumentu jedan po jedan.

Neki predloženi načini za pronalaženje svih dokumenata:

- Pretražujte u internom chatu, forumima...
- **Spider** poznate **dokumente** tražeći **reference** na druge dokumente. To možete uraditi unutar App Script-a sa [**PaperChaser**](https://github.com/mandatoryprogrammer/PaperChaser)

## **Keep Notes**

Na [**https://keep.google.com/**](https://keep.google.com) možete pristupiti beleškama korisnika, **osetljive** **informacije** mogu biti sačuvane ovde.

### Modify App Scripts

Na [**https://script.google.com/**](https://script.google.com/) možete pronaći APP Skripte korisnika.

## **Administrate Workspace**

Na [**https://admin.google.com**/](https://admin.google.com), možda ćete moći da modifikujete podešavanja Workspace-a cele organizacije ako imate dovoljno dozvola.

Takođe možete pronaći mejlove pretražujući sve korisnikove fakture na [**https://admin.google.com/ac/emaillogsearch**](https://admin.google.com/ac/emaillogsearch)

## References

- [https://www.youtube-nocookie.com/embed/6AsVUS79gLw](https://www.youtube-nocookie.com/embed/6AsVUS79gLw) - Matthew Bryant - Hacking G Suite: The Power of Dark Apps Script Magic
- [https://www.youtube.com/watch?v=KTVHLolz6cE](https://www.youtube.com/watch?v=KTVHLolz6cE) - Mike Felch and Beau Bullock - OK Google, How do I Red Team GSuite?

{{#include ../../banners/hacktricks-training.md}}
