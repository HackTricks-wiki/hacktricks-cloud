# GWS - Post Exploitation

{{#include ../../banners/hacktricks-training.md}}

## Google Groups Privesc

Domyślnie w workspace **grupa** może być **swobodnie dostępna** dla każdego członka organizacji.\
Workspace pozwala również na **przyznawanie uprawnień grupom** (nawet uprawnień GCP), więc jeśli grupy mogą być dołączane i mają dodatkowe uprawnienia, atakujący może **wykorzystać tę ścieżkę do eskalacji uprawnień**.

Potrzebujesz potencjalnie dostępu do konsoli, aby dołączyć do grup, które mogą być dołączane przez każdego w organizacji. Sprawdź informacje o grupach w [**https://groups.google.com/all-groups**](https://groups.google.com/all-groups).

### Informacje o dostępie do grup mailowych

Jeśli udało ci się **skompromentować sesję użytkownika google**, z [**https://groups.google.com/all-groups**](https://groups.google.com/all-groups) możesz zobaczyć historię maili wysyłanych do grup mailowych, których członkiem jest użytkownik, i możesz znaleźć **dane uwierzytelniające** lub inne **wrażliwe dane**.

## GCP <--> GWS Pivoting

{{#ref}}
../gcp-security/gcp-to-workspace-pivoting/
{{#endref}}

## Takeout - Pobierz wszystko, co Google wie o koncie

Jeśli masz **sesję w koncie ofiary google**, możesz pobrać wszystko, co Google zapisuje o tym koncie z [**https://takeout.google.com**](https://takeout.google.com/u/1/?pageId=none)

## Vault - Pobierz wszystkie dane Workspace użytkowników

Jeśli organizacja ma **włączony Google Vault**, możesz uzyskać dostęp do [**https://vault.google.com**](https://vault.google.com/u/1/) i **pobrać** wszystkie **informacje**.

## Pobieranie kontaktów

Z [**https://contacts.google.com**](https://contacts.google.com/u/1/?hl=es&tab=mC) możesz pobrać wszystkie **kontakty** użytkownika.

## Cloudsearch

W [**https://cloudsearch.google.com/**](https://cloudsearch.google.com) możesz po prostu przeszukiwać **wszystkie treści Workspace** (e-mail, dysk, strony...), do których użytkownik ma dostęp. Idealne do **szybkiego znajdowania wrażliwych informacji**.

## Google Chat

W [**https://mail.google.com/chat**](https://mail.google.com/chat) możesz uzyskać dostęp do Google **Czatu**, i możesz znaleźć wrażliwe informacje w rozmowach (jeśli takie są).

## Google Drive Mining

Podczas **udostępniania** dokumentu możesz **określić** **osoby**, które mogą uzyskać do niego dostęp jedna po drugiej, **udostępnić** go całej **firmie** (**lub** niektórym konkretnym **grupom**) poprzez **generowanie linku**.

Podczas udostępniania dokumentu, w ustawieniach zaawansowanych możesz również **zezwolić ludziom na wyszukiwanie** tego pliku (domyślnie jest to **wyłączone**). Jednak ważne jest, aby zauważyć, że po tym, jak użytkownicy wyświetlą dokument, staje się on dla nich wyszukiwalny.

Dla uproszczenia, większość ludzi wygeneruje i udostępni link zamiast dodawać osoby, które mogą uzyskać dostęp do dokumentu jedna po drugiej.

Niektóre proponowane sposoby na znalezienie wszystkich dokumentów:

- Szukaj w wewnętrznych czatach, forach...
- **Pająk** znanych **dokumentów** w poszukiwaniu **odniesień** do innych dokumentów. Możesz to zrobić w ramach App Script z [**PaperChaser**](https://github.com/mandatoryprogrammer/PaperChaser)

## **Keep Notes**

W [**https://keep.google.com/**](https://keep.google.com) możesz uzyskać dostęp do notatek użytkownika, **wrażliwe** **informacje** mogą być tutaj zapisane.

### Modyfikacja App Scripts

W [**https://script.google.com/**](https://script.google.com/) możesz znaleźć APP Scripts użytkownika.

## **Administracja Workspace**

W [**https://admin.google.com**/](https://admin.google.com) możesz być w stanie zmodyfikować ustawienia Workspace całej organizacji, jeśli masz wystarczające uprawnienia.

Możesz również znaleźć e-maile, przeszukując wszystkie faktury użytkownika w [**https://admin.google.com/ac/emaillogsearch**](https://admin.google.com/ac/emaillogsearch)

## Referencje

- [https://www.youtube-nocookie.com/embed/6AsVUS79gLw](https://www.youtube-nocookie.com/embed/6AsVUS79gLw) - Matthew Bryant - Hacking G Suite: The Power of Dark Apps Script Magic
- [https://www.youtube.com/watch?v=KTVHLolz6cE](https://www.youtube.com/watch?v=KTVHLolz6cE) - Mike Felch i Beau Bullock - OK Google, Jak mogę przeprowadzić Red Team GSuite?

{{#include ../../banners/hacktricks-training.md}}
