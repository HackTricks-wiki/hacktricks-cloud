# GWS - Post Exploitation

{{#include ../../banners/hacktricks-training.md}}

## Google Groups Privesc

Standardmäßig kann in Workspace eine **Gruppe** von jedem Mitglied der Organisation **frei zugegriffen** werden.\
Workspace erlaubt auch, **Berechtigungen für Gruppen zu gewähren** (sogar GCP-Berechtigungen), sodass, wenn Gruppen beigetreten werden können und sie zusätzliche Berechtigungen haben, ein Angreifer diesen Weg **ausnutzen kann, um Privilegien zu eskalieren**.

Sie benötigen möglicherweise Zugriff auf die Konsole, um Gruppen beizutreten, die von jedem in der Organisation beigetreten werden können. Überprüfen Sie die Gruppeninformationen unter [**https://groups.google.com/all-groups**](https://groups.google.com/all-groups).

### Zugriff auf Gruppen-Mail-Informationen

Wenn Sie es geschafft haben, eine **Google-Benutzersitzung zu kompromittieren**, können Sie von [**https://groups.google.com/all-groups**](https://groups.google.com/all-groups) die Historie der an die Mailgruppen gesendeten Mails sehen, deren Mitglied der Benutzer ist, und Sie könnten **Anmeldeinformationen** oder andere **sensible Daten** finden.

## GCP <--> GWS Pivoting

{{#ref}}
../gcp-security/gcp-to-workspace-pivoting/
{{#endref}}

## Takeout - Alles herunterladen, was Google über ein Konto weiß

Wenn Sie eine **Sitzung im Google-Konto des Opfers** haben, können Sie alles herunterladen, was Google über dieses Konto speichert, von [**https://takeout.google.com**](https://takeout.google.com/u/1/?pageId=none)

## Vault - Alle Workspace-Daten der Benutzer herunterladen

Wenn eine Organisation **Google Vault aktiviert** hat, könnten Sie in der Lage sein, auf [**https://vault.google.com**](https://vault.google.com/u/1/) zuzugreifen und alle **Informationen** **herunterzuladen**.

## Kontakte herunterladen

Von [**https://contacts.google.com**](https://contacts.google.com/u/1/?hl=es&tab=mC) können Sie alle **Kontakte** des Benutzers herunterladen.

## Cloudsearch

In [**https://cloudsearch.google.com/**](https://cloudsearch.google.com) können Sie einfach **durch alle Workspace-Inhalte** (E-Mail, Drive, Sites...) suchen, auf die ein Benutzer Zugriff hat. Ideal, um **sensible Informationen schnell zu finden**.

## Google Chat

In [**https://mail.google.com/chat**](https://mail.google.com/chat) können Sie auf einen Google **Chat** zugreifen, und Sie könnten in den Gesprächen (falls vorhanden) sensible Informationen finden.

## Google Drive Mining

Beim **Teilen** eines Dokuments können Sie die **Personen** angeben, die darauf zugreifen können, oder es mit Ihrer **gesamten Firma** (**oder** mit bestimmten **Gruppen**) durch **Erzeugen eines Links** **teilen**.

Beim Teilen eines Dokuments können Sie in den erweiterten Einstellungen auch **erlauben, dass Personen** nach dieser Datei suchen (standardmäßig ist dies **deaktiviert**). Es ist jedoch wichtig zu beachten, dass, sobald Benutzer ein Dokument anzeigen, es für sie durchsuchbar ist.

Zur Vereinfachung werden die meisten Menschen einen Link generieren und teilen, anstatt die Personen, die auf das Dokument zugreifen können, einzeln hinzuzufügen.

Einige vorgeschlagene Möglichkeiten, um alle Dokumente zu finden:

- In internen Chats, Foren... suchen
- **Spider** bekannte **Dokumente** nach **Referenzen** zu anderen Dokumenten durchsuchen. Dies können Sie innerhalb eines App-Skripts mit [**PaperChaser**](https://github.com/mandatoryprogrammer/PaperChaser) tun.

## **Keep Notes**

In [**https://keep.google.com/**](https://keep.google.com) können Sie auf die Notizen des Benutzers zugreifen, **sensible** **Informationen** könnten hier gespeichert sein.

### App-Skripte ändern

In [**https://script.google.com/**](https://script.google.com/) finden Sie die APP-Skripte des Benutzers.

## **Workspace verwalten**

In [**https://admin.google.com**/](https://admin.google.com) könnten Sie in der Lage sein, die Workspace-Einstellungen der gesamten Organisation zu ändern, wenn Sie genügend Berechtigungen haben.

Sie können auch E-Mails finden, indem Sie durch alle Rechnungen des Benutzers in [**https://admin.google.com/ac/emaillogsearch**](https://admin.google.com/ac/emaillogsearch) suchen.

## Referenzen

- [https://www.youtube-nocookie.com/embed/6AsVUS79gLw](https://www.youtube-nocookie.com/embed/6AsVUS79gLw) - Matthew Bryant - Hacking G Suite: The Power of Dark Apps Script Magic
- [https://www.youtube.com/watch?v=KTVHLolz6cE](https://www.youtube.com/watch?v=KTVHLolz6cE) - Mike Felch und Beau Bullock - OK Google, Wie mache ich Red Team GSuite?

{{#include ../../banners/hacktricks-training.md}}
