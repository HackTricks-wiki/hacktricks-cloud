# GWS - ポストエクスプロイト

{{#include ../../banners/hacktricks-training.md}}

## Google Groups プライベート昇格

デフォルトでは、ワークスペース内の**グループ**は組織の任意のメンバーによって**自由にアクセス**できます。\
ワークスペースは**グループに権限を付与する**ことも許可しているため（GCP権限も含む）、グループに参加でき、追加の権限がある場合、攻撃者は**その経路を悪用して権限を昇格**させる可能性があります。

組織内の誰でも参加できるグループに参加するには、コンソールへのアクセスが必要な場合があります。グループ情報は[**https://groups.google.com/all-groups**](https://groups.google.com/all-groups)で確認してください。

### アクセスグループメール情報

もし**Googleユーザーセッションを侵害**できた場合、[**https://groups.google.com/all-groups**](https://groups.google.com/all-groups)から、ユーザーがメンバーであるメールグループに送信されたメールの履歴を確認でき、**資格情報**や他の**機密データ**を見つけることができるかもしれません。

## GCP <--> GWS ピボッティング

{{#ref}}
../gcp-security/gcp-to-workspace-pivoting/
{{#endref}}

## テイクアウト - アカウントに関するGoogleのすべての情報をダウンロード

もし**被害者のGoogleアカウント内にセッションがある**場合、[**https://takeout.google.com**](https://takeout.google.com/u/1/?pageId=none)から、そのアカウントに関するGoogleが保存しているすべての情報をダウンロードできます。

## ボールト - ユーザーのワークスペースデータをすべてダウンロード

もし組織が**Google Vaultを有効にしている**場合、[**https://vault.google.com**](https://vault.google.com/u/1/)にアクセスして、すべての**情報**を**ダウンロード**できるかもしれません。

## 連絡先のダウンロード

[**https://contacts.google.com**](https://contacts.google.com/u/1/?hl=es&tab=mC)から、ユーザーのすべての**連絡先**をダウンロードできます。

## クラウドサーチ

[**https://cloudsearch.google.com/**](https://cloudsearch.google.com)では、ユーザーがアクセスできる**ワークスペースのすべてのコンテンツ**（メール、ドライブ、サイトなど）を検索できます。機密情報を**迅速に見つける**のに理想的です。

## Google チャット

[**https://mail.google.com/chat**](https://mail.google.com/chat)では、Googleの**チャット**にアクセスでき、会話の中に機密情報が含まれているかもしれません（もしあれば）。

## Google ドライブマイニング

ドキュメントを**共有**する際、アクセスできる**人々**を一人ずつ**指定**することができますが、**会社全体**（または特定の**グループ**）と**リンクを生成**して共有することもできます。

ドキュメントを共有する際、詳細設定でこのファイルを**検索可能にする**こともできます（**デフォルト**では**無効**です）。ただし、ユーザーがドキュメントを表示すると、それは彼らによって検索可能になることに注意が必要です。

簡単のために、ほとんどの人は一人ずつアクセスできる人を追加するのではなく、リンクを生成して共有します。

すべてのドキュメントを見つけるための提案された方法：

- 内部チャット、フォーラムで検索...
- **スパイダー**既知の**ドキュメント**を検索して他のドキュメントへの**参照**を探す。これは[ **PaperChaser**](https://github.com/mandatoryprogrammer/PaperChaser)を使ってApp Script内で行うことができます。

## **Keep ノート**

[**https://keep.google.com/**](https://keep.google.com)では、ユーザーのノートにアクセスでき、**機密**の**情報**が保存されているかもしれません。

### アプリスクリプトの修正

[**https://script.google.com/**](https://script.google.com/)では、ユーザーのAPPスクリプトを見つけることができます。

## **ワークスペースの管理**

[**https://admin.google.com**/](https://admin.google.com)では、十分な権限があれば、組織全体のワークスペース設定を変更できるかもしれません。

また、[**https://admin.google.com/ac/emaillogsearch**](https://admin.google.com/ac/emaillogsearch)でユーザーの請求書を検索することでメールを見つけることもできます。

## 参考文献

- [https://www.youtube-nocookie.com/embed/6AsVUS79gLw](https://www.youtube-nocookie.com/embed/6AsVUS79gLw) - Matthew Bryant - Hacking G Suite: The Power of Dark Apps Script Magic
- [https://www.youtube.com/watch?v=KTVHLolz6cE](https://www.youtube.com/watch?v=KTVHLolz6cE) - Mike Felch and Beau Bullock - OK Google, How do I Red Team GSuite?

{{#include ../../banners/hacktricks-training.md}}
