# GWS - Workspace Sync Attacks (GCPW, GCDS, GPS, Directory Sync with AD & EntraID)

{{#include ../../../banners/hacktricks-training.md}}

## GCPW - Google Credential Provider for Windows

これは、Google Workspacesが提供するシングルサインオンで、ユーザーが**自分のWorkspaceの資格情報**を使用してWindows PCにログインできるようにします。さらに、これはPCのいくつかの場所にGoogle Workspaceにアクセスするための**トークン**を保存します：ディスク、メモリ、レジストリ... **平文のパスワード**を取得することも可能です。

> [!TIP]
> [**Winpeas**](https://github.com/peass-ng/PEASS-ng/tree/master/winPEAS/winPEASexe)は**GCPW**を検出し、構成に関する情報を取得し、**トークン**さえも取得できることに注意してください。

この件に関する詳細情報は以下を参照してください：

{{#ref}}
gcpw-google-credential-provider-for-windows.md
{{#endref}}

## GCSD - Google Cloud Directory Sync

これは、**アクティブディレクトリのユーザーとグループをWorkspaceに同期するために使用できるツール**です（執筆時点ではその逆はできません）。

これは、**Workspaceのスーパーユーザーと特権のあるADユーザーの資格情報**が必要なツールであるため、時折ユーザーを同期しているドメインサーバー内で見つけることができるかもしれません。

> [!TIP]
> [**Winpeas**](https://github.com/peass-ng/PEASS-ng/tree/master/winPEAS/winPEASexe)は**GCDS**を検出し、構成に関する情報を取得し、**パスワードや暗号化された資格情報**さえも取得できることに注意してください。

この件に関する詳細情報は以下を参照してください：

{{#ref}}
gcds-google-cloud-directory-sync.md
{{#endref}}

## GPS - Google Password Sync

これは、Googleが提供するバイナリおよびサービスで、**ADとWorkspace間でユーザーのパスワードを同期させる**ためのものです。ユーザーがADでパスワードを変更するたびに、それはGoogleに設定されます。

`C:\Program Files\Google\Password Sync`にインストールされ、ここで設定するためのバイナリ`PasswordSync.exe`と、実行を続けるサービス`password_sync_service.exe`を見つけることができます。

> [!TIP]
> [**Winpeas**](https://github.com/peass-ng/PEASS-ng/tree/master/winPEAS/winPEASexe)は**GPS**を検出し、構成に関する情報を取得し、**パスワードや暗号化された資格情報**さえも取得できることに注意してください。

この件に関する詳細情報は以下を参照してください：

{{#ref}}
gps-google-password-sync.md
{{#endref}}

## Admin Directory Sync

GCDSを使用してユーザーを同期する方法との主な違いは、GCDSは手動でダウンロードして実行する必要があるバイナリを使用するのに対し、**Admin Directory Syncはサーバーレス**で、Googleによって管理されています [https://admin.google.com/ac/sync/externaldirectories](https://admin.google.com/ac/sync/externaldirectories)。

この件に関する詳細情報は以下を参照してください：

{{#ref}}
gws-admin-directory-sync.md
{{#endref}}

{{#include ../../../banners/hacktricks-training.md}}
