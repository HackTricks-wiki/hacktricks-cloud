# GWS - Workspace Pentesting

{{#include ../../banners/hacktricks-training.md}}

## Giriş Noktaları

### Google Platformları ve OAuth Uygulamaları Phishing

Kurbanınıza bir phishing bağlantısı göndermek için Drive, Chat, Gruplar gibi farklı Google platformlarını nasıl kullanabileceğinizi ve Google OAuth Phishing'i nasıl gerçekleştirebileceğinizi kontrol edin:

{{#ref}}
gws-google-platforms-phishing/
{{#endref}}

### Şifre Spraying

Bulduğunuz (veya keşfettiğiniz bir e-posta adı desenine dayalı olarak oluşturduğunuz) tüm e-postalarla şifreleri test etmek için, IP adresini değiştirmek için AWS lambdalarını kullanacak olan [**https://github.com/ustayready/CredKing**](https://github.com/ustayready/CredKing) gibi bir aracı kullanabilirsiniz (her ne kadar bakımsız görünse de).

## Post-Exploitation

Bazı kimlik bilgilerini veya kullanıcının oturumunu ele geçirdiyseniz, kullanıcının potansiyel hassas bilgilerine erişmek ve ayrıcalıkları artırmaya çalışmak için birkaç işlem gerçekleştirebilirsiniz:

{{#ref}}
gws-post-exploitation.md
{{#endref}}

### GWS <-->GCP Pivoting

GWS ve GCP arasında pivot yapmak için farklı teknikler hakkında daha fazla bilgi edinin:

{{#ref}}
../gcp-security/gcp-to-workspace-pivoting/
{{#endref}}

## GWS <--> GCPW | GCDS | Dizin Senkronizasyonu (AD & EntraID)

- **GCPW (Google Credential Provider for Windows)**: Bu, kullanıcıların **Workspace kimlik bilgilerini** kullanarak Windows PC'lerine giriş yapabilmeleri için Google Workspaces'ın sağladığı tek oturum açma sistemidir. Ayrıca, bu, PC'deki bazı yerlerde Google Workspace'e erişim için token'ları **saklayacaktır**.
- **GCDS (Google Cloud Directory Sync)**: Bu, **aktif dizin kullanıcılarınızı ve gruplarınızı Workspace ile senkronize etmek için** kullanılabilecek bir araçtır. Araç, **bir Workspace süper kullanıcısının ve ayrıcalıklı AD kullanıcısının kimlik bilgilerini** gerektirir. Bu nedenle, zaman zaman kullanıcıları senkronize eden bir alan sunucusunda bulunması mümkün olabilir.
- **Admin Dizin Senkronizasyonu**: AD ve EntraID'den kullanıcıları [https://admin.google.com/ac/sync/externaldirectories](https://admin.google.com/ac/sync/externaldirectories) adresinden sunucusuz bir süreçle senkronize etmenizi sağlar.

{{#ref}}
gws-workspace-sync-attacks-gcpw-gcds-gps-directory-sync-with-ad-and-entraid/
{{#endref}}

## Süreklilik

Bazı kimlik bilgilerini veya kullanıcının oturumunu ele geçirdiyseniz, bunun üzerinde sürekliliği sağlamak için bu seçenekleri kontrol edin:

{{#ref}}
gws-persistence.md
{{#endref}}

## Hesap Ele Geçirme Kurtarma

- Tüm oturumlardan çıkış yapın
- Kullanıcı şifresini değiştirin
- Yeni 2FA yedek kodları oluşturun
- Uygulama şifrelerini kaldırın
- OAuth uygulamalarını kaldırın
- 2FA cihazlarını kaldırın
- E-posta yönlendiricilerini kaldırın
- E-posta filtrelerini kaldırın
- Kurtarma e-posta/telefonlarını kaldırın
- Kötü niyetli senkronize edilmiş akıllı telefonları kaldırın
- Kötü Android Uygulamaları kaldırın
- Kötü hesap delege etmelerini kaldırın

## Referanslar

- [https://www.youtube-nocookie.com/embed/6AsVUS79gLw](https://www.youtube-nocookie.com/embed/6AsVUS79gLw) - Matthew Bryant - Hacking G Suite: The Power of Dark Apps Script Magic
- [https://www.youtube.com/watch?v=KTVHLolz6cE](https://www.youtube.com/watch?v=KTVHLolz6cE) - Mike Felch ve Beau Bullock - OK Google, GSuite'i Kırmızı Takım Nasıl Yaparım?

{{#include ../../banners/hacktricks-training.md}}
