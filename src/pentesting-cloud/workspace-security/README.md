# GWS - Workspace Pentesting

{{#include ../../banners/hacktricks-training.md}}

## Entry Points

### Google Platforms and OAuth Apps Phishing

Angalia jinsi unavyoweza kutumia majukwaa tofauti ya Google kama Drive, Chat, Groups... kutuma kiungo cha phishing kwa mwathirika na jinsi ya kufanya Google OAuth Phishing katika:

{{#ref}}
gws-google-platforms-phishing/
{{#endref}}

### Password Spraying

Ili kujaribu nywila na barua pepe zote ulizozipata (au ulizozitengeneza kulingana na muundo wa jina la barua pepe unayoweza kuwa umepata) unaweza kutumia chombo kama [**https://github.com/ustayready/CredKing**](https://github.com/ustayready/CredKing) (ingawa inaonekana haijatunzwa) ambacho kitatumia AWS lambdas kubadilisha anwani ya IP.

## Post-Exploitation

Ikiwa umepata baadhi ya akreditif au kikao cha mtumiaji unaweza kufanya vitendo kadhaa kupata taarifa nyeti za mtumiaji na kujaribu kupandisha mamlaka:

{{#ref}}
gws-post-exploitation.md
{{#endref}}

### GWS <-->GCP Pivoting

Soma zaidi kuhusu mbinu tofauti za pivoting kati ya GWS na GCP katika:

{{#ref}}
../gcp-security/gcp-to-workspace-pivoting/
{{#endref}}

## GWS <--> GCPW | GCDS | Directory Sync (AD & EntraID)

- **GCPW (Google Credential Provider for Windows)**: Hii ni njia moja ya kuingia ambayo Google Workspaces inatoa ili watumiaji waweze kuingia kwenye kompyuta zao za Windows wakitumia **akreditif zao za Workspace**. Zaidi ya hayo, hii itahifadhi **tokens za kufikia Google Workspace** katika sehemu fulani kwenye PC.
- **GCDS (Google Cloud Directory Sync)**: Hii ni chombo ambacho kinaweza kutumika **kusawazisha watumiaji na vikundi vya active directory kwenye Workspace yako**. Chombo kinahitaji **akreditif za mtumiaji mkuu wa Workspace na mtumiaji wa AD mwenye mamlaka**. Hivyo, inaweza kuwa inawezekana kuipata ndani ya seva ya kikoa ambayo itakuwa ikisawazisha watumiaji mara kwa mara.
- **Admin Directory Sync**: Inakuruhusu kusawazisha watumiaji kutoka AD na EntraID katika mchakato usio na seva kutoka [https://admin.google.com/ac/sync/externaldirectories](https://admin.google.com/ac/sync/externaldirectories).

{{#ref}}
gws-workspace-sync-attacks-gcpw-gcds-gps-directory-sync-with-ad-and-entraid/
{{#endref}}

## Persistence

Ikiwa umepata baadhi ya akreditif au kikao cha mtumiaji angalia chaguzi hizi za kudumisha kudumu juu yake:

{{#ref}}
gws-persistence.md
{{#endref}}

## Account Compromised Recovery

- Toka kwenye vikao vyote
- Badilisha nywila ya mtumiaji
- Tengeneza nambari mpya za akiba za 2FA
- Ondoa nywila za programu
- Ondoa programu za OAuth
- Ondoa vifaa vya 2FA
- Ondoa waandishi wa barua pepe
- Ondoa filters za barua pepe
- Ondoa barua pepe/simu za urejelezi
- Ondoa simu za mkononi zenye maambukizi
- Ondoa programu mbaya za Android
- Ondoa delegations mbaya za akaunti

## References

- [https://www.youtube-nocookie.com/embed/6AsVUS79gLw](https://www.youtube-nocookie.com/embed/6AsVUS79gLw) - Matthew Bryant - Hacking G Suite: The Power of Dark Apps Script Magic
- [https://www.youtube.com/watch?v=KTVHLolz6cE](https://www.youtube.com/watch?v=KTVHLolz6cE) - Mike Felch na Beau Bullock - OK Google, How do I Red Team GSuite?

{{#include ../../banners/hacktricks-training.md}}
