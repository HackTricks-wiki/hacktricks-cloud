# GWS - Workspace Pentesting

{{#include ../../banners/hacktricks-training.md}}

## Ingangspunte

### Google Platforms en OAuth Apps Phishing

Kyk hoe jy verskillende Google platforms soos Drive, Chat, Groups... kan gebruik om die slagoffer 'n phishing skakel te stuur en hoe om 'n Google OAuth Phishing uit te voer in:

{{#ref}}
gws-google-platforms-phishing/
{{#endref}}

### Wagwoord Spraying

Om wagwoorde te toets met al die e-posse wat jy gevind het (of wat jy gegenereer het gebaseer op 'n e-pos naam patroon wat jy dalk ontdek het) kan jy 'n hulpmiddel soos [**https://github.com/ustayready/CredKing**](https://github.com/ustayready/CredKing) (alhoewel dit onondersteun lyk) gebruik wat AWS lambdas sal gebruik om IP-adresse te verander.

## Post-Exploitation

As jy sekere akrediteer of die sessie van die gebruiker gecompromitteer het, kan jy verskeie aksies uitvoer om toegang te verkry tot potensieel sensitiewe inligting van die gebruiker en om te probeer om voorregte te verhoog:

{{#ref}}
gws-post-exploitation.md
{{#endref}}

### GWS <-->GCP Pivoting

Lees meer oor die verskillende tegnieke om tussen GWS en GCP te pivot in:

{{#ref}}
../gcp-security/gcp-to-workspace-pivoting/
{{#endref}}

## GWS <--> GCPW | GCDS | Directory Sync (AD & EntraID)

- **GCPW (Google Credential Provider for Windows)**: Dit is die enkele aanmeld wat Google Workspaces bied sodat gebruikers op hul Windows PC's kan aanmeld met **hulle Workspace akrediteer**. Boonop sal dit **tokens stoor om toegang tot Google Workspace** in sekere plekke op die PC te verkry.
- **GCDS (Google Cloud Directory Sync)**: Dit is 'n hulpmiddel wat gebruik kan word om **jou aktiewe gids gebruikers en groepe na jou Workspace te sinkroniseer**. Die hulpmiddel vereis die **akrediteer van 'n Workspace supergebruiker en bevoorregte AD gebruiker**. Dit mag dus moontlik wees om dit binne 'n domein bediener te vind wat gebruikers van tyd tot tyd sal sinkroniseer.
- **Admin Directory Sync**: Dit laat jou toe om gebruikers van AD en EntraID in 'n serverless proses te sinkroniseer vanaf [https://admin.google.com/ac/sync/externaldirectories](https://admin.google.com/ac/sync/externaldirectories).

{{#ref}}
gws-workspace-sync-attacks-gcpw-gcds-gps-directory-sync-with-ad-and-entraid/
{{#endref}}

## Volharding

As jy sekere akrediteer of die sessie van die gebruiker gecompromitteer het, kyk na hierdie opsies om volharding daaroor te handhaaf:

{{#ref}}
gws-persistence.md
{{#endref}}

## Rekening Gecompromitteer Herstel

- Teken uit van alle sessies
- Verander gebruiker wagwoord
- Genereer nuwe 2FA rugsteun kodes
- Verwyder App wagwoorde
- Verwyder OAuth apps
- Verwyder 2FA toestelle
- Verwyder e-pos voortplasing
- Verwyder e-pos filters
- Verwyder herstel e-pos/telefone
- Verwyder kwaadwillige gesinkroniseerde slimfone
- Verwyder slegte Android Apps
- Verwyder slegte rekening delegasies

## Verwysings

- [https://www.youtube-nocookie.com/embed/6AsVUS79gLw](https://www.youtube-nocookie.com/embed/6AsVUS79gLw) - Matthew Bryant - Hacking G Suite: The Power of Dark Apps Script Magic
- [https://www.youtube.com/watch?v=KTVHLolz6cE](https://www.youtube.com/watch?v=KTVHLolz6cE) - Mike Felch en Beau Bullock - OK Google, Hoe doen ek 'n Red Team GSuite?

{{#include ../../banners/hacktricks-training.md}}
