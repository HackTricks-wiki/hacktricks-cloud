# GWS - Workspace Pentesting

{{#include ../../banners/hacktricks-training.md}}

## Entry Points

### Google Platforms and OAuth Apps Phishing

जांचें कि आप विभिन्न Google प्लेटफार्मों जैसे Drive, Chat, Groups... का उपयोग करके पीड़ित को फ़िशिंग लिंक कैसे भेज सकते हैं और Google OAuth फ़िशिंग कैसे कर सकते हैं:

{{#ref}}
gws-google-platforms-phishing/
{{#endref}}

### Password Spraying

सभी ईमेल के साथ पासवर्ड का परीक्षण करने के लिए जो आपने खोजे हैं (या आप किसी ईमेल नाम पैटर्न के आधार पर उत्पन्न किए हैं) आप [**https://github.com/ustayready/CredKing**](https://github.com/ustayready/CredKing) (हालांकि यह अप्रबंधित लगता है) जैसे टूल का उपयोग कर सकते हैं जो IP पते को बदलने के लिए AWS लैम्ब्डा का उपयोग करेगा।

## Post-Exploitation

यदि आपने कुछ क्रेडेंशियल्स या उपयोगकर्ता के सत्र से समझौता किया है तो आप उपयोगकर्ता की संभावित संवेदनशील जानकारी तक पहुँचने और विशेषाधिकार बढ़ाने के लिए कई क्रियाएँ कर सकते हैं:

{{#ref}}
gws-post-exploitation.md
{{#endref}}

### GWS <-->GCP Pivoting

GWS और GCP के बीच पिवट करने की विभिन्न तकनीकों के बारे में अधिक पढ़ें:

{{#ref}}
../gcp-security/gcp-to-workspace-pivoting/
{{#endref}}

## GWS <--> GCPW | GCDS | Directory Sync (AD & EntraID)

- **GCPW (Google Credential Provider for Windows)**: यह एकल साइन-ऑन है जो Google Workspaces प्रदान करता है ताकि उपयोगकर्ता अपने Windows PCs में **अपने Workspace क्रेडेंशियल्स** का उपयोग करके लॉगिन कर सकें। इसके अलावा, यह **Google Workspace तक पहुँचने के लिए टोकन को PC में कुछ स्थानों पर स्टोर करेगा**।
- **GCDS (Google CLoud DIrectory Sync)**: यह एक टूल है जिसका उपयोग **आपके सक्रिय निर्देशिका उपयोगकर्ताओं और समूहों को आपके Workspace में समन्वयित करने के लिए किया जा सकता है**। इस टूल को **Workspace सुपरयूजर और विशेषाधिकार प्राप्त AD उपयोगकर्ता के क्रेडेंशियल्स** की आवश्यकता होती है। इसलिए, यह संभव है कि इसे एक डोमेन सर्वर के अंदर पाया जा सके जो समय-समय पर उपयोगकर्ताओं को समन्वयित कर रहा हो।
- **Admin Directory Sync**: यह आपको [https://admin.google.com/ac/sync/externaldirectories](https://admin.google.com/ac/sync/externaldirectories) से एक सर्वरलेस प्रक्रिया में AD और EntraID से उपयोगकर्ताओं को समन्वयित करने की अनुमति देता है।

{{#ref}}
gws-workspace-sync-attacks-gcpw-gcds-gps-directory-sync-with-ad-and-entraid/
{{#endref}}

## Persistence

यदि आपने कुछ क्रेडेंशियल्स या उपयोगकर्ता के सत्र से समझौता किया है तो इसे बनाए रखने के लिए इन विकल्पों की जांच करें:

{{#ref}}
gws-persistence.md
{{#endref}}

## Account Compromised Recovery

- सभी सत्रों से लॉग आउट करें
- उपयोगकर्ता पासवर्ड बदलें
- नए 2FA बैकअप कोड उत्पन्न करें
- ऐप पासवर्ड हटा दें
- OAuth ऐप्स हटा दें
- 2FA उपकरण हटा दें
- ईमेल फॉरवर्डर हटा दें
- ईमेल फ़िल्टर हटा दें
- पुनर्प्राप्ति ईमेल/फोन हटा दें
- दुर्भावनापूर्ण समन्वयित स्मार्टफ़ोन हटा दें
- खराब Android ऐप्स हटा दें
- खराब खाता प्रतिनिधित्व हटा दें

## References

- [https://www.youtube-nocookie.com/embed/6AsVUS79gLw](https://www.youtube-nocookie.com/embed/6AsVUS79gLw) - Matthew Bryant - Hacking G Suite: The Power of Dark Apps Script Magic
- [https://www.youtube.com/watch?v=KTVHLolz6cE](https://www.youtube.com/watch?v=KTVHLolz6cE) - Mike Felch and Beau Bullock - OK Google, How do I Red Team GSuite?

{{#include ../../banners/hacktricks-training.md}}
