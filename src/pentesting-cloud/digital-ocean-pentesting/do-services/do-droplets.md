# DO - Droplets

{{#include ../../../banners/hacktricks-training.md}}

## Основна інформація

У DigitalOcean "дроплет" - це в**іртуальний приватний сервер (VPS)**, який можна використовувати для хостингу веб-сайтів та додатків. Дроплет - це **попередньо налаштований пакет обчислювальних ресурсів**, включаючи певну кількість ЦП, пам'яті та сховища, який можна швидко та легко розгорнути на хмарній інфраструктурі DigitalOcean.

Ви можете вибрати з **поширених ОС**, до **додатків**, які вже працюють (таких як WordPress, cPanel, Laravel...), або навіть завантажити та використовувати **свої власні образи**.

Дроплети підтримують **скрипти даних користувача**.

<details>

<summary>Різниця між знімком і резервною копією</summary>

У DigitalOcean знімок - це копія диска дроплета на певний момент часу. Він захоплює стан диска дроплета на момент, коли був зроблений знімок, включаючи операційну систему, встановлені додатки та всі файли і дані на диску.

Знімки можна використовувати для створення нових дроплетів з такою ж конфігурацією, як у оригінального дроплета, або для відновлення дроплета до стану, в якому він був, коли був зроблений знімок. Знімки зберігаються на об'єктному сховищі DigitalOcean, і вони є інкрементальними, що означає, що зберігаються лише зміни з моменту останнього знімка. Це робить їх ефективними у використанні та економічно вигідними для зберігання.

З іншого боку, резервна копія - це повна копія дроплета, включаючи операційну систему, встановлені додатки, файли та дані, а також налаштування та метадані дроплета. Резервні копії зазвичай виконуються за регулярним графіком і захоплюють весь стан дроплета в певний момент часу.

На відміну від знімків, резервні копії зберігаються в стиснутому та зашифрованому форматі, і вони передаються з інфраструктури DigitalOcean до віддаленого місця для зберігання. Це робить резервні копії ідеальними для відновлення після катастроф, оскільки вони надають повну копію дроплета, яку можна відновити у разі втрати даних або інших катастрофічних подій.

Отже, знімки - це копії диска дроплета на певний момент часу, тоді як резервні копії - це повні копії дроплета, включаючи його налаштування та метадані. Знімки зберігаються на об'єктному сховищі DigitalOcean, тоді як резервні копії передаються з інфраструктури DigitalOcean до віддаленого місця. Як знімки, так і резервні копії можна використовувати для відновлення дроплета, але знімки є більш ефективними у використанні та зберіганні, тоді як резервні копії забезпечують більш комплексне рішення для резервного копіювання для відновлення після катастроф.

</details>

### Аутентифікація

Для аутентифікації можна **увімкнути SSH** через ім'я користувача та **пароль** (пароль визначається під час створення дроплета). Або **вибрати один або кілька завантажених SSH-ключів**.

### Брандмауер

> [!CAUTION]
> За замовчуванням **дроплети створюються БЕЗ БРАНДМАУЕРА** (не так, як в інших хмарах, таких як AWS або GCP). Тому, якщо ви хочете, щоб DO захищав порти дроплета (VM), вам потрібно **створити його та прикріпити**.

Більше інформації в:

{{#ref}}
do-networking.md
{{#endref}}

### Перерахування
```bash
# VMs
doctl compute droplet list # IPs will appear here
doctl compute droplet backups <droplet-id>
doctl compute droplet snapshots <droplet-id>
doctl compute droplet neighbors <droplet-id> # Get network neighbors
doctl compute droplet actions <droplet-id> # Get droplet actions

# VM interesting actions
doctl compute droplet-action password-reset <droplet-id> # New password is emailed to the user
doctl compute droplet-action enable-ipv6 <droplet-id>
doctl compute droplet-action power-on <droplet-id>
doctl compute droplet-action disable-backups <droplet-id>

# SSH
doctl compute ssh <droplet-id> # This will just run SSH
doctl compute ssh-key list
doctl compute ssh-key import <key-name> --public-key-file /path/to/key.pub

# Certificates
doctl compute certificate list

# Snapshots
doctl compute snapshot list
```
> [!CAUTION]
> **Дроплети мають метадані**, але в DO **немає IAM** або таких речей, як роль з AWS або облікові записи служб з GCP.

### RCE

З доступом до консолі можливо **отримати оболонку всередині дроплета**, отримавши доступ до URL: **`https://cloud.digitalocean.com/droplets/<droplet-id>/terminal/ui/`**

Також можливо запустити **консоль відновлення**, щоб виконати команди всередині хоста, отримавши доступ до консолі відновлення за **`https://cloud.digitalocean.com/droplets/<droplet-id>/console`** (але в цьому випадку вам потрібно знати пароль root).

{{#include ../../../banners/hacktricks-training.md}}
