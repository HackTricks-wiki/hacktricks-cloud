# DO - Droplets

{{#include ../../../banners/hacktricks-training.md}}

## Basic Information

Katika DigitalOcean, "droplet" ni v**irtual private server (VPS)** ambayo inaweza kutumika kuhost tovuti na programu. Droplet ni **kifurushi kilichopangwa awali cha rasilimali za kompyuta**, ikiwa ni pamoja na kiasi fulani cha CPU, kumbukumbu, na uhifadhi, ambacho kinaweza kuanzishwa haraka na kwa urahisi kwenye miundombinu ya wingu ya DigitalOcean.

Unaweza kuchagua kutoka kwa **OS za kawaida**, hadi **programu** ambazo tayari zinafanya kazi (kama WordPress, cPanel, Laravel...), au hata kupakia na kutumia **picha zako mwenyewe**.

Droplets zinasaidia **User data scripts**.

<details>

<summary>Tofauti kati ya snapshot na backup</summary>

Katika DigitalOcean, snapshot ni nakala ya wakati wa Droplet's disk. Inachukua hali ya Droplet's disk wakati snapshot ilipofanywa, ikiwa ni pamoja na mfumo wa uendeshaji, programu zilizowekwa, na faili zote na data kwenye disk.

Snapshots zinaweza kutumika kuunda Droplets mpya zikiwa na usanidi sawa na Droplet asilia, au kurejesha Droplet katika hali ambayo ilikuwa wakati snapshot ilipofanywa. Snapshots zinahifadhiwa kwenye huduma ya uhifadhi wa vitu ya DigitalOcean, na ni za ongezeko, ikimaanisha kuwa mabadiliko pekee tangu snapshot ya mwisho yanahifadhiwa. Hii inafanya kuwa rahisi kuzitumia na gharama nafuu kuzihifadhi.

Kwa upande mwingine, backup ni nakala kamili ya Droplet, ikiwa ni pamoja na mfumo wa uendeshaji, programu zilizowekwa, faili, na data, pamoja na mipangilio na metadata ya Droplet. Backups kwa kawaida hufanywa kwa ratiba ya kawaida, na zinachukua hali nzima ya Droplet katika wakati maalum.

Kinyume na snapshots, backups zinahifadhiwa katika muundo wa kubana na kuandikwa, na zinahamishwa kutoka kwenye miundombinu ya DigitalOcean kwenda mahali mbali kwa ajili ya usalama. Hii inafanya backups kuwa bora kwa urejeleaji wa majanga, kwani zinatoa nakala kamili ya Droplet ambayo inaweza kurejeshwa katika tukio la kupoteza data au matukio mengine mabaya.

Kwa muhtasari, snapshots ni nakala za wakati wa Droplet's disk, wakati backups ni nakala kamili ya Droplet, ikiwa ni pamoja na mipangilio na metadata yake. Snapshots zinahifadhiwa kwenye huduma ya uhifadhi wa vitu ya DigitalOcean, wakati backups zinahamishwa kutoka kwenye miundombinu ya DigitalOcean kwenda mahali mbali. Snapshots na backups zote zinaweza kutumika kurejesha Droplet, lakini snapshots ni rahisi kuzitumia na kuzihifadhi, wakati backups zinatoa suluhisho la kina zaidi la backup kwa urejeleaji wa majanga.

</details>

### Authentication

Kwa uthibitisho inawezekana **kuwezesha SSH** kupitia jina la mtumiaji na **nenosiri** (nenosiri lililofafanuliwa wakati droplet inaundwa). Au **chagua moja au zaidi ya funguo za SSH zilizopakiwa**.

### Firewall

> [!CAUTION]
> Kwa default **droplets zinaundwa BILA FIREWALL** (sio kama katika mawingu mengine kama AWS au GCP). Hivyo kama unataka DO kulinda bandari za droplet (VM), unahitaji **kuunda na kuunganisha**.

Maelezo zaidi katika:

{{#ref}}
do-networking.md
{{#endref}}

### Enumeration
```bash
# VMs
doctl compute droplet list # IPs will appear here
doctl compute droplet backups <droplet-id>
doctl compute droplet snapshots <droplet-id>
doctl compute droplet neighbors <droplet-id> # Get network neighbors
doctl compute droplet actions <droplet-id> # Get droplet actions

# VM interesting actions
doctl compute droplet-action password-reset <droplet-id> # New password is emailed to the user
doctl compute droplet-action enable-ipv6 <droplet-id>
doctl compute droplet-action power-on <droplet-id>
doctl compute droplet-action disable-backups <droplet-id>

# SSH
doctl compute ssh <droplet-id> # This will just run SSH
doctl compute ssh-key list
doctl compute ssh-key import <key-name> --public-key-file /path/to/key.pub

# Certificates
doctl compute certificate list

# Snapshots
doctl compute snapshot list
```
> [!CAUTION]
> **Droplets zina metadata endpoints**, lakini katika DO **hakuna IAM** au mambo kama role kutoka AWS au service accounts kutoka GCP.

### RCE

Kwa kupata ufikiaji wa console inawezekana **kupata shell ndani ya droplet** kwa kufikia URL: **`https://cloud.digitalocean.com/droplets/<droplet-id>/terminal/ui/`**

Pia inawezekana kuzindua **recovery console** ili kuendesha amri ndani ya mwenyeji kwa kufikia recovery console katika **`https://cloud.digitalocean.com/droplets/<droplet-id>/console`**(lakini katika kesi hii utahitaji kujua nenosiri la root).

{{#include ../../../banners/hacktricks-training.md}}
