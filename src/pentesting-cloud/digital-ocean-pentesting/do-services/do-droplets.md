# DO - Droplets

{{#include ../../../banners/hacktricks-training.md}}

## Grundinformationen

In DigitalOcean ist ein "Droplet" ein v**irtueller privater Server (VPS)**, der verwendet werden kann, um Websites und Anwendungen zu hosten. Ein Droplet ist ein **vorkonfiguriertes Paket von Rechenressourcen**, einschließlich einer bestimmten Menge an CPU, Speicher und Speicherplatz, das schnell und einfach auf der Cloud-Infrastruktur von DigitalOcean bereitgestellt werden kann.

Sie können aus **gängigen Betriebssystemen** und **bereits laufenden Anwendungen** (wie WordPress, cPanel, Laravel...) auswählen oder sogar **Ihre eigenen Images** hochladen und verwenden.

Droplets unterstützen **Benutzerdaten-Skripte**.

<details>

<summary>Unterschied zwischen einem Snapshot und einem Backup</summary>

In DigitalOcean ist ein Snapshot eine Momentaufnahme des Festplattenspeichers eines Droplets zu einem bestimmten Zeitpunkt. Er erfasst den Zustand der Festplatte des Droplets zum Zeitpunkt der Erstellung des Snapshots, einschließlich des Betriebssystems, installierter Anwendungen und aller Dateien und Daten auf der Festplatte.

Snapshots können verwendet werden, um neue Droplets mit derselben Konfiguration wie das ursprüngliche Droplet zu erstellen oder um ein Droplet auf den Zustand zurückzusetzen, in dem es sich befand, als der Snapshot erstellt wurde. Snapshots werden im Objektspeicherdienst von DigitalOcean gespeichert und sind inkrementell, was bedeutet, dass nur die Änderungen seit dem letzten Snapshot gespeichert werden. Dies macht sie effizient in der Nutzung und kostengünstig in der Speicherung.

Andererseits ist ein Backup eine vollständige Kopie eines Droplets, einschließlich des Betriebssystems, installierter Anwendungen, Dateien und Daten sowie der Einstellungen und Metadaten des Droplets. Backups werden typischerweise nach einem regelmäßigen Zeitplan durchgeführt und erfassen den gesamten Zustand eines Droplets zu einem bestimmten Zeitpunkt.

Im Gegensatz zu Snapshots werden Backups in einem komprimierten und verschlüsselten Format gespeichert und von der Infrastruktur von DigitalOcean an einen entfernten Ort zur sicheren Aufbewahrung übertragen. Dies macht Backups ideal für die Wiederherstellung nach Katastrophen, da sie eine vollständige Kopie eines Droplets bereitstellen, die im Falle von Datenverlust oder anderen katastrophalen Ereignissen wiederhergestellt werden kann.

Zusammenfassend sind Snapshots Momentaufnahmen der Festplatte eines Droplets, während Backups vollständige Kopien eines Droplets, einschließlich seiner Einstellungen und Metadaten, sind. Snapshots werden im Objektspeicherdienst von DigitalOcean gespeichert, während Backups von der Infrastruktur von DigitalOcean an einen entfernten Ort übertragen werden. Sowohl Snapshots als auch Backups können verwendet werden, um ein Droplet wiederherzustellen, aber Snapshots sind effizienter in der Nutzung und Speicherung, während Backups eine umfassendere Backup-Lösung für die Wiederherstellung nach Katastrophen bieten.

</details>

### Authentifizierung

Für die Authentifizierung ist es möglich, **SSH** über Benutzernamen und **Passwort** (Passwort, das bei der Erstellung des Droplets festgelegt wurde) zu **aktivieren**. Oder **eine oder mehrere der hochgeladenen SSH-Schlüssel** auszuwählen.

### Firewall

> [!CAUTION]
> Standardmäßig werden **Droplets OHNE FIREWALL** erstellt (nicht wie in anderen Clouds wie AWS oder GCP). Wenn Sie also möchten, dass DO die Ports des Droplets (VM) schützt, müssen Sie **eine erstellen und anhängen**.

Weitere Informationen in:

{{#ref}}
do-networking.md
{{#endref}}

### Enumeration
```bash
# VMs
doctl compute droplet list # IPs will appear here
doctl compute droplet backups <droplet-id>
doctl compute droplet snapshots <droplet-id>
doctl compute droplet neighbors <droplet-id> # Get network neighbors
doctl compute droplet actions <droplet-id> # Get droplet actions

# VM interesting actions
doctl compute droplet-action password-reset <droplet-id> # New password is emailed to the user
doctl compute droplet-action enable-ipv6 <droplet-id>
doctl compute droplet-action power-on <droplet-id>
doctl compute droplet-action disable-backups <droplet-id>

# SSH
doctl compute ssh <droplet-id> # This will just run SSH
doctl compute ssh-key list
doctl compute ssh-key import <key-name> --public-key-file /path/to/key.pub

# Certificates
doctl compute certificate list

# Snapshots
doctl compute snapshot list
```
> [!CAUTION]
> **Droplets haben Metadatenendpunkte**, aber in DO **gibt es kein IAM** oder Dinge wie Rollen von AWS oder Dienstkonten von GCP.

### RCE

Mit Zugriff auf die Konsole ist es möglich, **eine Shell im Droplet zu erhalten**, indem man die URL aufruft: **`https://cloud.digitalocean.com/droplets/<droplet-id>/terminal/ui/`**

Es ist auch möglich, eine **Wiederherstellungskonsole** zu starten, um Befehle im Host auszuführen, indem man auf eine Wiederherstellungskonsole in **`https://cloud.digitalocean.com/droplets/<droplet-id>/console`** zugreift (aber in diesem Fall müssen Sie das Root-Passwort kennen).

{{#include ../../../banners/hacktricks-training.md}}
