# AWS - CodeBuild Yetkisiz Erişim

{{#include ../../../banners/hacktricks-training.md}}

## CodeBuild

Daha fazla bilgi için bu sayfayı kontrol edin:

{{#ref}}
../aws-services/aws-codebuild-enum.md
{{#endref}}

### buildspec.yml

Eğer **`buildspec.yml`** adında bir dosya içeren bir depoya yazma erişimini ele geçirirseniz, bu dosyayı **arka kapı** ile değiştirebilir, bu dosyanın içindeki **çalıştırılacak komutları** belirleyebilir ve gizli bilgileri dışarı sızdırabilir, yapılan işlemleri tehlikeye atabilir ve ayrıca **CodeBuild IAM rol kimlik bilgilerini** tehlikeye atabilirsiniz.

Her ne kadar herhangi bir **`buildspec.yml`** dosyası olmasa da, Codebuild'in kullanıldığını biliyorsanız (veya farklı bir CI/CD) **çalıştırılacak bazı meşru kodları** değiştirerek örneğin bir ters shell elde edebilirsiniz.

İlgili bazı bilgiler için Github Actions'a nasıl saldırılacağı hakkında sayfayı kontrol edebilirsiniz (buna benzer):

{{#ref}}
../../../pentesting-ci-cd/github-security/abusing-github-actions/
{{#endref}}

## AWS CodeBuild'de Kendinize Ait GitHub Actions Koşucuları <a href="#action-runner" id="action-runner"></a>

[**Belgelerde belirtildiği gibi**](https://docs.aws.amazon.com/codebuild/latest/userguide/action-runner.html), **CodeBuild**'i, yapılandırılmış bir Github deposunda bir iş akışı tetiklendiğinde **kendinize ait Github eylemlerini** çalıştıracak şekilde yapılandırmak mümkündür. Bu, **`Event type`**'in **`WORKFLOW_JOB_QUEUED`** içermesi gerektiğinden, CodeBuild proje yapılandırmasını kontrol ederek tespit edilebilir ve bir Github İş Akışı'nda, bu şekilde bir **kendinize ait** koşucu seçecektir:
```bash
runs-on: codebuild-<project-name>-${{ github.run_id }}-${{ github.run_attempt }}
```
Bu yeni ilişki, Github Actions ile AWS arasında, Github'daki kodun bir IAM rolü eklenmiş bir CodeBuild projesinde çalışması nedeniyle AWS'yi Github üzerinden tehlikeye atmanın başka bir yolunu oluşturur.

{{#include ../../../banners/hacktricks-training.md}}
