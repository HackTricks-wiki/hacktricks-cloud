# AWS - CodeBuild Ongeauthentiseerde Toegang

{{#include ../../../../banners/hacktricks-training.md}}

## CodeBuild

Vir meer inligting, sien hierdie bladsy:

{{#ref}}
../../aws-services/aws-codebuild-enum.md
{{#endref}}

### buildspec.yml

As jy skryf-toegang tot 'n repository bekom wat 'n lêer met die naam **`buildspec.yml`** bevat, kan jy hierdie lêer **backdoor**, wat die **opdragte wat uitgevoer gaan word** binne 'n CodeBuild projek spesifiseer, en sodoende die geheime eksfiltreer, die uitgevoerde take kompromitteer en ook die **CodeBuild IAM role credentials** kompromitteer.

Let wel dat selfs al daar geen **`buildspec.yml`** lêer is nie, as jy weet Codebuild gebruik word (of 'n ander CI/CD), kan die **modifiseer sekere legitieme kode** wat uitgevoer gaan word byvoorbeeld ook 'n reverse shell vir jou kry.

Vir verwante inligting kan jy die blad oor hoe om Github Actions aan te val raadpleeg (vergelykbaar hiermee):

{{#ref}}
../../../../pentesting-ci-cd/github-security/abusing-github-actions/
{{#endref}}

## Self-hosted GitHub Actions runners in AWS CodeBuild <a href="#action-runner" id="action-runner"></a>

As [**indicated in the docs**](https://docs.aws.amazon.com/codebuild/latest/userguide/action-runner.html), It's possible to configure **CodeBuild** to run **self-hosted Github actions** when a workflow is triggered inside a Github repo configured. This can be detected checking the CodeBuild project configuration because the **`Event type`** needs to contain: **`WORKFLOW_JOB_QUEUED`** and in a Github Workflow because it will select a **self-hosted** runner like this:
```bash
runs-on: codebuild-<project-name>-${{ github.run_id }}-${{ github.run_attempt }}
```
Hierdie nuwe verhouding tussen Github Actions en AWS skep nog 'n manier om AWS vanaf Github te compromise, aangesien die code in Github in 'n CodeBuild project met 'n IAM role aangeheg sal loop.

{{#include ../../../../banners/hacktricks-training.md}}
