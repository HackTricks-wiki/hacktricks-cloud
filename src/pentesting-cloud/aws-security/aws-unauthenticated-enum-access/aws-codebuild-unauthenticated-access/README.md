# AWS - CodeBuild अनधिकृत एक्सेस

{{#include ../../../../banners/hacktricks-training.md}}

## CodeBuild

अधिक जानकारी के लिए इस पृष्ठ को देखें:

{{#ref}}
../../aws-services/aws-codebuild-enum.md
{{#endref}}

### buildspec.yml

यदि आप किसी रिपॉजिटरी पर write access हासिल कर लेते हैं जिसमें **`buildspec.yml`** नाम की फ़ाइल मौजूद है, तो आप इस फ़ाइल में **backdoor** डाल सकते हैं, जो कि CodeBuild प्रोजेक्ट के अंदर निष्पादित होने वाले **commands** को निर्दिष्ट करती है, और इससे secrets को exfiltrate किया जा सकता है, जो कुछ किया जा रहा है उसे compromise किया जा सकता है और साथ ही **CodeBuild IAM role credentials** भी compromise हो सकते हैं।

ध्यान दें कि भले ही कोई **`buildspec.yml`** फ़ाइल न हो लेकिन आप जानते हों कि Codebuild इस्तेमाल हो रहा है (या कोई अलग CI/CD), तो निष्पादित होने वाले कुछ **modifying some legit code** से भी, उदाहरण के लिए, आपको एक reverse shell मिल सकती है।

For some related information you could check the page about how to attack Github Actions (similar to this):

{{#ref}}
../../../../pentesting-ci-cd/github-security/abusing-github-actions/
{{#endref}}

## Self-hosted GitHub Actions runners in AWS CodeBuild <a href="#action-runner" id="action-runner"></a>

As [**indicated in the docs**](https://docs.aws.amazon.com/codebuild/latest/userguide/action-runner.html), यह संभव है कि आप **CodeBuild** को configure करें ताकि वह तब **self-hosted Github actions** चलाए जब किसी configured Github repo के भीतर workflow trigger हो। इसे CodeBuild project configuration की जाँच करके पहचाना जा सकता है क्योंकि **`Event type`** में **`WORKFLOW_JOB_QUEUED`** शामिल होना चाहिए और Github Workflow में यह एक **self-hosted** runner चुन लेगा, जैसे कि:
```bash
runs-on: codebuild-<project-name>-${{ github.run_id }}-${{ github.run_attempt }}
```
Github Actions और AWS के बीच यह नया संबंध Github से AWS को compromise करने का एक और तरीका बनाता है, क्योंकि Github में कोड एक CodeBuild प्रोजेक्ट में चलेगा जिस पर एक IAM role जुड़ा होगा।

{{#include ../../../../banners/hacktricks-training.md}}
