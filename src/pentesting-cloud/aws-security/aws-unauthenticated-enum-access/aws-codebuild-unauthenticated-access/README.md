# AWS - CodeBuild Kimliği doğrulanmamış Erişim

{{#include ../../../../banners/hacktricks-training.md}}

## CodeBuild

Daha fazla bilgi için şu sayfaya bakın:

{{#ref}}
../../aws-services/aws-codebuild-enum.md
{{#endref}}

### buildspec.yml

Eğer içinde **`buildspec.yml`** adlı bir dosya bulunan bir repository üzerinde yazma erişimini ele geçirirseniz, bu dosyaya **backdoor** yerleştirebilirsiniz; bu dosya bir CodeBuild projesi içinde çalıştırılacak **komutları** belirtir ve secrets'ları exfiltrate ederek yapılanları bozabilir ve ayrıca **CodeBuild IAM role credentials**'ı da ele geçirebilir.

Bir **`buildspec.yml`** dosyası olmasa bile, Codebuild'in (veya farklı bir CI/CD'nin) kullanıldığını biliyorsanız, çalıştırılacak bazı meşru kodları değiştirmeniz örneğin size bir reverse shell sağlayabilir.

Bazı ilgili bilgiler için, Github Actions'a nasıl saldırılacağıyla ilgili sayfaya bakabilirsiniz (buna benzer):

{{#ref}}
../../../../pentesting-ci-cd/github-security/abusing-github-actions/
{{#endref}}

## Self-hosted GitHub Actions runners in AWS CodeBuild <a href="#action-runner" id="action-runner"></a>

As [**indicated in the docs**](https://docs.aws.amazon.com/codebuild/latest/userguide/action-runner.html), It's possible to configure **CodeBuild** to run **self-hosted Github actions** when a workflow is triggered inside a Github repo configured. This can be detected checking the CodeBuild project configuration because the **`Event type`** needs to contain: **`WORKFLOW_JOB_QUEUED`** and in a Github Workflow because it will select a **self-hosted** runner like this:
```bash
runs-on: codebuild-<project-name>-${{ github.run_id }}-${{ github.run_attempt }}
```
Github Actions ile AWS arasındaki bu yeni ilişki, Github'taki kodun IAM role atanmış bir CodeBuild projesinde çalışacak olması nedeniyle Github üzerinden AWS'yi ele geçirmenin başka bir yolunu oluşturuyor.

{{#include ../../../../banners/hacktricks-training.md}}
