# AWS - ECR अनधिकृत ENUM

{{#include ../../../banners/hacktricks-training.md}}

## ECR

अधिक जानकारी के लिए देखें:

{{#ref}}
../aws-services/aws-ecr-enum.md
{{#endref}}

### सार्वजनिक रजिस्ट्री रिपॉजिटरी (छवियाँ)

जैसा कि ECS Enum अनुभाग में उल्लेख किया गया है, एक सार्वजनिक रजिस्ट्री **किसी भी व्यक्ति द्वारा पहुँच योग्य** है जो प्रारूप **`public.ecr.aws/<random>/<name>`** का उपयोग करती है। यदि एक हमलावर द्वारा एक सार्वजनिक रिपॉजिटरी URL पाया जाता है, तो वह **छवि को डाउनलोड कर सकता है और छवि के मेटाडेटा और सामग्री में संवेदनशील जानकारी की खोज कर सकता है।**
```bash
aws ecr describe-repositories --query 'repositories[?repositoryUriPublic == `true`].repositoryName' --output text
```
> [!WARNING]
> यह भी **निजी रजिस्ट्रियों** में हो सकता है जहाँ एक रजिस्ट्र्री नीति या एक रिपॉजिटरी नीति **उदाहरण के लिए `"AWS": "*"`** के लिए पहुँच प्रदान कर रही है। कोई भी जिसके पास AWS खाता है, उस रिपॉजिटरी तक पहुँच सकता है।

### निजी रिपॉजिटरी की सूची बनाना

उपकरण [**skopeo**](https://github.com/containers/skopeo) और [**crane**](https://github.com/google/go-containerregistry/blob/main/cmd/crane/doc/crane.md) का उपयोग एक निजी रजिस्ट्र्री के अंदर पहुँच योग्य रिपॉजिटरी की सूची बनाने के लिए किया जा सकता है।
```bash
# Get image names
skopeo list-tags docker://<PRIVATE_REGISTRY_URL> | grep -oP '(?<=^Name: ).+'
crane ls <PRIVATE_REGISTRY_URL> | sed 's/ .*//'
```
{{#include ../../../banners/hacktricks-training.md}}
