# AWS - ECR Unauthenticated Enum

{{#include ../../../banners/hacktricks-training.md}}

## ECR

Per ulteriori informazioni controlla:

{{#ref}}
../aws-services/aws-ecr-enum.md
{{#endref}}

### Repository di registri pubblici (immagini)

Come menzionato nella sezione ECS Enum, un registro pubblico Ã¨ **accessibile da chiunque** utilizza il formato **`public.ecr.aws/<random>/<name>`**. Se un URL di repository pubblico viene individuato da un attaccante, potrebbe **scaricare l'immagine e cercare informazioni sensibili** nei metadati e nel contenuto dell'immagine.
```bash
aws ecr describe-repositories --query 'repositories[?repositoryUriPublic == `true`].repositoryName' --output text
```
> [!WARNING]
> Questo potrebbe accadere anche in **registri privati** dove una policy del registro o una policy del repository sta **concedendo accesso ad esempio a `"AWS": "*"`**. Chiunque abbia un account AWS potrebbe accedere a quel repository.

### Enumerare Repo Privati

Gli strumenti [**skopeo**](https://github.com/containers/skopeo) e [**crane**](https://github.com/google/go-containerregistry/blob/main/cmd/crane/doc/crane.md) possono essere utilizzati per elencare i repository accessibili all'interno di un registro privato.
```bash
# Get image names
skopeo list-tags docker://<PRIVATE_REGISTRY_URL> | grep -oP '(?<=^Name: ).+'
crane ls <PRIVATE_REGISTRY_URL> | sed 's/ .*//'
```
{{#include ../../../banners/hacktricks-training.md}}
