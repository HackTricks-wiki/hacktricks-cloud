# AWS - ECR Unauthenticated Enum

{{#include ../../../banners/hacktricks-training.md}}

## ECR

Για περισσότερες πληροφορίες, ελέγξτε:

{{#ref}}
../aws-services/aws-ecr-enum.md
{{#endref}}

### Δημόσιες αποθήκες μητρώου (εικόνες)

Όπως αναφέρθηκε στην ενότητα ECS Enum, ένα δημόσιο μητρώο είναι **προσβάσιμο από οποιονδήποτε** και χρησιμοποιεί τη μορφή **`public.ecr.aws/<random>/<name>`**. Εάν ένας επιτιθέμενος εντοπίσει μια διεύθυνση URL δημόσιας αποθήκης, θα μπορούσε **να κατεβάσει την εικόνα και να αναζητήσει ευαίσθητες πληροφορίες** στα μεταδεδομένα και το περιεχόμενο της εικόνας.
```bash
aws ecr describe-repositories --query 'repositories[?repositoryUriPublic == `true`].repositoryName' --output text
```
> [!WARNING]
> Αυτό θα μπορούσε επίσης να συμβεί σε **ιδιωτικά μητρώα** όπου μια πολιτική μητρώου ή μια πολιτική αποθετηρίου **παρέχει πρόσβαση για παράδειγμα σε `"AWS": "*"`**. Οποιοσδήποτε με έναν λογαριασμό AWS θα μπορούσε να έχει πρόσβαση σε αυτό το αποθετήριο.

### Καταμέτρηση Ιδιωτικού Αποθετηρίου

Τα εργαλεία [**skopeo**](https://github.com/containers/skopeo) και [**crane**](https://github.com/google/go-containerregistry/blob/main/cmd/crane/doc/crane.md) μπορούν να χρησιμοποιηθούν για να καταγράψουν τα προσβάσιμα αποθετήρια μέσα σε ένα ιδιωτικό μητρώο.
```bash
# Get image names
skopeo list-tags docker://<PRIVATE_REGISTRY_URL> | grep -oP '(?<=^Name: ).+'
crane ls <PRIVATE_REGISTRY_URL> | sed 's/ .*//'
```
{{#include ../../../banners/hacktricks-training.md}}
