# AWS - ECR Kimlik Doğrulamasız Enum

{{#include ../../../banners/hacktricks-training.md}}

## ECR

Daha fazla bilgi için kontrol edin:

{{#ref}}
../aws-services/aws-ecr-enum.md
{{#endref}}

### Kamu kayıt defteri depoları (görüntüler)

ECS Enum bölümünde belirtildiği gibi, bir kamu kayıt defteri **herkes tarafından erişilebilir** ve **`public.ecr.aws/<random>/<name>`** formatını kullanır. Bir saldırgan bir kamu deposu URL'sini bulursa, **görüntüyü indirebilir ve meta verilerde ve görüntünün içeriğinde hassas bilgileri arayabilir.**
```bash
aws ecr describe-repositories --query 'repositories[?repositoryUriPublic == `true`].repositoryName' --output text
```
> [!WARNING]
> Bu, **özel kayıt defterlerinde** de gerçekleşebilir; burada bir kayıt defteri politikası veya bir depo politikası **örneğin `"AWS": "*"`** erişim izni veriyor olabilir. Bir AWS hesabına sahip olan herkes o depoya erişebilir.

### Özel Depoyu Listele

[**skopeo**](https://github.com/containers/skopeo) ve [**crane**](https://github.com/google/go-containerregistry/blob/main/cmd/crane/doc/crane.md) araçları, özel bir kayıt defteri içindeki erişilebilir depoları listelemek için kullanılabilir.
```bash
# Get image names
skopeo list-tags docker://<PRIVATE_REGISTRY_URL> | grep -oP '(?<=^Name: ).+'
crane ls <PRIVATE_REGISTRY_URL> | sed 's/ .*//'
```
{{#include ../../../banners/hacktricks-training.md}}
