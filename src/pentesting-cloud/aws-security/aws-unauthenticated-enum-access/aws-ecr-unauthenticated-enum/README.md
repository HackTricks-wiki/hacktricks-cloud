# AWS - ECR Unauthenticated Enum

{{#include ../../../../banners/hacktricks-training.md}}

## ECR

For more information check:

{{#ref}}
../../aws-services/aws-ecr-enum.md
{{#endref}}

### सार्वजनिक रजिस्ट्री रिपॉजिटरीज़ (images)

जैसा कि ECS Enum सेक्शन में उल्लेख किया गया है, एक public registry **किसी भी व्यक्ति के लिए उपलब्ध** है और इसका फॉर्मैट **`public.ecr.aws/<random>/<name>`** होता है। यदि कोई attacker किसी public repository URL का पता लगा लेता है, तो वह image **डाउनलोड कर सकता है और image के मेटाडेटा और कंटेंट में संवेदनशील जानकारी खोज सकता है**।
```bash
aws ecr describe-repositories --query 'repositories[?repositoryUriPublic == `true`].repositoryName' --output text
```
> [!WARNING]
> यह स्थिति **private registries** में भी हो सकती है जहाँ एक registry policy या एक repository policy **उदाहरण के लिए `"AWS": "*"` को access दे रही हो**। जिसके पास AWS account है वह उस repo तक पहुँच सकता है।

### निजी Repo सूचीबद्ध करें

टूल [**skopeo**](https://github.com/containers/skopeo) और [**crane**](https://github.com/google/go-containerregistry/blob/main/cmd/crane/doc/crane.md) का उपयोग private registry के अंदर पहुँच योग्य repositories को सूचीबद्ध करने के लिए किया जा सकता है।
```bash
# Get image names
skopeo list-tags docker://<PRIVATE_REGISTRY_URL> | grep -oP '(?<=^Name: ).+'
crane ls <PRIVATE_REGISTRY_URL> | sed 's/ .*//'
```
{{#include ../../../../banners/hacktricks-training.md}}
