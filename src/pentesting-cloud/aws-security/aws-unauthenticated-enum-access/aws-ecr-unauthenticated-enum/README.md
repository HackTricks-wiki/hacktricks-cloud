# AWS - ECR Unauthenticated Enum

{{#include ../../../../banners/hacktricks-training.md}}

## ECR

Για περισσότερες πληροφορίες δείτε:

{{#ref}}
../../aws-services/aws-ecr-enum.md
{{#endref}}

### Δημόσια registry αποθετήρια (εικόνες)

Όπως αναφέρθηκε στην ενότητα ECS Enum, ένα δημόσιο registry είναι **προσβάσιμο από οποιονδήποτε** και χρησιμοποιεί τη μορφή **`public.ecr.aws/<random>/<name>`**. Εάν ένας επιτιθέμενος εντοπίσει ένα δημόσιο URL repository, μπορεί να **κατεβάσει την εικόνα και να αναζητήσει ευαίσθητες πληροφορίες** στα metadata και στο περιεχόμενο της εικόνας.
```bash
aws ecr describe-repositories --query 'repositories[?repositoryUriPublic == `true`].repositoryName' --output text
```
> [!WARNING]
> Αυτό μπορεί επίσης να συμβεί σε **private registries** όπου μια registry policy ή μια repository policy **χορηγεί πρόσβαση, για παράδειγμα στο `"AWS": "*"`**. Οποιοσδήποτε με λογαριασμό AWS θα μπορούσε να έχει πρόσβαση σε αυτό το repo.

### Απαρίθμηση Private Repo

Τα εργαλεία [**skopeo**](https://github.com/containers/skopeo) και [**crane**](https://github.com/google/go-containerregistry/blob/main/cmd/crane/doc/crane.md) μπορούν να χρησιμοποιηθούν για να απαριθμήσουν τα repositories που είναι προσβάσιμα μέσα σε ένα private registry.
```bash
# Get image names
skopeo list-tags docker://<PRIVATE_REGISTRY_URL> | grep -oP '(?<=^Name: ).+'
crane ls <PRIVATE_REGISTRY_URL> | sed 's/ .*//'
```
{{#include ../../../../banners/hacktricks-training.md}}
