# AWS - 证书管理器 (ACM) & 私有证书授权 (PCA)

{{#include ../../../banners/hacktricks-training.md}}

## 基本信息

**AWS 证书管理器 (ACM)** 是一项旨在简化 **SSL/TLS 证书的提供、管理和部署** 的服务，适用于 AWS 服务和内部资源。ACM **消除了** 手动流程的必要性，例如购买、上传和证书续订。这使得用户能够高效地请求和实施证书在各种 AWS 资源上，包括 **弹性负载均衡器、Amazon CloudFront 分发和 API 网关上的 API**。

ACM 的一个关键特性是 **证书的自动续订**，显著减少了管理开销。此外，ACM 支持创建和集中管理 **用于内部使用的私有证书**。尽管通过 ACM 提供的集成 AWS 服务（如弹性负载均衡、Amazon CloudFront 和 Amazon API 网关）的 SSL/TLS 证书没有额外费用，但用户需负责其应用程序所使用的 AWS 资源相关费用，以及每个 **私有证书授权 (CA)** 和在集成 ACM 服务之外使用的私有证书的月费。

**AWS 私有证书授权** 作为 **托管私有 CA 服务** 提供，增强了 ACM 的功能，将证书管理扩展到包括私有证书。这些私有证书在组织内部资源的身份验证中发挥着重要作用。

## 枚举

### ACM
```bash
# List certificates
aws acm list-certificates

# Get certificate info
aws acm describe-certificate --certificate-arn <arn> # Check "InUseBy" to check which resources are using it

# Get certificate data
aws acm get-certificate --certificate-arn "arn:aws:acm:us-east-1:188868097724:certificate/865abced-82c9-43bf-b7d2-1f4948bf353d"

# Account configuration
aws acm get-account-configuration
```
### PCM
```bash
# List CAs
aws acm-pca list-certificate-authorities

# Get CA info
aws acm-pca describe-certificate-authority --certificate-authority-arn <arn>

# Get CA Permissions
aws acm-pca list-permissions --certificate-authority-arn <arn>

# Get CA certificate
aws acm-pca get-certificate-authority-certificate --certificate-authority-arn <arn>

# Certificate request
aws acm-pca get-certificate-authority-csr --certificate-authority-arn <arn>

# Get CA Policy (if any)
aws acm-pca get-policy --resource-arn <arn>
```
## 提权

TODO

## 后期利用

TODO

{{#include ../../../banners/hacktricks-training.md}}
