# AWS - Certificate Manager (ACM) & Private Certificate Authority (PCA)

{{#include ../../../banners/hacktricks-training.md}}

## Información Básica

**AWS Certificate Manager (ACM)** se ofrece como un servicio destinado a simplificar la **provisión, gestión y despliegue de certificados SSL/TLS** para servicios de AWS y recursos internos. La necesidad de procesos manuales, como la compra, carga y renovaciones de certificados, es **eliminada** por ACM. Esto permite a los usuarios solicitar e implementar certificados de manera eficiente en varios recursos de AWS, incluyendo **Elastic Load Balancers, distribuciones de Amazon CloudFront y APIs en API Gateway**.

Una característica clave de ACM es la **renovación automática de certificados**, lo que reduce significativamente la carga de gestión. Además, ACM admite la creación y gestión centralizada de **certificados privados para uso interno**. Aunque los certificados SSL/TLS para servicios integrados de AWS como Elastic Load Balancing, Amazon CloudFront y Amazon API Gateway se proporcionan sin costo adicional a través de ACM, los usuarios son responsables de los costos asociados con los recursos de AWS utilizados por sus aplicaciones y una tarifa mensual por cada **Autoridad de Certificación (CA) privada** y certificados privados utilizados fuera de los servicios integrados de ACM.

**AWS Private Certificate Authority** se ofrece como un **servicio de CA privada gestionada**, mejorando las capacidades de ACM al extender la gestión de certificados para incluir certificados privados. Estos certificados privados son fundamentales para autenticar recursos dentro de una organización.

## Enumeración

### ACM
```bash
# List certificates
aws acm list-certificates

# Get certificate info
aws acm describe-certificate --certificate-arn <arn> # Check "InUseBy" to check which resources are using it

# Get certificate data
aws acm get-certificate --certificate-arn "arn:aws:acm:us-east-1:188868097724:certificate/865abced-82c9-43bf-b7d2-1f4948bf353d"

# Account configuration
aws acm get-account-configuration
```
### PCA
```bash
# List CAs
aws acm-pca list-certificate-authorities

# Get CA info
aws acm-pca describe-certificate-authority --certificate-authority-arn <arn>

# Get CA Permissions
aws acm-pca list-permissions --certificate-authority-arn <arn>

# Get CA certificate
aws acm-pca get-certificate-authority-certificate --certificate-authority-arn <arn>

# Certificate request
aws acm-pca get-certificate-authority-csr --certificate-authority-arn <arn>

# Get CA Policy (if any)
aws acm-pca get-policy --resource-arn <arn>
```
## Privesc

TODO

## Post Exploitation

TODO

{{#include ../../../banners/hacktricks-training.md}}
