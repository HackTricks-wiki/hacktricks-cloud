# AWS - Certificate Manager (ACM) & Private Certificate Authority (PCA)

{{#include ../../../banners/hacktricks-training.md}}

## Grundlegende Informationen

**AWS Certificate Manager (ACM)** wird als Dienst bereitgestellt, der darauf abzielt, die **Bereitstellung, Verwaltung und Implementierung von SSL/TLS-Zertifikaten** für AWS-Dienste und interne Ressourcen zu optimieren. Die Notwendigkeit manueller Prozesse, wie den Kauf, das Hochladen und die Erneuerung von Zertifikaten, wird durch ACM **elimininiert**. Dies ermöglicht es den Benutzern, Zertifikate effizient für verschiedene AWS-Ressourcen anzufordern und zu implementieren, einschließlich **Elastic Load Balancers, Amazon CloudFront-Distributionen und APIs auf API Gateway**.

Ein Hauptmerkmal von ACM ist die **automatische Erneuerung von Zertifikaten**, die den Verwaltungsaufwand erheblich reduziert. Darüber hinaus unterstützt ACM die Erstellung und zentrale Verwaltung von **privaten Zertifikaten für den internen Gebrauch**. Obwohl SSL/TLS-Zertifikate für integrierte AWS-Dienste wie Elastic Load Balancing, Amazon CloudFront und Amazon API Gateway ohne zusätzliche Kosten über ACM bereitgestellt werden, sind die Benutzer für die Kosten verantwortlich, die mit den AWS-Ressourcen verbunden sind, die von ihren Anwendungen genutzt werden, sowie für eine monatliche Gebühr für jede **private Certificate Authority (CA)** und private Zertifikate, die außerhalb integrierter ACM-Dienste verwendet werden.

**AWS Private Certificate Authority** wird als **verwalteter privater CA-Dienst** angeboten, der die Fähigkeiten von ACM erweitert, indem er die Zertifikatsverwaltung um private Zertifikate ergänzt. Diese privaten Zertifikate sind entscheidend für die Authentifizierung von Ressourcen innerhalb einer Organisation.

## Enumeration

### ACM
```bash
# List certificates
aws acm list-certificates

# Get certificate info
aws acm describe-certificate --certificate-arn <arn> # Check "InUseBy" to check which resources are using it

# Get certificate data
aws acm get-certificate --certificate-arn "arn:aws:acm:us-east-1:188868097724:certificate/865abced-82c9-43bf-b7d2-1f4948bf353d"

# Account configuration
aws acm get-account-configuration
```
### PCM
```bash
# List CAs
aws acm-pca list-certificate-authorities

# Get CA info
aws acm-pca describe-certificate-authority --certificate-authority-arn <arn>

# Get CA Permissions
aws acm-pca list-permissions --certificate-authority-arn <arn>

# Get CA certificate
aws acm-pca get-certificate-authority-certificate --certificate-authority-arn <arn>

# Certificate request
aws acm-pca get-certificate-authority-csr --certificate-authority-arn <arn>

# Get CA Policy (if any)
aws acm-pca get-policy --resource-arn <arn>
```
## Privesc

TODO

## Post Exploitation

TODO

{{#include ../../../banners/hacktricks-training.md}}
