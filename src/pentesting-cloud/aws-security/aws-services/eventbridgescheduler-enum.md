# AWS - EventBridge Scheduler Enum

## EventBridge Scheduler

{{#include ../../../banners/hacktricks-training.md}}

## EventBridge Scheduler

**Amazon EventBridge Scheduler** to w pełni zarządzany, **bezserwerowy harmonogram zaprojektowany do tworzenia, uruchamiania i zarządzania zadaniami** na dużą skalę. Umożliwia planowanie milionów zadań w ponad 270 usługach AWS i 6,000+ operacjach API, wszystko z jednego centralnego serwisu. Dzięki wbudowanej niezawodności i braku infrastruktury do zarządzania, EventBridge Scheduler upraszcza harmonogramowanie, obniża koszty utrzymania i automatycznie skaluje się w odpowiedzi na zapotrzebowanie. Możesz konfigurować wyrażenia cron lub rate dla harmonogramów cyklicznych, ustawiać jednorazowe wywołania oraz definiować elastyczne okna dostawy z opcjami ponownego próbowania, zapewniając niezawodne dostarczanie zadań w oparciu o dostępność celów downstream.

Początkowy limit wynosi 1,000,000 harmonogramów na region na konto. Nawet oficjalna strona limitów sugeruje: "Zaleca się usunięcie jednorazowych harmonogramów po ich zakończeniu."&#x20;

### Typy Harmonogramów

Typy Harmonogramów w EventBridge Scheduler:

1. **Jednorazowe harmonogramy** – Wykonaj zadanie w określonym czasie, np. 21 grudnia o 7:00 UTC.
2. **Harmonogramy oparte na częstotliwości** – Ustaw cykliczne zadania na podstawie częstotliwości, np. co 2 godziny.
3. **Harmonogramy oparte na cron** – Ustaw cykliczne zadania za pomocą wyrażenia cron, np. w każdy piątek o 16:00.

Dwa mechanizmy obsługi nieudanych zdarzeń:

1. **Polityka ponownego próbowania** – Definiuje liczbę prób ponownego wykonania dla nieudanego zdarzenia oraz jak długo pozostawić je nieprzetworzone przed uznaniem za niepowodzenie.
2. **Kolejka martwych listów (DLQ)** – Standardowa kolejka Amazon SQS, do której dostarczane są nieudane zdarzenia po wyczerpaniu prób ponownego wykonania. DLQ pomagają w rozwiązywaniu problemów z harmonogramem lub jego celem downstream.

### Cele

Istnieją 2 typy celów dla harmonogramu [**szablonowe (docs)**](https://docs.aws.amazon.com/scheduler/latest/UserGuide/managing-targets-templated.html), które są powszechnie używane i AWS ułatwiło ich konfigurację, oraz [**uniwersalne (docs)**](https://docs.aws.amazon.com/scheduler/latest/UserGuide/managing-targets-universal.html), które mogą być używane do wywoływania dowolnego API AWS.

**Cele szablonowe** obsługują następujące usługi:

- CodeBuild – StartBuild
- CodePipeline – StartPipelineExecution
- Amazon ECS – RunTask
- Parametry: EcsParameters
- EventBridge – PutEvents
- Parametry: EventBridgeParameters
- Amazon Inspector – StartAssessmentRun
- Kinesis – PutRecord
- Parametry: KinesisParameters
- Firehose – PutRecord
- Lambda – Invoke
- SageMaker – StartPipelineExecution
- Parametry: SageMakerPipelineParameters
- Amazon SNS – Publish
- Amazon SQS – SendMessage
- Parametry: SqsParameters
- Step Functions – StartExecution

### Enumeracja
```bash
# List all EventBridge Scheduler schedules
aws scheduler list-schedules

# List all EventBridge Scheduler schedule groups
aws scheduler list-schedule-groups

# Describe a specific schedule to retrieve more details
aws scheduler get-schedule --name <schedule_name>

# Describe a specific schedule group
aws scheduler get-schedule-group --name <group_name>

# List tags for a specific schedule (helpful in identifying any custom tags or permissions)
aws scheduler list-tags-for-resource --resource-arn <schedule_group_arn>
```
### Privesc

Na poniższej stronie możesz sprawdzić, jak **nadużyć uprawnień eventbridge scheduler, aby eskalować uprawnienia**:

{{#ref}}
../aws-privilege-escalation/eventbridgescheduler-privesc.md
{{#endref}}

## References

- [https://docs.aws.amazon.com/scheduler/latest/UserGuide/what-is-scheduler.html](https://docs.aws.amazon.com/scheduler/latest/UserGuide/what-is-scheduler.html)

{{#include ../../../banners/hacktricks-training.md}}
