# AWS - EventBridge Scheduler Enum

{{#include ../../../banners/hacktricks-training.md}}

## EventBridge Scheduler

**Amazon EventBridge Scheduler** είναι ένας πλήρως διαχειριζόμενος, **serverless προγραμματιστής σχεδιασμένος για να δημιουργεί, να εκτελεί και να διαχειρίζεται εργασίες** σε κλίμακα. Σας επιτρέπει να προγραμματίσετε εκατομμύρια εργασίες σε πάνω από 270 υπηρεσίες AWS και 6,000+ API λειτουργίες, όλα από μια κεντρική υπηρεσία. Με ενσωματωμένη αξιοπιστία και χωρίς υποδομή προς διαχείριση, ο EventBridge Scheduler απλοποιεί τον προγραμματισμό, μειώνει τα κόστη συντήρησης και κλιμακώνεται αυτόματα για να καλύψει τη ζήτηση. Μπορείτε να ρυθμίσετε cron ή εκφράσεις ρυθμού για επαναλαμβανόμενα προγράμματα, να ορίσετε μοναδικές κλήσεις και να καθορίσετε ευέλικτα παράθυρα παράδοσης με επιλογές επανάληψης, διασφαλίζοντας ότι οι εργασίες παραδίδονται αξιόπιστα με βάση τη διαθεσιμότητα των κατώτερων στόχων.

Υπάρχει ένα αρχικό όριο 1,000,000 προγραμμάτων ανά περιοχή ανά λογαριασμό. Ακόμη και η επίσημη σελίδα ποσοστώσεων προτείνει, "Συνιστάται να διαγράφετε τις μοναδικές προγραμματισμένες εργασίες μόλις ολοκληρωθούν."

### Types of Schedules

Τύποι Προγραμμάτων στον EventBridge Scheduler:

1. **One-time schedules** – Εκτελεί μια εργασία σε συγκεκριμένη ώρα, π.χ., 21 Δεκεμβρίου στις 7 π.μ. UTC.
2. **Rate-based schedules** – Ορίζει επαναλαμβανόμενες εργασίες με βάση μια συχνότητα, π.χ., κάθε 2 ώρες.
3. **Cron-based schedules** – Ορίζει επαναλαμβανόμενες εργασίες χρησιμοποιώντας μια έκφραση cron, π.χ., κάθε Παρασκευή στις 4 μ.μ.

Δύο Μηχανισμοί για την Αντιμετώπιση Αποτυχημένων Συμβάντων:

1. **Retry Policy** – Ορίζει τον αριθμό των προσπαθειών επανάληψης για ένα αποτυχημένο συμβάν και πόσο καιρό να παραμείνει μη επεξεργασμένο πριν θεωρηθεί αποτυχία.
2. **Dead-Letter Queue (DLQ)** – Μια τυπική ουρά Amazon SQS όπου παραδίδονται τα αποτυχημένα συμβάντα αφού εξαντληθούν οι επαναλήψεις. Οι DLQs βοηθούν στην επίλυση προβλημάτων με το πρόγραμμα ή τον κατώτερο στόχο του.

### Targets

Υπάρχουν 2 τύποι στόχων για έναν προγραμματιστή [**templated (docs)**](https://docs.aws.amazon.com/scheduler/latest/UserGuide/managing-targets-templated.html), οι οποίοι χρησιμοποιούνται συνήθως και η AWS τους έκανε πιο εύκολους στη ρύθμιση, και [**universal (docs)**](https://docs.aws.amazon.com/scheduler/latest/UserGuide/managing-targets-universal.html), οι οποίοι μπορούν να χρησιμοποιηθούν για να καλέσουν οποιοδήποτε AWS API.

**Templated targets** υποστηρίζουν τις εξής υπηρεσίες:

- CodeBuild – StartBuild
- CodePipeline – StartPipelineExecution
- Amazon ECS – RunTask
- Parameters: EcsParameters
- EventBridge – PutEvents
- Parameters: EventBridgeParameters
- Amazon Inspector – StartAssessmentRun
- Kinesis – PutRecord
- Parameters: KinesisParameters
- Firehose – PutRecord
- Lambda – Invoke
- SageMaker – StartPipelineExecution
- Parameters: SageMakerPipelineParameters
- Amazon SNS – Publish
- Amazon SQS – SendMessage
- Parameters: SqsParameters
- Step Functions – StartExecution

### Enumeration
```bash
# List all EventBridge Scheduler schedules
aws scheduler list-schedules

# List all EventBridge Scheduler schedule groups
aws scheduler list-schedule-groups

# Describe a specific schedule to retrieve more details
aws scheduler get-schedule --name <schedule_name>

# Describe a specific schedule group
aws scheduler get-schedule-group --name <group_name>

# List tags for a specific schedule (helpful in identifying any custom tags or permissions)
aws scheduler list-tags-for-resource --resource-arn <schedule_group_arn>
```
### Privesc

Στην παρακάτω σελίδα, μπορείτε να δείτε πώς να **καταχραστείτε τις άδειες του eventbridge scheduler για να κλιμακώσετε τα προνόμια**:

{{#ref}}
../aws-privilege-escalation/eventbridgescheduler-privesc.md
{{#endref}}

## References

- [https://docs.aws.amazon.com/scheduler/latest/UserGuide/what-is-scheduler.html](https://docs.aws.amazon.com/scheduler/latest/UserGuide/what-is-scheduler.html)

{{#include ../../../banners/hacktricks-training.md}}
