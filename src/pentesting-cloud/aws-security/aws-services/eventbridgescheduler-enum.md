# AWS - EventBridge Scheduler Enum

## EventBridge Scheduler

{{#include ../../../banners/hacktricks-training.md}}

## EventBridge Scheduler

**Amazon EventBridge Scheduler**는 **작업을 대규모로 생성, 실행 및 관리하기 위해 설계된 완전 관리형 서버리스 스케줄러**입니다. 이를 통해 중앙 서비스에서 270개 이상의 AWS 서비스와 6,000개 이상의 API 작업에 걸쳐 수백만 개의 작업을 예약할 수 있습니다. 내장된 신뢰성과 관리할 인프라가 없기 때문에 EventBridge Scheduler는 스케줄링을 단순화하고 유지 관리 비용을 줄이며 수요에 맞게 자동으로 확장됩니다. 반복 스케줄에 대해 cron 또는 비율 표현식을 구성하고, 일회성 호출을 설정하며, 재시도 옵션이 있는 유연한 전달 창을 정의하여 작업이 하류 대상의 가용성에 따라 신뢰성 있게 전달되도록 보장할 수 있습니다.

지역당 계정당 초기 한도는 1,000,000개의 스케줄입니다. 공식 쿼터 페이지에서도 "완료된 일회성 스케줄은 삭제하는 것이 좋습니다."라고 제안합니다.&#x20;

### Types of Schedules

EventBridge Scheduler의 스케줄 유형:

1. **일회성 스케줄** – 특정 시간에 작업을 실행합니다. 예: 12월 21일 오전 7시 UTC.
2. **비율 기반 스케줄** – 빈도를 기준으로 반복 작업을 설정합니다. 예: 매 2시간마다.
3. **Cron 기반 스케줄** – cron 표현식을 사용하여 반복 작업을 설정합니다. 예: 매주 금요일 오후 4시.

실패한 이벤트를 처리하기 위한 두 가지 메커니즘:

1. **재시도 정책** – 실패한 이벤트에 대한 재시도 시도 횟수와 실패로 간주하기 전에 얼마나 오랫동안 처리되지 않은 상태로 유지할지를 정의합니다.
2. **데드 레터 큐 (DLQ)** – 재시도가 소진된 후 실패한 이벤트가 전달되는 표준 Amazon SQS 큐입니다. DLQ는 스케줄이나 하류 대상의 문제를 해결하는 데 도움이 됩니다.

### Targets

스케줄러에는 [**템플릿화된 (docs)**](https://docs.aws.amazon.com/scheduler/latest/UserGuide/managing-targets-templated.html) 및 [**유니버설 (docs)**](https://docs.aws.amazon.com/scheduler/latest/UserGuide/managing-targets-universal.html)이라는 2가지 유형의 대상이 있습니다. 템플릿화된 대상은 일반적으로 사용되며 AWS에서 구성하기 쉽게 만들었습니다.

**템플릿화된 대상**은 다음 서비스를 지원합니다:

- CodeBuild – StartBuild
- CodePipeline – StartPipelineExecution
- Amazon ECS – RunTask
- Parameters: EcsParameters
- EventBridge – PutEvents
- Parameters: EventBridgeParameters
- Amazon Inspector – StartAssessmentRun
- Kinesis – PutRecord
- Parameters: KinesisParameters
- Firehose – PutRecord
- Lambda – Invoke
- SageMaker – StartPipelineExecution
- Parameters: SageMakerPipelineParameters
- Amazon SNS – Publish
- Amazon SQS – SendMessage
- Parameters: SqsParameters
- Step Functions – StartExecution

### Enumeration
```bash
# List all EventBridge Scheduler schedules
aws scheduler list-schedules

# List all EventBridge Scheduler schedule groups
aws scheduler list-schedule-groups

# Describe a specific schedule to retrieve more details
aws scheduler get-schedule --name <schedule_name>

# Describe a specific schedule group
aws scheduler get-schedule-group --name <group_name>

# List tags for a specific schedule (helpful in identifying any custom tags or permissions)
aws scheduler list-tags-for-resource --resource-arn <schedule_group_arn>
```
### Privesc

다음 페이지에서 **이벤트브리지 스케줄러 권한을 악용하여 권한 상승**하는 방법을 확인할 수 있습니다:

{{#ref}}
../aws-privilege-escalation/eventbridgescheduler-privesc.md
{{#endref}}

## References

- [https://docs.aws.amazon.com/scheduler/latest/UserGuide/what-is-scheduler.html](https://docs.aws.amazon.com/scheduler/latest/UserGuide/what-is-scheduler.html)

{{#include ../../../banners/hacktricks-training.md}}
