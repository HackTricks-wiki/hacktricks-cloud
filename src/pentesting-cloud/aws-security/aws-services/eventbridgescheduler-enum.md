# AWS - EventBridge Scheduler Enum

## EventBridge Scheduler

{{#include ../../../banners/hacktricks-training.md}}

## EventBridge Scheduler

**Amazon EventBridge Scheduler** ist ein vollständig verwalteter, **serverloser Scheduler, der entwickelt wurde, um Aufgaben** in großem Maßstab zu erstellen, auszuführen und zu verwalten. Er ermöglicht es Ihnen, Millionen von Aufgaben über mehr als 270 AWS-Dienste und 6.000+ API-Operationen hinweg zu planen, alles von einem zentralen Dienst aus. Mit integrierter Zuverlässigkeit und ohne Infrastrukturverwaltung vereinfacht der EventBridge Scheduler die Planung, reduziert die Wartungskosten und skaliert automatisch, um der Nachfrage gerecht zu werden. Sie können Cron- oder Ratenausdrücke für wiederkehrende Zeitpläne konfigurieren, einmalige Aufrufe festlegen und flexible Lieferfenster mit Wiederholungsoptionen definieren, um sicherzustellen, dass Aufgaben zuverlässig basierend auf der Verfügbarkeit der nachgelagerten Ziele geliefert werden.

Es gibt ein anfängliches Limit von 1.000.000 Zeitplänen pro Region und Konto. Selbst die offizielle Quoten-Seite empfiehlt: "Es wird empfohlen, einmalige Zeitpläne zu löschen, sobald sie abgeschlossen sind."&#x20;

### Arten von Zeitplänen

Arten von Zeitplänen im EventBridge Scheduler:

1. **Einmalige Zeitpläne** – Führen Sie eine Aufgabe zu einem bestimmten Zeitpunkt aus, z. B. am 21. Dezember um 7 Uhr UTC.
2. **Ratenbasierte Zeitpläne** – Legen Sie wiederkehrende Aufgaben basierend auf einer Frequenz fest, z. B. alle 2 Stunden.
3. **Cron-basierte Zeitpläne** – Legen Sie wiederkehrende Aufgaben mit einem Cron-Ausdruck fest, z. B. jeden Freitag um 16 Uhr.

Zwei Mechanismen zur Handhabung fehlgeschlagener Ereignisse:

1. **Wiederholungsrichtlinie** – Definiert die Anzahl der Wiederholungsversuche für ein fehlgeschlagenes Ereignis und wie lange es unbearbeitet bleibt, bevor es als Fehler betrachtet wird.
2. **Dead-Letter Queue (DLQ)** – Eine Standard-Amazon SQS-Warteschlange, in der fehlgeschlagene Ereignisse nach Erschöpfung der Wiederholungen geliefert werden. DLQs helfen bei der Fehlersuche bei Problemen mit Ihrem Zeitplan oder dessen nachgelagertem Ziel.

### Ziele

Es gibt 2 Arten von Zielen für einen Scheduler [**vorlagenbasiert (docs)**](https://docs.aws.amazon.com/scheduler/latest/UserGuide/managing-targets-templated.html), die häufig verwendet werden und die AWS einfacher konfiguriert hat, und [**universell (docs)**](https://docs.aws.amazon.com/scheduler/latest/UserGuide/managing-targets-universal.html), die verwendet werden können, um jede AWS-API aufzurufen.

**Vorlagenbasierte Ziele** unterstützen die folgenden Dienste:

- CodeBuild – StartBuild
- CodePipeline – StartPipelineExecution
- Amazon ECS – RunTask
- Parameter: EcsParameters
- EventBridge – PutEvents
- Parameter: EventBridgeParameters
- Amazon Inspector – StartAssessmentRun
- Kinesis – PutRecord
- Parameter: KinesisParameters
- Firehose – PutRecord
- Lambda – Invoke
- SageMaker – StartPipelineExecution
- Parameter: SageMakerPipelineParameters
- Amazon SNS – Publish
- Amazon SQS – SendMessage
- Parameter: SqsParameters
- Step Functions – StartExecution

### Enumeration
```bash
# List all EventBridge Scheduler schedules
aws scheduler list-schedules

# List all EventBridge Scheduler schedule groups
aws scheduler list-schedule-groups

# Describe a specific schedule to retrieve more details
aws scheduler get-schedule --name <schedule_name>

# Describe a specific schedule group
aws scheduler get-schedule-group --name <group_name>

# List tags for a specific schedule (helpful in identifying any custom tags or permissions)
aws scheduler list-tags-for-resource --resource-arn <schedule_group_arn>
```
### Privesc

Auf der folgenden Seite können Sie überprüfen, wie Sie **Eventbridge-Scheduler-Berechtigungen missbrauchen, um Privilegien zu eskalieren**:

{{#ref}}
../aws-privilege-escalation/eventbridgescheduler-privesc.md
{{#endref}}

## References

- [https://docs.aws.amazon.com/scheduler/latest/UserGuide/what-is-scheduler.html](https://docs.aws.amazon.com/scheduler/latest/UserGuide/what-is-scheduler.html)

{{#include ../../../banners/hacktricks-training.md}}
