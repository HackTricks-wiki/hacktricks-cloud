# AWS - EMR Enum

{{#include ../../../banners/hacktricks-training.md}}

## EMR

Huduma ya Elastic MapReduce (EMR) ya AWS, kuanzia toleo la 4.8.0, ilianzisha kipengele cha **mipangilio ya usalama** ambacho kinaboresha ulinzi wa data kwa kuruhusu watumiaji kuweka mipangilio ya usimbaji fiche kwa data iliyohifadhiwa na inayosafirishwa ndani ya vikundi vya EMR, ambavyo ni vikundi vinavyoweza kupanuliwa vya EC2 ambavyo vimeundwa kushughulikia mifumo mikubwa ya data kama Apache Hadoop na Spark.

Sifa kuu ni pamoja na:

- **Kiwango cha Usimbaji Fiche wa Kundi**: Kwa kawaida, data iliyohifadhiwa ndani ya kundi haijatumika usimbaji fiche. Hata hivyo, kuwezesha usimbaji fiche kunatoa ufikiaji wa vipengele kadhaa:
- **Linux Unified Key Setup**: Inasimbisha kiasi cha EBS cha kundi. Watumiaji wanaweza kuchagua Huduma ya Usimamizi wa Funguo ya AWS (KMS) au mtoa funguo wa kawaida.
- **Usimbaji Fiche wa HDFS wa Chanzo Huria**: Inatoa chaguzi mbili za usimbaji fiche kwa Hadoop:
- Usimbaji fiche wa Hadoop RPC (Remote Procedure Call), uliowekwa kwa faragha, ukitumia Safu ya Usalama ya Uthibitishaji Rahisi.
- Usimbaji fiche wa uhamisho wa HDFS Block, uliowekwa kuwa kweli, unatumia algorithm ya AES-256.
- **Usimbaji Fiche Wakati wa Usafirishaji**: Unalenga kulinda data wakati wa uhamisho. Chaguzi ni pamoja na:
- **Usalama wa Usafirishaji wa Chanzo Huria (TLS)**: Usimbaji fiche unaweza kuwezeshwa kwa kuchagua mtoa cheti:
- **PEM**: Inahitaji uundaji wa mikono na kufungia vyeti vya PEM katika faili ya zip, inayorejelewa kutoka kwenye S3 bucket.
- **Kawaida**: Inahusisha kuongeza darasa la Java la kawaida kama mtoa cheti linalotoa vitu vya usimbaji fiche.

Mara tu mtoa cheti wa TLS anapounganishwa kwenye mipangilio ya usalama, vipengele vifuatavyo vya usimbaji fiche maalum ya programu vinaweza kuwezeshwa, vinavyotofautiana kulingana na toleo la EMR:

- **Hadoop**:
- Inaweza kupunguza kuchanganya kwa usimbaji fiche kwa kutumia TLS.
- Usimbaji fiche wa Hadoop RPC na Safu ya Usalama ya Uthibitishaji Rahisi na Uhamisho wa HDFS Block na AES-256 vinawezeshwa na usimbaji fiche wa data iliyohifadhiwa.
- **Presto** (EMR toleo 5.6.0+):
- Mawasiliano ya ndani kati ya nodi za Presto yameimarishwa kwa kutumia SSL na TLS.
- **Tez Shuffle Handler**:
- Inatumia TLS kwa usimbaji fiche.
- **Spark**:
- Inatumia TLS kwa itifaki ya Akka.
- Inatumia Safu ya Usalama ya Uthibitishaji Rahisi na 3DES kwa Huduma ya Uhamisho wa Block.
- Huduma ya kuchanganya ya nje imeimarishwa kwa Safu ya Usalama ya Uthibitishaji Rahisi.

Vipengele hivi kwa pamoja vinaboresha hali ya usalama ya vikundi vya EMR, hasa kuhusu ulinzi wa data wakati wa kuhifadhi na awamu za usafirishaji.

#### Enumeration
```bash
aws emr list-clusters
aws emr describe-cluster --cluster-id <id>
aws emr list-instances --cluster-id <id>
aws emr list-instance-fleets --cluster-id <id>
aws emr list-steps --cluster-id <id>
aws emr list-notebook-executions
aws emr list-security-configurations
aws emr list-studios #Get studio URLs
```
#### Privesc

{{#ref}}
../aws-privilege-escalation/aws-emr-privesc.md
{{#endref}}

## Marejeleo

- [https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/](https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/)

{{#include ../../../banners/hacktricks-training.md}}
