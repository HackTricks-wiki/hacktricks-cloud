# AWS - EMR Enum

{{#include ../../../banners/hacktricks-training.md}}

## EMR

AWS se Elastic MapReduce (EMR) diens, wat begin met weergawe 4.8.0, het 'n **veiligheidskonfigurasie** kenmerk bekendgestel wat databeskydding verbeter deur gebruikers toe te laat om versleutelinginstellings vir data in rus en in oordrag binne EMR-klusters, wat skaalbare groepe van EC2-instanties is wat ontwerp is om groot data-raamwerke soos Apache Hadoop en Spark te verwerk, te spesifiseer.

Belangrike kenmerke sluit in:

- **Kluster Versleuteling Standaard**: Standaard is data in rus binne 'n kluster nie versleuteld nie. Dit is egter moontlik om versleuteling in te skakel wat toegang tot verskeie funksies bied:
- **Linux Unified Key Setup**: Versleutelt EBS-klustervolumes. Gebruikers kan kies vir AWS Key Management Service (KMS) of 'n pasgemaakte sleutelverskaffer.
- **Open-Source HDFS Versleuteling**: Bied twee versleutelingopsies vir Hadoop:
- Veilige Hadoop RPC (Remote Procedure Call), gestel op privaatheid, wat die Simple Authentication Security Layer benut.
- HDFS Blok oordrag versleuteling, gestel op waar, gebruik die AES-256 algoritme.
- **Versleuteling in Oordrag**: Fokus op die beveiliging van data tydens oordrag. Opsies sluit in:
- **Open Source Transport Layer Security (TLS)**: Versleuteling kan geaktiveer word deur 'n sertifikaatverskaffer te kies:
- **PEM**: Vereis handmatige skepping en bundeling van PEM-sertifikate in 'n zip-lêer, waarna verwys word vanaf 'n S3-bucket.
- **Pasgemaak**: Betrek die toevoeging van 'n pasgemaakte Java-klas as 'n sertifikaatverskaffer wat versleutelingartefakte verskaf.

Sodra 'n TLS-sertifikaatverskaffer in die veiligheidskonfigurasie geïntegreer is, kan die volgende toepassingspesifieke versleutelingkenmerke geaktiveer word, wat wissel op grond van die EMR-weergawe:

- **Hadoop**:
- Mag versleutelde shuffle met TLS verminder.
- Veilige Hadoop RPC met Simple Authentication Security Layer en HDFS Blok Oordrag met AES-256 word geaktiveer met versleuteling in rus.
- **Presto** (EMR weergawe 5.6.0+):
- Interne kommunikasie tussen Presto-knope is beveilig met SSL en TLS.
- **Tez Shuffle Handler**:
- Gebruik TLS vir versleuteling.
- **Spark**:
- Gebruik TLS vir die Akka-protokol.
- Gebruik Simple Authentication Security Layer en 3DES vir Blok Oordragdiens.
- Eksterne shuffle diens is beveilig met die Simple Authentication Security Layer.

Hierdie kenmerke verbeter saam die sekuriteitsposisie van EMR-klusters, veral met betrekking tot databeskydding tydens berging en oordragfases.

#### Enumeration
```bash
aws emr list-clusters
aws emr describe-cluster --cluster-id <id>
aws emr list-instances --cluster-id <id>
aws emr list-instance-fleets --cluster-id <id>
aws emr list-steps --cluster-id <id>
aws emr list-notebook-executions
aws emr list-security-configurations
aws emr list-studios #Get studio URLs
```
#### Privesc

{{#ref}}
../aws-privilege-escalation/aws-emr-privesc.md
{{#endref}}

## Verwysings

- [https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/](https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/)

{{#include ../../../banners/hacktricks-training.md}}
