# AWS - CloudFormation & Codestar Enum

{{#include ../../../banners/hacktricks-training.md}}

## CloudFormation

AWS CloudFormation 是一个旨在 **简化 AWS 资源管理** 的服务。它使用户能够更多地专注于在 AWS 上运行的应用程序，通过 **减少在资源管理上花费的时间**。该服务的核心功能是 **模板**——所需 AWS 资源的描述模型。一旦提供了该模板，CloudFormation 负责指定资源的 **供应和配置**。这种自动化促进了更高效和无错误的 AWS 基础设施管理。

### Enumeration
```bash
# Stacks
aws cloudformation list-stacks
aws cloudformation describe-stacks # You could find sensitive information here
aws cloudformation list-stack-resources --stack-name <name>
aws cloudformation get-template --stack-name cloudformationStack
aws cloudformation describe-stack-events --stack-name cloudformationStack

## Show params and outputs
aws cloudformation describe-stacks | jq ".Stacks[] | .StackId, .StackName, .Parameters, .Outputs"

# Export
aws cloudformation list-exports
aws cloudformation list-imports --export-name <x_name>

# Stack Sets
aws cloudformation list-stack-sets
aws cloudformation describe-stack-set --stack-set-name <name>
aws cloudformation list-stack-instances --stack-set-name <name>
aws cloudformation list-stack-set-operations --stack-set-name <name>
aws cloudformation list-stack-set-operation-results --stack-set-name <name> --operation-id <id>
```
### Privesc

在以下页面中，您可以查看如何**滥用cloudformation权限以提升特权**：

{{#ref}}
../aws-privilege-escalation/aws-cloudformation-privesc/
{{#endref}}

### Post-Exploitation

检查每个CloudFormation的**模板、参数和输出**中的**秘密**或敏感信息

## Codestar

AWS CodeStar是一个用于在AWS上创建、管理和处理软件开发项目的服务。您可以通过AWS CodeStar项目快速开发、构建和部署应用程序。AWS CodeStar项目为您的项目开发工具链创建并**集成AWS服务**。根据您选择的AWS CodeStar项目模板，该工具链可能包括源代码控制、构建、部署、虚拟服务器或无服务器资源等。AWS CodeStar还**管理项目用户**（称为团队成员）所需的权限。

### Enumeration
```bash
# Get projects information
aws codestar list-projects
aws codestar describe-project --id <project_id>
aws codestar list-resources --project-id <project_id>
aws codestar list-team-members --project-id <project_id>

aws codestar list-user-profiles
aws codestar describe-user-profile --user-arn <arn>
```
### 提权

在以下页面中，您可以查看如何**滥用 codestar 权限以提升特权**：

{{#ref}}
../aws-privilege-escalation/aws-codestar-privesc/
{{#endref}}

## 参考

- [https://docs.aws.amazon.com/cloudformation/](https://docs.aws.amazon.com/cloudformation/)

{{#include ../../../banners/hacktricks-training.md}}
