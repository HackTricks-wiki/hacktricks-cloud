# AWS - Secrets Manager Enum

{{#include ../../../banners/hacktricks-training.md}}

## AWS Secrets Manager

AWS Secrets Manager призначений для **усунення використання жорстко закодованих секретів у додатках, замінюючи їх викликом API**. Ця служба слугує **централізованим репозиторієм для всіх ваших секретів**, забезпечуючи їх єдине управління в усіх додатках.

Менеджер спрощує **процес ротації секретів**, значно покращуючи безпеку чутливих даних, таких як облікові дані бази даних. Крім того, такі секрети, як API ключі, можуть автоматично ротуватися з інтеграцією функцій lambda.

Доступ до секретів суворо контролюється через детальні політики на основі ідентичності IAM та політики на основі ресурсів.

Для надання доступу до секретів користувачу з іншого облікового запису AWS необхідно:

1. Авторизувати користувача для доступу до секрету.
2. Надати дозвіл користувачу на розшифровку секрету за допомогою KMS.
3. Змінити політику ключа, щоб дозволити зовнішньому користувачу його використовувати.

**AWS Secrets Manager інтегрується з AWS KMS для шифрування ваших секретів у AWS Secrets Manager.**

### **Enumeration**
```bash
aws secretsmanager list-secrets #Get metadata of all secrets
aws secretsmanager list-secret-version-ids --secret-id <secret_name> # Get versions
aws secretsmanager describe-secret --secret-id <secret_name> # Get metadata
aws secretsmanager get-secret-value --secret-id <secret_name> # Get value
aws secretsmanager get-secret-value --secret-id <secret_name> --version-id <version-id> # Get value of a different version
aws secretsmanager get-resource-policy --secret-id --secret-id <secret_name>
```
### Privesc

{{#ref}}
../aws-privilege-escalation/aws-secrets-manager-privesc.md
{{#endref}}

### Постексплуатація

{{#ref}}
../aws-post-exploitation/aws-secrets-manager-post-exploitation.md
{{#endref}}

### Постійність

{{#ref}}
../aws-persistence/aws-secrets-manager-persistence.md
{{#endref}}

{{#include ../../../banners/hacktricks-training.md}}
