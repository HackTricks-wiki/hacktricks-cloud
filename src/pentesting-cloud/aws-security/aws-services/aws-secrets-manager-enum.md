# AWS - Secrets Manager Enum

{{#include ../../../banners/hacktricks-training.md}}

## AWS Secrets Manager

AWS Secrets Manager está diseñado para **eliminar el uso de secretos codificados en las aplicaciones reemplazándolos con una llamada a la API**. Este servicio sirve como un **repositorio centralizado para todos tus secretos**, asegurando que se gestionen de manera uniforme en todas las aplicaciones.

El administrador simplifica el **proceso de rotación de secretos**, mejorando significativamente la postura de seguridad de datos sensibles como las credenciales de bases de datos. Además, secretos como las claves API pueden rotarse automáticamente con la integración de funciones lambda.

El acceso a los secretos está estrictamente controlado a través de políticas detalladas basadas en identidades IAM y políticas basadas en recursos.

Para otorgar acceso a secretos a un usuario de una cuenta de AWS diferente, es necesario:

1. Autorizar al usuario para acceder al secreto.
2. Otorgar permiso al usuario para descifrar el secreto utilizando KMS.
3. Modificar la política de clave para permitir que el usuario externo la utilice.

**AWS Secrets Manager se integra con AWS KMS para cifrar tus secretos dentro de AWS Secrets Manager.**

### **Enumeration**
```bash
aws secretsmanager list-secrets #Get metadata of all secrets
aws secretsmanager list-secret-version-ids --secret-id <secret_name> # Get versions
aws secretsmanager describe-secret --secret-id <secret_name> # Get metadata
aws secretsmanager get-secret-value --secret-id <secret_name> # Get value
aws secretsmanager get-secret-value --secret-id <secret_name> --version-id <version-id> # Get value of a different version
aws secretsmanager get-resource-policy --secret-id --secret-id <secret_name>
```
### Privesc

{{#ref}}
../aws-privilege-escalation/aws-secrets-manager-privesc.md
{{#endref}}

### Post Explotación

{{#ref}}
../aws-post-exploitation/aws-secrets-manager-post-exploitation.md
{{#endref}}

### Persistencia

{{#ref}}
../aws-persistence/aws-secrets-manager-persistence.md
{{#endref}}

{{#include ../../../banners/hacktricks-training.md}}
