# AWS - Secrets Manager Enum

{{#include ../../../banners/hacktricks-training.md}}

## AWS Secrets Manager

AWS Secrets Manager è progettato per **eliminare l'uso di segreti hard-coded nelle applicazioni sostituendoli con una chiamata API**. Questo servizio funge da **repository centralizzato per tutti i tuoi segreti**, garantendo che siano gestiti in modo uniforme in tutte le applicazioni.

Il manager semplifica il **processo di rotazione dei segreti**, migliorando significativamente la postura di sicurezza dei dati sensibili come le credenziali del database. Inoltre, segreti come le chiavi API possono essere ruotati automaticamente con l'integrazione delle funzioni lambda.

L'accesso ai segreti è strettamente controllato attraverso politiche dettagliate basate su identità IAM e politiche basate su risorse.

Per concedere l'accesso ai segreti a un utente di un altro account AWS, è necessario:

1. Autorizzare l'utente ad accedere al segreto.
2. Concedere il permesso all'utente di decrittare il segreto utilizzando KMS.
3. Modificare la politica della chiave per consentire all'utente esterno di utilizzarla.

**AWS Secrets Manager si integra con AWS KMS per crittografare i tuoi segreti all'interno di AWS Secrets Manager.**

### **Enumeration**
```bash
aws secretsmanager list-secrets #Get metadata of all secrets
aws secretsmanager list-secret-version-ids --secret-id <secret_name> # Get versions
aws secretsmanager describe-secret --secret-id <secret_name> # Get metadata
aws secretsmanager get-secret-value --secret-id <secret_name> # Get value
aws secretsmanager get-secret-value --secret-id <secret_name> --version-id <version-id> # Get value of a different version
aws secretsmanager get-resource-policy --secret-id --secret-id <secret_name>
```
### Privesc

{{#ref}}
../aws-privilege-escalation/aws-secrets-manager-privesc.md
{{#endref}}

### Post Exploitation

{{#ref}}
../aws-post-exploitation/aws-secrets-manager-post-exploitation.md
{{#endref}}

### Persistenza

{{#ref}}
../aws-persistence/aws-secrets-manager-persistence.md
{{#endref}}

{{#include ../../../banners/hacktricks-training.md}}
