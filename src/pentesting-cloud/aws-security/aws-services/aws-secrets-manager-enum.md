# AWS - Secrets Manager Enum

{{#include ../../../banners/hacktricks-training.md}}

## AWS Secrets Manager

AWS Secrets Manager는 **애플리케이션에서 하드코딩된 비밀을 API 호출로 대체하여 사용을 없애기 위해 설계되었습니다**. 이 서비스는 **모든 비밀을 위한 중앙 집중식 저장소** 역할을 하여 모든 애플리케이션에서 균일하게 관리되도록 보장합니다.

이 관리자는 **비밀 회전 프로세스**를 단순화하여 데이터베이스 자격 증명과 같은 민감한 데이터의 보안 태세를 크게 개선합니다. 또한, API 키와 같은 비밀은 람다 함수 통합을 통해 자동으로 회전될 수 있습니다.

비밀에 대한 접근은 상세한 IAM 신원 기반 정책 및 리소스 기반 정책을 통해 엄격하게 제어됩니다.

다른 AWS 계정의 사용자에게 비밀에 대한 접근을 허용하려면 다음이 필요합니다:

1. 사용자가 비밀에 접근할 수 있도록 승인합니다.
2. 사용자가 KMS를 사용하여 비밀을 해독할 수 있도록 권한을 부여합니다.
3. 외부 사용자가 이를 사용할 수 있도록 키 정책을 수정합니다.

**AWS Secrets Manager는 AWS KMS와 통합되어 AWS Secrets Manager 내에서 비밀을 암호화합니다.**

### **Enumeration**
```bash
aws secretsmanager list-secrets #Get metadata of all secrets
aws secretsmanager list-secret-version-ids --secret-id <secret_name> # Get versions
aws secretsmanager describe-secret --secret-id <secret_name> # Get metadata
aws secretsmanager get-secret-value --secret-id <secret_name> # Get value
aws secretsmanager get-secret-value --secret-id <secret_name> --version-id <version-id> # Get value of a different version
aws secretsmanager get-resource-policy --secret-id --secret-id <secret_name>
```
### Privesc

{{#ref}}
../aws-privilege-escalation/aws-secrets-manager-privesc.md
{{#endref}}

### Post Exploitation

{{#ref}}
../aws-post-exploitation/aws-secrets-manager-post-exploitation.md
{{#endref}}

### Persistence

{{#ref}}
../aws-persistence/aws-secrets-manager-persistence.md
{{#endref}}

{{#include ../../../banners/hacktricks-training.md}}
