# AWS - Secrets Manager Enum

{{#include ../../../banners/hacktricks-training.md}}

## AWS Secrets Manager

AWS Secrets Manager旨在**消除应用程序中硬编码秘密的使用，通过API调用替换它们**。该服务作为**所有秘密的集中存储库**，确保它们在所有应用程序中统一管理。

该管理器简化了**旋转秘密的过程**，显著提高了敏感数据（如数据库凭证）的安全态势。此外，像API密钥这样的秘密可以通过集成lambda函数自动旋转。

对秘密的访问通过详细的IAM基于身份的策略和基于资源的策略严格控制。

要授予来自不同AWS账户的用户访问秘密的权限，必须：

1. 授权用户访问秘密。
2. 授予用户使用KMS解密秘密的权限。
3. 修改密钥策略以允许外部用户使用它。

**AWS Secrets Manager与AWS KMS集成，以在AWS Secrets Manager中加密您的秘密。**

### **Enumeration**
```bash
aws secretsmanager list-secrets #Get metadata of all secrets
aws secretsmanager list-secret-version-ids --secret-id <secret_name> # Get versions
aws secretsmanager describe-secret --secret-id <secret_name> # Get metadata
aws secretsmanager get-secret-value --secret-id <secret_name> # Get value
aws secretsmanager get-secret-value --secret-id <secret_name> --version-id <version-id> # Get value of a different version
aws secretsmanager get-resource-policy --secret-id --secret-id <secret_name>
```
### Privesc

{{#ref}}
../aws-privilege-escalation/aws-secrets-manager-privesc.md
{{#endref}}

### Post Exploitation

{{#ref}}
../aws-post-exploitation/aws-secrets-manager-post-exploitation.md
{{#endref}}

### Persistence

{{#ref}}
../aws-persistence/aws-secrets-manager-persistence.md
{{#endref}}

{{#include ../../../banners/hacktricks-training.md}}
