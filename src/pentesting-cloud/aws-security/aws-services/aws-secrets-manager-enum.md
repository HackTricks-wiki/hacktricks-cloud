# AWS - Secrets Manager Enum

{{#include ../../../banners/hacktricks-training.md}}

## AWS Secrets Manager

AWS Secrets Manager, **uygulamalardaki sabit kodlanmış gizli bilgilerin kullanımını ortadan kaldırmak için bir API çağrısıyla bunları değiştirmek üzere tasarlanmıştır**. Bu hizmet, **tüm gizli bilgilerinizi merkezi bir depo olarak hizmet eder**, bunların tüm uygulamalar arasında tutarlı bir şekilde yönetilmesini sağlar.

Yönetici, **gizli bilgilerin döndürülmesi sürecini basitleştirir**, veritabanı kimlik bilgileri gibi hassas verilerin güvenlik duruşunu önemli ölçüde iyileştirir. Ayrıca, API anahtarları gibi gizli bilgiler, lambda fonksiyonlarının entegrasyonu ile otomatik olarak döndürülebilir.

Gizli bilgilere erişim, ayrıntılı IAM kimlik tabanlı politikalar ve kaynak tabanlı politikalar aracılığıyla sıkı bir şekilde kontrol edilir.

Farklı bir AWS hesabındaki bir kullanıcıya gizli bilgilere erişim vermek için:

1. Kullanıcının gizli bilgiye erişimini yetkilendirin.
2. Kullanıcıya gizli bilgiyi KMS kullanarak şifre çözme izni verin.
3. Dış kullanıcının bunu kullanabilmesi için Anahtar politikasını değiştirin.

**AWS Secrets Manager, gizli bilgilerinizi AWS Secrets Manager içinde şifrelemek için AWS KMS ile entegre olur.**

### **Enumeration**
```bash
aws secretsmanager list-secrets #Get metadata of all secrets
aws secretsmanager list-secret-version-ids --secret-id <secret_name> # Get versions
aws secretsmanager describe-secret --secret-id <secret_name> # Get metadata
aws secretsmanager get-secret-value --secret-id <secret_name> # Get value
aws secretsmanager get-secret-value --secret-id <secret_name> --version-id <version-id> # Get value of a different version
aws secretsmanager get-resource-policy --secret-id --secret-id <secret_name>
```
### Privesc

{{#ref}}
../aws-privilege-escalation/aws-secrets-manager-privesc.md
{{#endref}}

### Post Exploitation

{{#ref}}
../aws-post-exploitation/aws-secrets-manager-post-exploitation.md
{{#endref}}

### Persistence

{{#ref}}
../aws-persistence/aws-secrets-manager-persistence.md
{{#endref}}

{{#include ../../../banners/hacktricks-training.md}}
