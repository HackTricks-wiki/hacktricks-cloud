# AWS - Secrets Manager Enum

{{#include ../../../banners/hacktricks-training.md}}

## AWS Secrets Manager

AWS Secrets Manager jest zaprojektowany, aby **eliminować użycie zakodowanych na stałe sekretów w aplikacjach, zastępując je wywołaniem API**. Ta usługa służy jako **centralne repozytorium dla wszystkich twoich sekretów**, zapewniając ich jednolite zarządzanie we wszystkich aplikacjach.

Menadżer upraszcza **proces rotacji sekretów**, znacznie poprawiając bezpieczeństwo wrażliwych danych, takich jak poświadczenia do bazy danych. Dodatkowo, sekrety takie jak klucze API mogą być automatycznie rotowane przy integracji z funkcjami lambda.

Dostęp do sekretów jest ściśle kontrolowany przez szczegółowe polityki oparte na tożsamości IAM oraz polityki oparte na zasobach.

Aby przyznać dostęp do sekretów użytkownikowi z innego konta AWS, należy:

1. Autoryzować użytkownika do dostępu do sekretu.
2. Przyznać użytkownikowi uprawnienia do odszyfrowania sekretu za pomocą KMS.
3. Zmodyfikować politykę klucza, aby umożliwić zewnętrznemu użytkownikowi jej wykorzystanie.

**AWS Secrets Manager integruje się z AWS KMS, aby szyfrować twoje sekrety w AWS Secrets Manager.**

### **Enumeration**
```bash
aws secretsmanager list-secrets #Get metadata of all secrets
aws secretsmanager list-secret-version-ids --secret-id <secret_name> # Get versions
aws secretsmanager describe-secret --secret-id <secret_name> # Get metadata
aws secretsmanager get-secret-value --secret-id <secret_name> # Get value
aws secretsmanager get-secret-value --secret-id <secret_name> --version-id <version-id> # Get value of a different version
aws secretsmanager get-resource-policy --secret-id --secret-id <secret_name>
```
### Privesc

{{#ref}}
../aws-privilege-escalation/aws-secrets-manager-privec.md
{{#endref}}

### Post Exploitation

{{#ref}}
../aws-post-exploitation/aws-secrets-manager-post-exploitation.md
{{#endref}}

### Persistence

{{#ref}}
../aws-persistence/aws-secrets-manager-persistence.md
{{#endref}}

{{#include ../../../banners/hacktricks-training.md}}
