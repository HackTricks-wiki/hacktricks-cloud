# AWS - SES Enum

{{#include ../../../banners/hacktricks-training.md}}

## Basic Information

Amazon Simple Email Service (Amazon SES) **ईमेल भेजने और प्राप्त करने** के लिए डिज़ाइन किया गया है। यह उपयोगकर्ताओं को लेनदेन, विपणन, या सूचना ईमेल को कुशलता से और सुरक्षित रूप से बड़े पैमाने पर भेजने में सक्षम बनाता है। यह **अन्य AWS सेवाओं के साथ अच्छी तरह से एकीकृत** होता है, जो सभी आकार के व्यवसायों के लिए ईमेल संचार प्रबंधन के लिए एक मजबूत समाधान प्रदान करता है।

आपको **पहचानें** पंजीकृत करने की आवश्यकता है, जो डोमेन या ईमेल पते हो सकते हैं जो SES के साथ बातचीत करने में सक्षम होंगे (जैसे, ईमेल भेजना और प्राप्त करना)।

### SMTP User

यह **AWS के SMTP सर्वर से कनेक्ट करने** के लिए संभव है ताकि क्रियाएँ की जा सकें, बजाय AWS API का उपयोग करने के (या इसके अतिरिक्त)। इसके लिए आपको एक उपयोगकर्ता बनाने की आवश्यकता है जिसमें एक नीति हो जैसे:
```json
{
"Version": "2012-10-17",
"Statement": [
{
"Effect": "Allow",
"Action": "ses:SendRawEmail",
"Resource": "*"
}
]
}
```
फिर, उपयोगकर्ता की **API कुंजी और गुप्त** एकत्र करें और चलाएँ:
```bash
git clone https://github.com/lisenet/ses-smtp-converter.git
cd ./ses-smtp-converter
chmod u+x ./ses-smtp-conv.sh
./ses-smtp-conv.sh <AccessKeyId> <SecretAccessKey>
```
यह AWS कंसोल वेब से भी किया जा सकता है।

### Enumeration

> [!WARNING]
> ध्यान दें कि SES के 2 APIs हैं: **`ses`** और **`sesv2`**। कुछ क्रियाएँ दोनों APIs में हैं और अन्य केवल इनमें से एक में हैं।
```bash
# Get info about the SES account
aws sesv2 get-account
aws ses get-account-sending-enabled # Check if enabled

# Get registered domains and email addresses (identities)
aws ses list-identities
aws sesv2 list-email-identities
aws sesv2 get-email-identity --email-identity <identity> #Get at once all the attributes

# Get Resource Policies applied in the identity
aws ses list-identity-policies --identity <identity>
aws ses get-identity-policies --identity <identity> --policy-names <policy>
aws sesv2 get-email-identity-policies --email-identity <identity>

# Get attributes of the identity
## Check if verified
aws ses get-identity-verification-attributes --identities <identity>
## DKIM settings, relevant for identities that are domains not emails
aws ses get-identity-dkim-attributes --identities <identity>
## Get what happnes if the send mail from the identity fails
aws ses get-identity-mail-from-domain-attributes --identities <identity>
## otifications attributes
aws ses get-identity-notification-attributes --identities <identity>

# Get email templates
aws ses list-templates
aws ses get-template --template-name <name>
aws sesv2 list-email-templates
aws sesv2 get-email-template --template-name <name>

# Get custom verification email templates
## This is the email sent when an identity is verified, it can be customized
aws ses list-custom-verification-email-templates
aws sesv2 list-custom-verification-email-templates
aws ses get-custom-verification-email-template --template-name <name>
aws sesv2 get-custom-verification-email-template --template-name <name>

# Get receipt rule sets
## Receipt rules indicate how to handle incoming mail by executing an ordered list of actions
aws ses list-receipt-rule-sets
aws ses describe-receipt-rule-set --rule-set-name <name>
aws ses describe-receipt-rule-set --rule-set-name <name> --rule-name <name>
## Metadata and receipt rules for the receipt rule set that is currently active
aws ses describe-active-receipt-rule-set

# Get suppressed destinations
aws sesv2 list-suppressed-destinations
aws sesv2 get-suppressed-destination --email-address <email>

# Get configuration sets
## These are set of rules applied to the identities related to the configuration set
aws ses list-configuration-sets
aws sesv2 list-configuration-sets
aws ses describe-configuration-set --configuration-set-name <name> --configuration-set-attribute-names eventDestinations trackingOptions deliveryOptions reputationOptions
aws sesv2 get-configuration-set --configuration-set-name <name>
aws sesv2 get-configuration-set-event-destinations --configuration-set-name <name>

# Get Contacts list
aws sesv2 list-contact-lists
aws sesv2 list-contacts --contact-list-name <name>
aws sesv2 get-contact-list --contact-list-name <name>
aws sesv2 get-contact --contact-list-name <name> --email-address <name>

# Private IPs
aws sesv2 list-dedicated-ip-pools
aws sesv2 get-dedicated-ip-pool --pool-name <name>
aws sesv2 get-dedicated-ips --pool-name <name> #Only valid if ScalingMode is Standard
aws sesv2 get-dedicated-ip --ip <ip>

# Misc
## Get send quota
aws ses get-send-quota
## Get statistics
aws ses get-send-statistics
```
### पोस्ट एक्सप्लॉइटेशन

{{#ref}}
../aws-post-exploitation/aws-ses-post-exploitation.md
{{#endref}}

{{#include ../../../banners/hacktricks-training.md}}
