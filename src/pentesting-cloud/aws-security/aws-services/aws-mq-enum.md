# AWS - MQ Enum

{{#include ../../../banners/hacktricks-training.md}}

## Amazon MQ

### Mesaj Aracılarına Giriş

**Mesaj aracıları**, farklı yazılım sistemleri arasında iletişimi kolaylaştıran aracılardır; bu sistemler farklı platformlarda inşa edilmiş ve farklı dillerde programlanmış olabilir. **Amazon MQ**, AWS üzerinde mesaj aracılarını dağıtmayı, işletmeyi ve bakımını basitleştirir. **Apache ActiveMQ** ve **RabbitMQ** için yönetilen hizmetler sunarak, kesintisiz sağlama ve otomatik yazılım sürümü güncellemeleri sağlar.

### AWS - RabbitMQ

RabbitMQ, aynı zamanda _mesaj aracı_ veya _kuyruk yöneticisi_ olarak bilinen önde gelen bir **mesaj kuyruklama yazılımıdır**. Temelde, kuyrukların yapılandırıldığı bir sistemdir. Uygulamalar, bu kuyruklarla etkileşimde bulunarak **mesaj gönderir ve alır**. Bu bağlamda mesajlar, diğer uygulamalarda (potansiyel olarak farklı sunucularda) süreçleri başlatmak için komutlardan basit metin mesajlarına kadar çeşitli bilgileri taşıyabilir. Mesajlar, alıcı bir uygulama tarafından alınana ve işlenene kadar kuyruk yöneticisi yazılımı tarafından tutulur. AWS, RabbitMQ sunucularını barındırmak ve yönetmek için kullanımı kolay bir çözüm sunar.

### AWS - ActiveMQ

Apache ActiveMQ®, çok yönlülüğü ile bilinen önde gelen açık kaynaklı, Java tabanlı bir **mesaj aracıdır**. Birçok endüstri standardı protokolü destekler ve geniş bir dizi dil ve platformda kapsamlı istemci uyumluluğu sunar. Kullanıcılar:

- JavaScript, C, C++, Python, .Net ve daha fazlasında yazılmış istemcilerle bağlantı kurabilir.
- Farklı platformlardan uygulamaları entegre etmek için **AMQP** protokolünü kullanabilir.
- Web uygulaması mesaj alışverişleri için websockets üzerinden **STOMP** kullanabilir.
- **MQTT** ile IoT cihazlarını yönetebilir.
- Mevcut **JMS** altyapısını koruyabilir ve yeteneklerini genişletebilir.

ActiveMQ'nun sağlamlığı ve esnekliği, çok çeşitli mesajlaşma gereksinimleri için uygun hale getirir.

## Enumeration
```bash
# List brokers
aws mq list-brokers

# Get broker info
aws mq describe-broker --broker-id <broker-id>
## Find endpoints in .BrokerInstances
## Find if public accessible in .PubliclyAccessible

# List usernames (only for ActiveMQ)
aws mq list-users --broker-id <broker-id>

# Get user info (PASSWORD NOT INCLUDED)
aws mq describe-user --broker-id <broker-id> --username <username>

# Lits configurations (only for ActiveMQ)
aws mq list-configurations
## Here you can find if simple or LDAP authentication is used

# Creacte Active MQ user
aws mq create-user --broker-id <value> --password <value> --username <value> --console-access
```
> [!WARNING]
> TODO: RabbitMQ ve ActiveMQ'yu dahili olarak nasıl listeleyeceğinizi ve tüm kuyruklarda nasıl dinleyeceğinizi ve veri göndereceğinizi belirtin (bunu nasıl yapacağınızı biliyorsanız PR gönderin)

## Privesc

{{#ref}}
../aws-privilege-escalation/aws-mq-privesc.md
{{#endref}}

## Kimlik Doğrulaması Olmadan Erişim

{{#ref}}
../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md
{{#endref}}

## Süreklilik

RabbitMQ web konsoluna erişim için kimlik bilgilerini biliyorsanız, admin ayrıcalıklarına sahip yeni bir kullanıcı oluşturabilirsiniz.

## Referanslar

- [https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html](https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html)
- [https://activemq.apache.org/](https://activemq.apache.org/)

{{#include ../../../banners/hacktricks-training.md}}
