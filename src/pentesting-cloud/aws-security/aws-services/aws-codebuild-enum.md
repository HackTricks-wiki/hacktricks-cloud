# AWS - Codebuild Enum

{{#include ../../../banners/hacktricks-training.md}}

## CodeBuild

AWS **CodeBuild** αναγνωρίζεται ως μια **πλήρως διαχειριζόμενη υπηρεσία συνεχούς ολοκλήρωσης**. Ο κύριος σκοπός αυτής της υπηρεσίας είναι να αυτοματοποιήσει τη διαδικασία της μεταγλώττισης του πηγαίου κώδικα, της εκτέλεσης δοκιμών και της συσκευασίας του λογισμικού για σκοπούς ανάπτυξης. Το κυριότερο πλεονέκτημα που προσφέρει το CodeBuild έγκειται στην ικανότητά του να απαλλάσσει τους χρήστες από την ανάγκη να προμηθεύονται, να διαχειρίζονται και να κλιμακώνουν τους διακομιστές κατασκευής τους. Αυτή η ευκολία οφείλεται στο γεγονός ότι η υπηρεσία διαχειρίζεται αυτές τις εργασίες. Ορισμένα βασικά χαρακτηριστικά του AWS CodeBuild περιλαμβάνουν:

1. **Managed Service**: Το CodeBuild διαχειρίζεται και κλιμακώνει τους διακομιστές κατασκευής, απελευθερώνοντας τους χρήστες από τη συντήρηση διακομιστών.
2. **Continuous Integration**: Ενσωματώνεται με τη ροή εργασίας ανάπτυξης και ανάπτυξης, αυτοματοποιώντας τις φάσεις κατασκευής και δοκιμών της διαδικασίας κυκλοφορίας λογισμικού.
3. **Package Production**: Μετά τις φάσεις κατασκευής και δοκιμών, προετοιμάζει τα πακέτα λογισμικού, καθιστώντας τα έτοιμα για ανάπτυξη.

Το AWS CodeBuild ενσωματώνεται απρόσκοπτα με άλλες υπηρεσίες AWS, ενισχύοντας την αποδοτικότητα και την αξιοπιστία της ροής CI/CD (Συνεχής Ολοκλήρωση/Συνεχής Ανάπτυξη).

### **Github/Gitlab/Bitbucket Credentials**

#### **Default source credentials**

Αυτή είναι η κλασική επιλογή όπου είναι δυνατόν να ρυθμιστεί κάποια **πρόσβαση** (όπως ένα token Github ή μια εφαρμογή) που θα είναι **κοινή σε όλα τα έργα codebuild** ώστε όλα τα έργα να μπορούν να χρησιμοποιούν αυτό το ρυθμισμένο σύνολο διαπιστευτηρίων.

Τα αποθηκευμένα διαπιστευτήρια (tokens, κωδικοί πρόσβασης...) είναι **διαχειριζόμενα από το codebuild** και δεν υπάρχει δημόσιος τρόπος να τα ανακτήσετε από τα AWS APIs.

#### Custom source credential

Ανάλογα με την πλατφόρμα αποθετηρίου (Github, Gitlab και Bitbucket) παρέχονται διαφορετικές επιλογές. Αλλά γενικά, οποιαδήποτε επιλογή απαιτεί να **αποθηκεύσει ένα token ή έναν κωδικό πρόσβασης θα το αποθηκεύσει ως μυστικό στον διαχειριστή μυστικών**.

Αυτό επιτρέπει **διαφορετικά έργα codebuild να χρησιμοποιούν διαφορετικές ρυθμισμένες προσβάσεις** στους παρόχους αντί να χρησιμοποιούν απλώς την ρυθμισμένη προεπιλογή.

### Enumeration
```bash
# List external repo creds (such as github tokens)
## It doesn't return the token but just the ARN where it's located
aws codebuild list-source-credentials

# Projects
aws codebuild list-shared-projects
aws codebuild list-projects
aws codebuild batch-get-projects --names <project_name> # Check for creds in env vars

# Builds
aws codebuild list-builds
aws codebuild list-builds-for-project --project-name <p_name>
aws codebuild list-build-batches
aws codebuild list-build-batches-for-project --project-name <p_name>

# Reports
aws codebuild list-reports
aws codebuild describe-test-cases --report-arn <ARN>
```
### Privesc

Στην επόμενη σελίδα, μπορείτε να ελέγξετε πώς να **καταχραστείτε τις άδειες του codebuild για να κλιμακώσετε τα δικαιώματα**:

{{#ref}}
../aws-privilege-escalation/aws-codebuild-privesc.md
{{#endref}}

### Post Exploitation

{{#ref}}
../aws-post-exploitation/aws-codebuild-post-exploitation/
{{#endref}}

### Unauthenticated Access

{{#ref}}
../aws-unauthenticated-enum-access/aws-codebuild-unauthenticated-access.md
{{#endref}}

## References

- [https://docs.aws.amazon.com/managedservices/latest/userguide/code-build.html](https://docs.aws.amazon.com/managedservices/latest/userguide/code-build.html)

{{#include ../../../banners/hacktricks-training.md}}
