# AWS - Kinesis Data Firehose Enum

{{#include ../../../banners/hacktricks-training.md}}

## Kinesis Data Firehose

Amazon Kinesis Data Firehose ist ein **vollständig verwalteter Dienst**, der die Bereitstellung von **Echtzeit-Streaming-Daten** erleichtert. Er unterstützt eine Vielzahl von Zielen, einschließlich Amazon Simple Storage Service (Amazon S3), Amazon Redshift, Amazon OpenSearch Service, Splunk und benutzerdefinierte HTTP-Endpunkte.

Der Dienst beseitigt die Notwendigkeit, Anwendungen zu schreiben oder Ressourcen zu verwalten, indem er es Datenproduzenten ermöglicht, so konfiguriert zu werden, dass sie Daten direkt an Kinesis Data Firehose weiterleiten. Dieser Dienst ist verantwortlich für die **automatische Bereitstellung von Daten an das angegebene Ziel**. Darüber hinaus bietet Kinesis Data Firehose die Möglichkeit, **die Daten vor der Bereitstellung zu transformieren**, was die Flexibilität und Anwendbarkeit auf verschiedene Anwendungsfälle erhöht.

### Enumeration
```bash
# Get delivery streams
aws firehose list-delivery-streams

# Get stream info
aws firehose describe-delivery-stream --delivery-stream-name <name>
## Get roles
aws firehose describe-delivery-stream --delivery-stream-name <name> | grep -i RoleARN
```
## Post-Exploitation / Verteidigungsumgehung

Falls Firehose verwendet wird, um Protokolle oder Verteidigungseinblicke zu senden, könnte ein Angreifer durch die Nutzung dieser Funktionen verhindern, dass es ordnungsgemäß funktioniert.

### firehose:DeleteDeliveryStream
```
aws firehose delete-delivery-stream --delivery-stream-name <value> --allow-force-delete
```
### firehose:UpdateDestination
```
aws firehose update-destination --delivery-stream-name <value> --current-delivery-stream-version-id <value> --destination-id <value>
```
### firehose:PutRecord | firehose:PutRecordBatch
```
aws firehose put-record --delivery-stream-name my-stream --record '{"Data":"SGVsbG8gd29ybGQ="}'

aws firehose put-record-batch --delivery-stream-name my-stream --records file://records.json
```
## Referenzen

- [https://docs.amazonaws.cn/en_us/firehose/latest/dev/what-is-this-service.html](https://docs.amazonaws.cn/en_us/firehose/latest/dev/what-is-this-service.html)

{{#include ../../../banners/hacktricks-training.md}}
