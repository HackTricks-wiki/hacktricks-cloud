# AWS - Kinesis Data Firehose Enum

{{#include ../../../banners/hacktricks-training.md}}

## Kinesis Data Firehose

Amazon Kinesis Data Firehose는 **완전 관리형 서비스**로, **실시간 스트리밍 데이터**의 전달을 용이하게 합니다. Amazon Simple Storage Service (Amazon S3), Amazon Redshift, Amazon OpenSearch Service, Splunk 및 사용자 정의 HTTP 엔드포인트를 포함한 다양한 목적지를 지원합니다.

이 서비스는 데이터 생산자가 데이터를 Kinesis Data Firehose로 직접 전달하도록 구성할 수 있게 하여 애플리케이션을 작성하거나 리소스를 관리할 필요성을 덜어줍니다. 이 서비스는 **지정된 목적지로의 데이터 자동 전달**을 담당합니다. 또한 Kinesis Data Firehose는 **전달 전에 데이터를 변환하는 옵션**을 제공하여 다양한 사용 사례에 대한 유연성과 적용 가능성을 향상시킵니다.

### Enumeration
```bash
# Get delivery streams
aws firehose list-delivery-streams

# Get stream info
aws firehose describe-delivery-stream --delivery-stream-name <name>
## Get roles
aws firehose describe-delivery-stream --delivery-stream-name <name> | grep -i RoleARN
```
## Post-exploitation / Defense Bypass

firehose가 로그 또는 방어 통찰력을 전송하는 데 사용되는 경우, 이러한 기능을 사용하여 공격자는 제대로 작동하지 않도록 방해할 수 있습니다.

### firehose:DeleteDeliveryStream
```
aws firehose delete-delivery-stream --delivery-stream-name <value> --allow-force-delete
```
### firehose:UpdateDestination
```
aws firehose update-destination --delivery-stream-name <value> --current-delivery-stream-version-id <value> --destination-id <value>
```
### firehose:PutRecord | firehose:PutRecordBatch
```
aws firehose put-record --delivery-stream-name my-stream --record '{"Data":"SGVsbG8gd29ybGQ="}'

aws firehose put-record-batch --delivery-stream-name my-stream --records file://records.json
```
## References

- [https://docs.amazonaws.cn/en_us/firehose/latest/dev/what-is-this-service.html](https://docs.amazonaws.cn/en_us/firehose/latest/dev/what-is-this-service.html)

{{#include ../../../banners/hacktricks-training.md}}
