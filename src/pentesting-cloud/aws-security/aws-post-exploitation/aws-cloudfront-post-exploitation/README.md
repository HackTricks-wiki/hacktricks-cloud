# AWS - CloudFront Post Exploitation

{{#include ../../../../banners/hacktricks-training.md}}

## CloudFront

Daha fazla bilgi için bakınız:

{{#ref}}
../../aws-services/aws-cloudfront-enum.md
{{#endref}}

### Man-in-the-Middle

This [**blog post**](https://medium.com/@adan.alvarez/how-attackers-can-misuse-aws-cloudfront-access-to-make-it-rain-cookies-acf9ce87541c) birkaç farklı senaryo öneriyor; bu senaryolarda bir **Lambda**, **CloudFront** üzerinden gerçekleşen bir iletişime eklenebilir (ya da zaten kullanılıyorsa değiştirilebilir) ve amaç kullanıcı bilgilerini (ör. oturum **cookie**'sini) **çalmak** ve **yanıt**ı **değiştirmek** (kötü amaçlı bir JS betiği enjekte etmek) olabilir.

#### senaryo 1: MitM — CloudFront'un bir bucket içindeki bazı HTML'lere erişecek şekilde yapılandırıldığı durum

- Kötü amaçlı **function** oluşturun.
- Bunu CloudFront dağıtımıyla **ilişkilendirin**.
- **Event type**'ı "Viewer Response" olarak ayarlayın.

Yanıtı elde ederek kullanıcının oturum **cookie**'sini çalabilir ve kötü amaçlı bir JS enjekte edebilirsiniz.

#### senaryo 2: MitM — CloudFront'un zaten bir Lambda function kullandığı durum

- Lambda function'ın kodunu **değiştirerek** hassas bilgileri çalın.

You can check the [**tf code to recreate this scenarios here**](https://github.com/adanalvarez/AWS-Attack-Scenarios/tree/main).

{{#include ../../../../banners/hacktricks-training.md}}
