# AWS - SQS Post Exploitation

{{#include ../../../../banners/hacktricks-training.md}}

## SQS

Kwa taarifa zaidi angalia:

{{#ref}}
../../aws-services/aws-sqs-and-sns-enum.md
{{#endref}}

### `sqs:SendMessage` , `sqs:SendMessageBatch`

attacker anaweza kutuma ujumbe hatari au usiotakiwa kwa SQS queue, ambacho kinaweza kusababisha uharibifu wa data, kusababisha vitendo visivyotarajiwa, au kusababisha rasilimali kuisha.
```bash
aws sqs send-message --queue-url <value> --message-body <value>
aws sqs send-message-batch --queue-url <value> --entries <value>
```
**Athari Inayoweza Kutokea**: Vulnerability exploitation, uharibifu wa data, vitendo visivyotarajiwa, au utumiaji kupita kiasi wa rasilimali.

### `sqs:ReceiveMessage`, `sqs:DeleteMessage`, `sqs:ChangeMessageVisibility`

attacker anaweza kupokea, kufuta, au kubadilisha uwonekano wa ujumbe katika SQS queue, na kusababisha upotevu wa ujumbe, uharibifu wa data, au kusumbua huduma kwa programu zinazotegemea ujumbe hizo.
```bash
aws sqs receive-message --queue-url <value>
aws sqs delete-message --queue-url <value> --receipt-handle <value>
aws sqs change-message-visibility --queue-url <value> --receipt-handle <value> --visibility-timeout <value>
```
**Athari Inayowezekana**: Kuiba taarifa nyeti, kupotea kwa ujumbe, uharibifu wa data, na kuingiliwa kwa huduma kwa programu zinazotegemea ujumumbe uliyoathiriwa.

### `sqs:DeleteQueue`

Mshambuliaji anaweza kufuta SQS queue yote, kusababisha kupotea kwa ujumbe na kuathiri programu zinazotegemea queue hiyo.
```bash
aws sqs delete-queue --queue-url <value>
```
**Potential Impact**: Kupoteza ujumbe na kusababisha kusitishwa kwa huduma kwa programu zinazotumia queue iliyofutwa.

### `sqs:PurgeQueue`

Mshambuliaji anaweza kufuta ujumbe yote kutoka kwenye SQS queue, na kusababisha kupoteza ujumbe na usumbufu kwa programu zinazotegemea ujumbe hayo.
```bash
aws sqs purge-queue --queue-url <value>
```
**Potential Impact**: Upotevu wa ujumbe na usumbufu wa huduma kwa programu zinazotegemea ujumbe uliyoondolewa kabisa.

### `sqs:SetQueueAttributes`

Mshambuliaji anaweza kubadilisha sifa za foleni ya SQS, jambo ambalo linaweza kuathiri utendaji wake, usalama, au upatikana wake.
```bash
aws sqs set-queue-attributes --queue-url <value> --attributes <value>
```
**Athari Inayoweza Kutokea**: Usanidi mbaya unaosababisha utendaji uliodhoofishwa, masuala ya usalama, au upungufu wa upatikanaji.

### `sqs:TagQueue` , `sqs:UntagQueue`

Mshambuliaji anaweza kuongeza, kubadilisha, au kuondoa tags kutoka kwa rasilimali za SQS, akivuruga ugawaji wa gharama wa shirika lako, ufuatiliaji wa rasilimali, na sera za udhibiti wa upatikanaji zinazoegemea tags.
```bash
aws sqs tag-queue --queue-url <value> --tags Key=<key>,Value=<value>
aws sqs untag-queue --queue-url <value> --tag-keys <key>
```
**Madhara Yanayowezekana**: Kukatizwa kwa ugawaji wa gharama, ufuatiliaji wa rasilimali, na sera za udhibiti wa upatikanaji zinazotegemea tag.

### `sqs:RemovePermission`

Mshambuliaji anaweza kufuta ruhusa za watumiaji halali au huduma kwa kuondoa sera zinazohusishwa na SQS queue. Hii inaweza kusababisha matatizo katika utendakazi wa kawaida wa programu zinazotegemea queue.
```bash
aws sqs remove-permission --queue-url <value> --label <value>
```
**Athari Inayowezekana**: Kukatizwa kwa uendeshaji wa kawaida wa programu zinazotegemea safu kutokana na kuondolewa kwa ruhusa bila idhini.

### Mbinu Zaidi za SQS Post-Exploitation

{{#ref}}
aws-sqs-dlq-redrive-exfiltration.md
{{#endref}}

{{#ref}}
aws-sqs-sns-injection.md
{{#endref}}

{{#include ../../../../banners/hacktricks-training.md}}
