# AWS - SQS Post Exploitation

{{#include ../../../../banners/hacktricks-training.md}}

## SQS

Pour plus d'informations, consultez :

{{#ref}}
../../aws-services/aws-sqs-and-sns-enum.md
{{#endref}}

### `sqs:SendMessage` , `sqs:SendMessageBatch`

Un attaquant pourrait envoyer des messages malveillants ou indésirables dans la file SQS, pouvant entraîner une corruption des données, déclencher des actions non voulues ou épuiser les ressources.
```bash
aws sqs send-message --queue-url <value> --message-body <value>
aws sqs send-message-batch --queue-url <value> --entries <value>
```
**Impact potentiel**: Exploitation de la vulnérabilité, corruption des données, actions non intentionnelles ou épuisement des ressources.

### `sqs:ReceiveMessage`, `sqs:DeleteMessage`, `sqs:ChangeMessageVisibility`

Un attaquant pourrait recevoir, supprimer ou modifier la visibilité des messages dans une file d'attente SQS, entraînant une perte de messages, une corruption des données ou une interruption de service pour les applications qui dépendent de ces messages.
```bash
aws sqs receive-message --queue-url <value>
aws sqs delete-message --queue-url <value> --receipt-handle <value>
aws sqs change-message-visibility --queue-url <value> --receipt-handle <value> --visibility-timeout <value>
```
**Potential Impact**: Voler des informations sensibles, perte de messages, corruption de données et interruption de service pour les applications dépendant des messages affectés.

### `sqs:DeleteQueue`

Un attaquant pourrait supprimer une file SQS entière, entraînant la perte de messages et affectant les applications dépendant de la file.
```bash
aws sqs delete-queue --queue-url <value>
```
**Impact potentiel**: Perte de messages et interruption de service pour les applications utilisant la file d'attente supprimée.

### `sqs:PurgeQueue`

Un attaquant pourrait purger tous les messages d'une file d'attente SQS, entraînant une perte de messages et une possible interruption des applications qui dépendent de ces messages.
```bash
aws sqs purge-queue --queue-url <value>
```
**Impact potentiel**: Perte de messages et interruption de service pour les applications dépendant des messages purgés.

### `sqs:SetQueueAttributes`

Un attaquant pourrait modifier les attributs d'une queue SQS, affectant potentiellement ses performances, sa sécurité ou sa disponibilité.
```bash
aws sqs set-queue-attributes --queue-url <value> --attributes <value>
```
**Impact potentiel** : Des erreurs de configuration pouvant entraîner une dégradation des performances, des problèmes de sécurité ou une disponibilité réduite.

### `sqs:TagQueue` , `sqs:UntagQueue`

Un attaquant pourrait ajouter, modifier ou supprimer des tags des ressources SQS, perturbant l'allocation des coûts de votre organisation, le suivi des ressources et les politiques de contrôle d'accès basées sur les tags.
```bash
aws sqs tag-queue --queue-url <value> --tags Key=<key>,Value=<value>
aws sqs untag-queue --queue-url <value> --tag-keys <key>
```
**Impact potentiel**: Perturbation de l'allocation des coûts, du suivi des ressources et des politiques de contrôle d'accès basées sur les tags.

### `sqs:RemovePermission`

Un attaquant pourrait révoquer les autorisations des utilisateurs ou services légitimes en supprimant les politiques associées à la file d'attente SQS. Cela pourrait entraîner des perturbations du fonctionnement normal des applications qui dépendent de cette file d'attente.
```bash
aws sqs remove-permission --queue-url <value> --label <value>
```
**Impact potentiel**: Perturbation du fonctionnement normal des applications dépendant de la file d'attente en raison de la suppression non autorisée des autorisations.

### Autres SQS Post-Exploitation Techniques

{{#ref}}
aws-sqs-dlq-redrive-exfiltration.md
{{#endref}}

{{#ref}}
aws-sqs-sns-injection.md
{{#endref}}

{{#include ../../../../banners/hacktricks-training.md}}
