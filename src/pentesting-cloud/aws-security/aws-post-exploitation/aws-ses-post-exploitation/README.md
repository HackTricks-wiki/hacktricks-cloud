# AWS - SES Post Exploitation

{{#include ../../../../banners/hacktricks-training.md}}

## SES

Για περισσότερες πληροφορίες δείτε:

{{#ref}}
../../aws-services/aws-ses-enum.md
{{#endref}}

### `ses:SendEmail`

Αποστολή email.
```bash
aws ses send-email --from sender@example.com --destination file://emails.json --message file://message.json
aws sesv2 send-email --from sender@example.com --destination file://emails.json --message file://message.json
```
Ακόμα πρέπει να δοκιμαστεί.

### `ses:SendRawEmail`

Αποστολή ηλεκτρονικού μηνύματος.
```bash
aws ses send-raw-email --raw-message file://message.json
```
Ακόμα δεν έχει δοκιμαστεί.

### `ses:SendTemplatedEmail`

Αποστολή ηλεκτρονικού μηνύματος με βάση ένα πρότυπο.
```bash
aws ses  send-templated-email --source <value> --destination <value> --template <value>
```
Ακόμα δεν έχει δοκιμαστεί.

### `ses:SendBulkTemplatedEmail`

Αποστολή email σε πολλούς παραλήπτες
```bash
aws ses send-bulk-templated-email --source <value> --template <value>
```
Ακόμα δεν έχει δοκιμαστεί.

### `ses:SendBulkEmail`

Αποστέλλει ένα email σε πολλούς παραλήπτες.
```
aws sesv2 send-bulk-email --default-content <value> --bulk-email-entries <value>
```
### `ses:SendBounce`

Αποστολή ενός **bounce email** πάνω σε ένα ληφθέν email (που υποδεικνύει ότι το email δεν μπόρεσε να παραδοθεί). Αυτό μπορεί να γίνει μόνο **έως 24 ώρες μετά τη λήψη** του email.
```bash
aws ses send-bounce --original-message-id <value> --bounce-sender <value> --bounced-recipient-info-list <value>
```
Ακόμα πρέπει να δοκιμαστεί.

### `ses:SendCustomVerificationEmail`

Αυτό θα στείλει ένα εξατομικευμένο ηλεκτρονικό μήνυμα επαλήθευσης. Ενδέχεται επίσης να χρειαστείτε δικαιώματα για να δημιουργήσετε το πρότυπο ηλεκτρονικού μηνύματος.
```bash
aws ses send-custom-verification-email --email-address <value> --template-name <value>
aws sesv2 send-custom-verification-email --email-address <value> --template-name <value>
```
Ακόμα δεν έχει δοκιμαστεί.

## WorkMail pivot για παράκαμψη του SES sandbox

Όταν το `ses:GetAccount` δείχνει ότι ο λογαριασμός βρίσκεται ακόμη στο SES sandbox και το `ses:ListIdentities` δεν επιστρέφει επαληθευμένους αποστολείς, οι επιτιθέμενοι μπορούν **pivot to WorkMail** για άμεση αποστολή (χωρίς sandbox και με υψηλότερα προεπιλεγμένα όρια), δημιουργώντας οργανισμούς, επαληθεύοντας domains και καταχωρίζοντας mailboxes.

{{#ref}}
../aws-workmail-post-exploitation/README.md
{{#endref}}

## Αναφορές

- [Threat Actors Using AWS WorkMail in Phishing Campaigns](https://www.rapid7.com/blog/post/dr-threat-actors-aws-workmail-phishing-campaigns)

{{#include ../../../../banners/hacktricks-training.md}}
