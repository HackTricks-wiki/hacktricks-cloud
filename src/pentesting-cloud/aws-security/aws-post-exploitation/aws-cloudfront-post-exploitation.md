# AWS - CloudFront Post Exploitation

{{#include ../../../banners/hacktricks-training.md}}

## CloudFront

Für weitere Informationen siehe:

{{#ref}}
../aws-services/aws-cloudfront-enum.md
{{#endref}}

### Man-in-the-Middle

Dieser [**Blogbeitrag**](https://medium.com/@adan.alvarez/how-attackers-can-misuse-aws-cloudfront-access-to-make-it-rain-cookies-acf9ce87541c) schlägt einige verschiedene Szenarien vor, in denen eine **Lambda** hinzugefügt (oder modifiziert, wenn sie bereits verwendet wird) werden könnte, um eine **Kommunikation über CloudFront** mit dem Ziel des **Diebstahls** von Benutzerinformationen (wie dem Sitzungs-**Cookie**) und der **Modifizierung** der **Antwort** (Einfügen eines bösartigen JS-Skripts) zu ermöglichen.

#### Szenario 1: MitM, bei dem CloudFront so konfiguriert ist, dass es auf einige HTML-Dateien eines Buckets zugreift

- **Erstelle** die bösartige **Funktion**.
- **Assoziiere** sie mit der CloudFront-Distribution.
- Setze den **Ereignistyp auf "Viewer Response"**.

Durch den Zugriff auf die Antwort könntest du das Cookie der Benutzer stehlen und ein bösartiges JS injizieren.

#### Szenario 2: MitM, bei dem CloudFront bereits eine Lambda-Funktion verwendet

- **Modifiziere den Code** der Lambda-Funktion, um sensible Informationen zu stehlen.

Du kannst den [**tf-Code, um diese Szenarien hier zu reproduzieren**](https://github.com/adanalvarez/AWS-Attack-Scenarios/tree/main) überprüfen.

{{#include ../../../banners/hacktricks-training.md}}
