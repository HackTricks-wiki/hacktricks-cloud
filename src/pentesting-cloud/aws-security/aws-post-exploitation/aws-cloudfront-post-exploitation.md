# AWS - CloudFront ポストエクスプロイテーション

{{#include ../../../banners/hacktricks-training.md}}

## CloudFront

詳細については、以下を確認してください：

{{#ref}}
../aws-services/aws-cloudfront-enum.md
{{#endref}}

### 中間者攻撃

この[**ブログ記事**](https://medium.com/@adan.alvarez/how-attackers-can-misuse-aws-cloudfront-access-to-make-it-rain-cookies-acf9ce87541c)では、**Lambda**を追加（または既に使用されている場合は修正）して、**CloudFrontを通じた通信**でユーザー情報（セッション**クッキー**など）を**盗む**ことや、**レスポンス**を**変更する**（悪意のあるJSスクリプトを注入する）いくつかの異なるシナリオが提案されています。

#### シナリオ 1: CloudFrontがバケットのHTMLにアクセスするように設定されているMitM

- **悪意のある** **関数**を**作成**します。
- CloudFrontディストリビューションに**関連付け**ます。
- **イベントタイプを「Viewer Response」に設定**します。

レスポンスにアクセスすることで、ユーザーのクッキーを盗み、悪意のあるJSを注入できます。

#### シナリオ 2: CloudFrontが既にlambda関数を使用しているMitM

- 機密情報を盗むためにlambda関数の**コードを修正**します。

このシナリオを再現するための[**tfコードはこちらで確認できます**](https://github.com/adanalvarez/AWS-Attack-Scenarios/tree/main)。

{{#include ../../../banners/hacktricks-training.md}}
