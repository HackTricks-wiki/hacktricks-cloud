# AWS - CloudFront ポストエクスプロイテーション

{{#include ../../../banners/hacktricks-training.md}}

## CloudFront

詳細については、以下を確認してください：

{{#ref}}
../aws-services/aws-cloudfront-enum.md
{{#endref}}

### 中間者攻撃

この[**ブログ投稿**](https://medium.com/@adan.alvarez/how-attackers-can-misuse-aws-cloudfront-access-to-make-it-rain-cookies-acf9ce87541c)では、**Lambda**を**CloudFront**を通じた**通信**に追加（または既に使用されている場合は変更）することで、ユーザー情報（セッション**クッキー**など）を**盗む**ことと、**応答**を**変更**する（悪意のあるJSスクリプトを注入する）いくつかの異なるシナリオが提案されています。

#### シナリオ 1: CloudFrontがバケットのHTMLにアクセスするように設定されているMitM

- **悪意のある** **関数**を**作成**します。
- CloudFrontディストリビューションに**関連付け**ます。
- **イベントタイプを「Viewer Response」に設定**します。

応答にアクセスすることで、ユーザーのクッキーを盗み、悪意のあるJSを注入できます。

#### シナリオ 2: CloudFrontが既にlambda関数を使用しているMitM

- 機密情報を盗むためにlambda関数の**コードを変更**します。

このシナリオを再現するための[**tfコードはこちら**](https://github.com/adanalvarez/AWS-Attack-Scenarios/tree/main)で確認できます。

{{#include ../../../banners/hacktricks-training.md}}
