# AWS - CloudFront Pós Exploração

{{#include ../../../banners/hacktricks-training.md}}

## CloudFront

Para mais informações, consulte:

{{#ref}}
../aws-services/aws-cloudfront-enum.md
{{#endref}}

### Homem-no-Meio

Este [**post de blog**](https://medium.com/@adan.alvarez/how-attackers-can-misuse-aws-cloudfront-access-to-make-it-rain-cookies-acf9ce87541c) propõe alguns cenários diferentes onde uma **Lambda** poderia ser adicionada (ou modificada se já estiver sendo usada) em uma **comunicação através do CloudFront** com o propósito de **roubar** informações do usuário (como o **cookie** da sessão) e **modificar** a **resposta** (injetando um script JS malicioso).

#### cenário 1: MitM onde o CloudFront está configurado para acessar algum HTML de um bucket

- **Criar** a **função** maliciosa.
- **Associá-la** à distribuição do CloudFront.
- Definir o **tipo de evento como "Resposta do Visualizador"**.

Acessando a resposta, você poderia roubar o cookie dos usuários e injetar um JS malicioso.

#### cenário 2: MitM onde o CloudFront já está usando uma função lambda

- **Modificar o código** da função lambda para roubar informações sensíveis

Você pode verificar o [**código tf para recriar esses cenários aqui**](https://github.com/adanalvarez/AWS-Attack-Scenarios/tree/main).

{{#include ../../../banners/hacktricks-training.md}}
