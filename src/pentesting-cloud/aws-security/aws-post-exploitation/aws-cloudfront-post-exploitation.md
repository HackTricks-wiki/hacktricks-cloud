# AWS - CloudFront Post Exploitation

{{#include ../../../banners/hacktricks-training.md}}

## CloudFront

자세한 정보는 다음을 확인하세요:

{{#ref}}
../aws-services/aws-cloudfront-enum.md
{{#endref}}

### Man-in-the-Middle

이 [**블로그 게시물**](https://medium.com/@adan.alvarez/how-attackers-can-misuse-aws-cloudfront-access-to-make-it-rain-cookies-acf9ce87541c)은 **Lambda**가 **CloudFront를 통한 통신**에 추가되거나 (이미 사용 중인 경우 수정됨) 사용자 정보를 **훔치기** 위한 몇 가지 다른 시나리오를 제안합니다 (세션 **쿠키**와 같은) 및 **응답**을 **수정**합니다 (악성 JS 스크립트 주입).

#### 시나리오 1: CloudFront가 버킷의 일부 HTML에 접근하도록 구성된 MitM

- **악성** **함수**를 **생성**합니다.
- CloudFront 배포와 **연결**합니다.
- **이벤트 유형을 "Viewer Response"**로 설정합니다.

응답에 접근하여 사용자의 쿠키를 훔치고 악성 JS를 주입할 수 있습니다.

#### 시나리오 2: CloudFront가 이미 lambda 함수를 사용하는 MitM

- 민감한 정보를 훔치기 위해 lambda 함수의 **코드를 수정**합니다.

이 시나리오를 재현하기 위한 [**tf 코드**](https://github.com/adanalvarez/AWS-Attack-Scenarios/tree/main)를 확인할 수 있습니다.

{{#include ../../../banners/hacktricks-training.md}}
