# AWS - CloudFront Post Exploitation

{{#include ../../../banners/hacktricks-training.md}}

## CloudFront

Для отримання додаткової інформації перегляньте:

{{#ref}}
../aws-services/aws-cloudfront-enum.md
{{#endref}}

### Man-in-the-Middle

Цей [**блог пост**](https://medium.com/@adan.alvarez/how-attackers-can-misuse-aws-cloudfront-access-to-make-it-rain-cookies-acf9ce87541c) пропонує кілька різних сценаріїв, де **Lambda** може бути додана (або змінена, якщо вже використовується) у **зв'язку через CloudFront** з метою **викрадення** інформації користувача (такої як **cookie** сесії) та **модифікації** **відповіді** (впровадження шкідливого JS скрипта).

#### сценарій 1: MitM, де CloudFront налаштовано для доступу до деякого HTML з бакету

- **Створіть** шкідливу **функцію**.
- **Ассоціюйте** її з розподілом CloudFront.
- Встановіть **тип події на "Viewer Response"**.

Отримуючи відповідь, ви можете вкрасти cookie користувачів і впровадити шкідливий JS.

#### сценарій 2: MitM, де CloudFront вже використовує функцію lambda

- **Змініть код** функції lambda, щоб вкрасти чутливу інформацію

Ви можете перевірити [**tf код для відтворення цих сценаріїв тут**](https://github.com/adanalvarez/AWS-Attack-Scenarios/tree/main).

{{#include ../../../banners/hacktricks-training.md}}
