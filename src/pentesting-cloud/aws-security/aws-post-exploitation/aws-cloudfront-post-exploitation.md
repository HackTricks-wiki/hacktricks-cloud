# AWS - CloudFront 后期利用

{{#include ../../../banners/hacktricks-training.md}}

## CloudFront

有关更多信息，请查看：

{{#ref}}
../aws-services/aws-cloudfront-enum.md
{{#endref}}

### 中间人攻击

这篇 [**博客文章**](https://medium.com/@adan.alvarez/how-attackers-can-misuse-aws-cloudfront-access-to-make-it-rain-cookies-acf9ce87541c) 提出了几种不同的场景，其中可以将 **Lambda** 添加（或在已使用的情况下进行修改）到 **通过 CloudFront 的通信中**，目的是 **窃取** 用户信息（如会话 **cookie**）并 **修改** **响应**（注入恶意 JS 脚本）。

#### 场景 1：中间人攻击，其中 CloudFront 配置为访问某个存储桶的 HTML

- **创建** 恶意 **函数**。
- **将其与 CloudFront 分发关联**。
- 将 **事件类型设置为 "Viewer Response"**。

访问响应后，您可以窃取用户的 cookie 并注入恶意 JS。

#### 场景 2：中间人攻击，其中 CloudFront 已在使用 lambda 函数

- **修改 lambda 函数的代码** 以窃取敏感信息

您可以在这里查看 [**tf 代码以重现这些场景**](https://github.com/adanalvarez/AWS-Attack-Scenarios/tree/main)。

{{#include ../../../banners/hacktricks-training.md}}
