# AWS - Lambda Post Exploitation

{{#include ../../../../banners/hacktricks-training.md}}

## Lambda

Για περισσότερες πληροφορίες ελέγξτε:

{{#ref}}
../../aws-services/aws-lambda-enum.md
{{#endref}}

### Εξαγωγή Διαπιστευτηρίων Lambda

Η Lambda χρησιμοποιεί μεταβλητές περιβάλλοντος για να εισάγει διαπιστευτήρια κατά την εκτέλεση. Αν μπορείτε να αποκτήσετε πρόσβαση σε αυτές (διαβάζοντας το `/proc/self/environ` ή χρησιμοποιώντας τη λειτουργία που είναι ευάλωτη), μπορείτε να τις χρησιμοποιήσετε. Βρίσκονται στα προεπιλεγμένα ονόματα μεταβλητών `AWS_SESSION_TOKEN`, `AWS_SECRET_ACCESS_KEY` και `AWS_ACCESS_KEY_ID`.

Από προεπιλογή, αυτές θα έχουν πρόσβαση για να γράφουν σε μια ομάδα καταγραφής cloudwatch (το όνομα της οποίας αποθηκεύεται στο `AWS_LAMBDA_LOG_GROUP_NAME`), καθώς και για να δημιουργούν αυθαίρετες ομάδες καταγραφής, ωστόσο οι λειτουργίες lambda συχνά έχουν περισσότερες άδειες που έχουν ανατεθεί με βάση τη σκοπούμενη χρήση τους.

### Κλοπή Αιτημάτων URL Άλλων Lambda

Αν ένας επιτιθέμενος καταφέρει με κάποιο τρόπο να αποκτήσει RCE μέσα σε μια Lambda, θα είναι σε θέση να κλέψει τα HTTP αιτήματα άλλων χρηστών προς τη lambda. Αν τα αιτήματα περιέχουν ευαίσθητες πληροφορίες (cookies, διαπιστευτήρια...), θα είναι σε θέση να τα κλέψει.

{{#ref}}
aws-warm-lambda-persistence.md
{{#endref}}

### Κλοπή Αιτημάτων URL Άλλων Lambda & Αιτημάτων Επεκτάσεων

Καταχρώντας τις Lambda Layers είναι επίσης δυνατό να καταχραστείτε τις επεκτάσεις και να παραμείνετε στη lambda αλλά και να κλέψετε και να τροποποιήσετε αιτήματα.

{{#ref}}
../../aws-persistence/aws-lambda-persistence/aws-abusing-lambda-extensions.md
{{#endref}}

{{#include ../../../../banners/hacktricks-training.md}}
