# AWS - Lambda 后期利用

{{#include ../../../../banners/hacktricks-training.md}}

## Lambda

有关更多信息，请查看：

{{#ref}}
../../aws-services/aws-lambda-enum.md
{{#endref}}

### 提取 Lambda 凭证

Lambda 使用环境变量在运行时注入凭证。如果您可以访问它们（通过读取 `/proc/self/environ` 或使用易受攻击的函数本身），您可以自己使用它们。它们位于默认变量名称 `AWS_SESSION_TOKEN`、`AWS_SECRET_ACCESS_KEY` 和 `AWS_ACCESS_KEY_ID` 中。

默认情况下，这些将有权写入 CloudWatch 日志组（其名称存储在 `AWS_LAMBDA_LOG_GROUP_NAME` 中），以及创建任意日志组，然而，Lambda 函数通常根据其预期用途分配更多权限。

### 偷取其他 Lambda URL 请求

如果攻击者以某种方式在 Lambda 内部获得 RCE，他将能够窃取其他用户对 Lambda 的 HTTP 请求。如果请求包含敏感信息（cookies、凭证等），他将能够窃取它们。

{{#ref}}
aws-warm-lambda-persistence.md
{{#endref}}

### 偷取其他 Lambda URL 请求和扩展请求

滥用 Lambda Layers 也可以滥用扩展并在 Lambda 中持久化，同时窃取和修改请求。

{{#ref}}
../../aws-persistence/aws-lambda-persistence/aws-abusing-lambda-extensions.md
{{#endref}}

{{#include ../../../../banners/hacktricks-training.md}}
