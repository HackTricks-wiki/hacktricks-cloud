# AWS - Lambda Post Exploitation

{{#include ../../../../banners/hacktricks-training.md}}

## Lambda

자세한 정보는 다음을 확인하세요:

{{#ref}}
../../aws-services/aws-lambda-enum.md
{{#endref}}

### Lambda 자격 증명 유출

Lambda는 런타임에 자격 증명을 주입하기 위해 환경 변수를 사용합니다. 이들에 접근할 수 있다면(`/proc/self/environ`을 읽거나 취약한 함수를 사용하여), 자신이 사용할 수 있습니다. 이들은 기본 변수 이름 `AWS_SESSION_TOKEN`, `AWS_SECRET_ACCESS_KEY`, `AWS_ACCESS_KEY_ID`에 저장됩니다.

기본적으로, 이들은 클라우드워치 로그 그룹에 쓰기 권한을 가지며(그 이름은 `AWS_LAMBDA_LOG_GROUP_NAME`에 저장됨), 임의의 로그 그룹을 생성할 수 있습니다. 그러나 Lambda 함수는 종종 의도된 사용에 따라 더 많은 권한이 할당됩니다.

### 다른 사용자의 Lambda URL 요청 훔치기

공격자가 Lambda 내부에서 RCE를 얻는 데 성공하면 다른 사용자의 Lambda에 대한 HTTP 요청을 훔칠 수 있습니다. 요청에 민감한 정보(쿠키, 자격 증명 등)가 포함되어 있다면, 이를 훔칠 수 있습니다.

{{#ref}}
aws-warm-lambda-persistence.md
{{#endref}}

### 다른 사용자의 Lambda URL 요청 및 확장 요청 훔치기

Lambda Layers를 악용하면 확장을 악용하고 Lambda에 지속할 수 있을 뿐만 아니라 요청을 훔치고 수정할 수 있습니다.

{{#ref}}
../../aws-persistence/aws-lambda-persistence/aws-abusing-lambda-extensions.md
{{#endref}}

{{#include ../../../../banners/hacktricks-training.md}}
