# AWS - Lambda Pós Exploração

{{#include ../../../../banners/hacktricks-training.md}}

## Lambda

Para mais informações, consulte:

{{#ref}}
../../aws-services/aws-lambda-enum.md
{{#endref}}

### Exfiltrar Credenciais do Lambda

O Lambda usa variáveis de ambiente para injetar credenciais em tempo de execução. Se você conseguir acessá-las (lendo `/proc/self/environ` ou usando a própria função vulnerável), poderá usá-las. Elas estão nos nomes de variáveis padrão `AWS_SESSION_TOKEN`, `AWS_SECRET_ACCESS_KEY` e `AWS_ACCESS_KEY_ID`.

Por padrão, essas terão acesso para escrever em um grupo de logs do CloudWatch (o nome do qual está armazenado em `AWS_LAMBDA_LOG_GROUP_NAME`), bem como para criar grupos de logs arbitrários, no entanto, funções lambda frequentemente têm mais permissões atribuídas com base em seu uso pretendido.

### Roubar Requisições de URL de Outros Lambdas

Se um atacante conseguir de alguma forma obter RCE dentro de um Lambda, ele poderá roubar as requisições HTTP de outros usuários para o lambda. Se as requisições contiverem informações sensíveis (cookies, credenciais...), ele poderá roubá-las.

{{#ref}}
aws-warm-lambda-persistence.md
{{#endref}}

### Roubar Requisições de URL de Outros Lambdas & Requisições de Extensões

Abusando de Camadas do Lambda, também é possível abusar de extensões e persistir no lambda, mas também roubar e modificar requisições.

{{#ref}}
../../aws-persistence/aws-lambda-persistence/aws-abusing-lambda-extensions.md
{{#endref}}

{{#include ../../../../banners/hacktricks-training.md}}
