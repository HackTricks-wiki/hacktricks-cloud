# AWS - Lambda Post Exploitation

{{#include ../../../../banners/hacktricks-training.md}}

## Lambda

詳細については、次を確認してください:

{{#ref}}
../../aws-services/aws-lambda-enum.md
{{#endref}}

### Lambdaの資格情報を抽出する

Lambdaは、実行時に資格情報を注入するために環境変数を使用します。これらにアクセスできる場合（`/proc/self/environ`を読み取るか、脆弱な関数自体を使用することによって）、自分で使用することができます。これらはデフォルトの変数名 `AWS_SESSION_TOKEN`、`AWS_SECRET_ACCESS_KEY`、および `AWS_ACCESS_KEY_ID` に存在します。

デフォルトでは、これらはCloudWatchロググループに書き込むアクセス権を持ちます（その名前は `AWS_LAMBDA_LOG_GROUP_NAME` に保存されています）、また任意のロググループを作成することもできますが、Lambda関数はその意図された使用に基づいてより多くの権限が割り当てられていることがよくあります。

### 他のLambdaのURLリクエストを盗む

攻撃者が何らかの方法でLambda内でRCEを取得した場合、他のユーザーのHTTPリクエストをLambdaから盗むことができます。リクエストに機密情報（クッキー、資格情報など）が含まれている場合、それを盗むことができます。

{{#ref}}
aws-warm-lambda-persistence.md
{{#endref}}

### 他のLambdaのURLリクエストと拡張リクエストを盗む

Lambda Layersを悪用することで、拡張機能を悪用し、Lambdaに持続させるだけでなく、リクエストを盗んだり変更したりすることも可能です。

{{#ref}}
../../aws-persistence/aws-lambda-persistence/aws-abusing-lambda-extensions.md
{{#endref}}

{{#include ../../../../banners/hacktricks-training.md}}
