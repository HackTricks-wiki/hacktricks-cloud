# AWS - Lambda Post Exploitation

{{#include ../../../../banners/hacktricks-training.md}}

## Lambda

Pour plus d'informations, consultez :

{{#ref}}
../../aws-services/aws-lambda-enum.md
{{#endref}}

### Exfiltrer les identifiants Lambda

Lambda utilise des variables d'environnement pour injecter des identifiants à l'exécution. Si vous pouvez y accéder (en lisant `/proc/self/environ` ou en utilisant la fonction vulnérable elle-même), vous pouvez les utiliser vous-même. Ils se trouvent dans les noms de variables par défaut `AWS_SESSION_TOKEN`, `AWS_SECRET_ACCESS_KEY` et `AWS_ACCESS_KEY_ID`.

Par défaut, ceux-ci auront accès à écrire dans un groupe de journaux cloudwatch (dont le nom est stocké dans `AWS_LAMBDA_LOG_GROUP_NAME`), ainsi qu'à créer des groupes de journaux arbitraires, cependant, les fonctions lambda ont souvent plus de permissions assignées en fonction de leur utilisation prévue.

### Voler les requêtes URL Lambda d'autres utilisateurs

Si un attaquant parvient d'une manière ou d'une autre à obtenir un RCE à l'intérieur d'une Lambda, il pourra voler les requêtes HTTP d'autres utilisateurs vers la lambda. Si les requêtes contiennent des informations sensibles (cookies, identifiants...), il pourra les voler.

{{#ref}}
aws-warm-lambda-persistence.md
{{#endref}}

### Voler les requêtes URL Lambda d'autres utilisateurs et les requêtes d'extensions

En abusant des Lambda Layers, il est également possible d'abuser des extensions et de persister dans la lambda, mais aussi de voler et de modifier des requêtes.

{{#ref}}
../../aws-persistence/aws-lambda-persistence/aws-abusing-lambda-extensions.md
{{#endref}}

{{#include ../../../../banners/hacktricks-training.md}}
