# AWS Lambda – Runtime Pinning/Rollback Abuse via PutRuntimeManagementConfig

{{#include ../../../../banners/hacktricks-training.md}}

Καταχρηστείτε την `lambda:PutRuntimeManagementConfig` για να pin μια function σε μια συγκεκριμένη έκδοση runtime (Manual) ή να παγώσετε τις ενημερώσεις (FunctionUpdate). Αυτό διατηρεί τη συμβατότητα με κακόβουλα layers/wrappers και μπορεί να κρατήσει τη function σε ένα ξεπερασμένο, ευάλωτο runtime για να βοηθήσει exploitation και μακροχρόνια persistence.

Απαιτήσεις: `lambda:InvokeFunction`, `logs:FilterLogEvents`, `lambda:PutRuntimeManagementConfig`, `lambda:GetRuntimeManagementConfig`.

Παράδειγμα (us-east-1):
- Εκτέλεση: `aws lambda invoke --function-name  /tmp/ping.json --payload {} --region us-east-1 > /dev/null; sleep 5`
- Πάγωμα ενημερώσεων: `aws lambda put-runtime-management-config --function-name  --update-runtime-on FunctionUpdate --region us-east-1`
- Επαλήθευση: `aws lambda get-runtime-management-config --function-name  --region us-east-1`

Προαιρετικά, pin σε μια συγκεκριμένη έκδοση runtime εξάγοντας το Runtime Version ARN από τα INIT_START logs και χρησιμοποιώντας `--update-runtime-on Manual --runtime-version-arn <arn>`.

{{#include ../../../../banners/hacktricks-training.md}}
