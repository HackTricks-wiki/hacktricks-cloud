# AWS Lambda – Runtime Pinning/Rollback Abuse via PutRuntimeManagementConfig

{{#include ../../../../banners/hacktricks-training.md}}

`lambda:PutRuntimeManagementConfig` का दुरुपयोग करके किसी function को एक विशिष्ट runtime version (Manual) पर pin करें या updates को freeze (FunctionUpdate) करें। यह malicious layers/wrappers के साथ compatibility बनाए रखता है और exploitation तथा long-term persistence में मदद के लिये function को एक पुराने, vulnerable runtime पर बनाए रख सकता है।

आवश्यकताएँ: `lambda:InvokeFunction`, `logs:FilterLogEvents`, `lambda:PutRuntimeManagementConfig`, `lambda:GetRuntimeManagementConfig`.

उदाहरण (us-east-1):
- Invoke: `aws lambda invoke --function-name  /tmp/ping.json --payload {} --region us-east-1 > /dev/null; sleep 5`
- अपडेट्स फ्रीज़ करें: `aws lambda put-runtime-management-config --function-name  --update-runtime-on FunctionUpdate --region us-east-1`
- सत्यापित करें: `aws lambda get-runtime-management-config --function-name  --region us-east-1`

वैकल्पिक रूप से Runtime Version ARN को INIT_START logs से निकालकर किसी विशिष्ट runtime version पर pin कर सकते हैं और `--update-runtime-on Manual --runtime-version-arn <arn>` का उपयोग कर सकते हैं।

{{#include ../../../../banners/hacktricks-training.md}}
