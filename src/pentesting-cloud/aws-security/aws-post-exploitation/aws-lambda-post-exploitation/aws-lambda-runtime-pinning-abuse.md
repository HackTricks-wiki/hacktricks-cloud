# AWS Lambda â€“ Runtime Pinning/Rollback Abuse via PutRuntimeManagementConfig

{{#include ../../../../banners/hacktricks-training.md}}

Abuse `lambda:PutRuntimeManagementConfig` to pin a function to a specific runtime version (Manual) or freeze updates (FunctionUpdate). Hii inahifadhi ulinganifu na layers/wrappers zenye madhumuni mabaya na inaweza kuiacha function kwenye runtime iliyokuwa ya zamani na yenye udhaifu ili kusaidia exploitation na long-term persistence.

Mahitaji: `lambda:InvokeFunction`, `logs:FilterLogEvents`, `lambda:PutRuntimeManagementConfig`, `lambda:GetRuntimeManagementConfig`.

Mfano (us-east-1):
- Invoke: `aws lambda invoke --function-name  /tmp/ping.json --payload {} --region us-east-1 > /dev/null; sleep 5`
- Freeze updates: `aws lambda put-runtime-management-config --function-name  --update-runtime-on FunctionUpdate --region us-east-1`
- Verify: `aws lambda get-runtime-management-config --function-name  --region us-east-1`

Kwa hiari weka pin kwenye toleo maalum la runtime kwa kutoa Runtime Version ARN kutoka kwa INIT_START logs na kutumia `--update-runtime-on Manual --runtime-version-arn <arn>`.

{{#include ../../../../banners/hacktricks-training.md}}
