# AWS Lambda – Runtime Pinning/Rollback Abuse via PutRuntimeManagementConfig

{{#include ../../../../banners/hacktricks-training.md}}

Abuse `lambda:PutRuntimeManagementConfig`를 사용해 함수를 특정 런타임 버전(Manual)에 고정하거나 업데이트를 중단(FunctionUpdate)할 수 있습니다. 이렇게 하면 악성 layer/wrappers와의 호환성이 유지되며, 함수가 오래된 취약한 런타임에 머물러 공격 및 장기적인 지속성에 유리하게 작용할 수 있습니다.

Requirements: `lambda:InvokeFunction`, `logs:FilterLogEvents`, `lambda:PutRuntimeManagementConfig`, `lambda:GetRuntimeManagementConfig`.

Example (us-east-1):
- 호출: `aws lambda invoke --function-name  /tmp/ping.json --payload {} --region us-east-1 > /dev/null; sleep 5`
- 업데이트 고정: `aws lambda put-runtime-management-config --function-name  --update-runtime-on FunctionUpdate --region us-east-1`
- 검증: `aws lambda get-runtime-management-config --function-name  --region us-east-1`

선택적으로 INIT_START 로그에서 Runtime Version ARN을 추출하고 `--update-runtime-on Manual --runtime-version-arn <arn>`를 사용해 특정 런타임 버전에 고정할 수 있습니다.

{{#include ../../../../banners/hacktricks-training.md}}
