# AWS - SNS Post Exploitation

{{#include ../../../../banners/hacktricks-training.md}}

## SNS

更多信息：

{{#ref}}
../../aws-services/aws-sns-enum.md
{{#endref}}

### 中断消息

在某些情况下，SNS topics 被用来将消息发送到正在被监控的平台（电子邮件、slack messages 等）。如果攻击者阻止发送那些用于在云中提醒其存在的消息，他可能会保持不被发现。

### `sns:DeleteTopic`

攻击者可能会删除整个 SNS topic，导致消息丢失并影响依赖该 topic 的应用程序。
```bash
aws sns delete-topic --topic-arn <value>
```
**潜在影响**：使用已删除主题的应用程序可能出现消息丢失和服务中断。

### `sns:Publish`

攻击者可能向 SNS 主题发送恶意或不需要的消息，可能导致数据损坏、触发意外操作或耗尽资源。
```bash
aws sns publish --topic-arn <value> --message <value>
```
**Potential Impact**: 数据损坏、非预期操作或资源耗尽。

### `sns:SetTopicAttributes`

攻击者可能修改 SNS topic 的属性，可能影响其性能、安全性或可用性。
```bash
aws sns set-topic-attributes --topic-arn <value> --attribute-name <value> --attribute-value <value>
```
**潜在影响**: 错误配置可能导致性能下降、安全问题或可用性降低。

### `sns:Subscribe` , `sns:Unsubscribe`

攻击者可能订阅或取消订阅 SNS 主题，可能因此未授权访问消息或干扰依赖该主题的应用程序的正常运行。
```bash
aws sns subscribe --topic-arn <value> --protocol <value> --endpoint <value>
aws sns unsubscribe --subscription-arn <value>
```
**潜在影响**: 未经授权访问消息，依赖受影响 SNS topic 的应用程序服务中断。

### `sns:AddPermission` , `sns:RemovePermission`

攻击者可以向未授权的用户或服务授予对 SNS topic 的访问权限，或撤销合法用户的权限，从而导致依赖该 topic 的应用程序正常运行中断。
```bash
aws sns add-permission --topic-arn <value> --label <value> --aws-account-id <value> --action-name <value>
aws sns remove-permission --topic-arn <value> --label <value>
```
**Potential Impact**: 未经授权访问主题、消息泄露或主题被未授权用户或服务操控，导致依赖该主题的应用程序正常功能中断。

### `sns:TagResource` , `sns:UntagResource`

攻击者可能会向 SNS 资源添加、修改或删除标签，从而破坏组织基于标签的成本分配、资源追踪和访问控制策略。
```bash
aws sns tag-resource --resource-arn <value> --tags Key=<key>,Value=<value>
aws sns untag-resource --resource-arn <value> --tag-keys <key>
```
**潜在影响**: 导致成本分配、资源跟踪和基于标签的访问控制策略中断。

### 更多 SNS Post-Exploitation Techniques

{{#ref}}
aws-sns-data-protection-bypass.md
{{#endref}}

{{#ref}}
aws-sns-fifo-replay-exfil.md
{{#endref}}

{{#ref}}
aws-sns-firehose-exfil.md
{{#endref}}

{{#include ../../../../banners/hacktricks-training.md}}
