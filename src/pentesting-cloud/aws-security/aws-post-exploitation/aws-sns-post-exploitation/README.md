# AWS - SNS Post Exploitation

{{#include ../../../../banners/hacktricks-training.md}}

## SNS

For more information:

{{#ref}}
../../aws-services/aws-sns-enum.md
{{#endref}}

### メッセージの遮断

多くの場合、SNSトピックは監視されているプラットフォーム（電子メール、slackメッセージなど）へメッセージを送信するために使用されます。攻撃者がクラウド内での存在を知らせるメッセージの送信を阻止できれば、検出されずに留まる可能性があります。

### `sns:DeleteTopic`

攻撃者はSNSトピック全体を削除でき、メッセージの損失を引き起こし、そのトピックに依存しているアプリケーションに影響を与える可能性があります。
```bash
aws sns delete-topic --topic-arn <value>
```
**Potential Impact**: 削除されたトピックを使用するアプリケーションでのメッセージの喪失およびサービス中断。

### `sns:Publish`

攻撃者は悪意のある、または望ましくないメッセージを SNS トピックに送信し、データの破損、意図しないアクションの発動、またはリソースの枯渇を引き起こす可能性があります。
```bash
aws sns publish --topic-arn <value> --message <value>
```
**潜在的な影響**: データの破損、意図しない操作、またはリソース枯渇。

### `sns:SetTopicAttributes`

攻撃者は SNS topic の属性を変更でき、その結果パフォーマンス、セキュリティ、または可用性に影響を与える可能性があります。
```bash
aws sns set-topic-attributes --topic-arn <value> --attribute-name <value> --attribute-value <value>
```
**潜在的影響**: 誤設定によりパフォーマンス低下、セキュリティ問題、または可用性の低下を招く可能性があります。

### `sns:Subscribe` , `sns:Unsubscribe`

攻撃者はSNSトピックに対して購読や購読解除を行い、メッセージへの不正アクセスを得たり、そのトピックに依存するアプリケーションの正常な動作を妨害したりする可能性があります。
```bash
aws sns subscribe --topic-arn <value> --protocol <value> --endpoint <value>
aws sns unsubscribe --subscription-arn <value>
```
**潜在的な影響**: メッセージへの不正アクセス、影響を受けた topic に依存するアプリケーションのサービス中断。

### `sns:AddPermission` , `sns:RemovePermission`

攻撃者は不正なユーザーやサービスにSNS topicへのアクセスを許可したり、正当なユーザーの権限を取り消したりすることで、topic に依存するアプリケーションの正常な動作を妨げる可能性があります。
```bash
aws sns add-permission --topic-arn <value> --label <value> --aws-account-id <value> --action-name <value>
aws sns remove-permission --topic-arn <value> --label <value>
```
**Potential Impact**: トピックへの不正アクセス、メッセージの露出、または不正なユーザーやサービスによるトピックの改ざん、トピックに依存するアプリケーションの通常動作の阻害。

### `sns:TagResource` , `sns:UntagResource`

攻撃者はSNSリソースにタグを追加、変更、または削除でき、これにより組織のコスト配分、リソース追跡、およびタグに基づくアクセス制御ポリシーが乱される可能性があります。
```bash
aws sns tag-resource --resource-arn <value> --tags Key=<key>,Value=<value>
aws sns untag-resource --resource-arn <value> --tag-keys <key>
```
**潜在的影響**: コスト配分、リソース追跡、タグベースのアクセス制御ポリシーの混乱。

### More SNS Post-Exploitation Techniques

{{#ref}}
aws-sns-data-protection-bypass.md
{{#endref}}

{{#ref}}
aws-sns-fifo-replay-exfil.md
{{#endref}}

{{#ref}}
aws-sns-firehose-exfil.md
{{#endref}}

{{#include ../../../../banners/hacktricks-training.md}}
