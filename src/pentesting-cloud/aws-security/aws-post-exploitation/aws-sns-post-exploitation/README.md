# AWS - SNS Post Exploitation

{{#include ../../../../banners/hacktricks-training.md}}

## SNS

Για περισσότερες πληροφορίες:

{{#ref}}
../../aws-services/aws-sns-enum.md
{{#endref}}

### Διακοπή μηνυμάτων

Σε πολλές περιπτώσεις, SNS topics χρησιμοποιούνται για την αποστολή μηνυμάτων σε πλατφόρμες που παρακολουθούνται (emails, slack messages...). Αν ένας επιτιθέμενος αποτρέψει την αποστολή των μηνυμάτων που ειδοποιούν για την παρουσία του στο cloud, μπορεί να παραμείνει αόρατος.

### `sns:DeleteTopic`

Ένας επιτιθέμενος θα μπορούσε να διαγράψει ολόκληρο ένα SNS topic, προκαλώντας απώλεια μηνυμάτων και επηρεάζοντας εφαρμογές που βασίζονται στο topic.
```bash
aws sns delete-topic --topic-arn <value>
```
**Potential Impact**: Απώλεια μηνυμάτων και διακοπή υπηρεσίας για τις εφαρμογές που χρησιμοποιούν το διαγραμμένο topic.

### `sns:Publish`

Ένας επιτιθέμενος θα μπορούσε να στείλει κακόβουλα ή ανεπιθύμητα μηνύματα στο SNS topic, ενδεχομένως προκαλώντας διαφθορά δεδομένων, ενεργοποίηση ανεπιθύμητων ενεργειών ή εξάντληση πόρων.
```bash
aws sns publish --topic-arn <value> --message <value>
```
**Potential Impact**: Διαφθορά δεδομένων, ανεπιθύμητες ενέργειες ή εξάντληση πόρων.

### `sns:SetTopicAttributes`

Ένας επιτιθέμενος θα μπορούσε να τροποποιήσει τα χαρακτηριστικά ενός SNS topic, επηρεάζοντας ενδεχομένως την απόδοσή του, την ασφάλειά του ή τη διαθεσιμότητά του.
```bash
aws sns set-topic-attributes --topic-arn <value> --attribute-name <value> --attribute-value <value>
```
**Πιθανός αντίκτυπος**: Λανθασμένες ρυθμίσεις που οδηγούν σε υποβαθμισμένη απόδοση, θέματα ασφάλειας ή μειωμένη διαθεσιμότητα.

### `sns:Subscribe` , `sns:Unsubscribe`

Ενας επιτιθέμενος θα μπορούσε να εγγραφεί ή να διαγραφεί από ένα SNS topic, αποκτώντας ενδεχομένως μη εξουσιοδοτημένη πρόσβαση σε μηνύματα ή διαταράσσοντας την κανονική λειτουργία εφαρμογών που βασίζονται στο topic.
```bash
aws sns subscribe --topic-arn <value> --protocol <value> --endpoint <value>
aws sns unsubscribe --subscription-arn <value>
```
**Πιθανές Επιπτώσεις**: Μη εξουσιοδοτημένη πρόσβαση στα μηνύματα, διακοπή υπηρεσίας για εφαρμογές που βασίζονται στο επηρεαζόμενο topic.

### `sns:AddPermission` , `sns:RemovePermission`

Ένας επιτιθέμενος θα μπορούσε να παραχωρήσει σε μη εξουσιοδοτημένους χρήστες ή υπηρεσίες πρόσβαση σε ένα SNS topic, ή να ανακαλέσει δικαιώματα από νόμιμους χρήστες, προκαλώντας διαταραχές στην κανονική λειτουργία των εφαρμογών που βασίζονται στο topic.
```bash
aws sns add-permission --topic-arn <value> --label <value> --aws-account-id <value> --action-name <value>
aws sns remove-permission --topic-arn <value> --label <value>
```
**Potential Impact**: Μη εξουσιοδοτημένη πρόσβαση στο topic, έκθεση μηνυμάτων, ή χειραγώγηση του topic από μη εξουσιοδοτημένους χρήστες ή υπηρεσίες, διακοπή της κανονικής λειτουργίας των εφαρμογών που εξαρτώνται από το topic.

### `sns:TagResource` , `sns:UntagResource`

Ένας επιτιθέμενος θα μπορούσε να προσθέσει, να τροποποιήσει ή να αφαιρέσει tags από πόρους SNS, διαταράσσοντας την κατανομή κόστους του οργανισμού σας, την παρακολούθηση πόρων και τις πολιτικές ελέγχου πρόσβασης βάσει tags.
```bash
aws sns tag-resource --resource-arn <value> --tags Key=<key>,Value=<value>
aws sns untag-resource --resource-arn <value> --tag-keys <key>
```
**Πιθανός Αντίκτυπος**: Διαταραχή της κατανομής κόστους, της παρακολούθησης πόρων και των πολιτικών ελέγχου πρόσβασης βάσει ετικετών.

### Περισσότερες SNS Post-Exploitation Techniques

{{#ref}}
aws-sns-data-protection-bypass.md
{{#endref}}

{{#ref}}
aws-sns-fifo-replay-exfil.md
{{#endref}}

{{#ref}}
aws-sns-firehose-exfil.md
{{#endref}}

{{#include ../../../../banners/hacktricks-training.md}}
