# AWS - SNS Post Exploitation

{{#include ../../../banners/hacktricks-training.md}}

## SNS

Για περισσότερες πληροφορίες:

{{#ref}}
../aws-services/aws-sns-enum.md
{{#endref}}

### Διακοπή Μηνυμάτων

Σε πολλές περιπτώσεις, τα θέματα SNS χρησιμοποιούνται για την αποστολή μηνυμάτων σε πλατφόρμες που παρακολουθούνται (emails, slack messages...). Εάν ένας επιτιθέμενος αποτρέψει την αποστολή των μηνυμάτων που προειδοποιούν για την παρουσία του στο cloud, θα μπορούσε να παραμείνει αόρατος.

### `sns:DeleteTopic`

Ένας επιτιθέμενος θα μπορούσε να διαγράψει ολόκληρο το θέμα SNS, προκαλώντας απώλεια μηνυμάτων και επηρεάζοντας τις εφαρμογές που βασίζονται στο θέμα.
```bash
aws sns delete-topic --topic-arn <value>
```
**Πιθανές Επιπτώσεις**: Απώλεια μηνυμάτων και διακοπή υπηρεσίας για εφαρμογές που χρησιμοποιούν το διαγραμμένο θέμα.

### `sns:Publish`

Ένας επιτιθέμενος θα μπορούσε να στείλει κακόβουλα ή ανεπιθύμητα μηνύματα στο θέμα SNS, ενδεχομένως προκαλώντας διαφθορά δεδομένων, ενεργοποιώντας μη προγραμματισμένες ενέργειες ή εξαντλώντας πόρους.
```bash
aws sns publish --topic-arn <value> --message <value>
```
**Πιθανές Επιπτώσεις**: Διαφθορά δεδομένων, μη προγραμματισμένες ενέργειες ή εξάντληση πόρων.

### `sns:SetTopicAttributes`

Ένας επιτιθέμενος θα μπορούσε να τροποποιήσει τα χαρακτηριστικά ενός θέματος SNS, επηρεάζοντας ενδεχομένως την απόδοσή του, την ασφάλεια ή τη διαθεσιμότητά του.
```bash
aws sns set-topic-attributes --topic-arn <value> --attribute-name <value> --attribute-value <value>
```
**Πιθανές Επιπτώσεις**: Λάθη στη διαμόρφωση που οδηγούν σε υποβαθμισμένη απόδοση, προβλήματα ασφαλείας ή μειωμένη διαθεσιμότητα.

### `sns:Subscribe` , `sns:Unsubscribe`

Ένας επιτιθέμενος θα μπορούσε να εγγραφεί ή να διαγραφεί από ένα θέμα SNS, αποκτώντας πιθανώς μη εξουσιοδοτημένη πρόσβαση σε μηνύματα ή διαταράσσοντας τη φυσιολογική λειτουργία εφαρμογών που βασίζονται στο θέμα.
```bash
aws sns subscribe --topic-arn <value> --protocol <value> --endpoint <value>
aws sns unsubscribe --subscription-arn <value>
```
**Πιθανές Επιπτώσεις**: Μη εξουσιοδοτημένη πρόσβαση σε μηνύματα, διακοπή υπηρεσιών για εφαρμογές που βασίζονται στο επηρεαζόμενο θέμα.

### `sns:AddPermission` , `sns:RemovePermission`

Ένας επιτιθέμενος θα μπορούσε να παραχωρήσει μη εξουσιοδοτημένους χρήστες ή υπηρεσίες πρόσβαση σε ένα θέμα SNS, ή να ανακαλέσει άδειες για νόμιμους χρήστες, προκαλώντας διαταραχές στη φυσιολογική λειτουργία των εφαρμογών που βασίζονται στο θέμα.
```css
aws sns add-permission --topic-arn <value> --label <value> --aws-account-id <value> --action-name <value>
aws sns remove-permission --topic-arn <value> --label <value>
```
**Πιθανές Επιπτώσεις**: Μη εξουσιοδοτημένη πρόσβαση στο θέμα, έκθεση μηνυμάτων ή χειρισμός του θέματος από μη εξουσιοδοτημένους χρήστες ή υπηρεσίες, διακοπή της κανονικής λειτουργίας για εφαρμογές που βασίζονται στο θέμα.

### `sns:TagResource` , `sns:UntagResource`

Ένας επιτιθέμενος θα μπορούσε να προσθέσει, να τροποποιήσει ή να αφαιρέσει ετικέτες από τους πόρους SNS, διαταράσσοντας την κατανομή κόστους της οργάνωσής σας, την παρακολούθηση πόρων και τις πολιτικές ελέγχου πρόσβασης που βασίζονται σε ετικέτες.
```bash
aws sns tag-resource --resource-arn <value> --tags Key=<key>,Value=<value>
aws sns untag-resource --resource-arn <value> --tag-keys <key>
```
**Πιθανές Επιπτώσεις**: Διαταραχή της κατανομής κόστους, παρακολούθησης πόρων και πολιτικών ελέγχου πρόσβασης με βάση τις ετικέτες.

{{#include ../../../banners/hacktricks-training.md}}
