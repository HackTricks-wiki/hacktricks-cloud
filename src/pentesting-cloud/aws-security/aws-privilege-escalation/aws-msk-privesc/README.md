# AWS - MSK Privesc

{{#include ../../../../banners/hacktricks-training.md}}

## MSK

MSK (Kafka) के बारे में अधिक जानकारी के लिए देखें:

{{#ref}}
../../aws-services/aws-msk-enum.md
{{#endref}}

### `msk:ListClusters`, `msk:UpdateSecurity`

इन **विशेषाधिकारों** और **उस VPC तक पहुँच जहाँ kafka brokers मौजूद हैं** के साथ, आप उन्हें एक्सेस करने के लिए **None authentication** जोड़ सकते हैं।
```bash
aws msk --client-authentication <value> --cluster-arn <value> --current-version <value>
```
आपको VPC तक पहुँच की आवश्यकता है क्योंकि **आप Kafka को सार्वजनिक रूप से एक्सपोज़ किए जाने पर None authentication सक्षम नहीं कर सकते**. यदि यह सार्वजनिक रूप से एक्सपोज़्ड है, और **SASL/SCRAM** authentication उपयोग किया गया है, तो आप एक्सेस के लिए **read the secret** कर सकते हैं (secret पढ़ने के लिए आपको अतिरिक्त privileges की आवश्यकता होगी).\
यदि **IAM role-based authentication** उपयोग किया गया है और **kafka is publicly exposed** तो आप फिर भी इन privileges का दुरुपयोग करके अपने लिए इसे एक्सेस करने के permissions दे सकते हैं।

{{#include ../../../../banners/hacktricks-training.md}}
