# AWS - MSK Privesc

{{#include ../../../../banners/hacktricks-training.md}}

## MSK

Pour plus d'informations sur MSK (Kafka), consultez :

{{#ref}}
../../aws-services/aws-msk-enum.md
{{#endref}}

### `msk:ListClusters`, `msk:UpdateSecurity`

Avec ces **privilèges** et **l'accès au VPC où se trouvent les kafka brokers**, vous pouvez ajouter l'**None authentication** pour y accéder.
```bash
aws msk --client-authentication <value> --cluster-arn <value> --current-version <value>
```
Vous devez avoir accès au VPC parce que **vous ne pouvez pas activer None authentication avec Kafka exposé publiquement**. Si c'est exposé publiquement, si **SASL/SCRAM** est utilisé, vous pourriez **lire le secret** pour y accéder (vous aurez besoin de privilèges supplémentaires pour lire le secret).\
Si **IAM role-based authentication** est utilisé et **kafka est exposé publiquement** vous pourriez toujours abuser de ces privilèges pour vous donner des permissions pour y accéder.

{{#include ../../../../banners/hacktricks-training.md}}
