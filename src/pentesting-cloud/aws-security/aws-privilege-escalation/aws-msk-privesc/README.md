# AWS - MSK Privesc

{{#include ../../../../banners/hacktricks-training.md}}

## MSK

MSK (Kafka)에 대한 자세한 내용은 다음을 확인하세요:

{{#ref}}
../../aws-services/aws-msk-enum.md
{{#endref}}

### `msk:ListClusters`, `msk:UpdateSecurity`

이러한 **privileges**와 **access to the VPC where the kafka brokers are**가 있으면, **None authentication**을 추가하여 접근할 수 있습니다.
```bash
aws msk --client-authentication <value> --cluster-arn <value> --current-version <value>
```
VPC에 접근할 수 있어야 합니다. 그 이유는 **Kafka가 공개적으로 노출된 상태에서는 None authentication을 활성화할 수 없기 때문**입니다. 공개적으로 노출되어 있고 **SASL/SCRAM** 인증이 사용되는 경우, 접근을 위해 **secret을 읽을 수 있습니다**(secret을 읽으려면 추가 권한이 필요합니다).\
**IAM role-based authentication**이 사용되고 **kafka가 공개적으로 노출된** 경우에도 이러한 권한을 악용해 접근 권한을 얻을 수 있습니다.

{{#include ../../../../banners/hacktricks-training.md}}
