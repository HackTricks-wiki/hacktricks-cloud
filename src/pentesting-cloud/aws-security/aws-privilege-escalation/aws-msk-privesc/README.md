# AWS - MSK Privesc

{{#include ../../../../banners/hacktricks-training.md}}

## MSK

Para más información sobre MSK (Kafka) consulta:

{{#ref}}
../../aws-services/aws-msk-enum.md
{{#endref}}

### `msk:ListClusters`, `msk:UpdateSecurity`

Con estos **privilegios** y **acceso a la VPC donde están los kafka brokers**, podrías añadir la **None authentication** para acceder a ellos.
```bash
aws msk --client-authentication <value> --cluster-arn <value> --current-version <value>
```
Necesitas acceso a la VPC porque **no puedes habilitar None authentication con Kafka públicamente** expuesto. Si está expuesto públicamente, si se utiliza **SASL/SCRAM** autenticación, podrías **leer el secreto** para acceder (necesitarás privilegios adicionales para leer el secreto).\
Si **IAM role-based authentication** es usada y **kafka está expuesto públicamente** aún podrías abusar de estos privilegios para otorgarte permisos de acceso.

{{#include ../../../../banners/hacktricks-training.md}}
