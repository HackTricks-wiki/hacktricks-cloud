# AWS - MSK Privesc

{{#include ../../../../banners/hacktricks-training.md}}

## MSK

Για περισσότερες πληροφορίες σχετικά με το MSK (Kafka) δείτε:

{{#ref}}
../../aws-services/aws-msk-enum.md
{{#endref}}

### `msk:ListClusters`, `msk:UpdateSecurity`

Με αυτά τα **privileges** και **access to the VPC where the kafka brokers are**, μπορείτε να προσθέσετε την **None authentication** για να αποκτήσετε πρόσβαση σε αυτά.
```bash
aws msk --client-authentication <value> --cluster-arn <value> --current-version <value>
```
Χρειάζεστε πρόσβαση στο VPC επειδή **δεν μπορείτε να ενεργοποιήσετε None authentication με το Kafka να είναι δημόσια εκτεθειμένο**. Αν είναι δημόσια εκτεθειμένο, αν χρησιμοποιείται **SASL/SCRAM** authentication, θα μπορούσατε να **read the secret** για πρόσβαση (θα χρειαστείτε επιπλέον προνόμια για να read the secret).\
Αν χρησιμοποιείται **IAM role-based authentication** και **kafka είναι δημόσια εκτεθειμένο** μπορείτε ακόμα να καταχραστείτε αυτά τα προνόμια για να αποκτήσετε δικαιώματα πρόσβασης.

{{#include ../../../../banners/hacktricks-training.md}}
