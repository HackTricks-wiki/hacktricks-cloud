# AWS - MSK Privesc

{{#include ../../../../banners/hacktricks-training.md}}

## MSK

Для отримання додаткової інформації про MSK (Kafka) див. нижче:

{{#ref}}
../../aws-services/aws-msk-enum.md
{{#endref}}

### `msk:ListClusters`, `msk:UpdateSecurity`

Маючи ці **привілеї** та **доступ до VPC, де розміщені kafka brokers**, ви можете додати **None authentication**, щоб отримати до них доступ.
```bash
aws msk --client-authentication <value> --cluster-arn <value> --current-version <value>
```
Вам потрібен доступ до VPC, тому що **ви не можете увімкнути None authentication with Kafka publicly exposed**. Якщо він публічно доступний, і використовується автентифікація **SASL/SCRAM**, ви можете **прочитати секрет** для доступу (вам знадобляться додаткові привілеї, щоб прочитати секрет).\
Якщо використовується автентифікація **IAM role-based authentication** і **kafka is publicly exposed**, ви все одно можете зловживати цими привілеями, щоб надати собі дозволи для доступу.

{{#include ../../../../banners/hacktricks-training.md}}
