# AWS - MSK Privesc

{{#include ../../../../banners/hacktricks-training.md}}

## MSK

Per maggiori informazioni su MSK (Kafka) consulta:

{{#ref}}
../../aws-services/aws-msk-enum.md
{{#endref}}

### `msk:ListClusters`, `msk:UpdateSecurity`

Con questi **privilegi** e **l'accesso alla VPC dove si trovano i broker Kafka**, puoi aggiungere la **None authentication** per accedervi.
```bash
aws msk --client-authentication <value> --cluster-arn <value> --current-version <value>
```
Hai bisogno di accesso alla VPC perché **non puoi abilitare None authentication con Kafka esposto pubblicamente**. Se è esposto pubblicamente, se viene usata l'autenticazione **SASL/SCRAM**, potresti **read the secret** per accedere (avrai bisogno di privilegi aggiuntivi per read the secret).\  
Se viene usata **IAM role-based authentication** e **kafka is publicly exposed** potresti comunque abusare di questi privilegi per darti i permessi per accedervi.

{{#include ../../../../banners/hacktricks-training.md}}
