# AWS - MSK Privesc

{{#include ../../../../banners/hacktricks-training.md}}

## MSK

Para mais informações sobre MSK (Kafka) consulte:

{{#ref}}
../../aws-services/aws-msk-enum.md
{{#endref}}

### `msk:ListClusters`, `msk:UpdateSecurity`

Com esses **privilégios** e **acesso à VPC onde os kafka brokers estão**, você poderia adicionar a **None authentication** para acessá-los.
```bash
aws msk --client-authentication <value> --cluster-arn <value> --current-version <value>
```
Você precisa de acesso à VPC porque **não pode habilitar None authentication com o Kafka exposto publicamente**. Se estiver exposto publicamente, se for usada autenticação **SASL/SCRAM**, você poderia **ler o segredo** para obter acesso (você precisará de privilégios adicionais para ler o segredo).\
Se for usada **autenticação baseada em roles do IAM** e o **Kafka estiver exposto publicamente** você ainda pode abusar desses privilégios para obter permissões que permitam acessá‑lo.

{{#include ../../../../banners/hacktricks-training.md}}
