# AWS - MSK Privesc

{{#include ../../../../banners/hacktricks-training.md}}

## MSK

Aby uzyskać więcej informacji o MSK (Kafka) zobacz:

{{#ref}}
../../aws-services/aws-msk-enum.md
{{#endref}}

### `msk:ListClusters`, `msk:UpdateSecurity`

Posiadając te **uprawnienia** oraz **dostęp do VPC, gdzie znajdują się kafka brokers**, możesz dodać **None authentication**, aby uzyskać do nich dostęp.
```bash
aws msk --client-authentication <value> --cluster-arn <value> --current-version <value>
```
Potrzebujesz dostępu do VPC, ponieważ **nie możesz włączyć None authentication, gdy Kafka jest publicznie** wystawiona. Jeśli jest publicznie wystawiona, jeśli używane jest uwierzytelnianie **SASL/SCRAM**, możesz **odczytać sekret**, aby uzyskać dostęp (będziesz potrzebować dodatkowych uprawnień, aby odczytać sekret).\
Jeśli używane jest **IAM role-based authentication** i **kafka is publicly exposed** nadal możesz nadużyć tych uprawnień, aby uzyskać uprawnienia do dostępu do niego.

{{#include ../../../../banners/hacktricks-training.md}}
