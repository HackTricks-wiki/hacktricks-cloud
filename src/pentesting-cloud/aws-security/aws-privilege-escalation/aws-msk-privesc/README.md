# AWS - MSK Privesc

{{#include ../../../../banners/hacktricks-training.md}}

## MSK

Für weitere Informationen zu MSK (Kafka) siehe:

{{#ref}}
../../aws-services/aws-msk-enum.md
{{#endref}}

### `msk:ListClusters`, `msk:UpdateSecurity`

Mit diesen **Privilegien** und **Zugriff auf die VPC, in der die kafka brokers laufen**, könntest du die **None authentication** hinzufügen, um auf sie zuzugreifen.
```bash
aws msk --client-authentication <value> --cluster-arn <value> --current-version <value>
```
Du benötigst Zugriff auf das VPC, weil **you cannot enable None authentication with Kafka publicly** exposed. Wenn es öffentlich exponiert ist und **SASL/SCRAM** Authentifizierung verwendet wird, könntest du das **read the secret** lesen, um Zugriff zu erhalten (du benötigst zusätzliche Privilegien, um das secret zu lesen).\
Wenn **IAM role-based authentication** verwendet wird und **kafka is publicly exposed** könntest du diese Privilegien trotzdem missbrauchen, um dir Berechtigungen zum Zugriff zu verschaffen.

{{#include ../../../../banners/hacktricks-training.md}}
