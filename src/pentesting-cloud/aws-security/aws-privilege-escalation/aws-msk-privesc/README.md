# AWS - MSK Privesc

{{#include ../../../../banners/hacktricks-training.md}}

## MSK

有关 MSK (Kafka) 的更多信息，请参见：

{{#ref}}
../../aws-services/aws-msk-enum.md
{{#endref}}

### `msk:ListClusters`, `msk:UpdateSecurity`

拥有这些 **privileges** 和 **access to the VPC where the kafka brokers are**，你可以添加 **None authentication** 来访问它们。
```bash
aws msk --client-authentication <value> --cluster-arn <value> --current-version <value>
```
你需要访问 VPC，因为 **你不能在 Kafka 公开暴露的情况下启用 None authentication**。如果它被公开暴露，且使用 **SASL/SCRAM** 认证，你可以 **读取 secret** 来访问（你需要额外权限来读取该 secret）。\
如果 **IAM role-based authentication** 被使用且 **kafka is publicly exposed**，你仍然可以滥用这些权限以获得访问它的权限。

{{#include ../../../../banners/hacktricks-training.md}}
