# AWS - EBS Privesc

{{#include ../../../banners/hacktricks-training.md}}

## EBS

### `ebs:ListSnapshotBlocks`, `ebs:GetSnapshotBlock`, `ec2:DescribeSnapshots`

Atakujący posiadający te uprawnienia będzie mógł potencjalnie **pobierać i analizować migawki wolumenów lokalnie** oraz szukać w nich wrażliwych informacji (takich jak sekrety czy kod źródłowy). Dowiedz się, jak to zrobić w:

{{#ref}}
../aws-post-exploitation/aws-ec2-ebs-ssm-and-vpc-post-exploitation/aws-ebs-snapshot-dump.md
{{#endref}}

Inne uprawnienia mogą być również przydatne, takie jak: `ec2:DescribeInstances`, `ec2:DescribeVolumes`, `ec2:DeleteSnapshot`, `ec2:CreateSnapshot`, `ec2:CreateTags`

Narzędzie [https://github.com/Static-Flow/CloudCopy](https://github.com/Static-Flow/CloudCopy) przeprowadza ten atak, aby **wyciągnąć hasła z kontrolera domeny**.

**Potencjalny wpływ:** Pośredni privesc poprzez lokalizowanie wrażliwych informacji w migawce (możesz nawet uzyskać hasła Active Directory).

### **`ec2:CreateSnapshot`**

Każdy użytkownik AWS posiadający uprawnienie **`EC2:CreateSnapshot`** może ukraść hasze wszystkich użytkowników domeny, tworząc **migawkę kontrolera domeny**, montując ją do instancji, którą kontroluje, oraz **eksportując plik NTDS.dit i SYSTEM** rejestru do użycia z projektem secretsdump Impacket.

Możesz użyć tego narzędzia do automatyzacji ataku: [https://github.com/Static-Flow/CloudCopy](https://github.com/Static-Flow/CloudCopy) lub możesz użyć jednej z wcześniejszych technik po utworzeniu migawki.

{{#include ../../../banners/hacktricks-training.md}}
