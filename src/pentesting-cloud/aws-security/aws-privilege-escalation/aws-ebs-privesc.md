# AWS - EBS Privesc

{{#include ../../../banners/hacktricks-training.md}}

## EBS

### `ebs:ListSnapshotBlocks`, `ebs:GetSnapshotBlock`, `ec2:DescribeSnapshots`

Un attaccante con questi permessi sarà in grado di **scaricare e analizzare localmente le snapshot dei volumi** e cercare informazioni sensibili in esse (come segreti o codice sorgente). Scopri come fare questo in:

{{#ref}}
../aws-post-exploitation/aws-ec2-ebs-ssm-and-vpc-post-exploitation/aws-ebs-snapshot-dump.md
{{#endref}}

Altri permessi potrebbero essere utili come: `ec2:DescribeInstances`, `ec2:DescribeVolumes`, `ec2:DeleteSnapshot`, `ec2:CreateSnapshot`, `ec2:CreateTags`

Lo strumento [https://github.com/Static-Flow/CloudCopy](https://github.com/Static-Flow/CloudCopy) esegue questo attacco per **estrarre password da un domain controller**.

**Impatto Potenziale:** Privesc indiretto localizzando informazioni sensibili nella snapshot (potresti anche ottenere password di Active Directory).

### **`ec2:CreateSnapshot`**

Qualsiasi utente AWS in possesso del permesso **`EC2:CreateSnapshot`** può rubare gli hash di tutti gli utenti del dominio creando una **snapshot del Domain Controller**, montandola su un'istanza che controllano e **esportando il file NTDS.dit e il registro SYSTEM** per l'uso con il progetto secretsdump di Impacket.

Puoi usare questo strumento per automatizzare l'attacco: [https://github.com/Static-Flow/CloudCopy](https://github.com/Static-Flow/CloudCopy) oppure potresti usare una delle tecniche precedenti dopo aver creato una snapshot.

{{#include ../../../banners/hacktricks-training.md}}
