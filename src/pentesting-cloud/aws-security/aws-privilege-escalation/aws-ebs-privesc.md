# AWS - EBS Privesc

{{#include ../../../banners/hacktricks-training.md}}

## EBS

### `ebs:ListSnapshotBlocks`, `ebs:GetSnapshotBlock`, `ec2:DescribeSnapshots`

Ένας επιτιθέμενος με αυτές τις άδειες θα είναι σε θέση να **κατεβάσει και να αναλύσει τοπικά τα στιγμιότυπα των όγκων** και να αναζητήσει ευαίσθητες πληροφορίες σε αυτά (όπως μυστικά ή πηγαίο κώδικα). Βρείτε πώς να το κάνετε αυτό στο:

{{#ref}}
../aws-post-exploitation/aws-ec2-ebs-ssm-and-vpc-post-exploitation/aws-ebs-snapshot-dump.md
{{#endref}}

Άλλες άδειες μπορεί επίσης να είναι χρήσιμες, όπως: `ec2:DescribeInstances`, `ec2:DescribeVolumes`, `ec2:DeleteSnapshot`, `ec2:CreateSnapshot`, `ec2:CreateTags`

Το εργαλείο [https://github.com/Static-Flow/CloudCopy](https://github.com/Static-Flow/CloudCopy) εκτελεί αυτή την επίθεση για να **εξάγει κωδικούς πρόσβασης από έναν ελεγκτή τομέα**.

**Πιθανές Επιπτώσεις:** Έμμεσο privesc εντοπίζοντας ευαίσθητες πληροφορίες στο στιγμιότυπο (μπορείτε ακόμη και να αποκτήσετε κωδικούς πρόσβασης Active Directory).

### **`ec2:CreateSnapshot`**

Οποιοσδήποτε χρήστης AWS που κατέχει την **`EC2:CreateSnapshot`** άδεια μπορεί να κλέψει τους κατακερματισμούς όλων των χρηστών του τομέα δημιουργώντας ένα **στιγμιότυπο του Ελεγκτή Τομέα** τοποθετώντας το σε μια παρουσία που ελέγχει και **εξάγοντας το NTDS.dit και το SYSTEM** αρχείο μητρώου για χρήση με το έργο secretsdump του Impacket.

Μπορείτε να χρησιμοποιήσετε αυτό το εργαλείο για να αυτοματοποιήσετε την επίθεση: [https://github.com/Static-Flow/CloudCopy](https://github.com/Static-Flow/CloudCopy) ή μπορείτε να χρησιμοποιήσετε μία από τις προηγούμενες τεχνικές μετά τη δημιουργία ενός στιγμιότυπου.

{{#include ../../../banners/hacktricks-training.md}}
