# AWS - EBS Privesc

{{#include ../../../banners/hacktricks-training.md}}

## EBS

### `ebs:ListSnapshotBlocks`, `ebs:GetSnapshotBlock`, `ec2:DescribeSnapshots`

이 권한을 가진 공격자는 **로컬에서 볼륨 스냅샷을 다운로드하고 분석**하여 그 안에서 민감한 정보를 검색할 수 있습니다(예: 비밀 또는 소스 코드). 이를 수행하는 방법은 다음에서 확인하십시오:

{{#ref}}
../aws-post-exploitation/aws-ec2-ebs-ssm-and-vpc-post-exploitation/aws-ebs-snapshot-dump.md
{{#endref}}

다른 권한도 유용할 수 있습니다: `ec2:DescribeInstances`, `ec2:DescribeVolumes`, `ec2:DeleteSnapshot`, `ec2:CreateSnapshot`, `ec2:CreateTags`

도구 [https://github.com/Static-Flow/CloudCopy](https://github.com/Static-Flow/CloudCopy)는 **도메인 컨트롤러에서 비밀번호를 추출하는** 공격을 수행합니다.

**잠재적 영향:** 스냅샷에서 민감한 정보를 찾아 간접적인 권한 상승이 발생할 수 있습니다(Active Directory 비밀번호를 얻을 수도 있습니다).

### **`ec2:CreateSnapshot`**

**`EC2:CreateSnapshot`** 권한을 가진 모든 AWS 사용자는 **도메인 컨트롤러의 스냅샷을 생성**하여 이를 자신이 제어하는 인스턴스에 마운트하고 **NTDS.dit 및 SYSTEM** 레지스트리 하이브 파일을 Impacket의 secretsdump 프로젝트에 사용할 수 있도록 내보내어 모든 도메인 사용자의 해시를 훔칠 수 있습니다.

이 공격을 자동화하는 도구를 사용할 수 있습니다: [https://github.com/Static-Flow/CloudCopy](https://github.com/Static-Flow/CloudCopy) 또는 스냅샷을 생성한 후 이전 기술 중 하나를 사용할 수 있습니다.

{{#include ../../../banners/hacktricks-training.md}}
