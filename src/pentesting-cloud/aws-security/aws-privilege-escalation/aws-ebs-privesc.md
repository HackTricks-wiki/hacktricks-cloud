# AWS - EBS Privesc

{{#include ../../../banners/hacktricks-training.md}}

## EBS

### `ebs:ListSnapshotBlocks`, `ebs:GetSnapshotBlock`, `ec2:DescribeSnapshots`

Mshambuliaji mwenye hizo atakuwa na uwezo wa **kupakua na kuchambua snapshots za volumes locally** na kutafuta taarifa nyeti ndani yao (kama vile siri au msimbo wa chanzo). Pata jinsi ya kufanya hivi katika:

{{#ref}}
../aws-post-exploitation/aws-ec2-ebs-ssm-and-vpc-post-exploitation/aws-ebs-snapshot-dump.md
{{#endref}}

Ruhusa nyingine zinaweza pia kuwa na manufaa kama: `ec2:DescribeInstances`, `ec2:DescribeVolumes`, `ec2:DeleteSnapshot`, `ec2:CreateSnapshot`, `ec2:CreateTags`

Zana [https://github.com/Static-Flow/CloudCopy](https://github.com/Static-Flow/CloudCopy) inatekeleza shambulio hili ili **kuchota nywila kutoka kwa domain controller**.

**Athari Zinazoweza Kutokea:** Privesc isiyo ya moja kwa moja kwa kutafuta taarifa nyeti katika snapshot (unaweza hata kupata nywila za Active Directory).

### **`ec2:CreateSnapshot`**

Mtumiaji yeyote wa AWS mwenye ruhusa **`EC2:CreateSnapshot`** anaweza kuiba hash za watumiaji wote wa domain kwa kuunda **snapshot ya Domain Controller** na kuikamilisha kwa mfano wanaodhibiti na **kutoa faili ya NTDS.dit na SYSTEM** registry hive kwa matumizi na mradi wa secretsdump wa Impacket.

Unaweza kutumia zana hii kuharakisha shambulio: [https://github.com/Static-Flow/CloudCopy](https://github.com/Static-Flow/CloudCopy) au unaweza kutumia moja ya mbinu zilizopita baada ya kuunda snapshot.

{{#include ../../../banners/hacktricks-training.md}}
