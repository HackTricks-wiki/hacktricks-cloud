# AWS - MQ Privesc

{{#include ../../../../banners/hacktricks-training.md}}

## MQ

Za više informacija o MQ pogledajte:

{{#ref}}
../../aws-services/aws-mq-enum.md
{{#endref}}

### `mq:ListBrokers`, `mq:CreateUser`

Sa tim dozvolama možete **kreirati novog korisnika u ActimeMQ brokeru** (ovo ne radi u RabbitMQ):
```bash
aws mq list-brokers
aws mq create-user --broker-id <value> --console-access --password <value> --username <value>
```
**Potential Impact:** Pristup osetljivim informacijama navigacijom kroz ActiveMQ

### `mq:ListBrokers`, `mq:ListUsers`, `mq:UpdateUser`

Sa tim dozvolama možete **kreirati novog korisnika u ActimeMQ brokeru** (ovo ne radi u RabbitMQ):
```bash
aws mq list-brokers
aws mq list-users --broker-id <value>
aws mq update-user --broker-id <value> --console-access --password <value> --username <value>
```
**Potencijalni uticaj:** Pristup osetljivim informacijama pri navigaciji kroz ActiveMQ

### `mq:ListBrokers`, `mq:UpdateBroker`

Ako broker koristi **LDAP** za autorizaciju sa **ActiveMQ**. Moguće je **promeniti** **konfiguraciju** LDAP servera koji se koristi i postaviti ga na server **koji kontroliše napadač**. Na taj način napadač će moći da **ukrade sve credentials koji se šalju preko LDAP-a**.
```bash
aws mq list-brokers
aws mq update-broker --broker-id <value> --ldap-server-metadata=...
```
Ako na neki način pronađete originalne credentials koje koristi ActiveMQ, možete izvesti MitM, ukrasti creds, upotrebiti ih na originalnom serveru i proslediti odgovor (možda biste ovo mogli uraditi i samo ponovnom upotrebom ukradenih creds).

**Potencijalni uticaj:** Ukrasti ActiveMQ credentials

{{#include ../../../../banners/hacktricks-training.md}}
