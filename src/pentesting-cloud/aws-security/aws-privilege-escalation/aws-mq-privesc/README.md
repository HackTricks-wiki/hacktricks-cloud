# AWS - MQ Privesc

{{#include ../../../../banners/hacktricks-training.md}}

## MQ

MQ के बारे में अधिक जानकारी के लिए देखें:

{{#ref}}
../../aws-services/aws-mq-enum.md
{{#endref}}

### `mq:ListBrokers`, `mq:CreateUser`

इन permissions के साथ आप **ActimeMQ broker में एक नया user बना सकते हैं** (यह RabbitMQ में काम नहीं करता):
```bash
aws mq list-brokers
aws mq create-user --broker-id <value> --console-access --password <value> --username <value>
```
**Potential Impact:** ActiveMQ के माध्यम से नेविगेट करते हुए संवेदनशील जानकारी तक पहुंच

### `mq:ListBrokers`, `mq:ListUsers`, `mq:UpdateUser`

इन अनुमतियों के साथ आप **ActimeMQ broker में नया उपयोगकर्ता बना सकते हैं** (यह RabbitMQ में काम नहीं करता):
```bash
aws mq list-brokers
aws mq list-users --broker-id <value>
aws mq update-user --broker-id <value> --console-access --password <value> --username <value>
```
**Potential Impact:** ActiveMQ के माध्यम से नेविगेट करते हुए संवेदनशील जानकारी तक पहुँच

### `mq:ListBrokers`, `mq:UpdateBroker`

यदि कोई broker ActiveMQ के साथ authorization के लिए **LDAP** का उपयोग कर रहा है, तो LDAP सर्वर की **configuration** को **change** करके उसे attacker द्वारा नियंत्रित किसी सर्वर की ओर निर्देशित किया जा सकता है। इस तरह attacker सभी उन **credentials** को **steal** कर सकेगा जो LDAP के माध्यम से भेजे जा रहे हैं।
```bash
aws mq list-brokers
aws mq update-broker --broker-id <value> --ldap-server-metadata=...
```
यदि आप किसी तरह ActiveMQ द्वारा उपयोग किए गए मूल credentials पता कर लें, तो आप एक MitM कर सकते हैं, creds चुरा सकते हैं, उन्हें original server पर उपयोग कर सकते हैं, और response भेज सकते हैं (शायद बस चोरी किए गए credentials का पुन: उपयोग करके आप यह कर सकते हैं)।

**संभावित प्रभाव:** Steal ActiveMQ credentials

{{#include ../../../../banners/hacktricks-training.md}}
