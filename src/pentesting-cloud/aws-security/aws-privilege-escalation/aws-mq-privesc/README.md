# AWS - MQ Privesc

{{#include ../../../../banners/hacktricks-training.md}}

## MQ

Για περισσότερες πληροφορίες σχετικά με το MQ δείτε:

{{#ref}}
../../aws-services/aws-mq-enum.md
{{#endref}}

### `mq:ListBrokers`, `mq:CreateUser`

Με αυτές τις άδειες μπορείτε να **δημιουργήσετε έναν νέο χρήστη σε έναν ActimeMQ broker** (αυτό δεν λειτουργεί σε RabbitMQ):
```bash
aws mq list-brokers
aws mq create-user --broker-id <value> --console-access --password <value> --username <value>
```
**Πιθανός αντίκτυπος:** Πρόσβαση σε ευαίσθητες πληροφορίες κατά την πλοήγηση μέσω ActiveMQ

### `mq:ListBrokers`, `mq:ListUsers`, `mq:UpdateUser`

Με αυτά τα δικαιώματα μπορείτε να **δημιουργήσετε ένα νέο χρήστη σε έναν ActimeMQ broker** (αυτό δεν λειτουργεί σε RabbitMQ):
```bash
aws mq list-brokers
aws mq list-users --broker-id <value>
aws mq update-user --broker-id <value> --console-access --password <value> --username <value>
```
**Potential Impact:** Πρόσβαση σε ευαίσθητες πληροφορίες κατά την πλοήγηση μέσω ActiveMQ

### `mq:ListBrokers`, `mq:UpdateBroker`

Εάν ένας broker χρησιμοποιεί **LDAP** για εξουσιοδότηση με **ActiveMQ**, είναι δυνατό να **αλλάξει** η **διαμόρφωση** του LDAP server που χρησιμοποιείται σε έναν που ελέγχεται από τον attacker. Με αυτόν τον τρόπο ο attacker θα μπορεί να **κλέψει όλα τα credentials που αποστέλλονται μέσω LDAP**.
```bash
aws mq list-brokers
aws mq update-broker --broker-id <value> --ldap-server-metadata=...
```
Αν με κάποιον τρόπο βρεις τα αρχικά διαπιστευτήρια που χρησιμοποιεί το ActiveMQ, μπορείς να πραγματοποιήσεις ένα MitM, να κλέψεις τα creds, να τα χρησιμοποιήσεις στον αρχικό διακομιστή και να προωθήσεις την απάντηση (ίσως απλά επαναχρησιμοποιώντας τα κλεμμένα διαπιστευτήρια να το καταφέρεις).

**Potential Impact:** Κλοπή διαπιστευτηρίων ActiveMQ

{{#include ../../../../banners/hacktricks-training.md}}
