# AWS - MQ Privesc

{{#include ../../../../banners/hacktricks-training.md}}

## MQ

Kwa habari zaidi kuhusu MQ angalia:

{{#ref}}
../../aws-services/aws-mq-enum.md
{{#endref}}

### `mq:ListBrokers`, `mq:CreateUser`

Kwa ruhusa hizo unaweza **kuunda mtumiaji mpya katika ActimeMQ broker** (hii haitumiki kwa RabbitMQ):
```bash
aws mq list-brokers
aws mq create-user --broker-id <value> --console-access --password <value> --username <value>
```
**Potential Impact:** Kupata taarifa nyeti kwa kuvinjari kupitia ActiveMQ

### `mq:ListBrokers`, `mq:ListUsers`, `mq:UpdateUser`

Kwa ruhusa hizo unaweza **kuunda mtumiaji mpya kwenye ActimeMQ broker** (hii haifanyi kazi katika RabbitMQ):
```bash
aws mq list-brokers
aws mq list-users --broker-id <value>
aws mq update-user --broker-id <value> --console-access --password <value> --username <value>
```
**Potential Impact:** Kupata taarifa nyeti kupitia ActiveMQ

### `mq:ListBrokers`, `mq:UpdateBroker`

Ikiwa broker anatumia **LDAP** kwa idhinishaji na **ActiveMQ**. Inawezekana **kubadilisha** **mipangilio** ya seva ya **LDAP** inayotumika kuwa **moja inayodhibitiwa na attacker**. Kwa njia hii attacker ataweza **kuiba credentials zote zinazotumwa kupitia LDAP**.
```bash
aws mq list-brokers
aws mq update-broker --broker-id <value> --ldap-server-metadata=...
```
Iwapo ungeweza kwa namna fulani kupata credentials za awali zilizotumiwa na ActiveMQ, ungeweza kufanya MitM, kuiba creds, kuzitumia kwenye server ya awali, na kutuma jibu (labda kwa kutumia tena credentials zilizoporwa unaweza kufanya hivi).

**Potential Impact:** Kuiba ActiveMQ credentials

{{#include ../../../../banners/hacktricks-training.md}}
