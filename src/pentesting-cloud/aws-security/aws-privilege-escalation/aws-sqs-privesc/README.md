# AWS - SQS Privesc

{{#include ../../../../banners/hacktricks-training.md}}

## SQS

詳細については次を参照してください：

{{#ref}}
../../aws-services/aws-sqs-and-sns-enum.md
{{#endref}}

### `sqs:AddPermission`

攻撃者はこの権限を使って、新しいポリシーを作成したり既存のポリシーを変更したりして、未許可のユーザーやサービスにSQSキューへのアクセスを付与する可能性があります。これにより、キュー内のメッセージへの不正アクセスや、未許可の主体によるキューの操作が発生する恐れがあります。
```bash
aws sqs add-permission --queue-url <value> --actions <value> --aws-account-ids <value> --label <value>
```
**潜在的な影響**: 不正なユーザーやサービスによるSQSキューへのアクセス、メッセージの露出、またはキューの操作。

### `sqs:SendMessage` , `sqs:SendMessageBatch`

攻撃者は悪意のある、または不要なメッセージをSQSキューに送信し、データ破損や意図しない処理の発生、リソースの枯渇を招く可能性があります。
```bash
aws sqs send-message --queue-url <value> --message-body <value>
aws sqs send-message-batch --queue-url <value> --entries <value>
```
**潜在的影響**: 脆弱性の悪用、データ破損、意図しない操作、またはリソース枯渇。

### `sqs:ReceiveMessage`, `sqs:DeleteMessage`, `sqs:ChangeMessageVisibility`

攻撃者は SQS キュー内のメッセージを受信、削除、または可視性を変更でき、その結果メッセージの喪失、データ破損、あるいはそれらのメッセージに依存するアプリケーションのサービス障害を引き起こす可能性があります。
```bash
aws sqs receive-message --queue-url <value>
aws sqs delete-message --queue-url <value> --receipt-handle <value>
aws sqs change-message-visibility --queue-url <value> --receipt-handle <value> --visibility-timeout <value>
```
**潜在的な影響**: 機密情報の窃取、メッセージの損失、データの破損、および影響を受けたメッセージに依存するアプリケーションのサービスの中断。

{{#include ../../../../banners/hacktricks-training.md}}
