# AWS - SQS Privesc

{{#include ../../../../banners/hacktricks-training.md}}

## SQS

更多信息请查看：

{{#ref}}
../../aws-services/aws-sqs-and-sns-enum.md
{{#endref}}

### `sqs:AddPermission`

攻击者可以使用此权限通过创建新策略或修改现有策略，授予未授权的用户或服务对 SQS 队列的访问权限。这可能导致未授权访问队列中的消息，或被未授权实体操纵该队列。
```bash
aws sqs add-permission --queue-url <value> --actions <value> --aws-account-ids <value> --label <value>
```
**Potential Impact**: 未经授权访问 SQS 队列、消息暴露或由未授权用户或服务对队列的操控。

### `sqs:SendMessage` , `sqs:SendMessageBatch`

攻击者可能向 SQS 队列发送恶意或不需要的消息，可能导致数据损坏、触发意外操作或耗尽资源。
```bash
aws sqs send-message --queue-url <value> --message-body <value>
aws sqs send-message-batch --queue-url <value> --entries <value>
```
**潜在影响**: 漏洞利用、数据损坏、非预期操作或资源耗尽。

### `sqs:ReceiveMessage`, `sqs:DeleteMessage`, `sqs:ChangeMessageVisibility`

攻击者可能接收、删除或修改 SQS 队列中消息的可见性，导致消息丢失、数据损坏或依赖这些消息的应用程序出现服务中断。
```bash
aws sqs receive-message --queue-url <value>
aws sqs delete-message --queue-url <value> --receipt-handle <value>
aws sqs change-message-visibility --queue-url <value> --receipt-handle <value> --visibility-timeout <value>
```
**潜在影响**: 窃取敏感信息、消息丢失、数据损坏，以及依赖受影响消息的应用的服务中断。

{{#include ../../../../banners/hacktricks-training.md}}
