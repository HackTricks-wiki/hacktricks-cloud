# AWS - MQ Privesc

{{#include ../../../banners/hacktricks-training.md}}

## MQ

Kwa maelezo zaidi kuhusu MQ angalia:

{{#ref}}
../aws-services/aws-mq-enum.md
{{#endref}}

### `mq:ListBrokers`, `mq:CreateUser`

Kwa ruhusa hizo unaweza **kuunda mtumiaji mpya katika broker ya ActimeMQ** (hii haifanyi kazi katika RabbitMQ):
```bash
aws mq list-brokers
aws mq create-user --broker-id <value> --console-access --password <value> --username <value>
```
**Madhara Yanayoweza Kutokea:** Upataji wa taarifa nyeti kupitia ActiveMQ

### `mq:ListBrokers`, `mq:ListUsers`, `mq:UpdateUser`

Kwa ruhusa hizo unaweza **kuunda mtumiaji mpya katika broker ya ActimeMQ** (hii haifanyi kazi katika RabbitMQ):
```bash
aws mq list-brokers
aws mq list-users --broker-id <value>
aws mq update-user --broker-id <value> --console-access --password <value> --username <value>
```
**Madhara Yanayoweza Kutokea:** Upatikanaji wa taarifa nyeti kupitia ActiveMQ

### `mq:ListBrokers`, `mq:UpdateBroker`

Ikiwa broker inatumia **LDAP** kwa ajili ya idhini na **ActiveMQ**. Inawezekana **kubadilisha** **mipangilio** ya seva ya LDAP inayotumika kuwa **moja inayodhibitiwa na mshambuliaji**. Kwa njia hii mshambuliaji ataweza **kuiba nywila zote zinazotumwa kupitia LDAP**.
```bash
aws mq list-brokers
aws mq update-broker --broker-id <value> --ldap-server-metadata=...
```
Ikiwa unaweza kwa namna fulani kupata akreditif za asili zilizotumika na ActiveMQ unaweza kufanya MitM, kuiba akreditif, kuzitumia kwenye seva ya asili, na kutuma jibu (labda kwa kurudia tu akreditif zilizibwa unaweza kufanya hivi).

**Madhara Yanayoweza Kutokea:** Iba akreditif za ActiveMQ

{{#include ../../../banners/hacktricks-training.md}}
