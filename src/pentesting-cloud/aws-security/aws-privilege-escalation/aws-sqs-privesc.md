# AWS - SQS Privesc

{{#include ../../../banners/hacktricks-training.md}}

## SQS

有关更多信息，请查看：

{{#ref}}
../aws-services/aws-sqs-and-sns-enum.md
{{#endref}}

### `sqs:AddPermission`

攻击者可以利用此权限通过创建新策略或修改现有策略来授予未经授权的用户或服务访问SQS队列的权限。这可能导致未经授权的访问队列中的消息或未经授权的实体对队列的操控。
```bash
cssCopy codeaws sqs add-permission --queue-url <value> --actions <value> --aws-account-ids <value> --label <value>
```
**潜在影响**：未经授权访问队列、消息暴露或未经授权用户或服务对队列的操控。

### `sqs:SendMessage` , `sqs:SendMessageBatch`

攻击者可以向 SQS 队列发送恶意或不需要的消息，可能导致数据损坏、触发意外操作或耗尽资源。
```bash
aws sqs send-message --queue-url <value> --message-body <value>
aws sqs send-message-batch --queue-url <value> --entries <value>
```
**潜在影响**：漏洞利用、数据损坏、意外操作或资源耗尽。

### `sqs:ReceiveMessage`, `sqs:DeleteMessage`, `sqs:ChangeMessageVisibility`

攻击者可以接收、删除或修改SQS队列中消息的可见性，从而导致消息丢失、数据损坏或依赖这些消息的应用程序服务中断。
```bash
aws sqs receive-message --queue-url <value>
aws sqs delete-message --queue-url <value> --receipt-handle <value>
aws sqs change-message-visibility --queue-url <value> --receipt-handle <value> --visibility-timeout <value>
```
**潜在影响**：窃取敏感信息、消息丢失、数据损坏，以及依赖受影响消息的应用程序服务中断。

{{#include ../../../banners/hacktricks-training.md}}
