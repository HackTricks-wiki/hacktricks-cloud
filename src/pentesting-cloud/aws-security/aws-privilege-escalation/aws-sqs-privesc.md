# AWS - SQS Privesc

{{#include ../../../banners/hacktricks-training.md}}

## SQS

Für weitere Informationen siehe:

{{#ref}}
../aws-services/aws-sqs-and-sns-enum.md
{{#endref}}

### `sqs:AddPermission`

Ein Angreifer könnte diese Berechtigung nutzen, um unbefugten Benutzern oder Diensten Zugriff auf eine SQS-Warteschlange zu gewähren, indem er neue Richtlinien erstellt oder bestehende Richtlinien ändert. Dies könnte zu unbefugtem Zugriff auf die Nachrichten in der Warteschlange oder zur Manipulation der Warteschlange durch unbefugte Entitäten führen.
```bash
cssCopy codeaws sqs add-permission --queue-url <value> --actions <value> --aws-account-ids <value> --label <value>
```
**Potenzielle Auswirkungen**: Unbefugter Zugriff auf die Warteschlange, Nachrichtenexposition oder Warteschlangenmanipulation durch unbefugte Benutzer oder Dienste.

### `sqs:SendMessage`, `sqs:SendMessageBatch`

Ein Angreifer könnte bösartige oder unerwünschte Nachrichten an die SQS-Warteschlange senden, was potenziell zu Datenkorruption, Auslösen unbeabsichtigter Aktionen oder Erschöpfung von Ressourcen führen könnte.
```bash
aws sqs send-message --queue-url <value> --message-body <value>
aws sqs send-message-batch --queue-url <value> --entries <value>
```
**Potenzielle Auswirkungen**: Ausnutzung von Schwachstellen, Datenkorruption, unbeabsichtigte Aktionen oder Ressourcenerschöpfung.

### `sqs:ReceiveMessage`, `sqs:DeleteMessage`, `sqs:ChangeMessageVisibility`

Ein Angreifer könnte Nachrichten in einer SQS-Warteschlange empfangen, löschen oder die Sichtbarkeit von Nachrichten ändern, was zu Nachrichtenverlust, Datenkorruption oder Dienstunterbrechungen für Anwendungen führen kann, die auf diese Nachrichten angewiesen sind.
```bash
aws sqs receive-message --queue-url <value>
aws sqs delete-message --queue-url <value> --receipt-handle <value>
aws sqs change-message-visibility --queue-url <value> --receipt-handle <value> --visibility-timeout <value>
```
**Potenzielle Auswirkungen**: Sensible Informationen stehlen, Nachrichtenverlust, Datenkorruption und Dienstunterbrechung für Anwendungen, die auf die betroffenen Nachrichten angewiesen sind.

{{#include ../../../banners/hacktricks-training.md}}
