# AWS - MSK Privesc

{{#include ../../../banners/hacktricks-training.md}}

## MSK

Για περισσότερες πληροφορίες σχετικά με το MSK (Kafka) ελέγξτε:

{{#ref}}
../aws-services/aws-msk-enum.md
{{#endref}}

### `msk:ListClusters`, `msk:UpdateSecurity`

Με αυτά τα **προνόμια** και **πρόσβαση στο VPC όπου βρίσκονται οι kafka brokers**, θα μπορούσατε να προσθέσετε την **καμία αυθεντικοποίηση** για να έχετε πρόσβαση σε αυτούς.
```bash
aws msk --client-authentication <value> --cluster-arn <value> --current-version <value>
```
Πρέπει να έχετε πρόσβαση στο VPC γιατί **δεν μπορείτε να ενεργοποιήσετε την καμία αυθεντικοποίηση με το Kafka δημόσια** εκτεθειμένο. Αν είναι δημόσια εκτεθειμένο, αν χρησιμοποιείται **SASL/SCRAM** αυθεντικοποίηση, θα μπορούσατε να **διαβάσετε το μυστικό** για πρόσβαση (θα χρειαστείτε επιπλέον δικαιώματα για να διαβάσετε το μυστικό).\
Αν χρησιμοποιείται **αυθεντικοποίηση βασισμένη σε ρόλους IAM** και **το kafka είναι δημόσια εκτεθειμένο**, θα μπορούσατε ακόμα να καταχραστείτε αυτά τα δικαιώματα για να σας δώσουν άδειες πρόσβασης. 

{{#include ../../../banners/hacktricks-training.md}}
