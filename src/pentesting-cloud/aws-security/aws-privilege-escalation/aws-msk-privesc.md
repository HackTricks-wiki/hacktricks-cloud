# AWS - MSK Privesc

{{#include ../../../banners/hacktricks-training.md}}

## MSK

Para más información sobre MSK (Kafka) consulta:

{{#ref}}
../aws-services/aws-msk-enum.md
{{#endref}}

### `msk:ListClusters`, `msk:UpdateSecurity`

Con estos **privilegios** y **acceso a la VPC donde están los brokers de kafka**, podrías agregar la **autenticación Ninguna** para acceder a ellos.
```bash
aws msk --client-authentication <value> --cluster-arn <value> --current-version <value>
```
Necesitas acceso a la VPC porque **no puedes habilitar la autenticación None con Kafka expuesto públicamente**. Si está expuesto públicamente, si se utiliza la autenticación **SASL/SCRAM**, podrías **leer el secreto** para acceder (necesitarás privilegios adicionales para leer el secreto).\
Si se utiliza la autenticación **basada en roles de IAM** y **kafka está expuesto públicamente**, aún podrías abusar de estos privilegios para darte permisos para acceder. 

{{#include ../../../banners/hacktricks-training.md}}
