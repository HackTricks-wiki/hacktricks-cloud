# AWS - MSK Privesc

{{#include ../../../banners/hacktricks-training.md}}

## MSK

Aby uzyskać więcej informacji o MSK (Kafka), sprawdź:

{{#ref}}
../aws-services/aws-msk-enum.md
{{#endref}}

### `msk:ListClusters`, `msk:UpdateSecurity`

Dzięki tym **uprawnieniom** i **dostępowi do VPC, w którym znajdują się brokerzy kafka**, możesz dodać **brak uwierzytelnienia**, aby uzyskać do nich dostęp.
```bash
aws msk --client-authentication <value> --cluster-arn <value> --current-version <value>
```
Musisz mieć dostęp do VPC, ponieważ **nie możesz włączyć braku uwierzytelnienia z Kafka publicznie** wystawionym. Jeśli jest publicznie wystawiony, jeśli używane jest **uwierzytelnienie SASL/SCRAM**, możesz **przeczytać sekret** do uzyskania dostępu (będziesz potrzebować dodatkowych uprawnień, aby przeczytać sekret).\
Jeśli używane jest **uwierzytelnienie oparte na roli IAM** i **kafka jest publicznie wystawiona**, nadal możesz nadużyć tych uprawnień, aby uzyskać pozwolenia na dostęp do niej.

{{#include ../../../banners/hacktricks-training.md}}
