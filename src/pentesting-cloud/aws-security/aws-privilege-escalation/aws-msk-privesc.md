# AWS - MSK Privesc

{{#include ../../../banners/hacktricks-training.md}}

## MSK

Per ulteriori informazioni su MSK (Kafka) controlla:

{{#ref}}
../aws-services/aws-msk-enum.md
{{#endref}}

### `msk:ListClusters`, `msk:UpdateSecurity`

Con questi **privilegi** e **accesso alla VPC dove si trovano i broker kafka**, potresti aggiungere l'**autenticazione None** per accedervi.
```bash
aws msk --client-authentication <value> --cluster-arn <value> --current-version <value>
```
Hai bisogno di accesso alla VPC perché **non puoi abilitare l'autenticazione None con Kafka esposto pubblicamente**. Se è esposto pubblicamente, se viene utilizzata l'autenticazione **SASL/SCRAM**, potresti **leggere il segreto** per accedervi (avrai bisogno di privilegi aggiuntivi per leggere il segreto).\
Se viene utilizzata l'autenticazione **basata su ruolo IAM** e **kafka è esposto pubblicamente**, potresti comunque abusare di questi privilegi per darti permessi per accedervi.

{{#include ../../../banners/hacktricks-training.md}}
