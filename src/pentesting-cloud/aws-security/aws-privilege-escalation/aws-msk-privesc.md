# AWS - MSK Privesc

{{#include ../../../banners/hacktricks-training.md}}

## MSK

有关 MSK (Kafka) 的更多信息，请查看：

{{#ref}}
../aws-services/aws-msk-enum.md
{{#endref}}

### `msk:ListClusters`, `msk:UpdateSecurity`

拥有这些 **权限** 和 **对 kafka 代理所在 VPC 的访问**，您可以添加 **无身份验证** 以访问它们。
```bash
aws msk --client-authentication <value> --cluster-arn <value> --current-version <value>
```
您需要访问 VPC，因为 **您无法启用公开暴露的 Kafka 的 None 认证**。如果它是公开暴露的，如果使用 **SASL/SCRAM** 认证，您可以 **读取秘密** 以访问（您将需要额外的权限来读取秘密）。\
如果使用 **基于 IAM 角色的认证** 并且 **Kafka 是公开暴露的**，您仍然可以滥用这些权限以获得访问权限。

{{#include ../../../banners/hacktricks-training.md}}
