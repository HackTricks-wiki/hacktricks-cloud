# AWS - MSK Privesc

{{#include ../../../banners/hacktricks-training.md}}

## MSK

Für weitere Informationen über MSK (Kafka) siehe:

{{#ref}}
../aws-services/aws-msk-enum.md
{{#endref}}

### `msk:ListClusters`, `msk:UpdateSecurity`

Mit diesen **Befugnissen** und **Zugriff auf das VPC, in dem sich die Kafka-Broker befinden**, könnten Sie die **Keine Authentifizierung** hinzufügen, um auf sie zuzugreifen.
```bash
aws msk --client-authentication <value> --cluster-arn <value> --current-version <value>
```
Du benötigst Zugriff auf die VPC, da **du keine None-Authentifizierung mit öffentlich exponiertem Kafka aktivieren kannst**. Wenn es öffentlich exponiert ist und **SASL/SCRAM**-Authentifizierung verwendet wird, könntest du **das Geheimnis lesen**, um darauf zuzugreifen (du benötigst zusätzliche Berechtigungen, um das Geheimnis zu lesen).\
Wenn **IAM-Rollenbasierte Authentifizierung** verwendet wird und **Kafka öffentlich exponiert ist**, könntest du diese Berechtigungen dennoch missbrauchen, um dir Berechtigungen für den Zugriff zu verschaffen.

{{#include ../../../banners/hacktricks-training.md}}
