# AWS - MSK Privesc

{{#include ../../../banners/hacktricks-training.md}}

## MSK

MSK (Kafka)에 대한 자세한 정보는 다음을 확인하세요:

{{#ref}}
../aws-services/aws-msk-enum.md
{{#endref}}

### `msk:ListClusters`, `msk:UpdateSecurity`

이 **권한**과 **카프카 브로커가 있는 VPC에 대한 접근**이 있으면, 그들에 접근하기 위해 **None 인증**을 추가할 수 있습니다.
```bash
aws msk --client-authentication <value> --cluster-arn <value> --current-version <value>
```
VPC에 접근해야 합니다. 왜냐하면 **Kafka가 공개적으로 노출된 경우 None 인증을 활성화할 수 없기 때문입니다**. 공개적으로 노출된 경우, **SASL/SCRAM** 인증이 사용되면 **비밀을 읽을 수 있습니다** (비밀을 읽으려면 추가 권한이 필요합니다).\
**IAM 역할 기반 인증**이 사용되고 **Kafka가 공개적으로 노출된 경우**에도 이러한 권한을 남용하여 접근 권한을 부여받을 수 있습니다.

{{#include ../../../banners/hacktricks-training.md}}
