# AWS - MSK Privesc

{{#include ../../../banners/hacktricks-training.md}}

## MSK

Para mais informações sobre o MSK (Kafka), consulte:

{{#ref}}
../aws-services/aws-msk-enum.md
{{#endref}}

### `msk:ListClusters`, `msk:UpdateSecurity`

Com esses **privilégios** e **acesso à VPC onde os brokers kafka estão**, você poderia adicionar a **autenticação None** para acessá-los.
```bash
aws msk --client-authentication <value> --cluster-arn <value> --current-version <value>
```
Você precisa de acesso ao VPC porque **não é possível habilitar a autenticação None com Kafka exposto publicamente**. Se estiver exposto publicamente, se **a autenticação SASL/SCRAM** for usada, você poderá **ler o segredo** para acessar (você precisará de privilégios adicionais para ler o segredo).\
Se **a autenticação baseada em função IAM** for usada e **o kafka estiver exposto publicamente**, você ainda poderá abusar desses privilégios para obter permissões para acessá-lo.

{{#include ../../../banners/hacktricks-training.md}}
