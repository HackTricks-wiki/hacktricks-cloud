# AWS - MSK Privesc

{{#include ../../../banners/hacktricks-training.md}}

## MSK

MSK (Kafka) に関する詳細情報は、以下を確認してください：

{{#ref}}
../aws-services/aws-msk-enum.md
{{#endref}}

### `msk:ListClusters`, `msk:UpdateSecurity`

これらの**権限**と**kafka ブローカーが存在する VPC へのアクセス**があれば、**None 認証**を追加してアクセスすることができます。
```bash
aws msk --client-authentication <value> --cluster-arn <value> --current-version <value>
```
VPCへのアクセスが必要です。なぜなら、**Kafkaを公開でNone認証を有効にすることはできない**からです。公開されている場合、**SASL/SCRAM**認証が使用されていると、**シークレットを読み取る**ことができる可能性があります（シークレットを読み取るには追加の権限が必要です）。\
**IAMロールベースの認証**が使用され、**Kafkaが公開されている**場合でも、これらの権限を悪用してアクセスするための権限を与えることができます。

{{#include ../../../banners/hacktricks-training.md}}
