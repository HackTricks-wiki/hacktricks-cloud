# AWS - MSK Privesc

{{#include ../../../banners/hacktricks-training.md}}

## MSK

Для отримання додаткової інформації про MSK (Kafka) перегляньте:

{{#ref}}
../aws-services/aws-msk-enum.md
{{#endref}}

### `msk:ListClusters`, `msk:UpdateSecurity`

З цими **привілеями** та **доступом до VPC, де знаходяться брокери kafka**, ви можете додати **None authentication** для доступу до них.
```bash
aws msk --client-authentication <value> --cluster-arn <value> --current-version <value>
```
Вам потрібен доступ до VPC, тому що **ви не можете увімкнути анонімну аутентифікацію з Kafka, що публічно** відкритий. Якщо він публічно відкритий, якщо використовується **SASL/SCRAM** аутентифікація, ви могли б **прочитати секрет** для доступу (вам знадобляться додаткові привілеї для читання секрету).\
Якщо використовується **аутентифікація на основі ролей IAM** і **kafka публічно відкритий**, ви все ще могли б зловживати цими привілеями, щоб надати собі дозволи для доступу до нього.

{{#include ../../../banners/hacktricks-training.md}}
