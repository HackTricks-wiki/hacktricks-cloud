# AWS - EBS Privesc

{{#include ../../../../banners/hacktricks-training.md}}

## EBS

### `ebs:ListSnapshotBlocks`, `ebs:GetSnapshotBlock`, `ec2:DescribeSnapshots`

Napadač sa ovim dozvolama može potencijalno da **preuzme i lokalno analizira EBS snapshots** i pretražuje ih radi osetljivih informacija (kao secrets ili source code). Pronađite kako to uraditi u:

{{#ref}}
../../aws-post-exploitation/aws-ec2-ebs-ssm-and-vpc-post-exploitation/aws-ebs-snapshot-dump.md
{{#endref}}

Druge dozvole koje takođe mogu biti korisne uključuju: `ec2:DescribeInstances`, `ec2:DescribeVolumes`, `ec2:DeleteSnapshot`, `ec2:CreateSnapshot`, `ec2:CreateTags`

The tool [https://github.com/Static-Flow/CloudCopy](https://github.com/Static-Flow/CloudCopy) performs this attack to e**xtract passwords from a domain controller**.

**Potential Impact:** Indirect privesc lociranjem osetljivih informacija u snapshot-u (možete čak dobiti Active Directory lozinke).

### **`ec2:CreateSnapshot`**

Bilo koji AWS korisnik koji poseduje dozvolu **`EC2:CreateSnapshot`** može ukrasti hash-ove svih korisnika domena tako što će napraviti **snapshot of the Domain Controller**, mountovati ga na instancu pod svojom kontrolom i **exporting the NTDS.dit and SYSTEM** registry hive fajl za upotrebu sa Impacket's secretsdump projektom.

You can use this tool to automate the attack: [https://github.com/Static-Flow/CloudCopy](https://github.com/Static-Flow/CloudCopy) or you could use one of the previous techniques after creating a snapshot.

{{#include ../../../../banners/hacktricks-training.md}}
