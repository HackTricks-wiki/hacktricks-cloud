# AWS - EBS Privesc

{{#include ../../../../banners/hacktricks-training.md}}

## EBS

### `ebs:ListSnapshotBlocks`, `ebs:GetSnapshotBlock`, `ec2:DescribeSnapshots`

इन अनुमतियों वाले एक हमलावर के लिए संभवतः **volumes snapshots को स्थानीय रूप से डाउनलोड और विश्लेषण करना** संभव होगा और उनमें संवेदनशील जानकारी (जैसे secrets या source code) खोजी जा सकेगी। इसे कैसे करना है देखें:

{{#ref}}
../../aws-post-exploitation/aws-ec2-ebs-ssm-and-vpc-post-exploitation/aws-ebs-snapshot-dump.md
{{#endref}}

अन्य permissions भी उपयोगी हो सकते हैं जैसे: `ec2:DescribeInstances`, `ec2:DescribeVolumes`, `ec2:DeleteSnapshot`, `ec2:CreateSnapshot`, `ec2:CreateTags`

यह टूल [https://github.com/Static-Flow/CloudCopy](https://github.com/Static-Flow/CloudCopy) इस हमले को अंजाम देता है ताकि **डोमेन कंट्रोलर से पासवर्ड निकाले जा सकें**।

**Potential Impact:** स्नैपशॉट में संवेदनशील जानकारी ढूंढकर अप्रत्यक्ष privesc (आप यहां तक कि Active Directory पासवर्ड भी प्राप्त कर सकते हैं)।

### **`ec2:CreateSnapshot`**

कोई भी AWS उपयोगकर्ता जिसके पास **`EC2:CreateSnapshot`** permission है, Domain Controller का **snapshot** बनाकर उसे अपनी नियंत्रित instance पर mount करके डोमेन के सभी उपयोगकर्ताओं के hashes चुरा सकता है और **NTDS.dit और SYSTEM** registry hive फ़ाइल export कर सकता है ताकि इसे Impacket's secretsdump project के साथ उपयोग किया जा सके।

आप इस हमले को ऑटोमेट करने के लिए इस टूल का उपयोग कर सकते हैं: [https://github.com/Static-Flow/CloudCopy](https://github.com/Static-Flow/CloudCopy) या snapshot बनाने के बाद उपर्युक्त तकनीकों में से किसी एक का उपयोग कर सकते हैं।

{{#include ../../../../banners/hacktricks-training.md}}
