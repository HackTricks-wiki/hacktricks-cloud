# AWS - EC2 Sürekliliği

{{#include ../../../banners/hacktricks-training.md}}

## EC2

Daha fazla bilgi için kontrol edin:

{{#ref}}
../aws-services/aws-ec2-ebs-elb-ssm-vpc-and-vpn-enum/
{{#endref}}

### Güvenlik Grubu Bağlantı İzleme Sürekliliği

Eğer bir savunucu **EC2 örneğinin tehlikeye girdiğini** fark ederse, muhtemelen makinenin **ağını izole etmeye** çalışacaktır. Bunu açık bir **Deny NACL** ile yapabilir (ancak NACL'ler tüm alt ağa etki eder) veya **güvenlik grubunu değiştirerek** **herhangi bir türde gelen veya giden** trafiğe izin vermeyebilir.

Eğer saldırganın makineden kaynaklanan bir **ters kablosu** varsa, SG değiştirildiğinde bile gelen veya giden trafiğe izin vermeyen, **bağlantı [**Güvenlik Grubu Bağlantı İzleme**](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/security-group-connection-tracking.html)** nedeniyle kesilmeyecektir.**

### EC2 Yaşam Döngüsü Yöneticisi

Bu hizmet, **AMI'lerin ve anlık görüntülerin oluşturulmasını** **planlamaya** ve hatta **başka hesaplarla paylaşmaya** olanak tanır.\
Bir saldırgan, **her hafta** tüm görüntülerin veya tüm hacimlerin **AMI'lerini veya anlık görüntülerini oluşturmak için** yapılandırabilir ve **kendi hesabıyla paylaşabilir**.

### Planlı Örnekler

Örneklerin günlük, haftalık veya hatta aylık olarak çalıştırılması mümkündür. Bir saldırgan, yüksek ayrıcalıklara sahip veya ilginç bir erişim sağlayan bir makine çalıştırabilir.

### Spot Filosu Talebi

Spot örnekleri, normal örneklerden **daha ucuzdur**. Bir saldırgan, **5 yıl için küçük bir spot filosu talebi** başlatabilir (örneğin), **otomatik IP** ataması ile ve saldırgana **spot örneği başladığında** **IP adresini** gönderen bir **kullanıcı verisi** ile.

### Arka Kapı Örnekleri

Bir saldırgan, örneklere erişim sağlayabilir ve bunları arka kapı ile açabilir:

- Örneğin geleneksel bir **rootkit** kullanarak
- Yeni bir **genel SSH anahtarı** ekleyerek (bakınız [EC2 ayrıcalık yükseltme seçenekleri](../aws-privilege-escalation/aws-ec2-privesc.md))
- **Kullanıcı Verisini** arka kapı ile açarak

### **Arka Kapı Başlatma Yapılandırması**

- Kullanılan AMI'yi arka kapı ile aç
- Kullanıcı Verisini arka kapı ile aç
- Anahtar Çifti'ni arka kapı ile aç

### VPN

Saldırganın VPC'ye doğrudan bağlanabilmesi için bir VPN oluşturun.

### VPC Peering

Kurban VPC ile saldırgan VPC arasında bir peering bağlantısı oluşturun, böylece kurban VPC'ye erişim sağlayabilir.

{{#include ../../../banners/hacktricks-training.md}}
