# AWS - Lightsail Persistence

{{#include ../../../../banners/hacktricks-training.md}}

## Lightsail

For more information check:

{{#ref}}
../../aws-services/aws-lightsail-enum.md
{{#endref}}

### インスタンスの SSH keys と DB passwords をダウンロード

それらはおそらく変更されないため、保持しておくことは persistence の良い方法です。

### Backdoor Instances

攻撃者はインスタンスにアクセスして backdoor を仕掛けることができます:

- 例えば、従来の **rootkit** を使用する
- 新しい **public SSH key** を追加する
- port knocking を使ってポートを公開し、backdoor を仕込む

### DNS persistence

ドメインが設定されている場合:

- 自分のIPを指すサブドメインを作成し、**subdomain takeover** を実現する
- ドメインから **emails** を送信できるようにする **SPF** レコードを作成する
- **main domain IP to your own one** を設定し、自分のIPから正規のものへ **MitM** を実行する

{{#include ../../../../banners/hacktricks-training.md}}
