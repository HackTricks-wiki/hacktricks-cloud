# AWS - Lightsail Persistence

{{#include ../../../../banners/hacktricks-training.md}}

## Lightsail

자세한 정보는 다음을 확인하세요:

{{#ref}}
../../aws-services/aws-lightsail-enum.md
{{#endref}}

### 인스턴스 SSH 키 및 DB 비밀번호 다운로드

아마 변경되지 않으므로 이를 확보해 두는 것만으로 persistence를 유지하기에 좋습니다

### Backdoor Instances

공격자가 인스턴스에 접근하여 backdoor를 설치할 수 있습니다:

- 예를 들어 전통적인 **rootkit** 사용
- 새로운 **public SSH key** 추가
- port knocking을 사용해 포트를 노출하고 backdoor 설치

### DNS persistence

도메인이 구성되어 있다면:

- 자신의 IP를 가리키는 하위 도메인을 생성하면 **subdomain takeover**를 얻을 수 있습니다
- 도메인에서 **emails**를 보낼 수 있도록 허용하는 **SPF** 레코드 생성
- 메인 도메인의 IP를 자신의 것으로 구성하고, 자신의 IP에서 정상 서버들에 대해 **MitM**을 수행

{{#include ../../../../banners/hacktricks-training.md}}
