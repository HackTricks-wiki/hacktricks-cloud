# AWS - Lightsail Persistenza

{{#include ../../../../banners/hacktricks-training.md}}

## Lightsail

Per maggiori informazioni consulta:

{{#ref}}
../../aws-services/aws-lightsail-enum.md
{{#endref}}

### Scaricare le chiavi SSH delle instance & le password del DB

Probabilmente non verranno cambiate, quindi averle è una buona opzione per la persistenza

### Backdoor alle istanze

Un attaccante potrebbe ottenere accesso alle istanze e inserire una backdoor:

- Utilizzando, ad esempio, un tradizionale **rootkit**
- Aggiungendo una nuova **chiave SSH pubblica**
- Esponendo una porta tramite port knocking con una backdoor

### Persistenza DNS

Se i domini sono configurati:

- Creare un sottodominio che punti al tuo IP così otterrai un **subdomain takeover**
- Creare un record **SPF** che ti permetta di inviare **email** dal dominio
- Configurare l'IP del dominio principale sul tuo ed eseguire un **MitM** dal tuo IP verso quelli legittimi

{{#include ../../../../banners/hacktricks-training.md}}
