# AWS - Lightsail Persistance

{{#include ../../../../banners/hacktricks-training.md}}

## Lightsail

Pour plus d'informations, consultez :

{{#ref}}
../../aws-services/aws-lightsail-enum.md
{{#endref}}

### Télécharger les clés SSH des instances et les mots de passe DB

Ils ne seront probablement pas modifiés, donc les conserver constitue une bonne option pour la persistance.

### Backdoor Instances

Un attaquant pourrait accéder aux instances et y installer une backdoor :

- En utilisant un **rootkit** traditionnel, par exemple
- Ajouter une nouvelle **public SSH key**
- Exposer un port via du **port knocking** avec une backdoor

### DNS persistance

Si des domaines sont configurés :

- Créer un sous-domaine pointant vers votre IP afin d'obtenir un **subdomain takeover**
- Créer un enregistrement **SPF** vous permettant d'envoyer des **e-mails** depuis le domaine
- Configurer l'IP du domaine principal sur la vôtre et effectuer un **MitM** depuis votre IP vers celles légitimes

{{#include ../../../../banners/hacktricks-training.md}}
