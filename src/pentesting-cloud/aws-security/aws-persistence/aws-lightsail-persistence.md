# AWS - Lightsail Persistence

{{#include ../../../banners/hacktricks-training.md}}

## Lightsail

Pour plus d'informations, consultez :

{{#ref}}
../aws-services/aws-lightsail-enum.md
{{#endref}}

### Télécharger les clés SSH de l'instance et les mots de passe de la base de données

Ils ne seront probablement pas changés, donc les avoir est une bonne option pour la persistance.

### Instances de porte dérobée

Un attaquant pourrait accéder aux instances et y installer une porte dérobée :

- En utilisant un **rootkit** traditionnel par exemple
- En ajoutant une nouvelle **clé SSH publique**
- En exposant un port avec un knocking de port avec une porte dérobée

### Persistance DNS

Si des domaines sont configurés :

- Créez un sous-domaine pointant vers votre IP afin d'avoir un **sous-domaine takeover**
- Créez un enregistrement **SPF** vous permettant d'envoyer des **emails** depuis le domaine
- Configurez l'**IP du domaine principal à la vôtre** et effectuez un **MitM** de votre IP vers les légitimes

{{#include ../../../banners/hacktricks-training.md}}
