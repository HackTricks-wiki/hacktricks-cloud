# AWS - Cloudformation Persistence

{{#include ../../../banners/hacktricks-training.md}}

## CloudFormation

Aby uzyskać więcej informacji, uzyskaj dostęp do:

{{#ref}}
../aws-services/aws-cloudformation-and-codestar-enum.md
{{#endref}}

### CDK Bootstrap Stack

AWS CDK wdraża stos CFN o nazwie `CDKToolkit`. Ten stos obsługuje parametr `TrustedAccounts`, który pozwala zewnętrznym kontom na wdrażanie projektów CDK w koncie ofiary. Atakujący może to wykorzystać, aby przyznać sobie nieograniczony dostęp do konta ofiary, korzystając z AWS cli do ponownego wdrożenia stosu z parametrami lub z AWS CDK cli.
```bash
# CDK
cdk bootstrap --trust 1234567890

# AWS CLI
aws cloudformation update-stack --use-previous-template --parameters ParameterKey=TrustedAccounts,ParameterValue=1234567890
```
{{#include ../../../banners/hacktricks-training.md}}
