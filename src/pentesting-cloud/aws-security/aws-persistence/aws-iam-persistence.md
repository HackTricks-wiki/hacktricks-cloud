# AWS - IAM Persistence

{{#include ../../../banners/hacktricks-training.md}}

## IAM

Для отримання додаткової інформації зверніться до:

{{#ref}}
../aws-services/aws-iam-enum.md
{{#endref}}

### Загальна IAM Постійнiсть

- Створити користувача
- Додати контрольованого користувача до привілейованої групи
- Створити ключі доступу (нового користувача або всіх користувачів)
- Надати додаткові дозволи контрольованим користувачам/групам (прикріплені політики або вбудовані політики)
- Вимкнути MFA / Додати свій власний пристрій MFA
- Створити ситуацію з ланцюгом ролей (більше про це нижче в STS постійності)

### Політики довіри до бекдорів ролей

Ви можете створити бекдор для політики довіри, щоб мати можливість приймати її для зовнішнього ресурсу, контрольованого вами (або для всіх):
```json
{
"Version": "2012-10-17",
"Statement": [
{
"Effect": "Allow",
"Principal": {
"AWS": ["*", "arn:aws:iam::123213123123:root"]
},
"Action": "sts:AssumeRole"
}
]
}
```
### Політика бекдору Версія

Надайте адміністративні права політиці, яка не є її останньою версією (остання версія повинна виглядати легітимно), а потім призначте цю версію політики контрольованому користувачу/групі.

### Бекдор / Створити постачальника ідентичності

Якщо обліковий запис вже довіряє загальному постачальнику ідентичності (такому як Github), умови довіри можуть бути посилені, щоб зловмисник міг їх зловживати.

{{#include ../../../banners/hacktricks-training.md}}
