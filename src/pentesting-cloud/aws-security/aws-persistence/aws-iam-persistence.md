# AWS - IAM Persistence

{{#include ../../../banners/hacktricks-training.md}}

## IAM

자세한 정보는 다음을 참조하세요:

{{#ref}}
../aws-services/aws-iam-enum.md
{{#endref}}

### 일반적인 IAM 지속성

- 사용자 생성
- 제어된 사용자를 특권 그룹에 추가
- 액세스 키 생성 (새 사용자 또는 모든 사용자)
- 제어된 사용자/그룹에 추가 권한 부여 (첨부된 정책 또는 인라인 정책)
- MFA 비활성화 / 자신의 MFA 장치 추가
- 역할 체인 저글링 상황 생성 (아래 STS 지속성에서 더 자세히 설명)

### 백도어 역할 신뢰 정책

신뢰 정책에 백도어를 추가하여 외부 리소스를 가정할 수 있습니다 (또는 모든 사용자에게):
```json
{
"Version": "2012-10-17",
"Statement": [
{
"Effect": "Allow",
"Principal": {
"AWS": ["*", "arn:aws:iam::123213123123:root"]
},
"Action": "sts:AssumeRole"
}
]
}
```
### 백도어 정책 버전

마지막 버전이 아닌 정책에 관리자 권한을 부여한 다음, 해당 버전의 정책을 제어된 사용자/그룹에 할당합니다.

### 백도어 / 아이덴티티 제공자 생성

계정이 이미 일반 아이덴티티 제공자(예: Github)를 신뢰하고 있는 경우, 신뢰 조건을 증가시켜 공격자가 이를 악용할 수 있도록 할 수 있습니다.

{{#include ../../../banners/hacktricks-training.md}}
