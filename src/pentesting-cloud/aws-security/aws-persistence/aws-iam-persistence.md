# AWS - IAM Persistence

{{#include ../../../banners/hacktricks-training.md}}

## IAM

Για περισσότερες πληροφορίες, επισκεφθείτε:

{{#ref}}
../aws-services/aws-iam-enum.md
{{#endref}}

### Κοινές Τεχνικές IAM Persistence

- Δημιουργία χρήστη
- Προσθήκη ελεγχόμενου χρήστη σε προνομιούχα ομάδα
- Δημιουργία κλειδιών πρόσβασης (του νέου χρήστη ή όλων των χρηστών)
- Παροχή επιπλέον δικαιωμάτων σε ελεγχόμενους χρήστες/ομάδες (συνδεδεμένες πολιτικές ή inline πολιτικές)
- Απενεργοποίηση MFA / Προσθήκη της δικής σας συσκευής MFA
- Δημιουργία καταστάσεως Ρόλου Αλυσίδας (περισσότερα για αυτό παρακάτω στην επιμονή STS)

### Πολιτικές Εμπιστοσύνης Ρόλου Backdoor

Μπορείτε να προσθέσετε μια backdoor σε μια πολιτική εμπιστοσύνης για να μπορείτε να την αναλάβετε για έναν εξωτερικό πόρο που ελέγχετε (ή για όλους):
```json
{
"Version": "2012-10-17",
"Statement": [
{
"Effect": "Allow",
"Principal": {
"AWS": ["*", "arn:aws:iam::123213123123:root"]
},
"Action": "sts:AssumeRole"
}
]
}
```
### Πολιτική Πίσω Πόρτας Έκδοση

Δώστε δικαιώματα Διαχειριστή σε μια πολιτική που δεν είναι η τελευταία της έκδοση (η τελευταία έκδοση θα πρέπει να φαίνεται νόμιμη), στη συνέχεια αναθέστε αυτή την έκδοση της πολιτικής σε έναν ελεγχόμενο χρήστη/ομάδα.

### Πίσω Πόρτα / Δημιουργία Παρόχου Ταυτότητας

Εάν ο λογαριασμός εμπιστεύεται ήδη έναν κοινόχρηστο πάροχο ταυτότητας (όπως το Github), οι συνθήκες της εμπιστοσύνης θα μπορούσαν να αυξηθούν ώστε ο επιτιθέμενος να μπορεί να τις εκμεταλλευτεί.

{{#include ../../../banners/hacktricks-training.md}}
