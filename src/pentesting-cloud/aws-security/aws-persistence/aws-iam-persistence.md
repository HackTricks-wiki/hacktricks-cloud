# AWS - IAM Persistence

{{#include ../../../banners/hacktricks-training.md}}

## IAM

Kwa maelezo zaidi tembelea:

{{#ref}}
../aws-services/aws-iam-enum.md
{{#endref}}

### Uthibitishaji wa kawaida wa IAM

- Unda mtumiaji
- Ongeza mtumiaji anayedhibitiwa kwenye kundi lenye mamlaka
- Unda funguo za ufikiaji (za mtumiaji mpya au za watumiaji wote)
- Toa ruhusa za ziada kwa watumiaji/vidokezo vilivyodhibitiwa (sera zilizounganishwa au sera za ndani)
- Zima MFA / Ongeza kifaa chako cha MFA
- Unda hali ya Mnyororo wa Jukumu (zaidi kuhusu hii hapa chini katika uthibitishaji wa STS)

### Sera za Kuamini za Backdoor

Unaweza kuingiza backdoor kwenye sera ya kuamini ili uweze kuichukua kwa rasilimali ya nje inayodhibitiwa na wewe (au kwa kila mtu):
```json
{
"Version": "2012-10-17",
"Statement": [
{
"Effect": "Allow",
"Principal": {
"AWS": ["*", "arn:aws:iam::123213123123:root"]
},
"Action": "sts:AssumeRole"
}
]
}
```
### Sera ya Backdoor Toleo

Patia ruhusa za Msimamizi kwa sera katika toleo lake si la mwisho (toleo la mwisho linapaswa kuonekana halali), kisha piga hiyo sera kwa mtumiaji/jeshi lililodhibitiwa.

### Backdoor / Unda Mtoa Kitambulisho

Ikiwa akaunti tayari inategemea mtoa kitambulisho wa kawaida (kama Github) masharti ya uaminifu yanaweza kuongezwa ili mshambuliaji aweze kuyatumia. 

{{#include ../../../banners/hacktricks-training.md}}
