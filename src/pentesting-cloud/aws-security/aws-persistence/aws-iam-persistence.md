# AWS - IAM Persistence

{{#include ../../../banners/hacktricks-training.md}}

## IAM

Pour plus d'informations, accédez à :

{{#ref}}
../aws-services/aws-iam-enum.md
{{#endref}}

### Persistence IAM courante

- Créer un utilisateur
- Ajouter un utilisateur contrôlé à un groupe privilégié
- Créer des clés d'accès (de l'utilisateur nouvel ou de tous les utilisateurs)
- Accorder des permissions supplémentaires aux utilisateurs/groupes contrôlés (politiques attachées ou politiques en ligne)
- Désactiver MFA / Ajouter votre propre appareil MFA
- Créer une situation de jonglage de chaîne de rôle (plus d'informations ci-dessous dans la persistance STS)

### Politiques de confiance de rôle de porte dérobée

Vous pourriez créer une porte dérobée dans une politique de confiance pour pouvoir l'assumer pour une ressource externe contrôlée par vous (ou pour tout le monde) :
```json
{
"Version": "2012-10-17",
"Statement": [
{
"Effect": "Allow",
"Principal": {
"AWS": ["*", "arn:aws:iam::123213123123:root"]
},
"Action": "sts:AssumeRole"
}
]
}
```
### Version de la politique de porte dérobée

Donnez des permissions d'administrateur à une politique qui n'est pas sa dernière version (la dernière version doit sembler légitime), puis assignez cette version de la politique à un utilisateur/groupe contrôlé.

### Porte dérobée / Créer un fournisseur d'identité

Si le compte fait déjà confiance à un fournisseur d'identité commun (comme Github), les conditions de confiance pourraient être augmentées afin que l'attaquant puisse en abuser.

{{#include ../../../banners/hacktricks-training.md}}
