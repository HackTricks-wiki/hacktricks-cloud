# AWS - IAM Persistence

{{#include ../../../../banners/hacktricks-training.md}}

## IAM

Daha fazla bilgi için bakınız:

{{#ref}}
../../aws-services/aws-iam-enum.md
{{#endref}}

### Common IAM Persistence

- Bir kullanıcı oluşturun
- Kontrol ettiğiniz bir kullanıcıyı ayrıcalıklı bir gruba ekleyin
- Erişim anahtarları oluşturun (yeni kullanıcı için veya tüm kullanıcılar için)
- Kontrol ettiğiniz kullanıcılar/gruplara ekstra izinler verin (attached policies or inline policies)
- MFA'yı devre dışı bırakın / Kendi MFA cihazınızı ekleyin
- Role Chain Juggling durumu oluşturun (aşağıda STS persistence bölümünde daha fazlası)

### Backdoor Role Trust Policies

Kontrolünüzdeki harici bir kaynak için (veya herkese) onu assume edebilmek amacıyla bir trust policy'yi backdoor'layabilirsiniz:
```json
{
"Version": "2012-10-17",
"Statement": [
{
"Effect": "Allow",
"Principal": {
"AWS": ["*", "arn:aws:iam::123213123123:root"]
},
"Action": "sts:AssumeRole"
}
]
}
```
### Backdoor Policy Version

Bir policy'nin son sürümü olmayan bir versiyonuna Administrator izinleri verin (son sürüm meşru görünmelidir), ardından o policy versiyonunu kontrol edilen bir kullanıcı/gruba atayın.

### Backdoor / Create Identity Provider

Hesap zaten yaygın bir identity provider'a (ör. Github) güveniyorsa, güvene ilişkin koşullar genişletilerek saldırganın bunları suistimal etmesi sağlanabilir.

{{#include ../../../../banners/hacktricks-training.md}}
