# AWS - Cognito स्थायित्व

{{#include ../../../../banners/hacktricks-training.md}}

## Cognito

अधिक जानकारी के लिए देखें:

{{#ref}}
../../aws-services/aws-cognito-enum/
{{#endref}}

### उपयोगकर्ता स्थायित्व

Cognito एक सेवा है जो अनप्रमाणित और प्रमाणित उपयोगकर्ताओं को roles देने तथा उपयोगकर्ताओं की directory को नियंत्रित करने की अनुमति देती है। कुछ अलग-अलग configurations को बदला जा सकता है ताकि कुछ स्थायित्व बनाए रखा जा सके, जैसे:

- **Adding a User Pool** जो उपयोगकर्ता द्वारा नियंत्रित हो, उसे एक Identity Pool में जोड़ना
- एक **IAM role** को unauthenticated Identity Pool को देना और Basic auth flow की अनुमति देना
- या एक **authenticated Identity Pool** को अगर हमलावर login कर सके
- या दिए गए roles के permissions में सुधार करना (**improve the permissions**)
- **Create, verify & privesc** attributes नियंत्रित users या **User Pool** में नए users के माध्यम से
- **Allowing external Identity Providers** को User Pool या Identity Pool में login करने की अनुमति देना

इन क्रियाओं को कैसे करना है देखें:

{{#ref}}
../../aws-privilege-escalation/aws-cognito-privesc/README.md
{{#endref}}

### `cognito-idp:SetRiskConfiguration`

इस privilege वाला हमलावर risk configuration को बदल सकता है ताकि वह Cognito user के रूप में login कर सके **बिना alarms trigger हुए**। [**cli देखें**](https://docs.aws.amazon.com/cli/latest/reference/cognito-idp/set-risk-configuration.html) सभी विकल्पों की जाँच करने के लिए:
```bash
aws cognito-idp set-risk-configuration --user-pool-id <pool-id> --compromised-credentials-risk-configuration EventFilter=SIGN_UP,Actions={EventAction=NO_ACTION}
```
डिफ़ॉल्ट रूप से यह अक्षम है:

<figure><img src="https://lh6.googleusercontent.com/EOiM0EVuEgZDfW3rOJHLQjd09-KmvraCMssjZYpY9sVha6NcxwUjStrLbZxAT3D3j9y08kd5oobvW8a2fLUVROyhkHaB1OPhd7X6gJW3AEQtlZM62q41uYJjTY1EJ0iQg6Orr1O7yZ798EpIJ87og4Tbzw=s2048" alt=""><figcaption></figcaption></figure>

{{#include ../../../../banners/hacktricks-training.md}}
