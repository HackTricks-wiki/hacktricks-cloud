# Kubernetes Pentesting

{{#include ../../banners/hacktricks-training.md}}

## Kubernetes Basics

Jeśli nie wiesz nic o Kubernetes, to jest to **dobry początek**. Przeczytaj to, aby dowiedzieć się o **architekturze, komponentach i podstawowych działaniach** w Kubernetes:

{{#ref}}
kubernetes-basics.md
{{#endref}}

### Labs to practice and learn

- [https://securekubernetes.com/](https://securekubernetes.com)
- [https://madhuakula.com/kubernetes-goat/index.html](https://madhuakula.com/kubernetes-goat/index.html)

## Hardening Kubernetes / Automatic Tools

{{#ref}}
kubernetes-hardening/
{{#endref}}

## Manual Kubernetes Pentest

### From the Outside

Istnieje kilka możliwych **usług Kubernetes, które możesz znaleźć wystawione** w Internecie (lub w wewnętrznych sieciach). Jeśli je znajdziesz, wiesz, że tam jest środowisko Kubernetes.

W zależności od konfiguracji i twoich uprawnień, możesz być w stanie wykorzystać to środowisko, aby uzyskać więcej informacji:

{{#ref}}
pentesting-kubernetes-services/
{{#endref}}

### Enumeration inside a Pod

Jeśli uda ci się **skompromentować Pod**, przeczytaj następującą stronę, aby dowiedzieć się, jak enumerować i spróbować **eskalować uprawnienia/uciec**:

{{#ref}}
attacking-kubernetes-from-inside-a-pod.md
{{#endref}}

### Enumerating Kubernetes with Credentials

Możesz być w stanie skompromitować **dane uwierzytelniające użytkownika, token użytkownika lub jakiś token konta usługi**. Możesz go użyć do komunikacji z usługą API Kubernetes i spróbować **enumerować, aby dowiedzieć się więcej** o tym:

{{#ref}}
kubernetes-enumeration.md
{{#endref}}

Innym ważnym szczegółem dotyczącym enumeracji i nadużywania uprawnień Kubernetes jest **Kubernetes Role-Based Access Control (RBAC)**. Jeśli chcesz nadużywać uprawnień, najpierw powinieneś o tym przeczytać tutaj:

{{#ref}}
kubernetes-role-based-access-control-rbac.md
{{#endref}}

#### Znając RBAC i mając enumerowane środowisko, możesz teraz spróbować nadużyć uprawnień za pomocą:

{{#ref}}
abusing-roles-clusterroles-in-kubernetes/
{{#endref}}

### Privesc to a different Namespace

Jeśli skompromitowałeś przestrzeń nazw, możesz potencjalnie uciec do innych przestrzeni nazw z bardziej interesującymi uprawnieniami/zasobami:

{{#ref}}
kubernetes-namespace-escalation.md
{{#endref}}

### From Kubernetes to the Cloud

Jeśli skompromitowałeś konto K8s lub pod, możesz być w stanie przejść do innych chmur. Dzieje się tak, ponieważ w chmurach takich jak AWS lub GCP możliwe jest **nadanie uprawnień SA K8s w chmurze**.

{{#ref}}
kubernetes-pivoting-to-clouds.md
{{#endref}}

{{#include ../../banners/hacktricks-training.md}}
