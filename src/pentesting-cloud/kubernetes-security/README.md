# Kubernetes Pentesting

{{#include ../../banners/hacktricks-training.md}}

## Kubernetes Basics

Se non sai nulla su Kubernetes, questo è un **buon inizio**. Leggilo per conoscere l'**architettura, i componenti e le azioni di base** in Kubernetes:

{{#ref}}
kubernetes-basics.md
{{#endref}}

### Labs to practice and learn

- [https://securekubernetes.com/](https://securekubernetes.com)
- [https://madhuakula.com/kubernetes-goat/index.html](https://madhuakula.com/kubernetes-goat/index.html)

## Hardening Kubernetes / Automatic Tools

{{#ref}}
kubernetes-hardening/
{{#endref}}

## Manual Kubernetes Pentest

### From the Outside

Ci sono diversi possibili **servizi Kubernetes che potresti trovare esposti** su Internet (o all'interno di reti interne). Se li trovi, sai che c'è un ambiente Kubernetes lì dentro.

A seconda della configurazione e dei tuoi privilegi, potresti essere in grado di abusare di quell'ambiente, per ulteriori informazioni:

{{#ref}}
pentesting-kubernetes-services/
{{#endref}}

### Enumeration inside a Pod

Se riesci a **compromettere un Pod**, leggi la pagina seguente per imparare come enumerare e provare a **escalare privilegi/uscire**:

{{#ref}}
attacking-kubernetes-from-inside-a-pod.md
{{#endref}}

### Enumerating Kubernetes with Credentials

Potresti essere riuscito a compromettere **credenziali utente, un token utente o qualche token di account di servizio**. Puoi usarlo per comunicare con il servizio API di Kubernetes e provare a **enumerarlo per saperne di più**:

{{#ref}}
kubernetes-enumeration.md
{{#endref}}

Un altro dettaglio importante riguardo all'enumerazione e all'abuso dei permessi di Kubernetes è il **Kubernetes Role-Based Access Control (RBAC)**. Se vuoi abusare dei permessi, dovresti prima leggerne qui:

{{#ref}}
kubernetes-role-based-access-control-rbac.md
{{#endref}}

#### Sapendo riguardo RBAC e avendo enumerato l'ambiente, ora puoi provare ad abusare dei permessi con:

{{#ref}}
abusing-roles-clusterroles-in-kubernetes/
{{#endref}}

### Privesc to a different Namespace

Se hai compromesso un namespace, puoi potenzialmente uscire in altri namespace con permessi/risorse più interessanti:

{{#ref}}
kubernetes-namespace-escalation.md
{{#endref}}

### From Kubernetes to the Cloud

Se hai compromesso un account K8s o un pod, potresti essere in grado di spostarti su altre nuvole. Questo perché in nuvole come AWS o GCP è possibile **dare a un SA K8s permessi sulla nuvola**.

{{#ref}}
kubernetes-pivoting-to-clouds.md
{{#endref}}

{{#include ../../banners/hacktricks-training.md}}
