# Kubernetes Pentesting

{{#include ../../banners/hacktricks-training.md}}

## Kubernetes Basics

Αν δεν γνωρίζετε τίποτα για το Kubernetes, αυτό είναι μια **καλή αρχή**. Διαβάστε το για να μάθετε για την **αρχιτεκτονική, τα συστατικά και τις βασικές ενέργειες** στο Kubernetes:

{{#ref}}
kubernetes-basics.md
{{#endref}}

### Labs to practice and learn

- [https://securekubernetes.com/](https://securekubernetes.com)
- [https://madhuakula.com/kubernetes-goat/index.html](https://madhuakula.com/kubernetes-goat/index.html)

## Hardening Kubernetes / Automatic Tools

{{#ref}}
kubernetes-hardening/
{{#endref}}

## Manual Kubernetes Pentest

### From the Outside

Υπάρχουν αρκετές πιθανές **υπηρεσίες Kubernetes που θα μπορούσατε να βρείτε εκτεθειμένες** στο Διαδίκτυο (ή μέσα σε εσωτερικά δίκτυα). Αν τις βρείτε, ξέρετε ότι υπάρχει περιβάλλον Kubernetes εκεί.

Ανάλογα με τη διαμόρφωση και τα δικαιώματά σας, μπορεί να είστε σε θέση να εκμεταλλευτείτε αυτό το περιβάλλον, για περισσότερες πληροφορίες:

{{#ref}}
pentesting-kubernetes-services/
{{#endref}}

### Enumeration inside a Pod

Αν καταφέρετε να **συμβιβάσετε ένα Pod**, διαβάστε την παρακάτω σελίδα για να μάθετε πώς να κάνετε καταμέτρηση και να προσπαθήσετε να **ανεβάσετε δικαιώματα/διαφύγετε**:

{{#ref}}
attacking-kubernetes-from-inside-a-pod.md
{{#endref}}

### Enumerating Kubernetes with Credentials

Μπορεί να έχετε καταφέρει να συμβιβάσετε **διαπιστευτήρια χρήστη, ένα token χρήστη ή κάποιο token υπηρεσίας**. Μπορείτε να το χρησιμοποιήσετε για να μιλήσετε με την υπηρεσία API του Kubernetes και να προσπαθήσετε να **καταμετρήσετε για να μάθετε περισσότερα** γι' αυτό:

{{#ref}}
kubernetes-enumeration.md
{{#endref}}

Ένα άλλο σημαντικό στοιχείο σχετικά με την καταμέτρηση και την κακή χρήση δικαιωμάτων Kubernetes είναι ο **Κανόνας Ελέγχου Πρόσβασης Βασισμένος σε Ρόλους (RBAC)**. Αν θέλετε να εκμεταλλευτείτε τα δικαιώματα, θα πρέπει πρώτα να διαβάσετε γι' αυτό εδώ:

{{#ref}}
kubernetes-role-based-access-control-rbac.md
{{#endref}}

#### Γνωρίζοντας για το RBAC και έχοντας καταμετρήσει το περιβάλλον, μπορείτε τώρα να προσπαθήσετε να εκμεταλλευτείτε τα δικαιώματα με:

{{#ref}}
abusing-roles-clusterroles-in-kubernetes/
{{#endref}}

### Privesc to a different Namespace

Αν έχετε συμβιβάσει ένα namespace, μπορείτε δυνητικά να διαφύγετε σε άλλα namespaces με πιο ενδιαφέροντα δικαιώματα/πόρους:

{{#ref}}
kubernetes-namespace-escalation.md
{{#endref}}

### From Kubernetes to the Cloud

Αν έχετε συμβιβάσει έναν λογαριασμό K8s ή ένα pod, μπορεί να είστε σε θέση να μετακινηθείτε σε άλλες υπηρεσίες cloud. Αυτό συμβαίνει επειδή σε cloud όπως το AWS ή το GCP είναι δυνατό να **δώσετε δικαιώματα σε έναν K8s SA πάνω στο cloud**.

{{#ref}}
kubernetes-pivoting-to-clouds.md
{{#endref}}

{{#include ../../banners/hacktricks-training.md}}
