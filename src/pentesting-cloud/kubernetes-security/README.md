# Kubernetes Pentesting

{{#include ../../banners/hacktricks-training.md}}

## Основи Kubernetes

Якщо ви нічого не знаєте про Kubernetes, це **добрий початок**. Прочитайте це, щоб дізнатися про **архітектуру, компоненти та основні дії** в Kubernetes:

{{#ref}}
kubernetes-basics.md
{{#endref}}

### Лабораторії для практики та навчання

- [https://securekubernetes.com/](https://securekubernetes.com)
- [https://madhuakula.com/kubernetes-goat/index.html](https://madhuakula.com/kubernetes-goat/index.html)

## Укріплення Kubernetes / Автоматичні інструменти

{{#ref}}
kubernetes-hardening/
{{#endref}}

## Ручний Pentest Kubernetes

### Ззовні

Є кілька можливих **сервісів Kubernetes, які ви можете знайти відкритими** в Інтернеті (або всередині внутрішніх мереж). Якщо ви їх знайдете, ви знаєте, що там є середовище Kubernetes.

Залежно від конфігурації та ваших привілеїв, ви можете зловживати цим середовищем, для отримання додаткової інформації:

{{#ref}}
pentesting-kubernetes-services/
{{#endref}}

### Перерахунок всередині Pod

Якщо вам вдасться **зламати Pod**, прочитайте наступну сторінку, щоб дізнатися, як перерахувати та спробувати **підвищити привілеї/втекти**:

{{#ref}}
attacking-kubernetes-from-inside-a-pod.md
{{#endref}}

### Перерахунок Kubernetes з обліковими даними

Вам, можливо, вдалося зламати **облікові дані користувача, токен користувача або токен облікового запису служби**. Ви можете використовувати його для спілкування з API-сервісом Kubernetes і спробувати **перерахувати його, щоб дізнатися більше** про нього:

{{#ref}}
kubernetes-enumeration.md
{{#endref}}

Ще одна важлива деталь про перерахунок і зловживання дозволами Kubernetes - це **Контроль доступу на основі ролей Kubernetes (RBAC)**. Якщо ви хочете зловживати дозволами, спочатку слід прочитати про це тут:

{{#ref}}
kubernetes-role-based-access-control-rbac.md
{{#endref}}

#### Знаючи про RBAC і маючи перераховане середовище, ви тепер можете спробувати зловживати дозволами з:

{{#ref}}
abusing-roles-clusterroles-in-kubernetes/
{{#endref}}

### Підвищення привілеїв до іншого простору імен

Якщо ви зламали простір імен, ви можете потенційно втекти до інших просторів імен з більш цікавими дозволами/ресурсами:

{{#ref}}
kubernetes-namespace-escalation.md
{{#endref}}

### Від Kubernetes до Хмари

Якщо ви зламали обліковий запис K8s або pod, ви можете мати можливість перейти до інших хмар. Це пов'язано з тим, що в таких хмарах, як AWS або GCP, можливо **надати K8s SA дозволи над хмарою**.

{{#ref}}
kubernetes-pivoting-to-clouds.md
{{#endref}}

{{#include ../../banners/hacktricks-training.md}}
