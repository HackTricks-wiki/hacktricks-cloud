# Kubernetes Pentesting

{{#include ../../banners/hacktricks-training.md}}

## Kubernetesの基本

Kubernetesについて何も知らない場合、これは**良いスタート**です。Kubernetesの**アーキテクチャ、コンポーネント、基本的なアクション**について学ぶために読んでください：

{{#ref}}
kubernetes-basics.md
{{#endref}}

### 実践と学習のためのラボ

- [https://securekubernetes.com/](https://securekubernetes.com)
- [https://madhuakula.com/kubernetes-goat/index.html](https://madhuakula.com/kubernetes-goat/index.html)

## Kubernetesの強化 / 自動ツール

{{#ref}}
kubernetes-hardening/
{{#endref}}

## 手動Kubernetesペンテスト

### 外部から

インターネット上（または内部ネットワーク内）で**公開されているKubernetesサービス**を見つける可能性があります。それらを見つけた場合、そこにKubernetes環境があることがわかります。

構成や権限によっては、その環境を悪用できるかもしれません。詳細については：

{{#ref}}
pentesting-kubernetes-services/
{{#endref}}

### Pod内の列挙

**Podを侵害**することができた場合、列挙方法や**権限の昇格/エスケープ**を試みる方法について学ぶために次のページを読んでください：

{{#ref}}
attacking-kubernetes-from-inside-a-pod.md
{{#endref}}

### 資格情報を使ったKubernetesの列挙

**ユーザー資格情報、ユーザートークン、またはサービスアカウントトークン**を侵害できたかもしれません。それを使用してKubernetes APIサービスに話しかけ、**列挙して詳細を学ぶ**ことができます：

{{#ref}}
kubernetes-enumeration.md
{{#endref}}

列挙とKubernetesの権限悪用に関するもう一つの重要な詳細は**Kubernetesのロールベースアクセス制御（RBAC）**です。権限を悪用したい場合、まずここでそれについて読むべきです：

{{#ref}}
kubernetes-role-based-access-control-rbac.md
{{#endref}}

#### RBACについて知り、環境を列挙した後、次の方法で権限を悪用しようとすることができます：

{{#ref}}
abusing-roles-clusterroles-in-kubernetes/
{{#endref}}

### 異なるネームスペースへの権限昇格

ネームスペースを侵害した場合、より興味深い権限/リソースを持つ他のネームスペースにエスケープする可能性があります：

{{#ref}}
kubernetes-namespace-escalation.md
{{#endref}}

### Kubernetesからクラウドへ

K8sアカウントまたはPodを侵害した場合、他のクラウドに移動できるかもしれません。これは、AWSやGCPのようなクラウドでは**K8s SAにクラウド上の権限を与えることが可能**だからです。

{{#ref}}
kubernetes-pivoting-to-clouds.md
{{#endref}}

{{#include ../../banners/hacktricks-training.md}}
