# Kubernetes Namespace Escalation

{{#include ../../banners/hacktricks-training.md}}

Kubernetesでは、**名前空間に侵入することが比較的一般的です**（ユーザーの認証情報を盗んだり、ポッドを侵害したりすることによって）。しかし、通常は**より興味深いものが見つかるため、別の名前空間に昇格することに興味があります**。

別の名前空間に逃げるために試すことができるいくつかの技術は次のとおりです：

### K8sの権限を悪用する

明らかに、あなたが盗んだアカウントが昇格先の名前空間に対して敏感な権限を持っている場合、**サービスアカウントを使用してポッドを作成する**、**既存のポッド内でシェルを実行する**、または**秘密**のSAトークンを読むなどのアクションを悪用できます。

どの権限を悪用できるかについての詳細は、次を読んでください：

{{#ref}}
abusing-roles-clusterroles-in-kubernetes/
{{#endref}}

### ノードに逃げる

ポッドを侵害して逃げることができる場合や、特権ポッドを作成して逃げることができる場合、他のSAトークンを盗むためにいくつかのことを行うことができます：

- ノードで実行されている他のDockerコンテナにマウントされた**SAトークン**を確認する
- ノードに**追加の権限**が与えられた新しい**kubeconfigファイル**があるか確認する
- 有効になっている場合（または自分で有効にする）、**他の名前空間のミラーリングポッドを作成する**ことを試みると、これらの名前空間のデフォルトトークンアカウントにアクセスできるかもしれません（私はまだこれをテストしていません）

これらの技術は次に説明されています：

{{#ref}}
attacking-kubernetes-from-inside-a-pod.md
{{#endref}}

{{#include ../../banners/hacktricks-training.md}}
