# Kubernetes Namespace Escalation

{{#include ../../banners/hacktricks-training.md}}

Kubernetes'te bir şekilde **bir namespace'e girmeyi başarmanız** oldukça yaygındır (bazı kullanıcı kimlik bilgilerini çalarak veya bir pod'u tehlikeye atarak). Ancak, genellikle **daha ilginç şeylerin bulunabileceği farklı bir namespace'e yükselmekle** ilgileneceksiniz.

Farklı bir namespace'e kaçmak için deneyebileceğiniz bazı teknikler:

### K8s ayrıcalıklarını kötüye kullanma

Açıkça, çaldığınız hesabın yükselmek istediğiniz namespace üzerinde hassas ayrıcalıklara sahip olması durumunda, **namespace içinde hizmet hesapları ile pod'lar oluşturma**, **mevcut bir pod içinde bir shell çalıştırma** veya **gizli** SA token'larını okuma gibi eylemleri kötüye kullanabilirsiniz.

Hangi ayrıcalıkları kötüye kullanabileceğiniz hakkında daha fazla bilgi için okuyun:

{{#ref}}
abusing-roles-clusterroles-in-kubernetes/
{{#endref}}

### Düğüme kaçış

Eğer bir pod'u tehlikeye atarak veya ayrıcalıklı bir pod oluşturup kaçış yaparak düğüme kaçabiliyorsanız, diğer SA token'larını çalmak için birkaç şey yapabilirsiniz:

- Düğümde çalışan diğer docker konteynerlerinde **SAs token'larını kontrol edin**
- Düğümde **ek izinlere sahip yeni kubeconfig dosyalarını kontrol edin**
- Eğer etkinse (veya kendiniz etkinleştirin) **diğer namespace'lerin yansıtılmış pod'larını oluşturmayı** deneyin, çünkü bu namespace'lerin varsayılan token hesaplarına erişim elde edebilirsiniz (bunu henüz test etmedim)

Tüm bu teknikler şurada açıklanmıştır:

{{#ref}}
attacking-kubernetes-from-inside-a-pod.md
{{#endref}}

{{#include ../../banners/hacktricks-training.md}}
