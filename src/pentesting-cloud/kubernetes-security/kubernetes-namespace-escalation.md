# Kubernetes Namespace Escalation

{{#include ../../banners/hacktricks-training.md}}

Katika Kubernetes ni kawaida kwamba kwa namna fulani **unafanikiwa kuingia kwenye namespace** (kwa kuiba baadhi ya akidi za mtumiaji au kwa kuathiri pod). Hata hivyo, kwa kawaida utakuwa na hamu ya **kuinua hadhi hadi namespace tofauti kwani vitu vya kuvutia zaidi vinaweza kupatikana huko**.

Hapa kuna baadhi ya mbinu unazoweza kujaribu kutoroka hadi namespace tofauti:

### Abuse K8s privileges

Kwa wazi ikiwa akaunti uliyoiiba ina mamlaka nyeti juu ya namespace unayoweza kuinuka, unaweza kutumia vitendo kama **kuunda pods** na akaunti za huduma katika NS, **kutekeleza** shell katika pod iliyopo tayari ndani ya ns, au kusoma **siri** SA tokens.

Kwa maelezo zaidi kuhusu mamlaka gani unaweza kutumia soma:

{{#ref}}
abusing-roles-clusterroles-in-kubernetes/
{{#endref}}

### Escape to the node

Ikiwa unaweza kutoroka hadi node ama kwa sababu umeathiri pod na unaweza kutoroka au kwa sababu unaweza kuunda pod yenye mamlaka na kutoroka unaweza kufanya mambo kadhaa ili kuiba tokens za SAs wengine:

- Angalia **tokens za SAs zilizowekwa katika kontena zingine za docker** zinazokimbia kwenye node
- Angalia **faili mpya za kubeconfig kwenye node zikiwa na ruhusa za ziada** zilizotolewa kwa node
- Ikiwa imewezeshwa (au iwezeshe mwenyewe) jaribu **kuunda pods zilizokopwa za namespaces nyingine** kwani unaweza kupata ufikiaji wa akaunti za token za namespace hizo (sijajaribu hii bado)

Mbinu hizi zote zinaelezewa katika:

{{#ref}}
attacking-kubernetes-from-inside-a-pod.md
{{#endref}}

{{#include ../../banners/hacktricks-training.md}}
