# Kubernetes Namespace Escalation

{{#include ../../banners/hacktricks-training.md}}

Kubernetes에서는 **어떤 식으로든 네임스페이스에 들어가는 것이 꽤 일반적입니다** (사용자 자격 증명을 훔치거나 포드를 손상시켜서). 그러나 일반적으로 **더 흥미로운 것들이 있는 다른 네임스페이스로 상승하는 것에 관심이 있을 것입니다**.

다른 네임스페이스로 탈출하기 위해 시도할 수 있는 몇 가지 기술은 다음과 같습니다:

### K8s 권한 남용

명백히 당신이 훔친 계정이 상승할 네임스페이스에 대한 민감한 권한을 가지고 있다면, **서비스 계정으로 포드를 생성하기**, **네임스페이스 내의 이미 존재하는 포드에서 셸을 실행하기**, 또는 **비밀** SA 토큰을 읽는 등의 작업을 남용할 수 있습니다.

어떤 권한을 남용할 수 있는지에 대한 더 많은 정보는 다음을 읽어보세요:

{{#ref}}
abusing-roles-clusterroles-in-kubernetes/
{{#endref}}

### 노드로 탈출

포드를 손상시켜 탈출할 수 있거나 특권 포드를 생성하고 탈출할 수 있다면, 다른 SA 토큰을 훔치기 위해 여러 가지 작업을 수행할 수 있습니다:

- 노드에서 실행 중인 다른 도커 컨테이너에 **마운트된 SA 토큰** 확인
- 노드에 **추가 권한이 부여된 새로운 kubeconfig 파일** 확인
- 활성화되어 있다면 (또는 스스로 활성화) **다른 네임스페이스의 미러 포드를 생성**해 보세요. 그렇게 하면 해당 네임스페이스의 기본 토큰 계정에 접근할 수 있을지도 모릅니다 (이것은 아직 테스트하지 않았습니다).

이 모든 기술은 다음에서 설명됩니다:

{{#ref}}
attacking-kubernetes-from-inside-a-pod.md
{{#endref}}

{{#include ../../banners/hacktricks-training.md}}
