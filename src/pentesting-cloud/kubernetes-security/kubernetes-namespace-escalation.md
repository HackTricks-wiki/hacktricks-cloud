# Kubernetes Namespace Escalation

{{#include ../../banners/hacktricks-training.md}}

Στο Kubernetes είναι αρκετά συνηθισμένο να **καταφέρετε να μπείτε σε ένα namespace** (κλέβοντας κάποια διαπιστευτήρια χρήστη ή συμβιβάζοντας ένα pod). Ωστόσο, συνήθως θα σας ενδιαφέρει να **αναβαθμίσετε σε ένα διαφορετικό namespace καθώς εκεί μπορεί να βρείτε πιο ενδιαφέροντα πράγματα**.

Ακολουθούν μερικές τεχνικές που μπορείτε να δοκιμάσετε για να ξεφύγετε σε ένα διαφορετικό namespace:

### Abuse K8s privileges

Προφανώς, αν ο λογαριασμός που έχετε κλέψει έχει ευαίσθητα δικαιώματα πάνω στο namespace στο οποίο μπορείτε να αναβαθμιστείτε, μπορείτε να εκμεταλλευτείτε ενέργειες όπως **δημιουργία pods** με λογαριασμούς υπηρεσιών στο NS, **εκτέλεση** ενός shell σε ένα ήδη υπάρχον pod μέσα στο ns, ή να διαβάσετε τα **μυστικά** SA tokens.

Για περισσότερες πληροφορίες σχετικά με τα δικαιώματα που μπορείτε να εκμεταλλευτείτε διαβάστε:

{{#ref}}
abusing-roles-clusterroles-in-kubernetes/
{{#endref}}

### Escape to the node

Αν μπορείτε να ξεφύγετε στο node είτε επειδή έχετε συμβιβάσει ένα pod και μπορείτε να ξεφύγετε είτε επειδή μπορείτε να δημιουργήσετε ένα προνομιούχο pod και να ξεφύγετε, μπορείτε να κάνετε αρκετά πράγματα για να κλέψετε άλλα SA tokens:

- Ελέγξτε για **SA tokens που είναι τοποθετημένα σε άλλα docker containers** που τρέχουν στο node
- Ελέγξτε για νέα **kubeconfig αρχεία στο node με επιπλέον δικαιώματα** που έχουν δοθεί στο node
- Αν είναι ενεργοποιημένο (ή ενεργοποιήστε το εσείς) προσπαθήστε να **δημιουργήσετε καθρεφτισμένα pods άλλων namespaces** καθώς μπορεί να αποκτήσετε πρόσβαση στους προεπιλεγμένους λογαριασμούς token αυτών των namespaces (δεν το έχω δοκιμάσει ακόμα)

Όλες αυτές οι τεχνικές εξηγούνται στο:

{{#ref}}
attacking-kubernetes-from-inside-a-pod.md
{{#endref}}

{{#include ../../banners/hacktricks-training.md}}
