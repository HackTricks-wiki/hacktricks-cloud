# Kubernetes Namespace Escalation

{{#include ../../banners/hacktricks-training.md}}

在Kubernetes中，**你很可能以某种方式进入一个命名空间**（通过窃取一些用户凭证或通过攻陷一个pod）。然而，通常你会对**升级到一个不同的命名空间更感兴趣，因为那里可能会发现更有趣的东西**。

以下是一些你可以尝试逃到不同命名空间的技术：

### 滥用K8s权限

显然，如果你窃取的账户在你想要升级到的命名空间上具有敏感权限，你可以滥用诸如**在命名空间中创建pod**、**在命名空间内的现有pod中执行**shell或读取**secret** SA令牌等操作。

有关你可以滥用的权限的更多信息，请阅读：

{{#ref}}
abusing-roles-clusterroles-in-kubernetes/
{{#endref}}

### 逃到节点

如果你可以逃到节点，无论是因为你攻陷了一个pod并且可以逃脱，还是因为你可以创建一个特权pod并逃脱，你可以做几件事情来窃取其他SA令牌：

- 检查节点中**挂载在其他docker容器中的SA令牌**
- 检查节点中**具有额外权限的新kubeconfig文件**
- 如果启用（或自己启用），尝试**创建其他命名空间的镜像pod**，因为你可能会获得对这些命名空间默认令牌账户的访问（我还没有测试过这个）

所有这些技术在以下内容中有解释：

{{#ref}}
attacking-kubernetes-from-inside-a-pod.md
{{#endref}}

{{#include ../../banners/hacktricks-training.md}}
