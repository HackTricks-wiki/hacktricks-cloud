# Kubernetes Namespace Escalation

{{#include ../../banners/hacktricks-training.md}}

У Kubernetes досить поширено, що ви якимось чином **вдається потрапити в простір імен** (викравши облікові дані користувача або скомпрометувавши под). Однак, зазвичай вас буде цікавити **ескалація до іншого простору імен, оскільки там можна знайти більш цікаві речі**.

Ось кілька технік, які ви можете спробувати, щоб втекти в інший простір імен:

### Зловживання привілеями K8s

Очевидно, якщо обліковий запис, який ви вкрали, має чутливі привілеї над простором імен, до якого ви можете ескалувати, ви можете зловживати такими діями, як **створення подів** з обліковими записами служби в NS, **виконання** оболонки в уже існуючому поді всередині ns або читання **секретних** токенів SA.

Для отримання додаткової інформації про те, які привілеї ви можете зловживати, прочитайте:

{{#ref}}
abusing-roles-clusterroles-in-kubernetes/
{{#endref}}

### Втеча до вузла

Якщо ви можете втекти до вузла, або тому, що ви скомпрометували под і можете втекти, або тому, що ви можете створити привілейований под і втекти, ви можете зробити кілька речей, щоб вкрасти токени інших SA:

- Перевірте наявність **токенів SA, змонтованих в інших контейнерах docker**, що працюють на вузлі
- Перевірте наявність нових **файлів kubeconfig на вузлі з додатковими правами**, наданими вузлу
- Якщо це дозволено (або увімкніть це самі), спробуйте **створити віддзеркалені поди інших просторів імен**, оскільки ви можете отримати доступ до стандартних токенів облікових записів цих просторів імен (я ще не тестував це)

Усі ці техніки пояснені в:

{{#ref}}
attacking-kubernetes-from-inside-a-pod.md
{{#endref}}

{{#include ../../banners/hacktricks-training.md}}
