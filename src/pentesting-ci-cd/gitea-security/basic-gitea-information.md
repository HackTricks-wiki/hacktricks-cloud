# Basic Gitea Information

{{#include ../../banners/hacktricks-training.md}}

## Basic Structure

Η βασική δομή του περιβάλλοντος Gitea είναι να ομαδοποιεί τα repos κατά **οργάνωση(εις),** καθένα από τα οποία μπορεί να περιέχει **πολλούς αποθετηρίους** και **πολλές ομάδες.** Ωστόσο, σημειώστε ότι όπως και στο github, οι χρήστες μπορούν να έχουν repos εκτός της οργάνωσης.

Επιπλέον, ένας **χρήστης** μπορεί να είναι **μέλος** **διαφορετικών οργανώσεων**. Μέσα στην οργάνωση, ο χρήστης μπορεί να έχει **διαφορετικές άδειες πρόσβασης σε κάθε αποθετήριο**.

Ένας χρήστης μπορεί επίσης να είναι **μέλος διαφορετικών ομάδων** με διαφορετικές άδειες πρόσβασης σε διαφορετικά repos.

Και τέλος, **οι αποθετήρες μπορεί να έχουν ειδικούς μηχανισμούς προστασίας**.

## Permissions

### Organizations

Όταν μια **οργάνωση δημιουργείται**, μια ομάδα που ονομάζεται **Ιδιοκτήτες** δημιουργείται και ο χρήστης τοποθετείται μέσα σε αυτήν. Αυτή η ομάδα θα δώσει **διαχειριστική πρόσβαση** στην **οργάνωση**, αυτές οι **άδειες** και το **όνομα** της ομάδας **δεν μπορούν να τροποποιηθούν**.

Οι **διαχειριστές οργανώσεων** (ιδιοκτήτες) μπορούν να επιλέξουν την **ορατότητα** της οργάνωσης:

- Δημόσια
- Περιορισμένη (μόνο για συνδεδεμένους χρήστες)
- Ιδιωτική (μόνο για μέλη)

Οι **διαχειριστές οργανώσεων** μπορούν επίσης να υποδείξουν αν οι **διαχειριστές αποθετηρίων** μπορούν να **προσθέτουν ή να αφαιρούν πρόσβαση** για ομάδες. Μπορούν επίσης να υποδείξουν τον μέγιστο αριθμό αποθετηρίων.

Κατά τη δημιουργία μιας νέας ομάδας, επιλέγονται αρκετές σημαντικές ρυθμίσεις:

- Υποδεικνύεται τα **repos της οργάνωσης που θα μπορούν να έχουν πρόσβαση τα μέλη της ομάδας**: συγκεκριμένα repos (repos όπου έχει προστεθεί η ομάδα) ή όλα.
- Υποδεικνύεται επίσης **αν τα μέλη μπορούν να δημιουργούν νέα repos** (ο δημιουργός θα αποκτήσει διαχειριστική πρόσβαση σε αυτό)
- Οι **άδειες** που θα **έχουν** τα **μέλη** του αποθετηρίου:
- **Διαχειριστής** πρόσβαση
- **Συγκεκριμένη** πρόσβαση:

![](<../../images/image (118).png>)

### Teams & Users

Σε ένα repo, ο **διαχειριστής οργανώσεων** και οι **διαχειριστές αποθετηρίων** (αν επιτρέπεται από την οργάνωση) μπορούν να **διαχειρίζονται τους ρόλους** που δίνονται στους συνεργάτες (άλλους χρήστες) και τις ομάδες. Υπάρχουν **3** πιθανοί **ρόλοι**:

- Διαχειριστής
- Γράψιμο
- Ανάγνωση

## Gitea Authentication

### Web Access

Χρησιμοποιώντας **όνομα χρήστη + κωδικό πρόσβασης** και πιθανώς (και συνιστάται) 2FA.

### **SSH Keys**

Μπορείτε να ρυθμίσετε τον λογαριασμό σας με ένα ή περισσότερα δημόσια κλειδιά που επιτρέπουν στο σχετικό **ιδιωτικό κλειδί να εκτελεί ενέργειες εκ μέρους σας.** [http://localhost:3000/user/settings/keys](http://localhost:3000/user/settings/keys)

#### **GPG Keys**

Δεν μπορείτε να προσποιηθείτε τον χρήστη με αυτά τα κλειδιά, αλλά αν δεν το χρησιμοποιήσετε, μπορεί να είναι δυνατόν να **ανακαλυφθείτε για την αποστολή commits χωρίς υπογραφή**.

### **Personal Access Tokens**

Μπορείτε να δημιουργήσετε προσωπικό access token για να **δώσετε σε μια εφαρμογή πρόσβαση στον λογαριασμό σας**. Ένα προσωπικό access token δίνει πλήρη πρόσβαση στον λογαριασμό σας: [http://localhost:3000/user/settings/applications](http://localhost:3000/user/settings/applications)

### Oauth Applications

Όπως και τα προσωπικά access tokens, οι **Oauth εφαρμογές** θα έχουν **πλήρη πρόσβαση** στον λογαριασμό σας και στους τόπους στους οποίους έχει πρόσβαση ο λογαριασμός σας, επειδή, όπως αναφέρεται στα [docs](https://docs.gitea.io/en-us/oauth2-provider/#scopes), οι τομείς δεν υποστηρίζονται ακόμη:

![](<../../images/image (194).png>)

### Deploy keys

Τα deploy keys μπορεί να έχουν πρόσβαση μόνο για ανάγνωση ή εγγραφή στο repo, οπότε μπορεί να είναι ενδιαφέρον να παραβιαστούν συγκεκριμένα repos.

## Branch Protections

Οι προστασίες κλάδου έχουν σχεδιαστεί για να **μην δίνουν πλήρη έλεγχο ενός αποθετηρίου** στους χρήστες. Ο στόχος είναι να **τοποθετηθούν αρκετές μεθόδοι προστασίας πριν μπορέσετε να γράψετε κώδικα μέσα σε κάποιον κλάδο**.

Οι **προστασίες κλάδου ενός αποθετηρίου** μπορούν να βρεθούν στο _https://localhost:3000/\<orgname>/\<reponame>/settings/branches_

> [!NOTE]
> Δεν είναι **δυνατόν να οριστεί προστασία κλάδου σε επίπεδο οργάνωσης**. Έτσι, όλες πρέπει να δηλωθούν σε κάθε repo.

Διαφορετικές προστασίες μπορούν να εφαρμοστούν σε έναν κλάδο (όπως στον master):

- **Απενεργοποίηση Push**: Κανείς δεν μπορεί να σπρώξει σε αυτόν τον κλάδο
- **Ενεργοποίηση Push**: Οποιοσδήποτε με πρόσβαση μπορεί να σπρώξει, αλλά όχι να σπρώξει με δύναμη.
- **Whitelist Restricted Push**: Μόνο επιλεγμένοι χρήστες/ομάδες μπορούν να σπρώξουν σε αυτόν τον κλάδο (αλλά όχι να σπρώξουν με δύναμη)
- **Ενεργοποίηση Merge Whitelist**: Μόνο οι λευκωμένοι χρήστες/ομάδες μπορούν να συγχωνεύσουν PRs.
- **Ενεργοποίηση ελέγχων κατάστασης:** Απαιτούνται έλεγχοι κατάστασης για να περάσουν πριν από τη συγχώνευση.
- **Απαιτούνται εγκρίσεις**: Υποδείξτε τον αριθμό των εγκρίσεων που απαιτούνται πριν μπορέσει να συγχωνευθεί ένα PR.
- **Περιορισμός εγκρίσεων σε λευκωμένους**: Υποδείξτε χρήστες/ομάδες που μπορούν να εγκρίνουν PRs.
- **Αποκλεισμός συγχώνευσης σε απορριφθείσες αναθεωρήσεις**: Εάν ζητηθούν αλλαγές, δεν μπορεί να συγχωνευθεί (ακόμη και αν οι άλλοι έλεγχοι περάσουν)
- **Αποκλεισμός συγχώνευσης σε επίσημες αιτήσεις αναθεώρησης**: Εάν υπάρχουν επίσημες αιτήσεις αναθεώρησης, δεν μπορεί να συγχωνευθεί
- **Απόρριψη παλαιών εγκρίσεων**: Όταν υπάρχουν νέες commits, οι παλαιές εγκρίσεις θα απορριφθούν.
- **Απαιτούνται Υπογεγραμμένα Commits**: Τα commits πρέπει να είναι υπογεγραμμένα.
- **Αποκλεισμός συγχώνευσης εάν το pull request είναι παλιό**
- **Προστατευμένα/Μη προστατευμένα μοτίβα αρχείων**: Υποδείξτε μοτίβα αρχείων για προστασία/μη προστασία από αλλαγές

> [!NOTE]
> Όπως μπορείτε να δείτε, ακόμη και αν καταφέρατε να αποκτήσετε κάποια διαπιστευτήρια ενός χρήστη, **τα repos μπορεί να είναι προστατευμένα αποτρέποντάς σας να σπρώξετε κώδικα στον master** για παράδειγμα για να παραβιάσετε τη διαδικασία CI/CD.

{{#include ../../banners/hacktricks-training.md}}
