# Jenkins RCE Creando/Modificando Proyecto

{{#include ../../banners/hacktricks-training.md}}

## Creando un Proyecto

Este método es muy ruidoso porque tienes que crear un proyecto completamente nuevo (obviamente esto solo funcionará si se permite al usuario crear un nuevo proyecto).

1. **Crea un nuevo proyecto** (proyecto Freestyle) haciendo clic en "Nuevo Elemento" o en `/view/all/newJob`
2. Dentro de la sección **Construir**, establece **Ejecutar shell** y pega un lanzador de powershell Empire o un powershell de meterpreter (se puede obtener usando _unicorn_). Inicia la carga útil con _PowerShell.exe_ en lugar de usar _powershell._
3. Haz clic en **Construir ahora**
1. Si el botón **Construir ahora** no aparece, aún puedes ir a **configurar** --> **Disparadores de Construcción** --> `Construir periódicamente` y establecer un cron de `* * * * *`
2. En lugar de usar cron, puedes usar la configuración "**Disparar construcciones de forma remota**" donde solo necesitas establecer el nombre del token de API para disparar el trabajo. Luego ve a tu perfil de usuario y **genera un token de API** (llama a este token de API como llamaste al token de API para disparar el trabajo). Finalmente, dispara el trabajo con: **`curl <username>:<api_token>@<jenkins_url>/job/<job_name>/build?token=<api_token_name>`**

![](<../../images/image (165).png>)

## Modificando un Proyecto

Ve a los proyectos y verifica **si puedes configurar alguno** de ellos (busca el "botón Configurar"):

![](<../../images/image (265).png>)

Si **no puedes** ver ningún **botón de configuración**, entonces **no puedes** **configurarlo** probablemente (pero revisa todos los proyectos ya que podrías ser capaz de configurar algunos de ellos y no otros).

O **intenta acceder a la ruta** `/job/<proj-name>/configure` o `/me/my-views/view/all/job/<proj-name>/configure` \_\_ en cada proyecto (ejemplo: `/job/Project0/configure` o `/me/my-views/view/all/job/Project0/configure`).

## Ejecución

Si se te permite configurar el proyecto, puedes **hacer que ejecute comandos cuando una construcción sea exitosa**:

![](<../../images/image (98).png>)

Haz clic en **Guardar** y **construye** el proyecto y tu **comando será ejecutado**.\
Si no estás ejecutando un shell reverso sino un comando simple, puedes **ver la salida del comando dentro de la salida de la construcción**.

{{#include ../../banners/hacktricks-training.md}}
