# Vercel

{{#include ../banners/hacktricks-training.md}}

## Basic Information

In Vercel a **Team** is the complete **environment** that belongs a client and a **project** is an **application**.

For a hardening review of **Vercel** you need to ask for a user with **Viewer role permission** or at least **Project viewer permission over the projects** to check (in case you only need to check the projects and not the Team configuration also).

## Project Settings

### General

**Purpose:** Bestuur fundamentele projekinstellings soos projeknaam, raamwerk, en boukonfigurasies.

#### Security Configurations:

- **Transfer**
- **Misconfiguration:** Laat toe om die projek na 'n ander span oor te dra
- **Risk:** 'n Aanvaller kan die projek steel
- **Delete Project**
- **Misconfiguration:** Laat toe om die projek te verwyder
- **Risk:** Verwyder die projek

---

### Domains

**Purpose:** Bestuur pasgemaakte domeine, DNS-instellings, en SSL-konfigurasies.

#### Security Configurations:

- **DNS Configuration Errors**
- **Misconfiguration:** Onakkurate DNS rekords (A, CNAME) wat na kwaadwillige bedieners wys.
- **Risk:** Domein kaap, verkeersafluistering, en phishing-aanvalle.
- **SSL/TLS Certificate Management**
- **Misconfiguration:** Gebruik van swak of vervalde SSL/TLS sertifikate.
- **Risk:** Kwetsbaar vir man-in-the-middle (MITM) aanvalle, wat data-integriteit en vertroulikheid in gevaar stel.
- **DNSSEC Implementation**
- **Misconfiguration:** Versuim om DNSSEC in te skakel of onakkurate DNSSEC-instellings.
- **Risk:** Verhoogde kwesbaarheid vir DNS spoofing en cache vergiftiging aanvalle.
- **Environment used per domain**
- **Misconfiguration:** Verander die omgewing wat deur die domein in produksie gebruik word.
- **Risk:** Stel potensiële geheime of funksies bloot wat nie in produksie beskikbaar moet wees nie.

---

### Environments

**Purpose:** Definieer verskillende omgewings (Ontwikkeling, Voorbeeld, Produksie) met spesifieke instellings en veranderlikes.

#### Security Configurations:

- **Environment Isolation**
- **Misconfiguration:** Deel omgewing veranderlikes oor omgewings.
- **Risk:** Lek van produksie geheime in ontwikkeling of voorbeeld omgewings, wat blootstelling verhoog.
- **Access to Sensitive Environments**
- **Misconfiguration:** Laat breë toegang tot produksie omgewings toe.
- **Risk:** Ongeoorloofde veranderinge of toegang tot lewendige toepassings, wat tot potensiële stilstand of datalekke kan lei.

---

### Environment Variables

**Purpose:** Bestuur omgewing-spesifieke veranderlikes en geheime wat deur die toepassing gebruik word.

#### Security Configurations:

- **Exposing Sensitive Variables**
- **Misconfiguration:** Prefixing sensitive variables with `NEXT_PUBLIC_`, making them accessible on the client side.
- **Risk:** Blootstelling van API sleutels, databasis akrediteer, of ander sensitiewe data aan die publiek, wat tot datalekke lei.
- **Sensitive disabled**
- **Misconfiguration:** As gedeaktiveer (standaard) is dit moontlik om die waardes van die gegenereerde geheime te lees.
- **Risk:** Verhoogde waarskynlikheid van toevallige blootstelling of ongeoorloofde toegang tot sensitiewe inligting.

---

### Git

**Purpose:** Konfigureer Git-repository integrasies, tak beskermings, en ontplooiing triggers.

#### Security Configurations:

- **Ignored Build Step (TODO)**
- **Misconfiguration:** Dit lyk of hierdie opsie toelaat om 'n bash skrip/opdragte te konfigureer wat uitgevoer sal word wanneer 'n nuwe verbintenis in Github gepush word, wat RCE kan toelaat.
- **Risk:** TBD

---

### Integrations

**Purpose:** Koppel derdeparty dienste en gereedskap om projek funksionaliteit te verbeter.

#### Security Configurations:

- **Insecure Third-Party Integrations**
- **Misconfiguration:** Integrasie met onbetroubare of onveilige derdeparty dienste.
- **Risk:** Invoering van kwesbaarhede, datalekke, of agterdeure deur gekompromitteerde integrasies.
- **Over-Permissioned Integrations**
- **Misconfiguration:** Te veel toestemmings aan geïntegreerde dienste toeken.
- **Risk:** Ongeoorloofde toegang tot projek hulpbronne, data manipulasie, of diensonderbrekings.
- **Lack of Integration Monitoring**
- **Misconfiguration:** Versuim om derdeparty integrasies te monitor en te oudit.
- **Risk:** Vertraagde opsporing van gekompromitteerde integrasies, wat die potensiële impak van sekuriteitsbreuke verhoog.

---

### Deployment Protection

**Purpose:** Beveilig ontplooiings deur verskeie beskermingsmeganismes, wat beheer wie toegang kan hê en ontplooiing na jou omgewings kan doen.

#### Security Configurations:

**Vercel Authentication**

- **Misconfiguration:** Deaktiveer autentisering of nie afdwing van spanlid kontroles nie.
- **Risk:** Ongeoorloofde gebruikers kan toegang tot ontplooiings verkry, wat tot datalekke of toepassingsmisbruik kan lei.

**Protection Bypass for Automation**

- **Misconfiguration:** Blootstelling van die omseil geheime publiek of gebruik van swak geheime.
- **Risk:** Aanvallers kan ontplooiing beskermings omseil, toegang tot en manipulasie van beskermde ontplooiings verkry.

**Shareable Links**

- **Misconfiguration:** Deel skakels sonder onderskeid of versuim om verouderde skakels in te trek.
- **Risk:** Ongeoorloofde toegang tot beskermde ontplooiings, wat autentisering en IP-beperkings omseil.

**OPTIONS Allowlist**

- **Misconfiguration:** Laat te breë paaie of sensitiewe eindpunte toe.
- **Risk:** Aanvallers kan onbeskermde paaie benut om ongeoorloofde aksies uit te voer of sekuriteitskontroles om te se.

**Password Protection**

- **Misconfiguration:** Gebruik van swak wagwoorde of om dit onveilig te deel.
- **Risk:** Ongeoorloofde toegang tot ontplooiings as wagwoorde geraai of gelekt word.
- **Note:** Beskikbaar op die **Pro** plan as deel van **Advanced Deployment Protection** vir 'n addisionele $150/maand.

**Deployment Protection Exceptions**

- **Misconfiguration:** Voeg produksie of sensitiewe domeine per ongeluk by die uitsonderingslys.
- **Risk:** Blootstelling van kritieke ontplooiings aan die publiek, wat tot datalekke of ongeoorloofde toegang kan lei.
- **Note:** Beskikbaar op die **Pro** plan as deel van **Advanced Deployment Protection** vir 'n addisionele $150/maand.

**Trusted IPs**

- **Misconfiguration:** Onakkuraat spesifisering van IP adresse of CIDR reekse.
- **Risk:** Legitieme gebruikers wat geblokkeer word of ongeoorloofde IPs wat toegang verkry.
- **Note:** Beskikbaar op die **Enterprise** plan.

---

### Functions

**Purpose:** Konfigureer serverless funksies, insluitend runtime instellings, geheue toewysing, en sekuriteitsbeleide.

#### Security Configurations:

- **Nothing**

---

### Data Cache

**Purpose:** Bestuur caching strategieë en instellings om prestasie te optimaliseer en data berging te beheer.

#### Security Configurations:

- **Purge Cache**
- **Misconfiguration:** Dit laat toe om al die cache te verwyder.
- **Risk:** Ongeoorloofde gebruikers wat die cache verwyder, wat tot 'n potensiële DoS kan lei.

---

### Cron Jobs

**Purpose:** Skeduleer geoutomatiseerde take en skripte om op spesifieke tydperke te loop.

#### Security Configurations:

- **Disable Cron Job**
- **Misconfiguration:** Dit laat toe om cron jobs wat in die kode verklaar is, te deaktiveer.
- **Risk:** Potensiële onderbreking van die diens (afhangende van waarvoor die cron jobs bedoel was)

---

### Log Drains

**Purpose:** Konfigureer eksterne logging dienste om toepassingslogs te vang en te stoor vir monitering en oudit.

#### Security Configurations:

- Niks (bestuur vanaf spaninstellings)

---

### Security

**Purpose:** Sentraal hub vir verskeie sekuriteitsverwante instellings wat projek toegang, bron beskerming, en meer beïnvloed.

#### Security Configurations:

**Build Logs and Source Protection**

- **Misconfiguration:** Deaktiveer beskerming of blootstelling van `/logs` en `/src` paaie publiek.
- **Risk:** Ongeoorloofde toegang tot boulogs en bronkode, wat tot inligtinglekke en potensiële uitbuiting van kwesbaarhede kan lei.

**Git Fork Protection**

- **Misconfiguration:** Laat ongeoorloofde pull versoeke toe sonder behoorlike hersienings.
- **Risk:** Kwaadwillige kode kan in die kodebasis saamgevoeg word, wat kwesbaarhede of agterdeure inbring.

**Secure Backend Access with OIDC Federation**

- **Misconfiguration:** Onakkurate opstelling van OIDC parameters of gebruik van onveilige issuer URL's.
- **Risk:** Ongeoorloofde toegang tot agtergrond dienste deur gebrekkige autentisering vloei.

**Deployment Retention Policy**

- **Misconfiguration:** Stel retensieperiodes te kort (verlies van ontplooiing geskiedenis) of te lank (onnodige data retensie).
- **Risk:** Onvermoë om terug te rol wanneer nodig of verhoogde risiko van datablootstelling van ou ontplooiings.

**Recently Deleted Deployments**

- **Misconfiguration:** Nie monitering van verwyderde ontplooiings of slegs op outomatiese verwyderings vertrou nie.
- **Risk:** Verlies van kritieke ontplooiing geskiedenis, wat oudit en terugrols bemoeilik.

---

### Advanced

**Purpose:** Toegang tot addisionele projekinstellings vir fyninstelling van konfigurasies en verbetering van sekuriteit.

#### Security Configurations:

**Directory Listing**

- **Misconfiguration:** Aktivering van gidslys laat gebruikers toe om gidsinhoud te sien sonder 'n indekslêer.
- **Risk:** Blootstelling van sensitiewe lêers, toepassingsstruktuur, en potensiële toegangspunte vir aanvalle.

---

## Project Firewall

### Firewall

#### Security Configurations:

**Enable Attack Challenge Mode**

- **Misconfiguration:** Aktivering hiervan verbeter die verdediging van die webtoepassing teen DoS, maar ten koste van bruikbaarheid.
- **Risk:** Potensiële gebruikerservaring probleme.

### Custom Rules & IP Blocking

- **Misconfiguration:** Laat toe om verkeer te ontbloek/blokkeer.
- **Risk:** Potensiële DoS wat kwaadwillige verkeer toelaat of goedaardige verkeer blokkeer.

---

## Project Deployment

### Source

- **Misconfiguration:** Laat toegang toe om die volledige bronkode van die toepassing te lees.
- **Risk:** Potensiële blootstelling van sensitiewe inligting.

### Skew Protection

- **Misconfiguration:** Hierdie beskerming verseker dat die kliënt en bediener toepassing altyd dieselfde weergawe gebruik sodat daar geen desynchronisasies is waar die kliënt 'n ander weergawe as die bediener gebruik nie en daarom verstaan hulle mekaar nie.
- **Risk:** Deaktivering hiervan (as geaktiveer) kan DoS probleme in nuwe ontplooiings in die toekoms veroorsaak.

---

## Team Settings

### General

#### Security Configurations:

- **Transfer**
- **Misconfiguration:** Laat toe om al die projekte na 'n ander span oor te dra.
- **Risk:** 'n Aanvaller kan die projekte steel.
- **Delete Project**
- **Misconfiguration:** Laat toe om die span met al die projekte te verwyder.
- **Risk:** Verwyder die projekte.

---

### Billing

#### Security Configurations:

- **Speed Insights Cost Limit**
- **Misconfiguration:** 'n Aanvaller kan hierdie nommer verhoog.
- **Risk:** Verhoogde koste.

---

### Members

#### Security Configurations:

- **Add members**
- **Misconfiguration:** 'n Aanvaller kan volharding handhaaf deur 'n rekening wat hy beheer, uit te nooi.
- **Risk:** Aanvaller volharding.
- **Roles**
- **Misconfiguration:** Te veel toestemmings aan mense wat dit nie nodig het nie, verhoog die risiko van die Vercel konfigurasie. Kontroleer al die moontlike rolle in [https://vercel.com/docs/accounts/team-members-and-roles/access-roles](https://vercel.com/docs/accounts/team-members-and-roles/access-roles)
- **Risk**: Verhoog die blootstelling van die Vercel Span.

---

### Access Groups

An **Access Group** in Vercel is a collection of projects and team members with predefined role assignments, enabling centralized and streamlined access management across multiple projects.

**Potential Misconfigurations:**

- **Over-Permissioning Members:** Toeken van rolle met meer toestemmings as wat nodig is, wat lei tot ongeoorloofde toegang of aksies.
- **Improper Role Assignments:** Onakkurate toekenning van rolle wat nie ooreenstem met spanlede se verantwoordelikhede nie, wat privilige eskalasie veroorsaak.
- **Lack of Project Segregation:** Versuim om sensitiewe projekte te skei, wat breër toegang toelaat as wat bedoel is.
- **Insufficient Group Management:** Nie gereeld hersiening of opdatering van Toegangsgroepe nie, wat lei tot verouderde of onvanpaste toegangstoestemmings.
- **Inconsistent Role Definitions:** Gebruik van inkonsekwente of onduidelike rol definisies oor verskillende Toegangsgroepe, wat lei tot verwarring en sekuriteitsgappe.

---

### Log Drains

#### Security Configurations:

- **Log Drains to third parties:**
- **Misconfiguration:** 'n Aanvaller kan 'n Log Drain konfigureer om die logs te steel.
- **Risk:** Gedeeltelike volharding.

---

### Security & Privacy

#### Security Configurations:

- **Team Email Domain:** Wanneer geconfigureer, nooi hierdie instelling outomaties Vercel Persoonlike Rekeninge met e-pos adresse wat eindig op die gespesifiseerde domein (bv. `mydomain.com`) is om jou span te sluit by registrasie en op die dashboard.
- **Misconfiguration:** 
- Spesifisering van die verkeerde e-pos domein of 'n verkeerd gespelde domein in die Span E-pos Domein instelling.
- Gebruik van 'n algemene e-pos domein (bv. `gmail.com`, `hotmail.com`) in plaas van 'n maatskappy-spesifieke domein.
- **Risks:**
- **Unauthorized Access:** Gebruikers met e-pos adresse van onbedoelde domeine mag uitnodigings ontvang om by jou span aan te sluit.
- **Data Exposure:** Potensiële blootstelling van sensitiewe projekinligting aan ongeoorloofde individue.
- **Protected Git Scopes:** Laat jou toe om tot 5 Git scopes aan jou span toe te voeg om te voorkom dat ander Vercel spanne repositories van die beskermde omvang ontplooi. Meerdere spanne kan dieselfde omvang spesifiseer, wat beide spanne toegang gee.
- **Misconfiguration:** Nie kritieke Git scopes aan die beskermde lys toe te voeg nie.
- **Risks:**
- **Unauthorized Deployments:** Ander spanne mag repositories van jou organisasie se Git scopes sonder toestemming ontplooi.
- **Intellectual Property Exposure:** Beskermde kode kan ontplooi en buite jou span toeganklik wees.
- **Environment Variable Policies:** Handhaaf beleide vir die skepping en redigering van die span se omgewing veranderlikes. Spesifiek, jy kan afdwing dat alle omgewing veranderlikes geskep word as **Sensitive Environment Variables**, wat slegs deur Vercel se ontplooiingstelsel gedekodeer kan word.
- **Misconfiguration:** Hou die afdwinging van sensitiewe omgewing veranderlikes gedeaktiveer.
- **Risks:**
- **Exposure of Secrets:** Omgewing veranderlikes mag deur ongeoorloofde spanlede gesien of gewysig word.
- **Data Breach:** Sensitiewe inligting soos API sleutels en akrediteer kan gelekt word.
- **Audit Log:** Verskaf 'n uitvoer van die span se aktiwiteit vir tot die laaste 90 dae. Ouudit logs help om aksies wat deur spanlede uitgevoer is, te monitor en op te spoor.
- **Misconfiguration:**\
Gee toegang tot oudit logs aan ongeoorloofde spanlede.
- **Risks:**
- **Privacy Violations:** Blootstelling van sensitiewe gebruikersaktiwiteite en data.
- **Tampering with Logs:** Kwaadwillige akteurs kan logs verander of verwyder om hul spore te bedek.
- **SAML Single Sign-On:** Laat aanpassing van SAML autentisering en gids sinkronisering vir jou span toe, wat integrasie met 'n Identiteitsverskaffer (IdP) vir gesentraliseerde autentisering en gebruikersbestuur moontlik maak.
- **Misconfiguration:** 'n Aanvaller kan 'n agterdeur in die Span instel deur SAML parameters soos Entity ID, SSO URL, of sertifikaat vingerafdrukke op te stel.
- **Risk:** Handhaaf volharding.
- **IP Address Visibility:** Beheer of IP adresse, wat as persoonlike inligting onder sekere dataprotectie wette beskou kan word, in Monitering navrae en Log Drains vertoon word.
- **Misconfiguration:** Laat IP adres sigbaarheid geaktiveer sonder noodsaaklikheid.
- **Risks:**
- **Privacy Violations:** Nie-nakoming van dataprotectie regulasies soos GDPR.
- **Legal Repercussions:** Potensiële boetes en sanksies vir verkeerde hantering van persoonlike data.
- **IP Blocking:** Laat die konfigurasie van IP adresse en CIDR reekse toe wat Vercel moet blokkeer. Geblokkeerde versoeke dra nie by tot jou fakturering nie.
- **Misconfiguration:** Kan deur 'n aanvaller misbruik word om kwaadwillige verkeer toe te laat of legitieme verkeer te blokkeer.
- **Risks:**
- **Service Denial to Legitimate Users:** Blokkeer toegang vir geldige gebruikers of vennote.
- **Operational Disruptions:** Verlies van diens beskikbaarheid vir sekere streke of kliënte.

---

### Secure Compute

**Vercel Secure Compute** stel veilige, private verbindings tussen Vercel Funksies en agtergrond omgewings (bv. databasisse) in deur geïsoleerde netwerke met toegewyde IP adresse te vestig. Dit elimineer die behoefte om agtergrond dienste publiek bloot te stel, wat sekuriteit, nakoming, en privaatheid verbeter.

#### **Potential Misconfigurations and Risks**

1. **Incorrect AWS Region Selection**
- **Misconfiguration:** Kies 'n AWS streek vir die Secure Compute netwerk wat nie ooreenstem met die agtergrond dienste se streek nie.
- **Risk:** Verhoogde latensie, potensiële data verblyf nakoming probleme, en verswakte prestasie.
2. **Overlapping CIDR Blocks**
- **Misconfiguration:** Kies CIDR blokke wat oorvleuel met bestaande VPCs of ander netwerke.
- **Risk:** Netwerk konflikte wat lei tot mislukte verbindings, ongeoorloofde toegang, of datalekke tussen netwerke.
3. **Improper VPC Peering Configuration**
- **Misconfiguration:** Onakkurate opstelling van VPC peering (bv. verkeerde VPC ID's, onvolledige roete tabel opdaterings).
- **Risk:** Ongeoorloofde toegang tot agtergrond infrastruktuur, mislukte veilige verbindings, en potensiële datalekke.
4. **Excessive Project Assignments**
- **Misconfiguration:** Toeken van meerdere projekte aan 'n enkele Secure Compute netwerk sonder behoorlike isolasie.
- **Risk:** Gedeelde IP blootstelling verhoog die aanval oppervlak, wat moontlik gekompromitteerde projekte toelaat om ander te beïnvloed.
5. **Inadequate IP Address Management**
- **Misconfiguration:** Versuim om toegewyde IP adresse behoorlik te bestuur of te roteer.
- **Risk:** IP spoofing, opsporing kwesbaarhede, en potensiële swartlys as IP's geassosieer word met kwaadwillige aktiwiteite.
6. **Including Build Containers Unnecessarily**
- **Misconfiguration:** Voeg bouhouers by die Secure Compute netwerk wanneer agtergrond toegang nie tydens boue benodig word nie.
- **Risk:** Verhoogde aanval oppervlak, verhoogde voorsieningsvertraagings, en onnodige verbruik van netwerk hulpbronne.
7. **Failure to Securely Handle Bypass Secrets**
- **Misconfiguration:** Blootstelling of verkeerde hantering van geheime wat gebruik word om ontplooiing beskermings te omseil.
- **Risk:** Ongeoorloofde toegang tot beskermde ontplooiings, wat aanvallers toelaat om kwaadwillige kode te manipuleer of te ontplooi.
8. **Ignoring Region Failover Configurations**
- **Misconfiguration:** Nie passiewe failover streke op te stel of failover instellings verkeerd te konfigureer nie.
- **Risk:** Diens stilstand tydens primêre streek uitvalle, wat lei tot verminderde beskikbaarheid en potensiële datainkonsekwentheid.
9. **Exceeding VPC Peering Connection Limits**
- **Misconfiguration:** Poging om meer VPC peering verbindings te vestig as die toegelate limiet (bv. meer as 50 verbindings).
- **Risk:** Onvermoë om nodige agtergrond dienste veilig te verbind, wat ontplooiing mislukkings en operasionele onderbrekings veroorsaak.
10. **Insecure Network Settings**
- **Misconfiguration:** Swak firewall reëls, gebrek aan versleuteling, of onvanpaste netwerk segmentasie binne die Secure Compute netwerk.
- **Risk:** Data afluistering, ongeoorloofde toegang tot agtergrond dienste, en verhoogde kwesbaarheid vir aanvalle.

---

### Environment Variables

**Purpose:** Bestuur omgewing-spesifieke veranderlikes en geheime wat deur al die projekte gebruik word.

#### Security Configurations:

- **Exposing Sensitive Variables**
- **Misconfiguration:** Prefixing sensitive variables with `NEXT_PUBLIC_`, making them accessible on the client side.
- **Risk:** Blootstelling van API sleutels, databasis akrediteer, of ander sensitiewe data aan die publiek, wat tot datalekke lei.
- **Sensitive disabled**
- **Misconfiguration:** As gedeaktiveer (standaard) is dit moontlik om die waardes van die gegenereerde geheime te lees.
- **Risk:** Verhoogde waarskynlikheid van toevallige blootstelling of ongeoorloofde toegang tot sensitiewe inligting.

{{#include ../banners/hacktricks-training.md}}
