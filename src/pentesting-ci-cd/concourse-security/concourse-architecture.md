# Architektura Concourse

## Architektura Concourse

{{#include ../../banners/hacktricks-training.md}}

[**Istotne dane z dokumentacji Concourse:**](https://concourse-ci.org/internals.html)

### Architektura

![](<../../images/image (187).png>)

#### ATC: interfejs webowy i harmonogram budowy

ATC jest sercem Concourse. Uruchamia **interfejs webowy i API** i jest odpowiedzialne za cały **harmonogram pipeline'ów**. **Łączy się z PostgreSQL**, którego używa do przechowywania danych pipeline'ów (w tym logów budowy).

Odpowiedzialnością [checker](https://concourse-ci.org/checker.html) jest ciągłe sprawdzanie nowych wersji zasobów. [scheduler](https://concourse-ci.org/scheduler.html) jest odpowiedzialny za harmonogram budów dla zadania, a [build tracker](https://concourse-ci.org/build-tracker.html) jest odpowiedzialny za uruchamianie wszelkich zaplanowanych budów. [garbage collector](https://concourse-ci.org/garbage-collector.html) jest mechanizmem czyszczącym do usuwania wszelkich nieużywanych lub przestarzałych obiektów, takich jak kontenery i wolumeny.

#### TSA: rejestracja pracowników i przekazywanie

TSA to **serwer SSH zbudowany na zamówienie**, który jest używany wyłącznie do bezpiecznej **rejestracji** [**pracowników**](https://concourse-ci.org/internals.html#architecture-worker) w [ATC](https://concourse-ci.org/internals.html#component-atc).

TSA domyślnie **nasłuchuje na porcie `2222`** i zazwyczaj znajduje się w tym samym miejscu co [ATC](https://concourse-ci.org/internals.html#component-atc) i jest umieszczone za równoważnikiem obciążenia.

**TSA implementuje CLI przez połączenie SSH,** wspierając [**te polecenia**](https://concourse-ci.org/internals.html#component-tsa).

#### Pracownicy

Aby wykonać zadania, Concourse musi mieć kilku pracowników. Ci pracownicy **rejestrują się** za pośrednictwem [TSA](https://concourse-ci.org/internals.html#component-tsa) i uruchamiają usługi [**Garden**](https://github.com/cloudfoundry-incubator/garden) i [**Baggageclaim**](https://github.com/concourse/baggageclaim).

- **Garden**: To jest **API zarządzania kontenerami**, zazwyczaj uruchamiane na **porcie 7777** przez **HTTP**.
- **Baggageclaim**: To jest **API zarządzania wolumenami**, zazwyczaj uruchamiane na **porcie 7788** przez **HTTP**.

## Odniesienia

- [https://concourse-ci.org/internals.html](https://concourse-ci.org/internals.html)

{{#include ../../banners/hacktricks-training.md}}
